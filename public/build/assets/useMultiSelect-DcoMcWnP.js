import{x as f,g as S,z as p,D as g}from"./app-BmGHSIr0.js";function z({items:n,modelValue:o,singleSelect:u=!1,displayField:h="name",searchFields:m=null,emit:s}){const t=f([]),i=f(!1),r=f(""),I=m||[h],c=e=>{u?e&&Object.keys(e).length>0?t.value=[e]:t.value=[]:t.value=Array.isArray(e)?[...e]:[]},x=S(()=>n.value?n.value.filter(e=>{const l=I.some(a=>{var v;return(v=e[a])==null?void 0:v.toLowerCase().includes(r.value.toLowerCase())}),d=!t.value.some(a=>a.id===e.id);if(u&&t.value.length>0){const a=t.value[0].id!==e.id;return l&&(t.value.length===0||a)}return l&&d}):[]),y=e=>{u?(t.value=[e],s("update:modelValue",e)):(t.value.push(e),s("update:modelValue",[...t.value])),i.value=!1,r.value=""},C=e=>{if(u)t.value=[],s("update:modelValue",{});else{const l=t.value.findIndex(d=>d.id===e);l!==-1&&t.value.splice(l,1),s("update:modelValue",[...t.value])}};return p(()=>o,e=>{c(e)}),p(()=>n.value,e=>{e&&e.length>0&&c(o)},{deep:!0}),g(()=>{c(o)}),{selectedItems:t,open:i,searchTerm:r,filteredItems:x,selectItem:y,deleteItem:C}}export{z as u};
