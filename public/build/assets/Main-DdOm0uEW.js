import{i as Oe,g as ce,aj as Ft,e as m,o as n,u as e,cb as Lt,ah as Ot,af as zt,w as l,l as Ct,M as we,W as Se,x as P,D as ue,E as X,Y as Ve,r as q,b as s,$ as $t,a0 as ze,a,a1 as je,a2 as Ke,t as A,c as U,s as V,d as v,a5 as qe,a6 as Ge,J as te,K as ie,O as Ee,z as oe,a9 as ot,aa as se,ab as ae,n as De,p as Dt,j as St,k as Vt,m as Pt,bt as jt,F as It,bd as dt,bf as rt,bg as be,bq as Kt,br as xt,bh as it,U as He,aB as me,V as Je,cc as at,bS as nt,Q as Ye,S as Qe,_ as ut,aH as Et,bO as _t,C as qt,a3 as Gt,cd as st,aF as Ht,aG as Jt,bP as Yt,aO as Qt,be as ht,a8 as Wt,c2 as Zt,ce as Xt}from"./app-a8GKozcc.js";import{i as ct,j as mt,k as pt,l as Ce,u as Me,m as Re,_ as Te,a as ye,b as Q,c as Ue,d as Ne,e as Y,n as We,f as Ae,g as Be,h as Fe,o as Pe,p as he,P as es,T as ts,q as ss,r as ls}from"./pageSettings-DvH66Rr8.js";import{_ as Ie}from"./BadgeList-DkXBL-TB.js";import{_ as kt,u as as,b as ns,a as os}from"./TagMultiSelect-BF1RiIa1.js";import{S as et}from"./Spinner-To8QGx1u.js";import{_ as ds}from"./GeneralPopover-CHkKFeGB.js";import{_ as lt}from"./RcToolTip.vue_vue_type_script_setup_true_lang-B3Cq0_2B.js";import{a as rs,_ as yt}from"./ToggleGroupItem-hz8QVAd3.js";import{a as is,T as Mt,M as Rt,G as us}from"./useCredentials-Ch65_STA.js";import{F as cs,S as Tt,C as ms,a as ps,b as vs,c as wt,d as fs}from"./shredder-h-8gVpjq.js";import{S as gs}from"./square-terminal-CJ6vKE2m.js";import{B as ys}from"./bell-Di1cD4J7.js";import{u as xs,_ as _s,a as ks,b as bs,c as hs,d as ws}from"./useCopy-B2H5KSAb.js";import{C as Cs}from"./copy-BZTTzkzM.js";import{b as $s,c as Ds,d as Ss,u as Vs,_ as Ps,a as Is,e as Es,f as Ms}from"./useTemplatesGithub-U_uLimsx.js";import{X as Rs}from"./HoverCardTrigger-BjOzwzHA.js";/* empty css               */import"./useMultiSelect-CP2KogPz.js";import"./cloud-alert-YTM-DosL.js";import"./search-D1DvsmvG.js";import"./plus-BGnfb0Vp.js";import"./info-Dg3xsWGY.js";import"./corner-down-left-siI65vy2.js";const Ts=Oe({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(_){const N=_,k=ce(()=>{const{class:$,...o}=N;return o}),w=Ft(k);return($,o)=>(n(),m(e(Lt),Ot(e(w),{class:e(zt)("px-2 py-1.5 text-sm font-semibold",_.inset&&"pl-8",N.class)}),{default:l(()=>[Ct($.$slots,"default")]),_:3},16,["class"]))}}),Us={class:"flex items-center"},Ns={class:"ml-2"},As={class:"grid gap-2 p-4"},Bs={class:"grid items-center grid-cols-4 gap-2"},Fs={key:0,class:"col-span-3"},Ls={key:2,class:"col-span-3 col-start-2 text-sm text-red-400"},Os={class:"grid items-center grid-cols-4 gap-2"},zs={key:0,class:"col-span-3"},js={class:"grid items-center grid-cols-4 gap-2"},Ks={key:0,class:"col-span-3"},qs={key:2,class:"col-span-3 col-start-2 text-sm text-red-400"},Gs={class:"pl-2 ml-auto"},Hs={class:"rc-kdb-class2"},Js={__name:"CommandAddEditDialog",props:{editId:Number},emits:["save"],setup(_,{emit:N}){const{toastSuccess:k}=we(),w=Se(),{openDialog:$,closeDialog:o,isDialogOpen:R}=w,x=N,h=P([]),I=P(!1),b=P({command:"",description:"",category:[]}),T=_;function g(f){f.ctrlKey&&f.key==="Enter"&&y()}ue(()=>{T.editId>0&&(I.value=!0,X.get(`/api/commands/${T.editId}`).then(f=>{b.value=f.data,b.value.categoryArray=f.data.category.map(c=>c.id)}).catch(f=>{console.error("Error loading command:",f)}).finally(()=>{I.value=!1})),window.addEventListener("keydown",g)}),Ve(()=>{window.removeEventListener("keydown",g)});function y(){const f=T.editId>0?`/${T.editId}`:"",c=T.editId>0?"patch":"post";X[c]("/api/commands"+f,b.value).then(C=>{x("save",C.data),k("Command saved","The command has been saved successfully."),o("DialogNewCommand")}).catch(C=>{var p,u;h.value=((u=(p=C.response)==null?void 0:p.data)==null?void 0:u.errors)||{}})}return(f,c)=>{const C=q("RcIcon"),p=q("Label"),u=q("Skeleton"),E=q("Input"),F=q("Button");return n(),m(e(Ge),{open:e(R)("DialogNewCommand")},{default:l(()=>[s(e($t),{"as-child":""}),s(e(ze),{class:"p-0 sm:max-w-fit",onEscapeKeyDown:c[4]||(c[4]=d=>e(o)("DialogNewCommand")),onPointerDownOutside:c[5]||(c[5]=d=>e(o)("DialogNewCommand")),onCloseClicked:c[6]||(c[6]=d=>e(o)("DialogNewCommand"))},{default:l(()=>[s(e(je),{class:"rc-dialog-header"},{default:l(()=>[s(e(Ke),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",Us,[s(C,{name:"commands"}),a("span",Ns,A(_.editId>0?"Edit":"Add")+" Command "+A(_.editId>0?"(ID: "+_.editId+")":""),1)])]),_:1})]),_:1}),a("div",As,[a("div",Bs,[s(p,{for:"command",class:"text-right"},{default:l(()=>[...c[7]||(c[7]=[v(" Command Name ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),I.value?(n(),U("div",Fs,[s(u,{class:"h-6 w-full"})])):(n(),m(E,{key:1,modelValue:b.value.command,"onUpdate:modelValue":c[0]||(c[0]=d=>b.value.command=d),id:"command",class:"col-span-3"},null,8,["modelValue"])),h.value.command&&!I.value?(n(),U("span",Ls,A(h.value.command[0]),1)):V("",!0)]),a("div",Os,[s(p,{for:"description",class:"text-right"},{default:l(()=>[...c[8]||(c[8]=[v("Description",-1)])]),_:1}),I.value?(n(),U("div",zs,[s(u,{class:"h-6 w-full"})])):(n(),m(E,{key:1,modelValue:b.value.description,"onUpdate:modelValue":c[1]||(c[1]=d=>b.value.description=d),id:"description",class:"col-span-3"},null,8,["modelValue"]))]),a("div",js,[s(p,{class:"text-right"},{default:l(()=>[...c[9]||(c[9]=[v(" Command Group ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),I.value?(n(),U("div",Ks,[s(u,{class:"h-6 w-full"})])):(n(),m(kt,{key:1,modelValue:b.value.category,"onUpdate:modelValue":c[2]||(c[2]=d=>b.value.category=d)},null,8,["modelValue"])),h.value.categoryArray&&!I.value?(n(),U("span",qs,A(h.value.categoryArray[0]),1)):V("",!0)])]),s(e(qe),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[s(F,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:c[3]||(c[3]=d=>e(o)("DialogNewCommand")),size:"sm"},{default:l(()=>[...c[10]||(c[10]=[v(" Close ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),s(F,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:y,variant:"primary"},{default:l(()=>[v(A(T.editId===0?"Save":"Update")+" ",1),a("div",Gs,[a("kbd",Hs,[c[11]||(c[11]=v(" Ctrl  ",-1)),s(C,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},Ys={class:"flex items-center"},Qs={class:"grid gap-4 p-4"},Ws={class:"max-h-40 overflow-y-auto rounded-lg border border-border bg-background/80 backdrop-blur-sm p-2"},Zs={class:"space-y-1.5"},Xs={class:"text-foreground"},el={class:"grid gap-2"},tl={key:0,class:"text-sm text-red-400 bg-red-900/20 border border-red-700 rounded p-2"},sl={key:1,class:"pl-2 ml-auto"},ll={class:"rc-kdb-class2"},al={__name:"CommandsBulkUpdateModal",props:{data:{type:Array,required:!0},isOpen:{type:Boolean,default:!1}},emits:["close","updated"],setup(_,{emit:N}){const{toastSuccess:k,toastError:w}=we(),$=Se(),{closeDialog:o,isDialogOpen:R}=$,x=_,h=N,I=P(""),b=P([]),T=P(!1),g=P([]);async function y(p={}){T.value=!0;try{const u=await X.get("/api/categories?per_page=1000",{});g.value=u.data}catch(u){console.error("Error fetching categories:",u),w("Error","Failed to fetch categories.")}finally{T.value=!1}}function f(p){p.ctrlKey&&p.key==="Enter"&&C(),p.key==="Escape"&&o("DialogBulkUpdateCommands")}ue(()=>{y(),window.addEventListener("keydown",f)}),Ve(()=>{window.removeEventListener("keydown",f)});function c(p){h(p==="updated"?"updated":"close")}async function C(){var p,u;if(b.value.length===0){I.value="You must select at least one command group.";return}T.value=!0,I.value="";try{await X.post("/api/commands/bulk-update-categories",{categories:b.value,commands:x.data}),k("Command groups updated",`Successfully updated ${x.data.length} command(s) with new command groups.`),c("updated")}catch(E){const F=((u=(p=E.response)==null?void 0:p.data)==null?void 0:u.message)||"Failed to update command groups";I.value=F,w("Update failed",F)}finally{T.value=!1}}return(p,u)=>{const E=q("RcIcon"),F=q("Label"),d=q("Button");return n(),m(e(Ge),{open:e(R)("DialogBulkUpdateCommands")},{default:l(()=>[s(e(ze),{class:"p-0 sm:max-w-2xl",onEscapeKeyDown:c,onPointerDownOutside:c,onCloseClicked:c},{default:l(()=>[s(e(je),{class:"rc-dialog-header"},{default:l(()=>[s(e(Ke),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",Ys,[s(E,{name:"commands"}),u[1]||(u[1]=a("span",{class:"ml-2"},"Update Command Groups",-1))])]),_:1})]),_:1}),a("div",Qs,[u[5]||(u[5]=a("p",{class:"text-sm text-rcgray-300"},"The commands below will be updated with the selected command groups.",-1)),a("div",Ws,[a("ul",Zs,[(n(!0),U(te,null,ie(_.data,K=>(n(),U("li",{key:K.id||K.command,class:"flex items-center text-xs font-mono text-muted-foreground bg-muted/60 hover:bg-muted px-3 py-1.5 rounded transition-colors"},[u[2]||(u[2]=a("span",{class:"text-green-400 mr-2"},"$",-1)),a("span",Xs,A(K.command),1)]))),128))])]),a("div",el,[s(F,{class:"text-sm font-medium text-rcgray-200"},{default:l(()=>[...u[3]||(u[3]=[v(" Command Groups ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),s(kt,{modelValue:b.value,"onUpdate:modelValue":u[0]||(u[0]=K=>b.value=K),id:"selectedCategoryObj"},null,8,["modelValue"]),u[4]||(u[4]=a("p",{class:"text-xs text-rcgray-400"},"You must associate one or multiple command groups to the chosen commands.",-1))]),I.value?(n(),U("div",tl,A(I.value),1)):V("",!0)]),s(e(qe),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[s(d,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:c,size:"sm"},{default:l(()=>[...u[6]||(u[6]=[v(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),s(d,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:C,variant:"primary",disabled:T.value||b.value.length===0},{default:l(()=>[T.value?(n(),m(et,{key:0,class:"w-4 h-4 mr-2"})):V("",!0),u[8]||(u[8]=v(" Confirm ",-1)),T.value?V("",!0):(n(),U("div",sl,[a("kbd",ll,[u[7]||(u[7]=v(" Ctrl  ",-1)),s(E,{name:"enter",class:"ml-1"})])]))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])}}};function nl(){const _=P(1),N=ct(),k=P(N.get("useCommands","perPage",10)),w=P("-id"),$=P(""),o=P({}),R=Se(),x=P(0),h=P(!1),I=P(1),b=P(1),T=P(1),g=P([]),y=P(!1),{openDialog:f,closeDialog:c}=R,{toastSuccess:C,toastError:p}=we(),{reload:u}=pt(d),{toggleSort:E}=mt(w,d,"useCommands"),F=Ee();async function d(ee={}){h.value=!0;try{const ne=await X.get("/api/commands",{params:{page:_.value,perPage:k.value,sort:w.value,...o.value}});g.value=ne.data,I.value=ne.data.last_page}catch(ne){console.error("Error fetching commands:",ne),p("Error","Failed to fetch commands.")}finally{h.value=!1}}const K=ee=>{x.value=0,b.value=Math.random(),f("DialogNewCommand")};function S(ee){x.value=ee,b.value=Math.random(),f("DialogNewCommand")}const Z=async ee=>{try{await X.delete(`/api/commands/${ee}`),d(),C("Command Deleted","The command has been deleted successfully."),y.value=!1}catch(ne){ne.status===422?p("Error",ne.response.data.message):(console.error("Error deleting Command Group:",ne),p("Error","Failed to delete Command Group."))}},J=async ee=>{try{await X.post("/api/commands/delete-many",{ids:ee}),d(),C("Commands Deleted","The commands have been deleted successfully."),y.value=!1,Ce.emit("deleteManyCommandsSuccess")}catch(ne){ne.status===422?p("Error",ne.response.data.message):(console.error("Error deleting Command Group:",ne),p("Error","Failed to delete Command Group."))}},r=ee=>{x.value=ee,b.value=Math.random(),f("DialogNewCommand")},O=()=>{T.value=Math.random(),f("DialogBulkUpdateCommands")},i=()=>{T.value=Math.random(),c("DialogBulkUpdateCommands")},H=()=>{d(),T.value=Math.random(),c("DialogBulkUpdateCommands"),C("Bulk Update","Commands updated successfully.")},G=()=>{d(),b.value=Math.random()};function M(ee){ee.altKey&&ee.key==="n"&&(ee.preventDefault(),f("DialogNewCommand"))}const de=ot(()=>{o.value["filter[q]"]=$.value,_.value=1,d()},500);oe(_,()=>{d()}),oe($,()=>{de()}),oe(k,ee=>{N.set("useCommands","perPage",k.value),d()});function W(){F.push({name:"device-configprops"})}function L(){F.push({name:"command-compare-options"})}function z(ee,ne,xe){const ve=!xe;ee.eoc_enabled=ve,X.post(`/api/commands/set-eoc-state/${ne}`,{state:ve}).then(()=>C("Success","CIC check updated")).catch(j=>{var pe,re;ee.eoc_enabled=xe,console.log(j),p("Error",((re=(pe=j.response)==null?void 0:pe.data)==null?void 0:re.message)||"Failed to update CIC")})}function Ze(ee,ne,xe){const ve=!xe;ee.change_notification=ve,X.post(`/api/commands/toggle-change-notification/${ne}`,{change_notification:ve}).then(()=>{C("Success","Change notification setting updated")}).catch(j=>{var pe,re;ee.change_notification=xe,console.log(j),p("Error",((re=(pe=j.response)==null?void 0:pe.data)==null?void 0:re.message)||"Failed to update change notification")})}function $e(ee,ne,xe){const ve=!xe;ee.save_config=ve,X.post(`/api/commands/set-save_config-state/${ne}`,{state:ve}).then(()=>{C("Success","Save config setting updated")}).catch(j=>{var pe,re;ee.save_config=xe,console.log(j),p("Error",((re=(pe=j.response)==null?void 0:pe.data)==null?void 0:re.message)||"Failed to update save config")})}return{commands:g,currentPage:_,editId:x,isLoading:h,lastPage:I,newCommandModalKey:b,newBulkUpdateCommandsKey:T,perPage:k,searchTerm:$,showConfirmDelete:y,sortParam:w,createCommand:K,deleteCommand:Z,deleteManyCommands:J,fetchCommands:d,handleKeyDown:M,handleSave:G,navToConfigProps:W,navToCompareOptions:L,openDialog:f,reload:u,toggleSort:E,updateCommand:S,viewEditDialog:r,openBulkUpdateDialog:O,handleCloseBulkUpdate:i,handleUpdateBulkCommands:H,updateCICEnabled:z,updateChangeNotification:Ze,updateSaveConfig:$e}}const ol={class:"flex flex-col h-full gap-1 text-center"},dl={class:"flex items-center justify-between p-4"},rl={class:"flex items-center"},il={class:"flex items-center justify-end"},ul={class:"px-6"},cl={key:0,class:"fixed bottom-5 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-4 bg-rcgray-900 text-white border border-rcgray-600 shadow-xl px-4 py-1.5 rounded-lg"},ml={class:"text-sm"},pl={class:"hidden md:inline-flex mr-1"},vl={__name:"Main",setup(_){const{commands:N,currentPage:k,editId:w,isLoading:$,lastPage:o,newCommandModalKey:R,newBulkUpdateCommandsKey:x,perPage:h,searchTerm:I,showConfirmDelete:b,sortParam:T,createCommand:g,deleteCommand:y,deleteManyCommands:f,fetchCommands:c,handleKeyDown:C,handleSave:p,navToConfigProps:u,navToCompareOptions:E,reload:F,toggleSort:d,viewEditDialog:K,openBulkUpdateDialog:S,handleCloseBulkUpdate:Z,handleUpdateBulkCommands:J,updateCICEnabled:r,updateChangeNotification:O,updateSaveConfig:i}=nl(),{selectedRows:H,selectAll:G,toggleSelectAll:M,toggleSelectRow:de}=Me(N);ue(()=>{c(),window.addEventListener("keydown",C),Ce.on("deleteManyCommandsSuccess",()=>{H.value=[],G.value=!1})}),Ve(()=>{window.removeEventListener("keydown",C)});const W=ce(()=>{var L;return(((L=N.value)==null?void 0:L.data)||[]).filter(z=>H.value.includes(z.id))});return(L,z)=>{const Ze=q("Input"),$e=q("RcIcon"),ee=q("Button"),ne=q("Separator"),xe=q("Checkbox"),ve=q("RcBadge");return n(),U("div",ol,[a("div",dl,[a("div",rl,[s(Ze,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter commands...",modelValue:e(I),"onUpdate:modelValue":z[0]||(z[0]=j=>se(I)?I.value=j:null)},null,8,["modelValue"]),e(I)?(n(),m(Re,{key:0,"onUpdate:modelValue":z[1]||(z[1]=j=>I.value="")})):V("",!0)]),a("div",il,[s(ee,{class:"px-2 py-1 mr-2 text-sm hover:animate-pulse flex items-center",size:"sm",variant:"outline",onClick:e(u)},{default:l(()=>[s($e,{name:"configprop",class:"lg:mr-2"}),z[13]||(z[13]=a("span",{class:"hidden lg:inline-flex"},"Config Properties",-1))]),_:1},8,["onClick"]),s(ee,{class:"px-2 py-1 text-sm hover:animate-pulse flex items-center",size:"sm",variant:"outline",onClick:e(E)},{default:l(()=>[s($e,{name:"config-compare",class:"lg:mr-2"}),z[14]||(z[14]=a("span",{class:"hidden lg:inline-flex"},"Compare Options",-1))]),_:1},8,["onClick"]),s(ne,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),s(ee,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ae(e(g),["prevent"]),variant:"primary"},{default:l(()=>[...z[15]||(z[15]=[v(" New Command ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s($e,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:z[2]||(z[2]=j=>e(F)())})])]),a("div",ul,[s(e(Be),null,{default:l(()=>[s(e(Te),null,{default:l(()=>[s(e(ye),null,{default:l(()=>[s(e(Q),{class:"w-[2%]"},{default:l(()=>[s(xe,{id:"selectAll",modelValue:e(G),"onUpdate:modelValue":z[3]||(z[3]=j=>se(G)?G.value=j:null),checked:e(G),onClick:z[4]||(z[4]=j=>e(M)())},null,8,["modelValue","checked"])]),_:1}),s(e(Q),{class:"w-[5%]"},{default:l(()=>[s(ee,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:z[5]||(z[5]=j=>e(d)("id"))},{default:l(()=>[s($e,{name:"sort",sortParam:e(T),field:"id"},null,8,["sortParam"]),z[16]||(z[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[20%]"},{default:l(()=>[s(ee,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:z[6]||(z[6]=j=>e(d)("command"))},{default:l(()=>[s($e,{name:"sort",sortParam:e(T),field:"command"},null,8,["sortParam"]),z[17]||(z[17]=a("span",{class:"ml-2"},"Command",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[20%]"},{default:l(()=>[...z[18]||(z[18]=[v("Description",-1)])]),_:1}),s(e(Q),{class:"w-[40%]"},{default:l(()=>[...z[19]||(z[19]=[v("Command Groups",-1)])]),_:1}),s(e(Q),{class:"w-[40%]"},{default:l(()=>[...z[20]||(z[20]=[v("Config Properties",-1)])]),_:1}),s(e(Q),{class:"w-[40%]"},{default:l(()=>[z[21]||(z[21]=v(" Options ",-1)),s(ds,{title:"Command Options",description:"Each command has multiple options. You can toggle CIC checks, choose whether to save unchanged configs, and enable or disable change notifications.",href:L.$rconfigDocsUrl+"/devices/commands/",linkText:"Command Docs",align:"end"},{trigger:l(()=>[s(ee,{variant:"link",size:"sm",class:"text-blue-400 hover:text-blue-300 p-0"},{default:l(()=>[s(e(is),{class:"h-3.5 w-3.5 ml-1"})]),_:1})]),_:1},8,["href"])]),_:1}),s(e(Q),{class:"w-[10%]"},{default:l(()=>[...z[22]||(z[22]=[v("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Ue),null,{default:l(()=>[e($)?(n(),m(Ne,{key:0})):e($)?(n(),m(Ae,{key:2})):(n(!0),U(te,{key:1},ie(e(N).data,(j,pe)=>(n(),m(e(ye),{key:j.id},{default:l(()=>[s(e(Y),{class:"text-start"},{default:l(()=>[s(xe,{class:"cursor-pointer",id:"select-"+j.id,checked:!!e(H).includes(j.id),onClick:re=>e(de)(j.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(j.id),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(j.command),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(j.description),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(Ie,{items:j.category,displayField:"categoryName",linkField:"view_url",maxVisible:8,hoverCardFields:["id","categoryName"]},null,8,["items"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>{var re;return[v(A(((re=j.config_properties)==null?void 0:re.length)||0),1)]}),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(e(rs),{type:"multiple",class:"flex gap-1"},{default:l(()=>[s(e(yt),{value:"cic","data-state":j.eoc_enabled?"on":"off",onClick:re=>e(r)(j,j.id,j.eoc_enabled),class:"rounded p-1 px-2 transition-colors rc-btn-shadow data-[state=on]:bg-blue-500 data-[state=off]:bg-gray-800 hover:data-[state=off]:bg-gray-700 hover:data-[state=on]:bg-blue-400"},{default:l(()=>[s(lt,{delayDuration:100,content:j.eoc_enabled?"CIC Enabled: On":"CIC Enabled: Off",side:"bottom"},{trigger:l(()=>[s(e(cs),{class:De(["h-4 w-4 focus:outline-none",j.eoc_enabled?"text-black":"text-blue-300"])},null,8,["class"])]),_:2},1032,["content"])]),_:2},1032,["data-state","onClick"]),s(e(yt),{value:"keep","data-state":j.save_config?"on":"off",onClick:re=>e(i)(j,j.id,j.save_config),class:"rounded p-1 px-2 transition-colors rc-btn-shadow data-[state=on]:bg-emerald-500 data-[state=off]:bg-gray-800 hover:data-[state=off]:bg-gray-700 hover:data-[state=on]:bg-emerald-400"},{default:l(()=>[s(lt,{delayDuration:100,content:j.save_config?"Keep Unchanged Config: On":"Keep Unchanged Config: Off",side:"bottom"},{trigger:l(()=>[s(e(gs),{class:De(["h-4 w-4 focus:outline-none",j.save_config?"text-black":"text-emerald-300"])},null,8,["class"])]),_:2},1032,["content"])]),_:2},1032,["data-state","onClick"]),s(e(yt),{value:"notify","data-state":j.change_notification?"on":"off",onClick:re=>e(O)(j,j.id,j.change_notification),class:"rounded p-1 px-2 transition-colors rc-btn-shadow data-[state=on]:bg-amber-400 data-[state=off]:bg-gray-800 hover:data-[state=off]:bg-gray-700 hover:data-[state=on]:bg-amber-300"},{default:l(()=>[s(lt,{delayDuration:100,content:j.change_notification?"Change Notifications: On":"Change Notifications: Off",side:"bottom"},{trigger:l(()=>[s(e(ys),{class:De(["h-4 w-4 focus:outline-none",j.change_notification?"text-black":"text-amber-300"])},null,8,["class"])]),_:2},1032,["content"])]),_:2},1032,["data-state","onClick"])]),_:2},1024)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(We,{rowData:j,onOnEdit:re=>e(K)(j.id),onOnDelete:re=>e(y)(j.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(H).length?(n(),U("div",cl,[a("span",ml,[s(ve,{variant:"primary",class:"mr-1"},{default:l(()=>[v(A(e(H).length),1)]),_:1}),z[23]||(z[23]=v(" command(s) selected ",-1))]),s(ee,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",variant:"outline",onClick:e(S)},{default:l(()=>[s($e,{name:"command-group",class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),z[24]||(z[24]=a("span",{class:"hidden md:inline-flex"},"Bulk assign command group",-1))]),_:1},8,["onClick"]),s(ee,{class:"text-sm px-1.5 py-0 bg-red-600 hover:bg-red-700 hover:animate-pulse h-8",onClick:z[7]||(z[7]=ae(j=>b.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[s(e(Tt),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),a("span",pl,"Delete "+A(e(H).length),1)]),_:1})])):V("",!0),s(Fe,{currentPage:e(k),lastPage:e(o),perPage:e(h),"onUpdate:currentPage":z[8]||(z[8]=j=>k.value=j),"onUpdate:perPage":z[9]||(z[9]=j=>h.value=j),totalRecords:e(N).total,isLoading:e($)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(Js,{onSave:z[10]||(z[10]=j=>e(p)()),key:e(R),editId:e(w)},null,8,["editId"])),(n(),m(al,{key:e(x),editId:e(w),data:W.value,onClose:e(Z),onUpdated:e(J)},null,8,["editId","data","onClose","onUpdated"])),s(Pe,{ids:e(H),showConfirmDelete:e(b),onClose:z[11]||(z[11]=j=>b.value=!1),onHandleDelete:z[12]||(z[12]=j=>e(f)(e(H)))},null,8,["ids","showConfirmDelete"])])])}}},fl={class:"text-xs text-gray-500 line-clamp-1 mt-1 ml-1"},gl={class:"max-w-xs"},yl={key:1,class:"text-xs text-gray-500"},xl={__name:"CategoryCell",props:{categoryName:{type:String,required:!0},categoryDescription:{type:String,required:!0},badgeColor:{type:String,default:""},defaultBadgeClass:{type:String,default:"bg-gray-600 text-gray-200 border-gray-500"},wordLimit:{type:Number,default:10},delayDuration:{type:Number,default:800},skipDelayDuration:{type:Number,default:500}},setup(_){const N=_,k=ce(()=>N.categoryDescription&&N.categoryDescription.split(" ").length>N.wordLimit);return(w,$)=>(n(),m(e(Y),{class:"text-start"},{default:l(()=>[a("span",{class:De([_.badgeColor||_.defaultBadgeClass,"w-fit flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},A(_.categoryName),3),k.value?(n(),m(e(Dt),{key:0,"delay-duration":_.delayDuration,"skip-delay-duration":_.skipDelayDuration},{default:l(()=>[s(e(St),null,{default:l(()=>[s(e(Vt),{"as-child":""},{default:l(()=>[a("span",fl,A(_.categoryDescription),1)]),_:1}),s(e(Pt),{side:"bottom"},{default:l(()=>[a("p",gl,A(_.categoryDescription),1)]),_:1})]),_:1})]),_:1},8,["delay-duration","skip-delay-duration"])):(n(),U("span",yl,A(_.categoryDescription),1))]),_:1}))}},_l={class:"flex flex-col h-full gap-1 text-center"},kl={class:"flex items-center justify-between p-4"},bl={class:"flex items-center"},hl={class:"flex items-center justify-end"},wl={class:"px-6"},Cl={__name:"Main",setup(_){const{reload:N,editId:k,categories:w,currentPage:$,perPage:o,searchTerm:R,lastPage:x,isLoading:h,fetchCommandGroups:I,viewEditDialog:b,createCommandGroup:T,deleteCommandGroup:g,deleteManyCommandGroups:y,handleSave:f,showConfirmDelete:c,handleKeyDown:C,newCommandGroupsModalKey:p,toggleSort:u,sortParam:E}=as(),{selectedRows:F,selectAll:d,toggleSelectAll:K,toggleSelectRow:S}=Me(w),Z=Ee();return ue(()=>{var J,r;I(),(r=(J=Z.currentRoute)==null?void 0:J.value.params)!=null&&r.id&&(k.value=parseInt(Z.currentRoute.value.params.id),b(k.value)),window.addEventListener("keydown",C),Ce.on("deleteManyCommandGroupsSuccess",()=>{F.value=[],d.value=!1})}),Ve(()=>{window.removeEventListener("keydown",C)}),(J,r)=>{const O=q("Input"),i=q("Button"),H=q("RcIcon"),G=q("Checkbox");return n(),U("div",_l,[r[20]||(r[20]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),a("div",kl,[a("div",bl,[s(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter Command Groups...",modelValue:e(R),"onUpdate:modelValue":r[0]||(r[0]=M=>se(R)?R.value=M:null)},null,8,["modelValue"]),e(R)?(n(),m(Re,{key:0,"onUpdate:modelValue":r[1]||(r[1]=M=>R.value="")})):V("",!0)]),a("div",hl,[e(F).length?(n(),m(i,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:r[2]||(r[2]=ae(M=>c.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[v(" Delete Selected "+A(e(F).length)+" Command Group(s) ",1)]),_:1})):V("",!0),s(i,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ae(e(T),["prevent"]),variant:"primary"},{default:l(()=>[...r[13]||(r[13]=[v(" New Command Group ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(H,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:r[3]||(r[3]=M=>e(N)())})])]),a("div",wl,[s(e(Be),null,{default:l(()=>[s(e(Te),null,{default:l(()=>[s(e(ye),null,{default:l(()=>[s(e(Q),{class:"w-[2%]"},{default:l(()=>[s(G,{id:"selectAll",modelValue:e(d),"onUpdate:modelValue":r[4]||(r[4]=M=>se(d)?d.value=M:null),checked:e(d),onClick:r[5]||(r[5]=M=>e(K)())},null,8,["modelValue","checked"])]),_:1}),s(e(Q),{class:"w-[5%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[6]||(r[6]=M=>e(u)("id"))},{default:l(()=>[s(H,{name:"sort",sortParam:e(E),field:"id"},null,8,["sortParam"]),r[14]||(r[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[10%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[7]||(r[7]=M=>e(u)("categoryName"))},{default:l(()=>[s(H,{name:"sort",sortParam:e(E),field:"categoryName"},null,8,["sortParam"]),r[15]||(r[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[20%]"},{default:l(()=>[...r[16]||(r[16]=[v("Commands",-1)])]),_:1}),s(e(Q),{class:"w-[40%]"},{default:l(()=>[...r[17]||(r[17]=[v("Devices",-1)])]),_:1}),s(e(Q),{class:"w-[10%]"},{default:l(()=>[...r[18]||(r[18]=[v("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Ue),null,{default:l(()=>[e(h)?(n(),m(Ne,{key:0})):e(h)?(n(),m(Ae,{key:2})):(n(!0),U(te,{key:1},ie(e(w).data,M=>(n(),m(e(ye),{key:M.id},{default:l(()=>[s(e(Y),{class:"text-start"},{default:l(()=>[s(G,{class:"cursor-pointer",id:"select-"+M.id,checked:!!e(F).includes(M.id),onClick:de=>e(S)(M.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(M.id),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(xl,{"category-name":M.categoryName,"category-description":M.categoryDescription,"badge-color":M.badgeColor,"word-limit":8},null,8,["category-name","category-description","badge-color"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[M.command.length==0?(n(),m(lt,{key:0,delayDuration:100,content:"No commands attached to this command group",side:"bottom"},{trigger:l(()=>[s(jt,{class:"ml-1 px-2",variant:"warning",size:"sm"},{default:l(()=>[...r[19]||(r[19]=[v("0 Commands",-1)])]),_:1})]),_:1})):V("",!0),s(Ie,{items:M.command,displayField:"command",linkField:"view_url",maxVisible:8,hoverCardFields:["id","command"],showEmptyText:!1},null,8,["items"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(Ie,{items:M.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(We,{rowData:M,onOnEdit:de=>e(b)(M.id),onOnDelete:de=>e(g)(M.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Fe,{currentPage:e($),lastPage:e(x),perPage:e(o),"onUpdate:currentPage":r[8]||(r[8]=M=>$.value=M),"onUpdate:perPage":r[9]||(r[9]=M=>o.value=M),totalRecords:e(w).total,isLoading:e(h)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(ns,{onSave:r[10]||(r[10]=M=>e(f)()),key:e(p),editId:e(k)},null,8,["editId"])),s(Pe,{ids:e(F),showConfirmDelete:e(c),onClose:r[11]||(r[11]=M=>c.value=!1),onHandleDelete:r[12]||(r[12]=M=>e(y)(e(F)))},null,8,["ids","showConfirmDelete"])])])}}},$l={__name:"ActionsMenuDevices",props:{rowData:{type:Object,required:!0},showEditBtn:{type:Boolean,default:!0},showViewDetailsBtn:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!0},isLocked:{type:Boolean,default:!1},showRolesBtn:{type:Boolean,default:!1},showCopyDownloadDebug:{type:Boolean,default:!1}},emits:["onEdit","onDelete","onDisable","onClone","onViewDetails","onEnable","onRoleAssignment"],setup(_,{emit:N}){const k=P(!1),w=P(!1),$=N,{toastSuccess:o,toastError:R}=we(),{copyItem:x}=xs(),h=It("appDirPath",null),I=_;function b(){$("onEdit")}function T(){$("onClone")}function g(){k.value=!0}function y(){$("onDelete"),k.value=!1}function f(){w.value=!0}function c(){$("onDisable"),w.value=!1}function C(){$("onEnable")}function p(){$("onViewDetails")}function u(){$("onRoleAssignment")}function E(){if(!h){console.error("appDirPath not available");return}const F=`cd ${h} && php artisan rconfig:download-device ${I.rowData.id} -d`;try{x(I.rowData.id,F),o("Device Download {ID:"+I.rowData.id+"} debug command copied to clipboard")}catch(d){console.error("Failed to copy snippet:",d),R("Failed to copy Device Download debug command")}}return(F,d)=>{const K=q("Button"),S=q("RcIcon");return n(),U("div",null,[s(e(it),null,{default:l(()=>[s(e(dt),{"as-child":""},{default:l(()=>[s(K,{variant:"ghost",class:"hover:animate-pulse"},{default:l(()=>[...d[2]||(d[2]=[v(" ... ",-1)])]),_:1})]),_:1}),s(e(rt),{class:"w-56",align:"end",side:"bottom"},{default:l(()=>[_.showCopyDownloadDebug?(n(),m(e(be),{key:0,class:"cursor-pointer hover:bg-rcgray-800",onClick:E},{default:l(()=>[d[3]||(d[3]=a("span",{class:"text-gray-300 group-hover:text-gray-200"},"Debug Cmd",-1)),s(e(he),null,{default:l(()=>[s(S,{name:"commands",size:"16",class:"text-blue-300"})]),_:1})]),_:1})):V("",!0),_.showRolesBtn?(n(),m(e(be),{key:1,class:"cursor-pointer hover:bg-rcgray-800",onClick:u},{default:l(()=>[d[4]||(d[4]=a("span",null,"Roles",-1)),s(e(he),null,{default:l(()=>[s(S,{name:"rbac",size:"16"})]),_:1})]),_:1})):V("",!0),_.showViewDetailsBtn?(n(),m(e(be),{key:2,class:"cursor-pointer hover:bg-rcgray-800",onClick:p},{default:l(()=>[d[5]||(d[5]=a("span",null,"View Details",-1)),s(e(he),null,{default:l(()=>[s(e(Kt),{size:"16"})]),_:1})]),_:1})):V("",!0),_.showEditBtn?(n(),m(e(be),{key:3,class:"cursor-pointer hover:bg-rcgray-800",onClick:b},{default:l(()=>[d[6]||(d[6]=a("span",null,"Edit",-1)),s(e(he),null,{default:l(()=>[s(e(es),{size:"16"})]),_:1})]),_:1})):V("",!0),_.showEditBtn?(n(),m(e(be),{key:4,class:"cursor-pointer hover:bg-rcgray-800 group",onClick:T},{default:l(()=>[d[7]||(d[7]=a("span",{class:"text-blue-400 group-hover:text-blue-500"},"Clone",-1)),s(e(he),null,{default:l(()=>[s(e(Cs),{size:"16",class:"text-blue-400 group-hover:text-blue-500"})]),_:1})]),_:1})):V("",!0),_.showEditBtn?(n(),m(e(xt),{key:5})):V("",!0),_.rowData.status===100?(n(),m(e(be),{key:6,class:"cursor-pointer hover:bg-rcgray-800",onClick:C},{default:l(()=>[d[8]||(d[8]=a("span",null,"Enable",-1)),s(e(he),null,{default:l(()=>[s(e(Mt),{size:"16",class:"text-green-400"})]),_:1})]),_:1})):V("",!0),_.rowData.status!=100?(n(),m(e(be),{key:7,class:"cursor-pointer hover:bg-rcgray-800",onClick:f},{default:l(()=>[d[9]||(d[9]=a("span",null,"Disable",-1)),s(e(he),null,{default:l(()=>[s(e(Rt),{size:"16",class:"text-red-300"})]),_:1})]),_:1})):V("",!0),_.canDelete&&!_.isLocked?(n(),m(e(be),{key:8,class:"group cursor-pointer hover:bg-rcgray-800",onClick:g},{default:l(()=>[d[10]||(d[10]=a("span",{class:"text-red-500 group-hover:text-red-400"},"Delete",-1)),s(e(he),null,{default:l(()=>[s(e(ts),{size:"16",class:"text-red-500 group-hover:text-red-400"})]),_:1})]),_:1})):V("",!0),_.isLocked?(n(),m(e(be),{key:9,disabled:"",class:"cursor-default opacity-70"},{default:l(()=>[d[11]||(d[11]=a("span",{class:"italic text-slate-500"},"Vector CM Locked",-1)),s(e(he),null,{default:l(()=>[s(S,{name:"lock"})]),_:1})]),_:1})):V("",!0)]),_:1})]),_:1}),s(Pe,{ids:[_.rowData.id],showConfirmDisable:w.value,onClose:d[0]||(d[0]=Z=>w.value=!1),onHandleDisable:c},null,8,["ids","showConfirmDisable"]),s(Pe,{ids:[_.rowData.id],showConfirmDelete:k.value,onClose:d[1]||(d[1]=Z=>k.value=!1),onHandleDelete:y},null,8,["ids","showConfirmDelete"])])}}},Dl={class:"hidden lg:inline-flex"},Sl={key:0,class:"text-sm font-light"},Vl={class:"text-sm font-semibold"},Pl={class:"relative items-center w-full"},Il={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},El={class:"py-1"},Ml=["onClick"],Rl=["checked"],Tl={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ul={"data-size":"20"},Nl={class:"p-1 border-5"},Al=Oe({__name:"CategoryFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(_,{emit:N}){const k=N,w=P([]),$=P(!1),o=P([]),R=P(""),x=P(!1),h=_;ue(()=>{b()}),oe(()=>h.modelValue,g=>{o.value=g,x.value=o.value.length===w.value.length});function I(g){if(g.id===9999999)x.value?(o.value=[],x.value=!1):(o.value=[...w.value],x.value=!0);else{const y=o.value.findIndex(f=>f.id===g.id);y!==-1?(o.value.splice(y,1),x.value=!1):(o.value.push(g),o.value.length===w.value.length&&(x.value=!0))}$.value=!1,k("update:modelValue",o.value)}function b(){X.get("/api/categories/?perPage=10000&sort=categoryName").then(g=>{w.value=g.data.data})}const T=ce(()=>w.value.filter(g=>g.categoryName.toLowerCase().includes(R.value.toLowerCase())));return(g,y)=>{const f=q("RcIcon");return n(),m(e(Qe),null,{default:l(()=>[s(e(He),null,{default:l(()=>[s(e(me),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(f,{name:"command-group",class:"lg:mr-2"}),a("div",Dl,[o.value&&o.value.length===0?(n(),U(te,{key:0},[v("Command Group")],64)):(n(),U(te,{key:1},[o.value.length>0?(n(),U("span",Sl,[y[2]||(y[2]=v(" Command Group ",-1)),a("strong",Vl,A(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Je),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",Pl,[s(e(at),{id:"search",type:"text",modelValue:R.value,"onUpdate:modelValue":y[0]||(y[0]=c=>R.value=c),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Il,[s(f,{name:"search"})])]),s(e(nt)),s(e(Ye),{class:"h-44"},{default:l(()=>[a("div",El,[(n(!0),U(te,null,ie(T.value,c=>(n(),U("div",{key:c.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:C=>I(c)},[a("input",{type:"checkbox",checked:o.value.some(C=>C.id===c.id),class:"mr-2"},null,8,Rl),a("span",Tl,[a("span",Ul,A(c.categoryName),1)])],8,Ml))),128))])]),_:1}),s(e(nt)),a("div",Nl,[s(e(me),{variant:"ghost",class:"justify-start w-full p-1",onClick:y[1]||(y[1]=c=>I({id:9999999}))},{default:l(()=>[s(f,{name:"select-all",isSelected:x.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,A(x.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Bl={class:"p-2"},Fl={class:"flex justify-between mb-2"},Ll={class:"p-2"},Ol={class:"flex items-center space-x-2"},zl=["for"],jl={key:0,class:"text-xs text-muted-foreground ml-1"},Kl={key:0,class:"flex items-center space-x-1"},ql={__name:"ColumnChooser",props:{columns:{type:Array,required:!0},modelValue:{type:Array,required:!0},storageKey:{type:String,required:!0}},emits:["update:modelValue"],setup(_,{emit:N}){const k=_,w=N,$=P(!1),o=P([...k.modelValue]);oe(()=>k.modelValue,C=>{o.value=[...C]},{deep:!0});const R=ce(()=>[...k.columns].sort((C,p)=>{const u=o.value.indexOf(C.key),E=o.value.indexOf(p.key);if(u>=0&&E>=0)return u-E;if(u>=0)return-1;if(E>=0)return 1;const F=k.columns.findIndex(K=>K.key===C.key),d=k.columns.findIndex(K=>K.key===p.key);return F-d})),x=C=>o.value.includes(C);function h(){localStorage.setItem(k.storageKey,JSON.stringify(o.value))}function I(){const C=localStorage.getItem(k.storageKey);if(C)try{const u=JSON.parse(C).filter(E=>k.columns.some(F=>F.key===E));o.value=u,w("update:modelValue",u)}catch(p){console.error("Error loading column preferences:",p)}}function b(C){o.value.includes(C)?o.value=o.value.filter(p=>p!==C):(o.value.push(C),o.value.sort((p,u)=>{const E=k.columns.findIndex(d=>d.key===p),F=k.columns.findIndex(d=>d.key===u);return E-F})),w("update:modelValue",o.value),h()}function T(C){const p=o.value.indexOf(C);if(p>0){const u=[...o.value],E=u[p];u[p]=u[p-1],u[p-1]=E,o.value=u,w("update:modelValue",u),h()}}function g(C){const p=o.value.indexOf(C);if(p<o.value.length-1){const u=[...o.value],E=u[p];u[p]=u[p+1],u[p+1]=E,o.value=u,w("update:modelValue",u),h()}}function y(){o.value=k.columns.map(C=>C.key),w("update:modelValue",o.value),h()}function f(){const C=k.columns.filter(p=>p.mandatory).map(p=>p.key);o.value=C,w("update:modelValue",o.value),h()}function c(){const C=k.columns.filter(p=>p.default).map(p=>p.key);o.value=C,w("update:modelValue",o.value),h()}return ue(()=>{I()}),(C,p)=>(n(),m(e(it),{open:$.value,"onUpdate:open":p[0]||(p[0]=u=>$.value=u)},{default:l(()=>[s(e(dt),{"as-child":""},{default:l(()=>[s(e(me),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 hidden xl:inline-flex",title:"Column Options"},{default:l(()=>[s(e(ms),{class:"h-4 w-4"}),p[1]||(p[1]=a("span",{class:"sr-only"},"Column Options",-1))]),_:1})]),_:1}),s(e(rt),{align:"end",class:"w-60"},{default:l(()=>[s(e(Ts),null,{default:l(()=>[...p[2]||(p[2]=[v("Customize Columns",-1)])]),_:1}),s(e(xt)),a("div",Bl,[a("div",Fl,[s(e(me),{variant:"outline",size:"sm",class:"text-xs",onClick:y},{default:l(()=>[...p[3]||(p[3]=[v(" Show All ",-1)])]),_:1}),s(e(me),{variant:"outline",size:"sm",class:"text-xs",onClick:f},{default:l(()=>[...p[4]||(p[4]=[v(" Hide All ",-1)])]),_:1}),s(e(me),{variant:"outline",size:"sm",class:"text-xs",onClick:c},{default:l(()=>[...p[5]||(p[5]=[v(" Reset ",-1)])]),_:1})])]),s(e(xt)),s(e(Ye),{class:"h-[300px]"},{default:l(()=>[a("div",Ll,[(n(!0),U(te,null,ie(R.value,u=>(n(),U("div",{key:u.key,class:"flex items-center justify-between py-1"},[a("div",Ol,[s(e(Et),{id:`col-toggle-${u.key}`,checked:x(u.key),disabled:u.mandatory,"onUpdate:checked":E=>b(u.key)},null,8,["id","checked","disabled","onUpdate:checked"]),a("label",{for:`col-toggle-${u.key}`,class:De(["text-sm cursor-pointer",{"opacity-50":u.mandatory}])},[v(A(u.label)+" ",1),u.mandatory?(n(),U("span",jl,"(Required)")):V("",!0)],10,zl)]),x(u.key)?(n(),U("div",Kl,[s(e(me),{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:E=>T(u.key),disabled:o.value.indexOf(u.key)===0},{default:l(()=>[s(e(ps),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"]),s(e(me),{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:E=>g(u.key),disabled:o.value.indexOf(u.key)===o.value.length-1},{default:l(()=>[s(e(_t),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"])])):V("",!0)]))),128))])]),_:1})]),_:1})]),_:1},8,["open"]))}},Gl=ut(ql,[["__scopeId","data-v-89b28009"]]),Hl={class:"alert-success"},Jl={class:"alert-content"},Yl={class:"alert-icon"},Ql={key:0},Wl=["innerHTML"],Zl={class:"alert-slot"},Xl={__name:"AlertSuccess",props:{title:{type:String,default:"Success"},titleEnabled:{type:Boolean,default:!0},message:{type:String,required:!0},small:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1}},emits:["closed"],setup(_,{emit:N}){const k=N;function w(){k("closed")}return($,o)=>(n(),U("div",Hl,[a("div",Jl,[a("div",Yl,[s(e(qt)),o[0]||(o[0]=a("span",{class:"alert-icon-pulse"},null,-1))]),a("div",{class:De(["alert-body",{"text-size-sm":_.small}])},[_.titleEnabled?(n(),U("h5",Ql,A(_.title),1)):V("",!0),a("div",{innerHTML:_.message,class:"alert-message"},null,8,Wl),a("div",Zl,[Ct($.$slots,"default",{},void 0,!0)])],2),_.showClose?(n(),U("button",{key:0,onClick:w,class:"alert-close-btn","aria-label":"Close",type:"button"},[s(e(Rs)),o[1]||(o[1]=a("span",{class:"alert-close-ripple"},null,-1))])):V("",!0)])]))}},ea=ut(Xl,[["__scopeId","data-v-f0f980b3"]]);function ta(_,N){const k=Se(),w=It("formatters"),{closeDialog:$,isDialogOpen:o}=k,{toastSuccess:R,toastError:x}=we(),h=P(!1),I=P([]),b=P([]),T=P([]),g=P([]),y=P(""),f=P(""),c=P([]),C=P(!1),p=P(""),u=P(""),E=[{id:2,name:"command_group"},{id:4,name:"device_enable_prompt"},{id:5,name:"device_main_prompt"},{id:6,name:"model"},{id:9,name:"tag"},{id:10,name:"template"},{id:11,name:"vendor"}],F=E,d=P(""),K=ce(()=>E.find(L=>L.name===d.value)||{});function S(){setTimeout(()=>{p.value="",u.value=""},4e3)}function Z(){$("DeviceBulkEditDialog"),J(),N("close")}function J(){h.value=!1,K.value={},I.value=0,b.value=0,g.value=0,y.value="",f.value="",c.value="",C.value=!1,p.value="",u.value=""}function r(){if(p.value="",_.checkedRows.length===0){x("Error","Please select at least one device to update."),p.value="Please select at least one device to update.";return}const L={command_group:{value:b.value,errorMessage:"Please select a Command Group",updateFunction:O},vendor:{value:g.value,errorMessage:"Please select a Vendor",updateFunction:i},device_enable_prompt:{value:y.value,errorMessage:"Please enter a Device Enable Prompt",updateFunction:G},device_main_prompt:{value:f.value,errorMessage:"Please enter a Device Main Prompt",updateFunction:H},model:{value:c.value,errorMessage:"Please enter a Model",updateFunction:M},template:{value:I.value,errorMessage:"Please select a template",updateFunction:de},tag:{value:T.value,errorMessage:"Please select one or more tags",updateFunction:W},default:{value:0,errorMessage:"Please select a Property",updateFunction:()=>{}}},z=L[K.value.name]||L.default;if(z.value.length===0){x("Error",z.errorMessage),p.value=z.errorMessage;return}z.updateFunction()}function O(){h.value=!0,X.post("/api/device/bulk-update/category",{device_ids:_.checkedRows,category_id:b.value.id}).then(L=>{R("Success",L.data.message),h.value=!1,u.value="Categories updated successfully, you can now close this dialog or continue updating other properties.",S(),N("bulkUpdateSuccess")}).catch(L=>{x("Error",L.response.data.message||"An error occurred while updating categories"),h.value=!1,N("bulkUpdateSuccess")})}function i(){h.value=!0,X.post("/api/device/bulk-update/vendor",{device_ids:_.checkedRows,vendor_id:g.value.id}).then(L=>{R("Success",L.data.message),h.value=!1,u.value="Vendor updated successfully, you can now close this dialog or continue updating other properties.",S(),N("bulkUpdateSuccess")}).catch(L=>{x("Error",L.response.data.message||"An error occurred while updating vendors"),h.value=!1,N("bulkUpdateSuccess")})}function H(){h.value=!0,X.post("/api/device/bulk-update/device_main_prompt",{device_ids:_.checkedRows,device_main_prompt:f.value}).then(L=>{R("Success",L.data.message),h.value=!1,u.value="Device main prompt updated successfully, you can now close this dialog or continue updating other properties.",S(),N("bulkUpdateSuccess")}).catch(L=>{x("Error",L.response.data.message||"An error occurred while updating device main prompt"),h.value=!1,N("bulkUpdateSuccess")})}function G(){h.value=!0,X.post("/api/device/bulk-update/device_enable_prompt",{device_ids:_.checkedRows,device_enable_prompt:y.value}).then(L=>{R("Success",L.data.message),h.value=!1,u.value="Device enable prompt updated successfully, you can now close this dialog or continue updating other properties.",S(),N("bulkUpdateSuccess")}).catch(L=>{x("Error",L.response.data.message||"An error occurred while updating device enable prompt"),h.value=!1,N("bulkUpdateSuccess")})}function M(){h.value=!0,X.post("/api/device/bulk-update/model",{device_ids:_.checkedRows,device_model:c.value.name}).then(L=>{R("Success",L.data.message),h.value=!1,u.value="Model updated successfully, you can now close this dialog or continue updating other properties.",S(),N("bulkUpdateSuccess")}).catch(L=>{x("Error",L.response.data.message||"An error occurred while updating model"),h.value=!1,N("bulkUpdateSuccess")})}function de(){h.value=!0,X.post("/api/device/bulk-update/template",{device_ids:_.checkedRows,template_id:I.value.id}).then(L=>{R("Success",L.data.message),h.value=!1,u.value="Template updated successfully, you can now close this dialog or continue updating other properties.",S(),N("bulkUpdateSuccess")}).catch(L=>{x("Error",L.response.data.message||"An error occurred while updating template"),h.value=!1,N("bulkUpdateSuccess")})}function W(){const L=T.value.map(z=>z.id);h.value=!0,X.post("/api/device/bulk-update/tags",{device_ids:_.checkedRows,tag_ids:L,append:C.value?1:0}).then(z=>{R("Success",z.data.message),h.value=!1,u.value="Tags updated successfully, you can now close this dialog or continue updating other properties.",S(),N("bulkUpdateSuccess")}).catch(z=>{x("Error",z.response.data.message||"An error occurred while updating tags"),h.value=!1,N("bulkUpdateSuccess")})}return{append:C,deviceEnablePrompt:y,deviceMainPrompt:f,errorMessage:p,formatters:w,isUpdating:h,selectedModel:c,selectedCategory:b,selectedProperty:K,selectedPropertyName:d,selectedTemplate:I,selectedVendor:g,successMsg:u,selectedTags:T,finalPropertyOptions:F,clearMsgs:S,close:Z,closeDialog:$,confirm:r,isDialogOpen:o,resetData:J}}const sa={class:"py-4 space-y-4"},la={key:0,class:"space-y-4"},aa={class:"grid items-center grid-cols-4 gap-2"},na={class:"col-span-3"},oa={key:0,class:"grid items-start grid-cols-4 gap-2"},da={key:2,class:"col-span-3"},ra={key:3,class:"col-span-3"},ia={key:8,class:"col-span-3 col-start-2 text-red-400 text-sm"},ua={key:1,class:"grid items-center grid-cols-4 gap-2"},ca={class:"flex items-center gap-2 col-span-3"},ma={class:"col-span-3 col-start-2 text-xs text-muted-foreground"},pa={key:0},va={key:1},fa={key:1,class:"flex flex-col items-center justify-center gap-4"},ga={class:"pl-2 ml-auto"},ya={class:"rc-kdb-class2"},xa={__name:"DeviceBulkEditDialog",props:{checkedRows:{type:Array,required:!0,default:()=>[]}},emits:["close","bulkUpdateSuccess"],setup(_,{emit:N}){const k=_,w=N,{append:$,deviceEnablePrompt:o,deviceMainPrompt:R,errorMessage:x,formatters:h,isUpdating:I,selectedModel:b,selectedCategory:T,selectedProperty:g,selectedPropertyName:y,selectedTemplate:f,selectedVendor:c,successMsg:C,selectedTags:p,finalPropertyOptions:u,close:E,confirm:F,isDialogOpen:d}=ta(k,w);return(K,S)=>{const Z=q("RcIcon");return n(),m(e(Ge),{open:e(d)("DeviceBulkEditDialog")&&_.checkedRows.length>0},{default:l(()=>[s(e(ze),{class:"max-w-2xl",onInteractOutside:S[11]||(S[11]=J=>e(E)()),onPointerDownOutside:S[12]||(S[12]=J=>e(E)()),onEscapeKeyDown:S[13]||(S[13]=J=>e(E)()),onCloseClicked:S[14]||(S[14]=J=>e(E)())},{default:l(()=>[s(e(je),null,{default:l(()=>[s(e(Ke),{class:"text-lg font-semibold"},{default:l(()=>[...S[15]||(S[15]=[v(" Bulk Edit Devices ",-1)])]),_:1}),s(e(Gt),null,{default:l(()=>[v(" Device IDs ("+A(e(h).arrayToPrettyString(_.checkedRows.slice(0,10)))+A(_.checkedRows.length>10?" and "+(_.checkedRows.length-10)+" more":"")+") ",1)]),_:1})]),_:1}),a("div",sa,[e(I)?(n(),U("div",fa,[...S[22]||(S[22]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-300"},null,-1),a("p",{class:"text-sm text-gray-200"},"Processing bulk update. This may take a few moments...",-1)])])):(n(),U("div",la,[a("div",aa,[s(e(st),{for:"property-select",class:"text-right"},{default:l(()=>[...S[16]||(S[16]=[v(" Select Property ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),a("div",na,[s(e(_s),{modelValue:e(y),"onUpdate:modelValue":S[0]||(S[0]=J=>se(y)?y.value=J:null)},{default:l(()=>[s(e(ks),{id:"property-select",class:"w-full"},{default:l(()=>[s(e(bs),{placeholder:"Choose a property to update"})]),_:1}),s(e(hs),null,{default:l(()=>[(n(!0),U(te,null,ie(e(u),J=>(n(),m(e(ws),{value:J.name,key:J.id},{default:l(()=>[v(A(e(h).capitalizeFirstLetter(J.name)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),e(g)?(n(),U("div",oa,[e(y)?(n(),m(e(st),{key:0,for:"property-field",class:"text-right pt-2"},{default:l(()=>[v(A(e(h).capitalizeFirstLetter(e(y)))+" ",1),S[17]||(S[17]=a("span",{class:"text-red-400"},"*",-1))]),_:1})):V("",!0),e(g).name==="command_group"?(n(),m(kt,{key:1,modelValue:e(T),"onUpdate:modelValue":S[1]||(S[1]=J=>se(T)?T.value=J:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):V("",!0),e(g).name==="device_enable_prompt"?(n(),U("div",da,[s(e(at),{modelValue:e(o),"onUpdate:modelValue":S[2]||(S[2]=J=>se(o)?o.value=J:null),id:"device_enable_prompt",autocomplete:"new-name",name:"new-name"},null,8,["modelValue"])])):V("",!0),e(g).name==="device_main_prompt"?(n(),U("div",ra,[s(e(at),{modelValue:e(R),"onUpdate:modelValue":S[3]||(S[3]=J=>se(R)?R.value=J:null),id:"device_main_prompt",autocomplete:"new-name",name:"new-name"},null,8,["modelValue"])])):V("",!0),e(g).name==="model"?(n(),m($s,{key:4,modelValue:e(b),"onUpdate:modelValue":S[4]||(S[4]=J=>se(b)?b.value=J:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):V("",!0),e(g).name==="vendor"?(n(),m(Ds,{key:5,modelValue:e(c),"onUpdate:modelValue":S[5]||(S[5]=J=>se(c)?c.value=J:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):V("",!0),e(g).name==="template"?(n(),m(Ss,{key:6,modelValue:e(f),"onUpdate:modelValue":S[6]||(S[6]=J=>se(f)?f.value=J:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):V("",!0),e(g).name==="tag"?(n(),m(os,{key:7,modelValue:e(p),"onUpdate:modelValue":S[7]||(S[7]=J=>se(p)?p.value=J:null),singleSelect:!1,class:"w-full"},null,8,["modelValue"])):V("",!0),e(x)?(n(),U("span",ia,A(e(x)),1)):V("",!0)])):V("",!0),e(y)==="tag"?(n(),U("div",ua,[s(e(st),{for:"append-toggle",class:"text-right"},{default:l(()=>[...S[18]||(S[18]=[v(" Append ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),a("div",ca,[s(e(Et),{id:"append-toggle",checked:e($),"onUpdate:checked":S[8]||(S[8]=J=>$.value=!e($)),disabled:e(I)},null,8,["checked","disabled"]),S[19]||(S[19]=a("span",{class:"text-sm"},"Append to existing",-1))]),a("span",ma,[e($)?(n(),U("span",pa,[...S[20]||(S[20]=[v("Selected items will be ",-1),a("strong",null,"added",-1),v(" to existing items for selected devices.",-1)])])):(n(),U("span",va,[...S[21]||(S[21]=[v("Selected items will ",-1),a("strong",null,"replace",-1),v(" all existing items for selected devices.",-1)])]))])])):V("",!0),e(C)?(n(),m(ea,{key:2,small:"",class:"mb-6",title:"Success",message:e(C),showClose:!0,onClosed:S[9]||(S[9]=J=>C.value="")},null,8,["message"])):V("",!0)]))]),s(e(qe),null,{default:l(()=>[s(e(me),{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:e(E),size:"sm"},{default:l(()=>[...S[23]||(S[23]=[v(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1},8,["onClick"]),s(e(me),{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:S[10]||(S[10]=J=>e(F)()),variant:"primary"},{default:l(()=>[s(et,{state:e(I),class:"items-center mr-2",color:"white",fillColor:"white"},null,8,["state"]),S[25]||(S[25]=v(" Confirm ",-1)),a("div",ga,[a("kbd",ya,[S[24]||(S[24]=v(" Ctrl  ",-1)),s(Z,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},_a={class:"hidden lg:inline-flex"},ka={key:0,class:"text-sm font-light"},ba={class:"text-sm font-semibold"},ha={class:"py-1"},wa=["onClick"],Ca=["checked"],$a={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Da={"data-size":"20"},Sa=Oe({__name:"StatusFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(_,{emit:N}){const k=N,w=ce(()=>[{id:0,name:"Unreachable"},{id:1,name:"Reachable"},{id:2,name:"Unknown"},{id:100,name:"Disabled"},{id:200,name:"All"}]),$=P(!1),o=P([]),R=_;oe(()=>R.modelValue,h=>{o.value=h});function x(h){if(h.id===200)o.value.length===w.value.length?o.value=[]:o.value=[...w.value];else{const I=o.value.findIndex(b=>b.id===h.id);if(I!==-1){o.value.splice(I,1);const b=o.value.findIndex(T=>T.id===200);b!==-1&&o.value.splice(b,1)}else o.value.push(h)}$.value=!1,k("update:modelValue",o.value)}return(h,I)=>(n(),m(e(Qe),null,{default:l(()=>[s(e(He),null,{default:l(()=>[s(e(me),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(e(Ht),{class:"w-4 h-4 lg:mr-2 text-rcgray-400"}),a("div",_a,[o.value&&o.value.length===0?(n(),U(te,{key:0},[v("Status")],64)):(n(),U(te,{key:1},[o.value.length>0?(n(),U("span",ka,[I[0]||(I[0]=v(" Status ",-1)),a("strong",ba,A(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Je),{side:"bottom",align:"start",class:"p-0 w-44"},{default:l(()=>[s(e(Ye),{class:"h-44"},{default:l(()=>[a("div",ha,[(n(!0),U(te,null,ie(w.value,b=>(n(),U("div",{key:b.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:T=>x(b)},[a("input",{type:"checkbox",checked:o.value.some(T=>T.id===b.id),class:"mr-2"},null,8,Ca),a("span",$a,[a("span",Da,A(b.name),1)])],8,wa))),128))])]),_:1})]),_:1})]),_:1}))}}),Va={class:"hidden lg:inline-flex"},Pa={key:0,class:"text-sm font-light"},Ia={class:"text-sm font-semibold"},Ea={class:"relative items-center w-full"},Ma={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Ra={class:"py-1"},Ta=["onClick"],Ua=["checked"],Na={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Aa={"data-size":"20"},Ba={class:"p-1 border-5"},Fa=Oe({__name:"TagFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(_,{emit:N}){const k=N,w=P([]),$=P(!1),o=P([]),R=P(""),x=P(!1),h=_;ue(()=>{b()}),oe(()=>h.modelValue,g=>{o.value=g,x.value=o.value.length===w.value.length});function I(g){if(g.id===9999999)x.value?(o.value=[],x.value=!1):(o.value=[...w.value],x.value=!0);else{const y=o.value.findIndex(f=>f.id===g.id);y!==-1?(o.value.splice(y,1),x.value=!1):(o.value.push(g),o.value.length===w.value.length&&(x.value=!0))}$.value=!1,k("update:modelValue",o.value)}function b(){X.get("/api/tags/?perPage=10000&sort=tagname").then(g=>{w.value=g.data.data})}const T=ce(()=>w.value.filter(g=>g.tagname.toLowerCase().includes(R.value.toLowerCase())));return(g,y)=>{const f=q("RcIcon");return n(),m(e(Qe),null,{default:l(()=>[s(e(He),null,{default:l(()=>[s(e(me),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(f,{name:"tag",class:"lg:mr-2"}),a("div",Va,[o.value&&o.value.length===0?(n(),U(te,{key:0},[v("Tag")],64)):(n(),U(te,{key:1},[o.value.length>0?(n(),U("span",Pa,[y[2]||(y[2]=v(" Tag ",-1)),a("strong",Ia,A(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Je),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",Ea,[s(e(at),{id:"search",type:"text",modelValue:R.value,"onUpdate:modelValue":y[0]||(y[0]=c=>R.value=c),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Ma,[s(f,{name:"search"})])]),s(e(nt)),s(e(Ye),{class:"h-44"},{default:l(()=>[a("div",Ra,[(n(!0),U(te,null,ie(T.value,c=>(n(),U("div",{key:c.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:C=>I(c)},[a("input",{type:"checkbox",checked:o.value.some(C=>C.id===c.id),class:"mr-2"},null,8,Ua),a("span",Na,[a("span",Aa,A(c.tagname),1)])],8,Ta))),128))])]),_:1}),s(e(nt)),a("div",Ba,[s(e(me),{variant:"ghost",class:"justify-start w-full p-1",onClick:y[1]||(y[1]=c=>I({id:9999999}))},{default:l(()=>[s(f,{name:"select-all",isSelected:x.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,A(x.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),La={class:"hidden lg:inline-flex"},Oa={key:0,class:"text-sm font-light"},za={class:"text-sm font-semibold"},ja={class:"relative items-center w-full"},Ka={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},qa={class:"py-1"},Ga=["onClick"],Ha=["checked"],Ja={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ya={"data-size":"20"},Qa={class:"p-1 border-5"},Wa=Oe({__name:"VendorFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(_,{emit:N}){const k=N,w=P([]),$=P(!1),o=P([]),R=P(""),x=P(!1),h=_;ue(()=>{b()}),oe(()=>h.modelValue,g=>{o.value=g,x.value=o.value.length===w.value.length});function I(g){if(g.id===9999999)x.value?(o.value=[],x.value=!1):(o.value=[...w.value],x.value=!0);else{const y=o.value.findIndex(f=>f.id===g.id);y!==-1?(o.value.splice(y,1),x.value=!1):(o.value.push(g),o.value.length===w.value.length&&(x.value=!0))}$.value=!1,k("update:modelValue",o.value)}function b(){X.get("/api/vendors/?perPage=10000&sort=vendorName").then(g=>{w.value=g.data.data})}const T=ce(()=>w.value.filter(g=>g.vendorName.toLowerCase().includes(R.value.toLowerCase())));return(g,y)=>{const f=q("RcIcon"),c=q("Button"),C=q("Input"),p=q("Separator");return n(),m(e(Qe),null,{default:l(()=>[s(e(He),null,{default:l(()=>[s(c,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(f,{name:"vendor",class:"lg:mr-2"}),a("div",La,[o.value&&o.value.length===0?(n(),U(te,{key:0},[v("Vendor")],64)):(n(),U(te,{key:1},[o.value.length>0?(n(),U("span",Oa,[y[2]||(y[2]=v(" Vendor ",-1)),a("strong",za,A(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Je),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",ja,[s(C,{id:"search",type:"text",modelValue:R.value,"onUpdate:modelValue":y[0]||(y[0]=u=>R.value=u),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Ka,[s(f,{name:"search"})])]),s(p),s(e(Ye),{class:"h-44"},{default:l(()=>[a("div",qa,[(n(!0),U(te,null,ie(T.value,u=>(n(),U("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:E=>I(u)},[a("input",{type:"checkbox",checked:o.value.some(E=>E.id===u.id),class:"mr-2"},null,8,Ha),a("span",Ja,[a("span",Ya,A(u.vendorName),1)])],8,Ga))),128))])]),_:1}),s(p),a("div",Qa,[s(c,{variant:"ghost",class:"justify-start w-full p-1",onClick:y[1]||(y[1]=u=>I({id:9999999}))},{default:l(()=>[s(f,{name:"select-all",isSelected:x.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,A(x.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Za={class:"hidden lg:inline-flex"},Xa={key:0,class:"text-sm font-light"},en={class:"text-sm font-semibold"},tn={class:"relative items-center w-full"},sn={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ln={class:"py-1"},an=["onClick"],nn=["checked"],on={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},dn={"data-size":"20"},rn={class:"p-1 border-5"},un=Oe({__name:"ModelFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(_,{emit:N}){const k=N,w=P([]),$=P(!1),o=P([]),R=P(""),x=P(!1),h=_;ue(()=>{b()}),oe(()=>h.modelValue,g=>{o.value=g,x.value=o.value.length===w.value.length});function I(g){if(g.id===9999999)x.value?(o.value=[],x.value=!1):(o.value=[...w.value],x.value=!0);else{const y=o.value.findIndex(f=>f.id===g.id);y!==-1?(o.value.splice(y,1),x.value=!1):(o.value.push(g),o.value.length===w.value.length&&(x.value=!0))}$.value=!1,k("update:modelValue",o.value)}function b(){X.get("/api/device-models/?perPage=10000&sort=name").then(g=>{w.value=g.data.data})}const T=ce(()=>w.value.filter(g=>g.name.toLowerCase().includes(R.value.toLowerCase())));return(g,y)=>{const f=q("RcIcon"),c=q("Button"),C=q("Input"),p=q("Separator");return n(),m(e(Qe),null,{default:l(()=>[s(e(He),null,{default:l(()=>[s(c,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(f,{name:"model",class:"lg:mr-2"}),a("div",Za,[o.value&&o.value.length===0?(n(),U(te,{key:0},[v("Device Model")],64)):(n(),U(te,{key:1},[o.value.length>0?(n(),U("span",Xa,[y[2]||(y[2]=v(" Device Model ",-1)),a("strong",en,A(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Je),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",tn,[s(C,{id:"search",type:"text",modelValue:R.value,"onUpdate:modelValue":y[0]||(y[0]=u=>R.value=u),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",sn,[s(f,{name:"search"})])]),s(p),s(e(Ye),{class:"h-44"},{default:l(()=>[a("div",ln,[(n(!0),U(te,null,ie(T.value,u=>(n(),U("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:E=>I(u)},[a("input",{type:"checkbox",checked:o.value.some(E=>E.id===u.id),class:"mr-2"},null,8,nn),a("span",on,[a("span",dn,A(u.name),1)])],8,an))),128))])]),_:1}),s(p),a("div",rn,[s(c,{variant:"ghost",class:"justify-start w-full p-1",onClick:y[1]||(y[1]=u=>I({id:9999999}))},{default:l(()=>[s(f,{name:"select-all",isSelected:x.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,A(x.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),cn={class:"flex flex-col h-full gap-1 text-center"},mn={class:"flex items-center justify-between p-4"},pn={class:"flex items-center"},vn={class:"flex gap-2"},fn={class:"flex items-center justify-end"},gn={class:"px-6"},yn={class:"flex items-center"},xn=["title"],_n={class:"flex justify-between"},kn={class:"flex items-center"},bn={class:"border-b"},hn=["title"],wn=["title"],Cn={key:1},$n=["title"],Dn={key:1},Sn=["title"],Vn=["title"],Pn={key:1},In={class:"badge-container-fixed"},En={class:"button-cell-fixed"},Mn={key:0,class:"fixed bottom-5 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-4 bg-rcgray-900 text-white border border-rcgray-600 shadow-xl px-4 py-1.5 rounded-lg"},Rn={class:"text-sm"},Tn={class:"flex flex-col items-start gap-1"},Un={class:"hidden md:inline-flex mr-1"},Nn={__name:"Main",props:{statusId:{type:Number,required:!1}},setup(_){const{devices:N,currentPage:k,perPage:w,lastPage:$,totalRecords:o,isLoading:R,isLoadingMore:x,hasMoreData:h,isLoadMoreMode:I,showConfirmDelete:b,editId:T,newDeviceModalKey:g,newBulkEditModalKey:y,searchTerm:f,filterStatus:c,filterCategories:C,filterTags:p,filterVendor:u,filterModel:E,sortParam:F,formatters:d,inventoryIsLoading:K,createDevice:S,deleteDevice:Z,deleteManyDevices:J,disableDevice:r,enableDevice:O,exportInventoryReport:i,handleKeyDown:H,handleSave:G,reload:M,viewDeviceDetailsPane:de,viewEditDialog:W,openBulkEditDialog:L,disableManyDevices:z,enableManyDevices:Ze,downloadManyDevices:$e,fetchDevices:ee,loadMoreDevices:ne,clearFilters:xe,toggleSort:ve}=Vs(),{selectedRows:j,selectAll:pe,toggleSelectAll:re,toggleSelectRow:Ut}=Me(N),tt=P(!1),vt=Jt(),Nt=Ee(),ft=ce(()=>[{key:"checkbox",label:"Select",mandatory:!0,default:!0},{key:"id",label:"ID",default:!0},{key:"status",label:"Status",default:!0},{key:"device_name",label:"Name",mandatory:!0,default:!0},{key:"device_ip",label:"IP Address",default:!0},{key:"category",label:"Command Group",default:!0},{key:"vendor",label:"Vendor",default:!0},{key:"device_model",label:"Model",default:!0},{key:"config_good_count",label:"Config Count",default:!0},{key:"config_bad_count",label:"Config Failures",default:!0},{key:"last_config",label:"Last Config",default:!0},{key:"tags",label:"Tags",default:!0},{key:"actions",label:"Actions",mandatory:!0,default:!0}]),Le=P(ft.value.filter(_e=>_e.default).map(_e=>_e.key)),le=ce(()=>_e=>Le.value.includes(_e));return ce(()=>ft.value.filter(_e=>Le.value.includes(_e.key)).sort((_e,D)=>{const Xe=Le.value.indexOf(_e.key),gt=Le.value.indexOf(D.key);return Xe-gt})),ue(()=>{vt.query.statusId&&(c.value=[{id:parseInt(vt.query.statusId)}]),ee(),window.addEventListener("keydown",H),Ce.on("deleteManyDevicesSuccess",()=>{j.value=[],pe.value=!1})}),oe(()=>vt.query,async _e=>{if(_e.openDeviceDialog){S(),await Qt();const{openDeviceDialog:D,...Xe}=_e;Nt.replace({query:Xe},void 0,{replace:!0})}},{immediate:!0}),Ve(()=>{window.removeEventListener("keydown",H)}),(_e,D)=>{const Xe=q("Input"),gt=q("Separator"),fe=q("Button"),ke=q("RcIcon"),bt=q("Checkbox"),At=q("RcBadge"),Bt=q("Toaster");return n(),U("div",cn,[a("div",mn,[a("div",pn,[s(Xe,{class:"ml-2 min-w-32 lg:min-w-60",autocomplete:"off",placeholder:"Filter [id, name, ip]...",modelValue:e(f),"onUpdate:modelValue":D[0]||(D[0]=B=>se(f)?f.value=B:null)},null,8,["modelValue"]),s(gt,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),D[29]||(D[29]=a("span",{class:"mr-2 text-muted-foreground flex-grow min-w-max"},"Filters:",-1)),a("div",vn,[s(Al,{modelValue:e(C),"onUpdate:modelValue":D[1]||(D[1]=B=>se(C)?C.value=B:null)},null,8,["modelValue"]),s(Fa,{modelValue:e(p),"onUpdate:modelValue":D[2]||(D[2]=B=>se(p)?p.value=B:null)},null,8,["modelValue"]),s(Wa,{modelValue:e(u),"onUpdate:modelValue":D[3]||(D[3]=B=>se(u)?u.value=B:null)},null,8,["modelValue"]),s(un,{modelValue:e(E),"onUpdate:modelValue":D[4]||(D[4]=B=>se(E)?E.value=B:null)},null,8,["modelValue"]),s(Sa,{modelValue:e(c),"onUpdate:modelValue":D[5]||(D[5]=B=>se(c)?c.value=B:null)},null,8,["modelValue"]),e(f)||e(C).length||e(p).length||e(u).length||e(E).length||e(c).length?(n(),m(Re,{key:0,"onUpdate:modelValue":e(xe)},null,8,["onUpdate:modelValue"])):V("",!0)])]),a("div",fn,[s(Gl,{columns:ft.value,modelValue:Le.value,"onUpdate:modelValue":D[6]||(D[6]=B=>Le.value=B),storageKey:"rconfig.deviceTable.columns"},null,8,["columns","modelValue"]),s(e(it),null,{default:l(()=>[s(e(dt),{"as-child":"",class:"inline-flex xl:hidden"},{default:l(()=>[s(fe,{variant:"ghost",class:"h-8 ml-2"},{default:l(()=>[s(e(Yt),{size:"16"})]),_:1})]),_:1}),s(e(rt),{class:"w-56",align:"end",side:"bottom"},{default:l(()=>[s(e(be),{class:"cursor-pointer hover:bg-rcgray-600 group",onClick:D[7]||(D[7]=ae(B=>e(S)(),["prevent"]))},{default:l(()=>[D[30]||(D[30]=v(" New Device ",-1)),s(e(he),{class:"group"},{default:l(()=>[s(e(vs),{size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})]),_:1})]),_:1}),s(e(be),{class:"cursor-pointer hover:bg-rcgray-600 group",onClick:D[8]||(D[8]=ae(B=>e(i)(),["prevent"]))},{default:l(()=>[D[31]||(D[31]=v(" Inventory Report ",-1)),s(e(he),{class:"group"},{default:l(()=>[e(K)?V("",!0):(n(),m(e(wt),{key:0,size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})),s(et,{state:e(K),class:"mr-2"},null,8,["state"])]),_:1})]),_:1})]),_:1})]),_:1}),s(fe,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse hidden xl:inline-flex",size:"sm",onClick:D[9]||(D[9]=ae(B=>e(S)(),["prevent"])),variant:"primary"},{default:l(()=>[...D[32]||(D[32]=[v(" New Device ",-1),a("div",{class:"pl-2 py-1 px-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),s(fe,{type:"submit",class:"px-2 py-1 ml-2 text-sm hidden xl:inline-flex",size:"sm",onClick:D[10]||(D[10]=ae(B=>e(i)(),["prevent"])),variant:"outline"},{default:l(()=>[e(K)?V("",!0):(n(),m(e(wt),{key:0,size:"16",class:"text-muted-foreground mr-2"})),s(et,{state:e(K),class:"mr-2"},null,8,["state"]),D[33]||(D[33]=v(" Inventory Report ",-1))]),_:1}),s(ke,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:D[11]||(D[11]=B=>e(M)())})])]),a("div",gn,[s(e(Be),null,{default:l(()=>[s(e(Te),null,{default:l(()=>[s(e(ye),null,{default:l(()=>[le.value("checkbox")?(n(),m(e(Q),{key:0,class:"w-[2%]"},{default:l(()=>[s(bt,{id:"selectAll",modelValue:e(pe),"onUpdate:modelValue":D[12]||(D[12]=B=>se(pe)?pe.value=B:null),checked:e(pe),onClick:D[13]||(D[13]=B=>e(re)())},null,8,["modelValue","checked"])]),_:1})):V("",!0),le.value("id")?(n(),m(e(Q),{key:1,class:"w-[5%]"},{default:l(()=>[s(fe,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:D[14]||(D[14]=B=>e(ve)("id"))},{default:l(()=>[s(ke,{name:"sort",sortParam:e(F),field:"id"},null,8,["sortParam"]),D[34]||(D[34]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1})):V("",!0),le.value("status")?(n(),m(e(Q),{key:2,class:"w-[2%]"},{default:l(()=>[s(fe,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:D[15]||(D[15]=B=>e(ve)("status"))},{default:l(()=>[s(ke,{name:"sort",sortParam:e(F),field:"status"},null,8,["sortParam"]),D[35]||(D[35]=a("span",{class:"ml-2"},"Status",-1))]),_:1})]),_:1})):V("",!0),le.value("device_name")?(n(),m(e(Q),{key:3,class:"w-[20%]"},{default:l(()=>[s(fe,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:D[16]||(D[16]=B=>e(ve)("device_name"))},{default:l(()=>[s(ke,{name:"sort",sortParam:e(F),field:"device_name"},null,8,["sortParam"]),D[36]||(D[36]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1})):V("",!0),le.value("device_ip")?(n(),m(e(Q),{key:4,class:"w-[10%]"},{default:l(()=>[...D[37]||(D[37]=[v("IP Address",-1)])]),_:1})):V("",!0),le.value("category")?(n(),m(e(Q),{key:5,class:"w-[10%]"},{default:l(()=>[...D[38]||(D[38]=[v("Command Group",-1)])]),_:1})):V("",!0),le.value("vendor")?(n(),m(e(Q),{key:6,class:"w-[10%]"},{default:l(()=>[...D[39]||(D[39]=[v("Vendor",-1)])]),_:1})):V("",!0),le.value("device_model")?(n(),m(e(Q),{key:7,class:"w-[10%]"},{default:l(()=>[...D[40]||(D[40]=[v("Model",-1)])]),_:1})):V("",!0),le.value("config_good_count")?(n(),m(e(Q),{key:8,class:"w-[10%]"},{default:l(()=>[...D[41]||(D[41]=[v("Config Count",-1)])]),_:1})):V("",!0),le.value("config_bad_count")?(n(),m(e(Q),{key:9,class:"w-[10%]"},{default:l(()=>[...D[42]||(D[42]=[v("Config Failures",-1)])]),_:1})):V("",!0),le.value("last_config")?(n(),m(e(Q),{key:10,class:"w-[10%]"},{default:l(()=>[...D[43]||(D[43]=[v("Last Config",-1)])]),_:1})):V("",!0),le.value("tags")?(n(),m(e(Q),{key:11,class:"w-[10%]"},{default:l(()=>[...D[44]||(D[44]=[v("Tags",-1)])]),_:1})):V("",!0),le.value("actions")?(n(),m(e(Q),{key:12,class:"w-[10%]"},{default:l(()=>[...D[45]||(D[45]=[v("Actions",-1)])]),_:1})):V("",!0)]),_:1})]),_:1}),s(e(Ue),null,{default:l(()=>[e(R)?(n(),m(Ne,{key:0})):e(R)?(n(),m(Ae,{key:2})):(n(!0),U(te,{key:1},ie(e(N),B=>(n(),m(e(ye),{key:B.id,class:"table-row-fixed"},{default:l(()=>[le.value("checkbox")?(n(),m(e(Y),{key:0,class:"text-start table-cell-fixed"},{default:l(()=>[s(bt,{class:"cursor-pointer",id:"select-"+B.id,checked:!!e(j).includes(B.id),onClick:ge=>e(Ut)(B.id)},null,8,["id","checked","onClick"])]),_:2},1024)):V("",!0),le.value("id")?(n(),m(e(Y),{key:1,class:"text-start table-cell-fixed"},{default:l(()=>[a("div",yn,[a("span",{class:De({"text-red-500":B.device_added_by==9e3,"text-blue-500":B.device_added_by==9001}),title:B.device_added_by==9e3?"Added by Zabbix":B.device_added_by==9001?"Added by Netbox":""},A(B.id),11,xn),B.device_added_by&&B.device_added_by>=9e3?(n(),m(ke,{key:0,name:"imported-device",addedBy:B.device_added_by,source:B.device_added_by===9001?"Netbox":B.device_added_by===9e3?"Zabbix":"Integration"},null,8,["addedBy","source"])):V("",!0)])]),_:2},1024)):V("",!0),le.value("status")?(n(),m(e(Y),{key:2,class:"text-start table-cell-fixed"},{default:l(()=>[B.status===0?(n(),m(ke,{key:0,name:"status-red"})):V("",!0),B.status===1?(n(),m(ke,{key:1,name:"status-green"})):V("",!0),B.status===2?(n(),m(ke,{key:2,name:"status-yellow"})):V("",!0),B.status===100?(n(),m(ke,{key:3,name:"status-gray"})):V("",!0),B.status===300?(n(),m(ke,{key:4,name:"status-red-agent",size:"16"})):V("",!0),B.status===301?(n(),m(ke,{key:5,name:"status-gray-agent"})):V("",!0)]),_:2},1024)):V("",!0),le.value("device_name")?(n(),m(e(Y),{key:3,class:"text-start"},{default:l(()=>[a("div",_n,[s(fe,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:ge=>e(de)(B.id)},{default:l(()=>[a("div",kn,[a("span",bn,A(B.device_name),1)])]),_:2},1032,["onClick"])])]),_:2},1024)):V("",!0),le.value("device_ip")?(n(),m(e(Y),{key:4,class:"text-start table-cell-fixed"},{default:l(()=>[a("span",{class:"text-truncate",title:B.device_ip},A(B.device_ip),9,hn)]),_:2},1024)):V("",!0),le.value("category")?(n(),m(e(Y),{key:5,class:"text-start table-cell-fixed"},{default:l(()=>[B.category.length>0?(n(),U("span",{key:0,class:"text-truncate",title:B.category[0].categoryName},A(B.category[0].categoryName),9,wn)):(n(),U("span",Cn,"--"))]),_:2},1024)):V("",!0),le.value("vendor")?(n(),m(e(Y),{key:6,class:"text-start table-cell-fixed"},{default:l(()=>[B.vendor.length>0?(n(),U("span",{key:0,class:"text-truncate",title:B.vendor[0].vendorName},A(B.vendor[0].vendorName),9,$n)):(n(),U("span",Dn,"--"))]),_:2},1024)):V("",!0),le.value("device_model")?(n(),m(e(Y),{key:7,class:"text-start table-cell-fixed"},{default:l(()=>[a("span",{class:"text-truncate",title:B.device_model},A(B.device_model),9,Sn)]),_:2},1024)):V("",!0),le.value("config_good_count")?(n(),m(e(Y),{key:8,class:"text-start table-cell-fixed"},{default:l(()=>{var ge;return[v(A(((ge=B.config_summary)==null?void 0:ge.total_count)||"--"),1)]}),_:2},1024)):V("",!0),le.value("config_bad_count")?(n(),m(e(Y),{key:9,class:"text-start table-cell-fixed"},{default:l(()=>{var ge;return[v(A(((ge=B.config_summary)==null?void 0:ge.download_status_0_count)||"--"),1)]}),_:2},1024)):V("",!0),le.value("last_config")?(n(),m(e(Y),{key:10,class:"text-start table-cell-fixed"},{default:l(()=>[B.last_config?(n(),U("span",{key:0,class:"text-truncate",title:e(d).formatTime(B.last_config.created_at)},A(e(d).formatTime(B.last_config.created_at)),9,Vn)):(n(),U("span",Pn,"--"))]),_:2},1024)):V("",!0),le.value("tags")?(n(),m(e(Y),{key:11,class:"text-start table-cell-fixed"},{default:l(()=>[a("div",In,[s(Ie,{items:B.tag,displayField:"tagname",linkField:"view_url",maxVisible:1,hoverCardFields:["id","tagname","description"]},null,8,["items"])])]),_:2},1024)):V("",!0),le.value("actions")?(n(),m(e(Y),{key:12,class:"text-start table-cell-fixed"},{default:l(()=>[a("div",En,[s($l,{rowData:B,onOnEnable:ge=>e(O)(B.id),onOnClone:ge=>(e(W)(B.id),tt.value=!0),onOnDisable:ge=>e(r)(B.id),onOnEdit:ge=>(e(W)(B.id),tt.value=!1),onOnDelete:ge=>e(Z)(B.id),showCopyDownloadDebug:!0},null,8,["rowData","onOnEnable","onOnClone","onOnDisable","onOnEdit","onOnDelete"])])]),_:2},1024)):V("",!0)]),_:2},1024))),128))]),_:1})]),_:1}),e(j).length?(n(),U("div",Mn,[a("span",Rn,[s(At,{variant:"primary",class:"mr-1"},{default:l(()=>[v(A(e(j).length),1)]),_:1}),D[46]||(D[46]=v(" Devices Selected ",-1))]),s(e(Qe),null,{default:l(({open:B})=>[s(e(He),{class:"col-span-3"},{default:l(()=>[s(fe,{class:"text-sm px-1.5 py-0 h-8 flex items-center gap-1 group",variant:"outline"},{default:l(()=>[s(e(ss),{class:"inline-block mr-1 ml-0",size:"14"}),D[47]||(D[47]=a("span",{class:"hidden md:inline-flex"},"Enable/Disable",-1)),s(e(_t),{class:De(["transition-transform duration-200 ease-in-out group-hover:rotate-180",{"rotate-180":B}]),size:"14"},null,8,["class"])]),_:2},1024)]),_:2},1024),s(e(Je),{side:"bottom",align:"start",class:"col-span-3 p-1 text-left w-max"},{default:l(()=>[a("div",Tn,[s(fe,{class:"text-sm px-1.5 py-0 h-8 hover:animate-pulse w-full",onClick:D[17]||(D[17]=ae(ge=>e(Ze)(e(j)),["prevent"])),variant:"ghost"},{default:l(()=>[s(e(Mt),{size:"16",class:"text-green-300 mr-1"}),D[48]||(D[48]=v(" Enable Selected ",-1))]),_:1}),s(fe,{class:"text-sm px-1.5 py-0 h-8 w-full",onClick:D[18]||(D[18]=ae(ge=>e(z)(e(j)),["prevent"])),variant:"ghost"},{default:l(()=>[s(e(Rt),{size:"16",class:"text-red-300 mr-1"}),D[49]||(D[49]=v(" Disable Selected ",-1))]),_:1})])]),_:1})]),_:1}),s(fe,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",onClick:D[19]||(D[19]=ae(B=>e($e)(e(j)),["prevent"])),variant:"outline"},{default:l(()=>[s(ke,{name:"folder-download-open",class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),D[50]||(D[50]=a("span",{class:"hidden md:inline-flex"},"Download Now",-1))]),_:1}),s(fe,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",onClick:D[20]||(D[20]=ae(B=>e(L)(),["prevent"])),variant:"outline"},{default:l(()=>[s(e(fs),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),D[51]||(D[51]=a("span",{class:"hidden md:inline-flex"},"Bulk Edit",-1))]),_:1}),s(fe,{class:"text-sm px-1.5 py-0 bg-red-600 hover:bg-red-700 hover:animate-pulse h-8",onClick:D[21]||(D[21]=ae(B=>b.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[s(e(Tt),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),a("span",Un,"Delete "+A(e(j).length),1)]),_:1})])):V("",!0),e(I)&&e(h)?(n(),m(fe,{key:1,onClick:e(ne),disabled:e(x),class:"load-more-btn my-4",variant:"outline"},{default:l(()=>[D[52]||(D[52]=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M12 8v8m0 0l4-4m-4 4l-4-4"}),a("path",{d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"})],-1)),v(" "+A(e(x)?"Loading...":"Load More Results"),1)]),_:1},8,["onClick","disabled"])):V("",!0),s(Fe,{currentPage:e(k),lastPage:e($),perPage:e(w),"onUpdate:currentPage":D[22]||(D[22]=B=>k.value=B),"onUpdate:perPage":D[23]||(D[23]=B=>w.value=B),totalRecords:e(o),isLoading:e(R)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(Ps,{onSave:D[24]||(D[24]=B=>e(G)()),onClose:D[25]||(D[25]=B=>tt.value=!1),key:e(g),editId:e(T),isClone:tt.value},null,8,["editId","isClone"])),e(j).length>0?(n(),m(xa,{checkedRows:e(j),key:e(y),onBulkUpdateSuccess:D[26]||(D[26]=B=>e(M)())},null,8,["checkedRows"])):V("",!0),s(Pe,{ids:e(j),showConfirmDelete:e(b),onClose:D[27]||(D[27]=B=>b.value=!1),onHandleDelete:D[28]||(D[28]=B=>e(J)(e(j)))},null,8,["ids","showConfirmDelete"]),s(Bt)])])}}};function An(_,N){const k=P(!1),w=P([]),$=P([]),o=P([]),{toastSuccess:R,toastError:x}=we(),h=Se(),{closeDialog:I,isDialogOpen:b}=h,T={1:"device",2:"tag",3:"snippet",4:"agent"};ue(()=>{y()});const g=ce(()=>(console.log(T[_.type]),T[_.type]||"Item")),y=async()=>{switch(k.value=!0,await f(),_.type){case 1:await c();break;case 2:await C();break;case 3:await p();break;case 4:await u();break;default:$.value=[]}k.value=!1},f=async()=>{try{const O=await axios.get("/api/roles");w.value=O.data.data}catch(O){o.value=O.response.data.errors,x("Error","Failed to fetch roles",O.response.data.message),console.error("Error fetching roles:",O)}},c=async()=>{try{const O=await axios.get(`/api/devices/${_.itemId}`);O.data.roles.length>0&&($.value=O.data.roles.map(i=>i.id))}catch(O){o.value=O.response.data.errors,x("Error","Failed to fetch device roles",O.response.data.message)}},C=async()=>{try{const O=await axios.get(`/api/tags/${_.itemId}`);O.data.roles.length>0&&($.value=O.data.roles.map(i=>i.id))}catch(O){o.value=O.response.data.errors,x("Error","Failed to fetch tag roles",O.response.data.message)}},p=async()=>{try{const O=await axios.get(`/api/snippets/${_.itemId}`);O.data.roles.length>0&&($.value=O.data.roles.map(i=>i.id))}catch(O){o.value=O.response.data.errors,x("Error","Failed to fetch snippet roles",O.response.data.message)}},u=async()=>{try{const O=await axios.get(`/api/agents/${_.itemId}`);O.data.roles.length>0&&($.value=O.data.roles.map(i=>i.id))}catch(O){o.value=O.response.data.errors,x("Error","Failed to fetch agent roles",O.response.data.message)}};function E(){switch(_.type){case 1:F();break;case 2:d();break;case 3:K();break;case 4:S();break;default:$.value=[]}setTimeout(()=>{N("updateRoles",$.value)},300)}const F=async()=>{if($.value.length===0)return x("Error","Please select at least one role"),!1;try{return await axios.post(`/api/device/update-roles/${_.itemId}`,{roles:$.value}),R("Success","Roles assigned successfully"),r(),!0}catch(O){return o.value=O.response.data.errors,x("Error","Failed to update roles",O.response.data.message),!1}},d=async()=>{if($.value.length===0)return x("Error","Please select at least one role"),!1;try{return await axios.post(`/api/tags/update-roles/${_.itemId}`,{roles:$.value}),R("Success","Roles assigned successfully"),r(),!0}catch(O){return o.value=O.response.data.errors,x("Error","Failed to update roles",O.response.data.message),!1}},K=async()=>{if($.value.length===0)return x("Error","Please select at least one role"),!1;try{return await axios.post(`/api/snippets/update-roles/${_.itemId}`,{roles:$.value}),R("Success","Roles assigned successfully"),r(),!0}catch(O){return o.value=O.response.data.errors,x("Error","Failed to update roles",O.response.data.message),!1}},S=async()=>{if($.value.length===0)return x("Error","Please select at least one role"),!1;try{return await axios.post(`/api/agents/update-roles/${_.itemId}`,{roles:$.value}),R("Success","Roles assigned successfully"),r(),!0}catch(O){return o.value=O.response.data.errors,x("Error","Failed to update roles",O.response.data.message),!1}},Z=O=>$.value.includes(O),J=O=>{if(O===1)return;const i=$.value.indexOf(O);i>-1?$.value.splice(i,1):$.value.push(O)};function r(){I("DialogRoleAssignment")}return{displayName:g,isLoading:k,roles:w,updateRoles:E,isDialogOpen:b,isRoleSelected:Z,toggleRole:J,close:r}}const Bn={class:"grid gap-2 p-4"},Fn={key:0,class:"text-xs text-muted-foreground"},Ln={class:"rc-kdb-class2 ml-2"},On={__name:"RcRoleDialog",props:{itemId:{type:Number,required:!0},type:{type:Number,default:0,validator:_=>[_,1,2,3,4].includes(_)}},emits:["close","confirm","updateRoles"],setup(_,{emit:N}){const k=_,w=N,{displayName:$,isLoading:o,roles:R,updateRoles:x,isDialogOpen:h,isRoleSelected:I,toggleRole:b,close:T}=An(k,w);return(g,y)=>{const f=q("RcIcon");return n(),m(e(Ge),{open:e(h)("DialogRoleAssignment")},{default:l(()=>[s(e(ze),{class:"w-full p-0 bg-background text-foreground border border-border",onInteractOutside:y[2]||(y[2]=c=>e(T)()),onPointerDownOutside:y[3]||(y[3]=c=>e(T)()),onEscapeKeyDown:y[4]||(y[4]=c=>e(T)()),onCloseClicked:y[5]||(y[5]=c=>e(T)())},{default:l(()=>[s(e(je),{class:"rc-dialog-header"},{default:l(()=>[s(e(Ke),{class:"text-sm text-muted-foreground flex items-center"},{default:l(()=>[s(f,{name:"rbac",class:"inline-block mr-2"}),a("span",null,"Assign roles to "+A(e($))+" ID: "+A(_.itemId),1)]),_:1})]),_:1}),a("div",Bn,[e(o)?(n(),U(te,{key:0},ie(3,c=>a("div",{class:"flex items-center space-x-2",key:c},[s(e(ht),{class:"h-4 w-4"}),s(e(ht),{class:"h-4 w-[250px]"})])),64)):(n(!0),U(te,{key:1},ie(e(R),c=>(n(),U("div",{key:c.id,class:"flex items-center space-x-2"},[s(e(Wt),{id:`role-${c.id}`,checked:e(I)(c.id),"onUpdate:checked":C=>e(b)(c.id),disabled:c.id===1},null,8,["id","checked","onUpdate:checked","disabled"]),s(e(st),{for:`role-${c.id}`,class:"text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:l(()=>[v(A(c.name),1)]),_:2},1032,["for"]),c.id===1?(n(),U("div",Fn,"   - Primary admin role cannot be removed ")):V("",!0)]))),128))]),s(e(qe),{class:"rc-dialog-footer"},{default:l(()=>[s(e(me),{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm",onClick:y[0]||(y[0]=c=>e(T)()),size:"sm"},{default:l(()=>[...y[6]||(y[6]=[v(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ESC")],-1)])]),_:1}),s(e(me),{type:"submit",variant:"primary",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700",size:"sm",onClick:y[1]||(y[1]=c=>e(x)())},{default:l(()=>[y[8]||(y[8]=v(" Save ",-1)),a("kbd",Ln,[y[7]||(y[7]=v(" Ctrl  ",-1)),s(f,{name:"enter",class:"ml-1"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},zn={class:"flex items-center"},jn={class:"ml-2"},Kn={class:"grid gap-2 py-4"},qn={class:"grid items-center grid-cols-4 gap-2"},Gn={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Hn={class:"grid items-center grid-cols-4 gap-2"},Jn={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Yn={class:"pl-2 ml-auto"},Qn={class:"rc-kdb-class2"},Wn={class:"pl-2 ml-auto"},Zn={class:"rc-kdb-class2"},Xn={__name:"TagAddEditDialog",props:{editId:Number},emits:["save"],setup(_,{emit:N}){const{toastSuccess:k,toastError:w}=we(),$=Se(),{closeDialog:o,isDialogOpen:R}=$,x=N,h=P([]),I=P({tagname:"",tagDescription:""}),b=_;function T(y){y.ctrlKey&&y.key==="Enter"&&g()}ue(()=>{b.editId>0&&X.get(`/api/tags/${b.editId}`).then(y=>{I.value=y.data}),window.addEventListener("keydown",T)}),Ve(()=>{window.removeEventListener("keydown",T)});function g(){let y=b.editId>0?`/${b.editId}`:"",f=b.editId>0?"patch":"post";X[f]("/api/tags"+y,I.value).then(c=>{x("save",c.data),k("Tag saved","The tag has been saved successfully."),o("DialogNewTag")}).catch(c=>{h.value=c.response.data.errors,w("Error","Failed to save tag.")})}return(y,f)=>{const c=q("RcIcon"),C=q("Label"),p=q("Input"),u=q("Button");return n(),m(e(Ge),{open:e(R)("DialogNewTag")},{default:l(()=>[s(e($t),{"as-child":""}),s(e(ze),{class:"w-full p-0",onEscapeKeyDown:f[3]||(f[3]=E=>e(o)("DialogNewTag")),onPointerDownOutside:f[4]||(f[4]=E=>e(o)("DialogNewTag")),onCloseClicked:f[5]||(f[5]=E=>e(o)("DialogNewTag"))},{default:l(()=>[s(e(je),{class:"rc-dialog-header"},{default:l(()=>[s(e(Ke),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",zn,[s(c,{name:"commands"}),a("span",jn,A(_.editId>0?"Edit":"New")+" Tag "+A(_.editId>0?"(ID: "+_.editId+")":""),1)])]),_:1})]),_:1}),a("div",Kn,[a("div",qn,[s(C,{for:"tagname",class:"text-right"},{default:l(()=>[...f[6]||(f[6]=[v(" Tag Name ",-1),a("span",{class:"text-red-600"},"*",-1)])]),_:1}),s(p,{modelValue:I.value.tagname,"onUpdate:modelValue":f[0]||(f[0]=E=>I.value.tagname=E),id:"tagname",class:"col-span-3"},null,8,["modelValue"]),h.value.tagname?(n(),U("span",Gn,A(h.value.tagname[0]),1)):V("",!0)]),a("div",Hn,[s(C,{for:"tagDescription",class:"text-right"},{default:l(()=>[...f[7]||(f[7]=[v("Description",-1)])]),_:1}),s(p,{modelValue:I.value.tagDescription,"onUpdate:modelValue":f[1]||(f[1]=E=>I.value.tagDescription=E),id:"tagDescription",class:"col-span-3"},null,8,["modelValue"]),h.value.tagDescription?(n(),U("span",Jn,A(h.value.tagDescription[0]),1)):V("",!0)])]),s(e(qe),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[s(u,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:f[2]||(f[2]=E=>e(o)("DialogNewTag")),size:"sm"},{default:l(()=>[...f[8]||(f[8]=[v(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),b.editId===0?(n(),m(u,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:g,variant:"primary"},{default:l(()=>[f[10]||(f[10]=v(" Save ",-1)),a("div",Yn,[a("kbd",Qn,[f[9]||(f[9]=v(" Ctrl  ",-1)),s(c,{name:"enter",class:"ml-1"})])])]),_:1})):(n(),m(u,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:g,variant:"primary"},{default:l(()=>[f[12]||(f[12]=v(" Update ",-1)),a("div",Wn,[a("kbd",Zn,[f[11]||(f[11]=v(" Ctrl  ",-1)),s(c,{name:"enter",class:"ml-1"})])])]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"])}}};function eo(){const _=P(1),N=ct(),k=P(N.get("useTags","perPage",10)),w=P("-id"),$=P(""),o=P({}),R=P([]),x=P(!1),h=P(1),I=P(0),b=P(1),T=P(1),g=P(!1),y=Se(),{openDialog:f}=y,{toastSuccess:c,toastError:C}=we(),{reload:p}=pt(E),{toggleSort:u}=mt(w,E,"useTags");async function E(H={}){x.value=!0;try{const G=await X.get("/api/tags",{params:{page:_.value,perPage:k.value,sort:w.value,...o.value}});R.value=G.data,h.value=G.data.last_page}catch(G){console.error("Error fetching tags:",G),C("Error","Failed to fetch tags.")}finally{x.value=!1}}const F=async()=>{I.value=0,b.value=Math.random(),f("DialogNewTag")};function d(H){I.value=H,b.value=Math.random(),f("DialogNewTag")}const K=H=>{I.value=H,T.value=Math.random(),f("DialogRoleAssignment")},S=async H=>{try{await X.delete(`/api/tags/${H}`),E(),c("Tag Deleted","The tag has been deleted successfully."),g.value=!1}catch(G){G.status===422?C("Error",G.response.data.message):(console.error("Error deleting Tag:",G),C("Error","Failed to delete Tag."))}},Z=async H=>{try{await X.post("/api/tags/delete-many",{ids:H}),E(),c("Tags Deleted","The tags have been deleted successfully."),g.value=!1,Ce.emit("deleteManyTagsSuccess")}catch(G){G.status===422?C("Error",G.response.data.message):(console.error("Error deleting Tags:",G),C("Error","Failed to delete Tags.")),g.value=!1}},J=H=>{I.value=H,b.value=Math.random(),f("DialogNewTag")},r=()=>{E(),b.value=Math.random()};function O(H){H.altKey&&H.key==="n"&&(H.preventDefault(),f("DialogNewTag"))}const i=ot(()=>{o.value["filter[q]"]=$.value,_.value=1,E()},500);return oe(_,()=>{E()}),oe($,()=>{i()}),oe(k,H=>{N.set("useTags","perPage",H),E()}),{reload:p,tags:R,isLoading:x,currentPage:_,perPage:k,lastPage:h,editId:I,newTagModalKey:b,newRoleModalKey:T,searchTerm:$,showConfirmDelete:g,openDialog:f,fetchTags:E,createTag:F,updateTag:d,deleteTag:S,deleteManyTags:Z,handleSave:r,handleRoleAssignment:K,handleKeyDown:O,viewEditDialog:J,toggleSort:u,sortParam:w}}const to={class:"flex flex-col h-full gap-1 text-center"},so={class:"flex items-center justify-between p-4"},lo={class:"flex items-center"},ao={class:"flex items-center justify-end"},no={class:"px-6"},oo={__name:"Main",setup(_){const{reload:N,tags:k,isLoading:w,currentPage:$,perPage:o,lastPage:R,editId:x,newTagModalKey:h,newRoleModalKey:I,searchTerm:b,showConfirmDelete:T,fetchTags:g,createTag:y,deleteTag:f,deleteManyTags:c,handleSave:C,handleKeyDown:p,handleRoleAssignment:u,viewEditDialog:E,toggleSort:F,sortParam:d}=eo(),{selectedRows:K,selectAll:S,toggleSelectAll:Z,toggleSelectRow:J}=Me(k),r=Ee();return ue(()=>{var O,i;(i=(O=r.currentRoute)==null?void 0:O.value.params)!=null&&i.id&&(x.value=parseInt(r.currentRoute.value.params.id),E(x.value)),g(),window.addEventListener("keydown",p),Ce.on("deleteManyTagsSuccess",()=>{K.value=[],S.value=!1})}),Ve(()=>{window.removeEventListener("keydown",p)}),(O,i)=>{const H=q("Input"),G=q("Button"),M=q("RcIcon"),de=q("Checkbox");return n(),U("div",to,[a("div",so,[a("div",lo,[s(H,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter tags...",modelValue:e(b),"onUpdate:modelValue":i[0]||(i[0]=W=>se(b)?b.value=W:null)},null,8,["modelValue"]),e(b)?(n(),m(Re,{key:0,"onUpdate:modelValue":i[1]||(i[1]=W=>b.value="")})):V("",!0)]),a("div",ao,[e(K).length?(n(),m(G,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=ae(W=>T.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[v("Delete Selected "+A(e(K).length)+" Tag(s) ",1)]),_:1})):V("",!0),s(G,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ae(e(y),["prevent"]),variant:"primary"},{default:l(()=>[...i[14]||(i[14]=[v(" New Tag ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(M,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:i[3]||(i[3]=W=>e(N)())})])]),a("div",no,[s(e(Be),null,{default:l(()=>[s(e(Te),null,{default:l(()=>[s(e(ye),null,{default:l(()=>[s(e(Q),{class:"w-[2%]"},{default:l(()=>[s(de,{id:"selectAll",modelValue:e(S),"onUpdate:modelValue":i[4]||(i[4]=W=>se(S)?S.value=W:null),checked:e(S),onClick:i[5]||(i[5]=W=>e(Z)())},null,8,["modelValue","checked"])]),_:1}),s(e(Q),{class:"w-[5%]"},{default:l(()=>[s(G,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[6]||(i[6]=W=>e(F)("id"))},{default:l(()=>[s(M,{name:"sort",sortParam:e(d),field:"id"},null,8,["sortParam"]),i[15]||(i[15]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[20%]"},{default:l(()=>[s(G,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[7]||(i[7]=W=>e(F)("tagname"))},{default:l(()=>[s(M,{name:"sort",sortParam:e(d),field:"tagname"},null,8,["sortParam"]),i[16]||(i[16]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[20%]"},{default:l(()=>[...i[17]||(i[17]=[v("Description",-1)])]),_:1}),s(e(Q),{class:"w-[40%]"},{default:l(()=>[...i[18]||(i[18]=[v("Devices",-1)])]),_:1}),s(e(Q),{class:"w-[20%]"},{default:l(()=>[...i[19]||(i[19]=[v("Roles",-1)])]),_:1}),s(e(Q),{class:"w-[10%]"},{default:l(()=>[...i[20]||(i[20]=[v("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Ue),null,{default:l(()=>[e(w)?(n(),m(Ne,{key:0})):e(w)?(n(),m(Ae,{key:2})):(n(!0),U(te,{key:1},ie(e(k).data,W=>(n(),m(e(ye),{key:W.id},{default:l(()=>[s(e(Y),{class:"text-start"},{default:l(()=>[s(de,{class:"cursor-pointer",id:"select-"+W.id,checked:!!e(K).includes(W.id),onClick:L=>e(J)(W.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(W.id),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(W.tagname),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(W.tagDescription),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(Ie,{items:W.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(Ie,{items:W.roles,displayField:"name",linkString:"/settings/roles",maxVisible:3,hoverCardFields:["id","name","description"]},null,8,["items"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(We,{rowData:W,onOnEdit:L=>e(E)(W.id),onOnDelete:L=>e(f)(W.id),showRolesBtn:!0,onOnRoleAssignment:L=>e(u)(W.id)},null,8,["rowData","onOnEdit","onOnDelete","onOnRoleAssignment"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Fe,{currentPage:e($),lastPage:e(R),perPage:e(o),"onUpdate:currentPage":i[8]||(i[8]=W=>$.value=W),"onUpdate:perPage":i[9]||(i[9]=W=>o.value=W),totalRecords:e(k).total,isLoading:e(w)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(Xn,{onSave:i[10]||(i[10]=W=>e(C)()),key:e(h),editId:e(x)},null,8,["editId"])),s(Pe,{ids:e(K),showConfirmDelete:e(T),onClose:i[11]||(i[11]=W=>T.value=!1),onHandleDelete:i[12]||(i[12]=W=>e(c)(e(K)))},null,8,["ids","showConfirmDelete"]),e(x)>0?(n(),m(On,{itemId:e(x),key:e(I),type:2,onUpdateRoles:i[13]||(i[13]=W=>e(g)())},null,8,["itemId"])):V("",!0)])])}}},ro={key:0,class:"flex justify-center py-8"},io={class:"space-y-2"},uo={key:0,class:"text-sm text-red-600"},co={key:0,class:"space-y-2"},mo={class:"max-h-32 overflow-y-auto border rounded-md p-3 bg-gray-50"},po={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},vo=["title"],fo={key:1,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4"},go={class:"pl-2 ml-auto"},yo={class:"rc-kdb-class2"},xo={class:"pl-2 ml-auto"},_o={class:"rc-kdb-class2"},ko={__name:"DeviceModelAddEditDialog",props:{editModelName:{type:String,default:""},editId:{type:Number,default:0}},emits:["save"],setup(_,{emit:N}){const k=_,w=N,$=P({name:""}),o=P(!1),R=P({}),x=P([]),h=Se(),{isDialogOpen:I,closeDialog:b}=h,{toastSuccess:T,toastError:g}=we(),y=ce(()=>!!k.editModelName),f=ce(()=>k.editId!=0?"Edit Device Model":"New Device Model"),c=async()=>{o.value=!0;try{const d=(await X.get(`/api/device-models/${k.editId}`)).data;$.value.name=d.name,x.value=d.devices||[]}catch(F){console.error("Error fetching device model:",F),g("Error","Failed to fetch device model data."),b("DialogNewDeviceModel")}finally{o.value=!1}},C=()=>{var F;return R.value={},(F=$.value.name)!=null&&F.trim()?$.value.name.length>255?(R.value.name=t("validation.maxLength",{field:t("common.entities.deviceModel"),max:255}),!1):!0:(R.value.name=t("validation.required",{field:t("common.entities.deviceModel")}),!1)},p=async()=>{var F,d;if(C()){o.value=!0,R.value={};try{let K;k.editId!=0?(K=await X.patch("/api/device-models/"+k.editId,$.value),T("Success","The device model has been updated successfully. Devices associated with this model will take a few moments to reflect the changes.",{count:K.data.data.devices_updated||0})):(K=await X.post("/api/device-models",$.value),T("Success","The device model has been created successfully.")),w("save"),b("DialogNewDeviceModel"),u()}catch(K){((F=K.response)==null?void 0:F.status)===422?(R.value=K.response.data.data||{},g("Validation Error",K.response.data.message)):((d=K.response)==null?void 0:d.status)===409?(R.value.name=K.response.data.message,g("Error",K.response.data.message)):(console.error("Error saving device model:",K),g("Error","Failed to save device model."))}finally{o.value=!1}}},u=()=>{$.value={name:""},R.value={},x.value=[]},E=()=>{u(),b("DialogNewDeviceModel")};return oe(()=>k.editModelName,()=>{I("DialogNewDeviceModel")&&(y.value?c():u())}),ue(()=>{k.editId!=0&&c()}),(F,d)=>{const K=q("Label"),S=q("Input"),Z=q("Button"),J=q("RcIcon");return n(),m(e(Ge),{open:e(I)("DialogNewDeviceModel"),"onUpdate:open":E},{default:l(()=>[s(e(ze),{class:"sm:max-w-[600px]"},{default:l(()=>[s(e(je),null,{default:l(()=>[s(e(Ke),null,{default:l(()=>[v(A(f.value),1)]),_:1})]),_:1}),o.value?(n(),U("div",ro,[...d[3]||(d[3]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(n(),U("form",{key:1,onSubmit:ae(p,["prevent"]),class:"space-y-6"},[a("div",io,[s(K,{for:"name",class:"text-sm font-medium"},{default:l(()=>[...d[4]||(d[4]=[v(" Device Model Name * ",-1)])]),_:1}),s(S,{id:"name",modelValue:$.value.name,"onUpdate:modelValue":d[0]||(d[0]=r=>$.value.name=r),type:"text",placeholder:"Enter device model name",class:De({"border-red-500":R.value.name}),maxlength:"255",required:""},null,8,["modelValue","class"]),R.value.name?(n(),U("p",uo,A(R.value.name),1)):V("",!0)]),y.value&&x.value.length>0?(n(),U("div",co,[s(K,{class:"text-sm font-medium"},{default:l(()=>[v(" Devices Using This Model ("+A(x.value.length)+") ",1)]),_:1}),a("div",mo,[a("div",po,[(n(!0),U(te,null,ie(x.value,r=>(n(),U("div",{key:r.id,class:"text-sm text-gray-700 truncate",title:r.name},"• "+A(r.name),9,vo))),128))])]),d[5]||(d[5]=a("p",{class:"text-xs text-gray-600"}," Updating the device model name will affect all devices using this model. ",-1))])):V("",!0),y.value?(n(),U("div",fo,[...d[6]||(d[6]=[a("div",{class:"flex"},[a("div",{class:"flex-shrink-0"},[a("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),a("div",{class:"ml-3"},[a("p",{class:"text-sm text-yellow-700"}," Editing the device model name will affect all devices using this model. ")])],-1)])])):V("",!0),s(e(qe),null,{default:l(()=>[s(Z,{type:"button",variant:"outline",onClick:E,disabled:o.value},{default:l(()=>[...d[7]||(d[7]=[v(" Cancel ",-1)])]),_:1},8,["disabled"]),k.editId===0?(n(),m(Z,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:d[1]||(d[1]=r=>p()),variant:"primary",disabled:o.value},{default:l(()=>[d[9]||(d[9]=v(" Save ",-1)),a("div",go,[a("kbd",yo,[d[8]||(d[8]=v(" Ctrl  ",-1)),s(J,{name:"enter",class:"ml-1"})])])]),_:1},8,["disabled"])):(n(),m(Z,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:d[2]||(d[2]=r=>p()),variant:"primary",disabled:o.value},{default:l(()=>[d[11]||(d[11]=v(" Update ",-1)),a("div",xo,[a("kbd",_o,[d[10]||(d[10]=v(" Ctrl  ",-1)),s(J,{name:"enter",class:"ml-1"})])])]),_:1},8,["disabled"]))]),_:1})],32))]),_:1})]),_:1},8,["open"])}}};function bo(){const _=P(1),N=ct(),k=P(N.get("useDeviceModels","perPage",15)),w=P("name"),$=P(""),o=P({}),R=P([]),x=P(!1),h=P(1),I=P(""),b=P(1),T=P(!1),g=P(0),y=Se(),{openDialog:f}=y,{toastSuccess:c,toastError:C}=we(),{reload:p}=pt(E),{toggleSort:u}=mt(w,E,"useDeviceModels");async function E(G={}){x.value=!0;try{const M=await X.get("/api/device-models",{params:{page:_.value,perPage:k.value,sort:w.value,...o.value}});R.value=M.data,h.value=M.data.last_page}catch(M){console.error("Error fetching device models:",M),C("Error",M.response.data.message||"Failed to fetch device models.")}finally{x.value=!1}}const F=async G=>{I.value="",g.value=G||0,b.value=Math.random(),f("DialogNewDeviceModel")};function d(G){I.value=G,b.value=Math.random(),f("DialogNewDeviceModel")}const K=async G=>{try{await X.delete(`/api/device-models/${encodeURIComponent(G)}`),E(),c("Device Model Deleted","The device model has been deleted successfully."),T.value=!1}catch(M){M.status===422||M.status===409?C("Error",M.response.data.message):(console.error("Error deleting Device Model:",M),C("Error","Failed to delete Device Model."))}},S=async G=>{try{await X.post("/api/device-models/delete-many",{ids:G}),E(),c("Device Models Deleted","The device models have been deleted successfully."),T.value=!1,Ce.emit("deleteManyDeviceModelsSuccess")}catch(M){M.status===422?C("Error",M.response.data.message):(console.error("Error deleting Device Models:",M),C("Error","Failed to delete Device Models.")),T.value=!1}},Z=G=>{g.value=G,b.value=Math.random(),f("DialogNewDeviceModel")},J=G=>{window.open(`/devices?filter[device_model]=${encodeURIComponent(G)}`,"_blank")},r=async G=>{try{return(await X.get(`/api/device-models/${encodeURIComponent(G)}/devices`)).data.data}catch(M){return console.error("Error fetching devices for model:",M),C("Error","Failed to fetch devices for this model."),null}},O=()=>{E(),b.value=Math.random()};function i(G){G.altKey&&G.key==="n"&&(G.preventDefault(),f("DialogNewDeviceModel"))}const H=ot(()=>{o.value["filter[q]"]=$.value,_.value=1,E()},500);return oe(_,()=>{E()}),oe($,()=>{H()}),oe(k,G=>{N.set("useDeviceModels","perPage",G),E()}),{reload:p,deviceModels:R,isLoading:x,currentPage:_,perPage:k,lastPage:h,editModelName:I,newModelModalKey:b,searchTerm:$,showConfirmDelete:T,editId:g,openDialog:f,fetchDeviceModels:E,createDeviceModel:F,updateDeviceModel:d,deleteDeviceModel:K,deleteManyDeviceModels:S,handleSave:O,handleKeyDown:i,viewEditDialog:Z,viewDevicesDialog:J,getDevicesForModel:r,toggleSort:u,sortParam:w}}const ho={class:"flex flex-col h-full gap-1 text-center"},wo={class:"flex items-center justify-between p-4"},Co={class:"flex items-center"},$o={class:"flex items-center justify-end"},Do={class:"px-6"},So={class:"flex items-center space-x-2"},Vo={key:1,class:"text-muted-foreground text-sm"},Po={__name:"Main",setup(_){const{reload:N,deviceModels:k,isLoading:w,currentPage:$,perPage:o,lastPage:R,editId:x,editModelName:h,newModelModalKey:I,searchTerm:b,showConfirmDelete:T,fetchDeviceModels:g,createDeviceModel:y,deleteDeviceModel:f,deleteManyDeviceModels:c,handleSave:C,handleKeyDown:p,viewEditDialog:u,viewDevicesDialog:E,toggleSort:F,sortParam:d}=bo(),{selectedRows:K,selectAll:S,toggleSelectAll:Z,toggleSelectRow:J}=Me(k),r=Ee();return ue(()=>{var O,i;(i=(O=r.currentRoute)==null?void 0:O.value.params)!=null&&i.modelName&&(h.value=decodeURIComponent(r.currentRoute.value.params.modelName),u(h.value)),g(),window.addEventListener("keydown",p),Ce.on("deleteManyDeviceModelsSuccess",()=>{K.value=[],S.value=!1})}),Ve(()=>{window.removeEventListener("keydown",p)}),(O,i)=>{const H=q("Input"),G=q("Button"),M=q("RcIcon"),de=q("Checkbox"),W=q("RcBadge");return n(),U("div",ho,[a("div",wo,[a("div",Co,[s(H,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter Device Models...",modelValue:e(b),"onUpdate:modelValue":i[0]||(i[0]=L=>se(b)?b.value=L:null)},null,8,["modelValue"]),e(b)?(n(),m(Re,{key:0,"onUpdate:modelValue":i[1]||(i[1]=L=>b.value="")})):V("",!0)]),a("div",$o,[e(K).length?(n(),m(G,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=ae(L=>T.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[v(" Delete Selected "+A(e(K).length)+" Device(s) Model(s) ",1)]),_:1})):V("",!0),s(G,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:i[3]||(i[3]=ae(L=>e(y)(0),["prevent"])),variant:"primary"},{default:l(()=>[...i[15]||(i[15]=[v(" Add Model ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),s(M,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:i[4]||(i[4]=L=>e(N)())})])]),a("div",Do,[s(e(Be),null,{default:l(()=>[s(e(Te),null,{default:l(()=>[s(e(ye),null,{default:l(()=>[s(e(Q),{class:"w-[2%]"},{default:l(()=>[s(de,{id:"selectAll",modelValue:e(S),"onUpdate:modelValue":i[5]||(i[5]=L=>se(S)?S.value=L:null),checked:e(S),onClick:i[6]||(i[6]=L=>e(Z)())},null,8,["modelValue","checked"])]),_:1}),s(e(Q),{class:"w-[5%]"},{default:l(()=>[s(G,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[7]||(i[7]=L=>e(F)("id"))},{default:l(()=>[s(M,{name:"sort",sortParam:e(d),field:"id"},null,8,["sortParam"]),i[16]||(i[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[30%]"},{default:l(()=>[s(G,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[8]||(i[8]=L=>e(F)("name"))},{default:l(()=>[s(M,{name:"sort",sortParam:e(d),field:"name"},null,8,["sortParam"]),i[17]||(i[17]=a("span",{class:"ml-2"}," Name ",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[15%]"},{default:l(()=>[s(G,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[9]||(i[9]=L=>e(F)("devices_count"))},{default:l(()=>[s(M,{name:"sort",sortParam:e(d),field:"devices_count"},null,8,["sortParam"]),i[18]||(i[18]=a("span",{class:"ml-2"}," Device Count ",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[35%]"},{default:l(()=>[...i[19]||(i[19]=[v(" Devices ",-1)])]),_:1}),s(e(Q),{class:"w-[10%]"},{default:l(()=>[...i[20]||(i[20]=[v(" Actions ",-1)])]),_:1})]),_:1})]),_:1}),s(e(Ue),null,{default:l(()=>[e(w)?(n(),m(Ne,{key:0})):!e(w)&&e(k).data&&e(k).data.length?(n(!0),U(te,{key:1},ie(e(k).data,L=>(n(),m(e(ye),{key:L.id},{default:l(()=>[s(e(Y),{class:"text-start"},{default:l(()=>[s(de,{class:"cursor-pointer",id:"select-"+L.id,checked:!!e(K).includes(L.id),onClick:z=>e(J)(L.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(L.id),1)]),_:2},1024),s(e(Y),{class:"text-start font-medium"},{default:l(()=>[v(A(L.name),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(W,{variant:"info",class:"px-3 py-1"},{default:l(()=>[v(A(L.devices_count),1)]),_:2},1024)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[a("div",So,[L.devices_count>0?(n(),m(G,{key:0,variant:"outline",size:"sm",onClick:z=>e(E)(L.name)},{default:l(()=>[v(" View Devices ("+A(L.devices_count)+") ",1),s(e(Zt),{size:"12",class:"ml-2"})]),_:2},1032,["onClick"])):(n(),U("span",Vo," -- "))])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(We,{rowData:L,onOnEdit:z=>e(u)(L.id),onOnDelete:z=>e(f)(L.name),showRolesBtn:!1,showViewDevicesBtn:L.devices_count>0,onOnViewDevices:z=>e(E)(L.name)},null,8,["rowData","onOnEdit","onOnDelete","showViewDevicesBtn","onOnViewDevices"])]),_:2},1024)]),_:2},1024))),128)):(n(),m(Ae,{key:2}))]),_:1})]),_:1}),s(Fe,{currentPage:e($),lastPage:e(R),perPage:e(o),"onUpdate:currentPage":i[10]||(i[10]=L=>$.value=L),"onUpdate:perPage":i[11]||(i[11]=L=>o.value=L),totalRecords:e(k).total,isLoading:e(w)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(ko,{onSave:i[12]||(i[12]=L=>e(C)()),key:e(I),editModelName:e(h),editId:e(x)},null,8,["editModelName","editId"])),s(Pe,{ids:e(K),showConfirmDelete:e(T),onClose:i[13]||(i[13]=L=>T.value=!1),onHandleDelete:i[14]||(i[14]=L=>e(c)(e(K)))},null,8,["ids","showConfirmDelete"])])])}}};function Io(_){const N=P(1),k=ct(),w=P(k.get("useTemplates","perPage",10)),$=P("-id"),o=P(""),R=P({}),x=Se(),h=P(0),I=P(!1),b=P(1),T=P(1),g=P([]),y=P(!1),f=Ee(),{openDialog:c}=x,{toastSuccess:C,toastError:p}=we(),{reload:u}=pt(F),{toggleSort:E}=mt($,F,"useTemplates");ue(()=>{var i,H;(H=(i=f.currentRoute)==null?void 0:i.value.params)!=null&&H.id?(h.value=f.currentRoute.value.params.id,d(h.value)):(h.value=0,F()),window.addEventListener("keydown",r)}),Ve(()=>{window.removeEventListener("keydown",r)});async function F(i={}){I.value=!0;try{const H=await X.get("/api/templates",{params:{page:N.value,perPage:w.value,sort:$.value,...R.value}});g.value=H.data,b.value=H.data.last_page}catch(H){console.error("Error fetching templates:",H),p("Error","Failed to fetch templates.")}finally{I.value=!1}}function d(i){f.push({name:"template-view",params:{id:i}})}const K=async i=>{try{await X.delete(`/api/templates/${i}`),F(),C("Template Deleted","The template has been deleted successfully.")}catch(H){H.status===422?p("Error",H.response.data.message):(console.error("Error deleting template:",H),p("Error","Failed to delete template."))}},S=async i=>{try{await X.post("/api/templates/delete-many",{ids:i}),F(),C("Templates Deleted","The templates have been deleted successfully."),y.value=!1,Ce.emit("deleteManyTemplatesSuccess")}catch(H){H.status===422?p("Error",H.response.data.message):(console.error("Error deleting Templates:",H),p("Error","Failed to delete Templates.")),y.value=!1}},Z=i=>{h.value=i,T.value=Math.random(),c("DialogNewTemplate")},J=()=>{F(),T.value=Math.random()};function r(i){i.altKey&&i.key==="n"&&(i.preventDefault(),c("DialogNewTemplate"))}const O=ot(()=>{R.value["filter[q]"]=o.value,N.value=1,F()},500);return oe(N,()=>{F()}),oe(o,()=>{O()}),oe(w,i=>{k.set("useTemplates","perPage",i),F()}),{reload:u,templates:g,isLoading:I,currentPage:N,perPage:w,lastPage:b,editId:h,newTemplateModalKey:T,searchTerm:o,openDialog:c,fetchTemplates:F,viewTemplateDetailsPane:d,deleteTemplate:K,deleteManyTemplates:S,handleSave:J,handleKeyDown:r,viewEditDialog:Z,toggleSort:E,sortParam:$,showConfirmDelete:y}}const Eo={class:"flex flex-col h-full gap-1 text-center"},Mo={class:"flex items-center justify-between p-4"},Ro={class:"flex items-center"},To={class:"flex items-center justify-end"},Uo={class:"px-6"},No={class:"border-b"},Ao={__name:"Main",setup(_){const{reload:N,templates:k,isLoading:w,currentPage:$,perPage:o,lastPage:R,searchTerm:x,viewTemplateDetailsPane:h,deleteTemplate:I,deleteManyTemplates:b,toggleSort:T,sortParam:g,showConfirmDelete:y}=Io(),{importTemplates:f,importingTemplates:c}=Is(),{selectedRows:C,selectAll:p,toggleSelectAll:u,toggleSelectRow:E}=Me(k);return ue(()=>{Ce.on("deleteManyTemplatesSuccess",()=>{C.value=[],p.value=!1,document.getElementById("selectAll").checked=!1})}),(F,d)=>{const K=q("Input"),S=q("Button"),Z=q("RcIcon"),J=q("Checkbox");return n(),U("div",Eo,[a("div",Mo,[a("div",Ro,[s(K,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter templates...",modelValue:e(x),"onUpdate:modelValue":d[0]||(d[0]=r=>se(x)?x.value=r:null)},null,8,["modelValue"]),e(x)?(n(),m(Re,{key:0,"onUpdate:modelValue":d[1]||(d[1]=r=>x.value="")})):V("",!0)]),a("div",To,[e(C).length?(n(),m(S,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:d[2]||(d[2]=ae(r=>y.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[v("Delete Selected "+A(e(C).length)+" Template(s) ",1)]),_:1})):V("",!0),s(S,{type:"close",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700",onClick:d[3]||(d[3]=r=>e(f)()),variant:"outline"},{default:l(()=>[e(c)?V("",!0):(n(),m(e(us),{key:0,class:"w-4 h-4 mr-2 text-white github-shake"})),s(et,{state:e(c),class:"mr-2"},null,8,["state"]),d[14]||(d[14]=v(" Import Templates ",-1))]),_:1}),s(S,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:d[4]||(d[4]=ae(r=>e(h)(0),["prevent"])),variant:"primary"},{default:l(()=>[...d[15]||(d[15]=[v(" New Template ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),s(Z,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:d[5]||(d[5]=r=>e(N)())})])]),a("div",Uo,[s(e(Be),null,{default:l(()=>[s(e(Te),null,{default:l(()=>[s(e(ye),null,{default:l(()=>[s(e(Q),{class:"w-[2%]"},{default:l(()=>[s(J,{id:"selectAll",modelValue:e(p),"onUpdate:modelValue":d[6]||(d[6]=r=>se(p)?p.value=r:null),checked:e(p),onClick:d[7]||(d[7]=r=>e(u)())},null,8,["modelValue","checked"])]),_:1}),s(e(Q),{class:"w-[5%]"},{default:l(()=>[s(S,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[8]||(d[8]=r=>e(T)("id"))},{default:l(()=>[s(Z,{name:"sort",sortParam:e(g),field:"id"},null,8,["sortParam"]),d[16]||(d[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[20%]"},{default:l(()=>[s(S,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[9]||(d[9]=r=>e(T)("templateName"))},{default:l(()=>[s(Z,{name:"sort",sortParam:e(g),field:"templateName"},null,8,["sortParam"]),d[17]||(d[17]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[20%]"},{default:l(()=>[...d[18]||(d[18]=[v("Description",-1)])]),_:1}),s(e(Q),{class:"w-[40%]"},{default:l(()=>[...d[19]||(d[19]=[v("Devices",-1)])]),_:1}),s(e(Q),{class:"w-[10%]"},{default:l(()=>[...d[20]||(d[20]=[v("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Ue),null,{default:l(()=>[e(w)?(n(),m(Ne,{key:0})):e(w)?(n(),m(Ae,{key:2})):(n(!0),U(te,{key:1},ie(e(k).data,r=>(n(),m(e(ye),{key:r.id},{default:l(()=>[s(e(Y),{class:"text-start"},{default:l(()=>[s(J,{class:"cursor-pointer",id:"select-"+r.id,checked:!!e(C).includes(r.id),onClick:O=>e(E)(r.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(r.id),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(S,{class:"px-2 py-0 text-sm hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:O=>e(h)(r.id)},{default:l(()=>[a("span",No,A(r.templateName),1)]),_:2},1032,["onClick"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(r.description),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(Ie,{items:r.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(We,{rowData:r,onOnEdit:O=>e(h)(r.id),onOnDelete:O=>e(I)(r.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Fe,{currentPage:e($),lastPage:e(R),perPage:e(o),"onUpdate:currentPage":d[10]||(d[10]=r=>$.value=r),"onUpdate:perPage":d[11]||(d[11]=r=>o.value=r),totalRecords:e(k).total,isLoading:e(w)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),s(Pe,{ids:e(C),showConfirmDelete:e(y),onClose:d[12]||(d[12]=r=>y.value=!1),onHandleDelete:d[13]||(d[13]=r=>e(b)(e(C)))},null,8,["ids","showConfirmDelete"])])])}}},Bo=ut(Ao,[["__scopeId","data-v-d820045f"]]),Fo={class:"flex flex-col h-full gap-1 text-center"},Lo={class:"flex items-center justify-between p-4"},Oo={class:"flex items-center"},zo={class:"flex items-center justify-end"},jo={class:"px-6"},Ko={__name:"Main",setup(_){const{reload:N,editId:k,vendors:w,currentPage:$,perPage:o,searchTerm:R,lastPage:x,isLoading:h,fetchVendors:I,viewEditDialog:b,createVendor:T,deleteVendor:g,deleteManyVendors:y,handleSave:f,handleKeyDown:c,newVendorModalKey:C,toggleSort:p,sortParam:u,showConfirmDelete:E}=Es(),{selectedRows:F,selectAll:d,toggleSelectAll:K,toggleSelectRow:S}=Me(w),Z=Ee();return ue(()=>{var J,r;I(),(r=(J=Z.currentRoute)==null?void 0:J.value.params)!=null&&r.id&&(k.value=parseInt(Z.currentRoute.value.params.id),b(k.value)),window.addEventListener("keydown",c),Ce.on("deleteManyVendorsSuccess",()=>{F.value=[],d.value=!1,document.getElementById("selectAll").checked=!1})}),Ve(()=>{window.removeEventListener("keydown",c)}),(J,r)=>{const O=q("Input"),i=q("Button"),H=q("RcIcon"),G=q("Checkbox");return n(),U("div",Fo,[a("div",Lo,[a("div",Oo,[s(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter vendors...",modelValue:e(R),"onUpdate:modelValue":r[0]||(r[0]=M=>se(R)?R.value=M:null)},null,8,["modelValue"]),e(R)?(n(),m(Re,{key:0,"onUpdate:modelValue":r[1]||(r[1]=M=>R.value="")})):V("",!0)]),a("div",zo,[e(F).length?(n(),m(i,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:r[2]||(r[2]=ae(M=>E.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[v("Delete Selected "+A(e(F).length)+" Vendor(s) ",1)]),_:1})):V("",!0),s(i,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ae(e(T),["prevent"]),variant:"primary"},{default:l(()=>[...r[13]||(r[13]=[v(" New Vendor ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(H,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:r[3]||(r[3]=M=>e(N)())})])]),a("div",jo,[s(e(Be),null,{default:l(()=>[s(e(Te),null,{default:l(()=>[s(e(ye),null,{default:l(()=>[s(e(Q),{class:"w-[2%]"},{default:l(()=>[s(G,{id:"selectAll",modelValue:e(d),"onUpdate:modelValue":r[4]||(r[4]=M=>se(d)?d.value=M:null),checked:e(d),onClick:r[5]||(r[5]=M=>e(K)())},null,8,["modelValue","checked"])]),_:1}),s(e(Q),{class:"w-[5%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[6]||(r[6]=M=>e(p)("id"))},{default:l(()=>[s(H,{name:"sort",sortParam:e(u),field:"id"},null,8,["sortParam"]),r[14]||(r[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[20%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[7]||(r[7]=M=>e(p)("vendorName"))},{default:l(()=>[s(H,{name:"sort",sortParam:e(u),field:"vendorName"},null,8,["sortParam"]),r[15]||(r[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(Q),{class:"w-[50%]"},{default:l(()=>[...r[16]||(r[16]=[v("Devices",-1)])]),_:1}),s(e(Q),{class:"w-[10%]"},{default:l(()=>[...r[17]||(r[17]=[v("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Ue),null,{default:l(()=>[e(h)?(n(),m(Ne,{key:0})):e(h)?(n(),m(Ae,{key:2})):(n(!0),U(te,{key:1},ie(e(w).data,M=>(n(),m(e(ye),{key:M.id},{default:l(()=>[s(e(Y),{class:"text-start"},{default:l(()=>[s(G,{class:"cursor-pointer",id:"select-"+M.id,checked:!!e(F).includes(M.id),onClick:de=>e(S)(M.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(M.id),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[v(A(M.vendorName),1)]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(Ie,{items:M.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(Y),{class:"text-start"},{default:l(()=>[s(We,{rowData:M,onOnEdit:de=>e(b)(M.id),onOnDelete:de=>e(g)(M.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Fe,{currentPage:e($),lastPage:e(x),perPage:e(o),"onUpdate:currentPage":r[8]||(r[8]=M=>$.value=M),"onUpdate:perPage":r[9]||(r[9]=M=>o.value=M),totalRecords:e(w).total,isLoading:e(h)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(Ms,{onSave:r[10]||(r[10]=M=>e(f)()),key:e(C),editId:e(k)},null,8,["editId"])),s(Pe,{ids:e(F),showConfirmDelete:e(E),onClose:r[11]||(r[11]=M=>E.value=!1),onHandleDelete:r[12]||(r[12]=M=>e(y)(e(F)))},null,8,["ids","showConfirmDelete"])])])}}},qo={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},Go={class:"border-t border-b topRow"},Ho={class:"flex items-center justify-between"},Jo={class:"flex items-center justify-start w-full gap-2"},Yo={class:"truncate"},Qo={class:"flex items-center gap-2 mr-4"},Wo={class:"flex items-center gap-2"},Zo={key:1,class:"flex flex-col h-full gap-1 text-center"},Xo={class:"flex items-center justify-between p-4"},ed={class:"flex items-center"},td={class:"text-lg text-red-500 font-semibold"},sd={__name:"Main",setup(_){const N=P(!1),{currentView:k,viewItems:w,changeView:$,toggleFavorite:o}=Xt(),R=ce(()=>["devices","commandgroups","commands","templates","vendors","tags","models"].includes(k.value));return(x,h)=>{const I=q("RcIcon");return n(),U("main",qo,[a("div",Go,[s(e(it),{"onUpdate:open":h[0]||(h[0]=b=>N.value=b)},{default:l(()=>{var b,T;return[a("div",Ho,[s(e(dt),{"as-child":"",class:"p-4 ml-2"},{default:l(()=>[s(e(me),{variant:"outline",class:"w-48"},{default:l(()=>{var g;return[a("div",Jo,[s(I,{name:"pin",class:"w-4 h-4 text-blue-400 shrink-0"}),a("span",Yo,A(((g=e(w).find(y=>y.id===e(k)))==null?void 0:g.label)||"Select View"),1),s(e(_t),{class:De(["w-4 h-4 ml-auto transition-transform duration-300",{"rotate-180":N.value}])},null,8,["class"])])]}),_:1})]),_:1})]),a("div",Qo,[s(I,{name:((b=e(w).find(g=>g.id===e(k)))==null?void 0:b.icon)||""},null,8,["name"]),v(" "+A(((T=e(w).find(g=>g.id===e(k)))==null?void 0:T.label)||""),1)]),s(e(rt),{class:"w-56",align:"start"},{default:l(()=>[s(e(ls),null,{default:l(()=>[(n(!0),U(te,null,ie(e(w),g=>(n(),m(e(be),{key:g.id,onClick:y=>e($)(g.id)},{default:l(()=>[a("span",Wo,[s(I,{name:g.icon},null,8,["name"]),v(" "+A(g.label),1)]),s(e(Dt),null,{default:l(()=>[s(e(St),null,{default:l(()=>[s(e(Vt),{"as-child":""},{default:l(()=>[s(e(he),{onClick:ae(y=>e(o)(g.id),["stop","prevent"])},{default:l(()=>[g.isFavorite?V("",!0):(n(),m(I,{key:0,name:"star-unselected",class:"animated-star"})),g.isFavorite?(n(),m(I,{key:1,name:"star-selected",class:"animated-star"})):V("",!0)]),_:2},1032,["onClick"])]),_:2},1024),s(e(Pt),null,{default:l(()=>[a("p",null,A(g.isFavorite?"Remove from favorites":"Add to favorites"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]}),_:1})]),a("div",null,[R.value?(n(),U(te,{key:0},[e(k)==="devices"?(n(),m(Nn,{key:0})):V("",!0),e(k)==="commandgroups"?(n(),m(Cl,{key:1})):V("",!0),e(k)==="commands"?(n(),m(vl,{key:2})):V("",!0),e(k)==="templates"?(n(),m(Bo,{key:3})):V("",!0),e(k)==="vendors"?(n(),m(Ko,{key:4})):V("",!0),e(k)==="models"?(n(),m(Po,{key:5})):V("",!0),e(k)==="tags"?(n(),m(oo,{key:6})):V("",!0)],64)):(n(),U("div",Zo,[a("div",Xo,[a("div",ed,[a("p",td,A(e(k))+" view not found",1)])])]))])])}}},Dd=ut(sd,[["__scopeId","data-v-6b1ceb31"]]);export{Dd as default};
