import{a0 as W,r as d,T as B,c as T,z as M,o as h,f as l,y as Y,w as n,k as o,e as t,t as N,q as K,v as H,a2 as Q,d as G,G as A,F,x as X,u as U,J as O,A as j,a as P,K as Z,L as ee,M as te,N as ae,O as se,j as L,h as D,R as oe,S as le,U as ne,B as re,am as ie,W as J}from"./app-xn2RtsP0.js";import{e as de}from"./eventBus-CGRXT3Tn.js";import{l as ue,m as ce,n as me,o as ge,p as pe,q as fe,r as ve,s as be}from"./useRowSelection-Dw9uXHYU.js";const ye={class:"py-1"},Ce={class:"grid grid-cols-3 gap-2 mt-4 place-items-center"},xe=["onClick"],_e=W({__name:"BadgeColorSelector",props:{modelValue:String},emits:["update:modelValue"],setup(b,{emit:S}){const y=S,I=b,k=d({}),v=[{label:"Lime",bgClass:"bg-lime-400 text-lime-900 border-lime-300"},{label:"Yellow",bgClass:"bg-yellow-400 text-yellow-900 border-yellow-300"},{label:"Teal",bgClass:"bg-teal-400 text-teal-900 border-teal-300"},{label:"Sky",bgClass:"bg-sky-400 text-sky-900 border-sky-300"},{label:"Pink",bgClass:"bg-pink-400 text-pink-900 border-pink-300"},{label:"Emerald",bgClass:"bg-emerald-400 text-emerald-900 border-emerald-300"},{label:"Orange",bgClass:"bg-orange-400 text-orange-900 border-orange-300"},{label:"Amber",bgClass:"bg-amber-400 text-amber-900 border-amber-300"},{label:"Fuchsia",bgClass:"bg-fuchsia-400 text-fuchsia-900 border-fuchsia-300"},{label:"Rose",bgClass:"bg-rose-400 text-rose-900 border-rose-300"},{label:"Violet",bgClass:"bg-violet-500 text-violet-100 border-violet-600"},{label:"Indigo",bgClass:"bg-indigo-500 text-indigo-100 border-indigo-600"},{label:"Blue",bgClass:"bg-blue-500 text-blue-100 border-blue-600"},{label:"Green",bgClass:"bg-green-500 text-green-100 border-green-600"},{label:"Purple",bgClass:"bg-purple-500 text-purple-100 border-purple-600"},{label:"Stone",bgClass:"bg-stone-600 text-stone-200 border-stone-700"},{label:"Red",bgClass:"bg-red-600 text-red-100 border-red-700"},{label:"Fuchsia Dark",bgClass:"bg-fuchsia-700 text-fuchsia-200 border-fuchsia-800"},{label:"Violet Dark",bgClass:"bg-violet-700 text-violet-200 border-violet-800"},{label:"Teal Dark",bgClass:"bg-teal-700 text-teal-200 border-teal-800"}];function u(c){k.value=c,y("update:modelValue",c.bgClass)}return B(()=>I.modelValue,c=>{const p=v.find(s=>s.bgClass===c);p?k.value=p:k.value={}},{immediate:!0}),(c,p)=>{const s=T("Button"),g=T("Separator");return h(),M(l(Y),null,{default:n(()=>[p[0]||(p[0]=o("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(l(H),{class:"col-span-3"},{default:n(()=>[t(s,{variant:"ghost",class:"flex flex-wrap items-start justify-start w-full p-1 pl-2 whitespace-normal border h-fit"},{default:n(()=>[o("div",{class:K(["h-6 px-2 border-2 border-transparent rounded-full cursor-pointer w-fit",Object.keys(k.value).length===0?"bg-gray-600 text-gray-200 border-gray-500":k.value.bgClass])},N(Object.keys(k.value).length===0?"Select color":k.value.label),3)]),_:1})]),_:1}),t(l(X),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:n(()=>[t(g),t(l(Q),{class:"h-64"},{default:n(()=>[o("div",ye,[o("div",Ce,[(h(),G(F,null,A(v,(w,C)=>o("div",{key:C,class:K(["cursor-pointer w-6 h-6 rounded-full border-2",w.bgClass,k.value.value===C?"ring-2 ring-offset-2 ring-black":"border-transparent"]),onClick:x=>u(w)},null,10,xe)),64))])])]),_:1})]),_:1})]),_:1})}}}),he={class:"flex items-center"},we={class:"ml-2"},ke={class:"grid gap-2 p-4"},$e={class:"grid items-center grid-cols-4 gap-2"},De={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Ie={class:"grid items-center grid-cols-4 gap-2"},Se={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Te={class:"grid items-center grid-cols-4 gap-4"},Ve={class:"pl-2 ml-auto"},Ne={class:"rc-kdb-class2"},Ee={class:"pl-2 ml-auto"},Ge={class:"rc-kdb-class2"},Me={__name:"CommandGroupAddEditDialog",props:{editId:Number},emits:["save"],setup(b,{emit:S}){const{toastSuccess:y}=U(),I=O(),{openDialog:k,closeDialog:v,isDialogOpen:u}=I,c=S;d([]);const p=d([]),s=d({categoryName:"",categoryDescription:"",badgeColor:{}}),g=b;function w(x){x.ctrlKey&&x.key==="Enter"&&C()}j(()=>{g.editId>0&&P.get(`/api/categories/${g.editId}`).then(x=>{s.value=x.data}),window.addEventListener("keydown",w)}),Z(()=>{window.removeEventListener("keydown",w)});function C(){let x=g.editId>0?`/${g.editId}`:"",e=g.editId>0?"patch":"post";P[e]("/api/categories"+x,s.value).then(a=>{c("save",a.data),y("Command Group created","The tag has been created successfully."),v("DialogNewCommandGroups")}).catch(a=>{p.value=a.response.data.errors})}return(x,e)=>{const a=T("CommandGroupIcon"),r=T("Label"),$=T("Input"),V=T("Button"),E=T("Icon");return h(),M(l(le),{open:l(u)("DialogNewCommandGroups")},{default:n(()=>[t(l(ee),{"as-child":""}),t(l(te),{class:"p-0 sm:max-w-fit",onEscapeKeyDown:e[6]||(e[6]=f=>l(v)("DialogNewCommandGroups")),onPointerDownOutside:e[7]||(e[7]=f=>l(v)("DialogNewCommandGroups")),onCloseClicked:e[8]||(e[8]=f=>l(v)("DialogNewCommandGroups"))},{default:n(()=>[t(l(ae),{class:"rc-dialog-header"},{default:n(()=>[t(l(se),{class:"text-sm text-rcgray-200"},{default:n(()=>[o("div",he,[t(a),o("span",we,N(b.editId>0?"Edit":"Add")+" Command Group "+N(b.editId>0?"(ID: "+b.editId+")":""),1)])]),_:1})]),_:1}),o("div",ke,[o("div",$e,[t(r,{for:"categoryName",class:"text-right"},{default:n(()=>[...e[9]||(e[9]=[D(" Name ",-1),o("span",{class:"text-red-400"},"*",-1)])]),_:1}),t($,{modelValue:s.value.categoryName,"onUpdate:modelValue":e[0]||(e[0]=f=>s.value.categoryName=f),id:"categoryName",class:"col-span-3"},null,8,["modelValue"]),p.value.categoryName?(h(),G("span",De,N(p.value.categoryName[0]),1)):L("",!0)]),o("div",Ie,[t(r,{for:"categoryDescription",class:"text-right"},{default:n(()=>[...e[10]||(e[10]=[D(" Description ",-1)])]),_:1}),t($,{modelValue:s.value.categoryDescription,"onUpdate:modelValue":e[1]||(e[1]=f=>s.value.categoryDescription=f),id:"categoryDescription",class:"col-span-3"},null,8,["modelValue"]),p.value.categoryDescription?(h(),G("span",Se,N(p.value.categoryDescription[0]),1)):L("",!0)]),o("div",Te,[t(r,{for:"badgeColor",class:"text-right"},{default:n(()=>[...e[11]||(e[11]=[D(" Color ",-1)])]),_:1}),t(_e,{modelValue:s.value.badgeColor,"onUpdate:modelValue":e[2]||(e[2]=f=>s.value.badgeColor=f)},null,8,["modelValue"])])]),t(l(oe),{class:"rc-dialog-footer bg-rcgray-800"},{default:n(()=>[t(V,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:e[3]||(e[3]=f=>l(v)("DialogNewCommandGroups")),size:"sm"},{default:n(()=>[...e[12]||(e[12]=[D(" Cancel ",-1),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),g.editId===0?(h(),M(V,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[4]||(e[4]=f=>C()),variant:"primary"},{default:n(()=>[e[14]||(e[14]=D(" Save ",-1)),o("div",Ve,[o("kbd",Ne,[e[13]||(e[13]=D(" Ctrl  ",-1)),t(E,{icon:"uil:enter",class:""})])])]),_:1})):L("",!0),g.editId>0?(h(),M(V,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[5]||(e[5]=f=>C()),variant:"primary"},{default:n(()=>[e[16]||(e[16]=D(" Update ",-1)),o("div",Ee,[o("kbd",Ge,[e[15]||(e[15]=D(" Ctrl  ",-1)),t(E,{icon:"uil:enter",class:""})])])]),_:1})):L("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Pe(){const b=d(1),S=d(parseInt(localStorage.getItem("perPage")||"10")),y=d("-id"),I=d(""),k=d({}),v=O(),u=d(0),c=d(!1),p=d(1),s=d(1),g=d([]),w=d(!1),{openDialog:C}=v,{toastSuccess:x,toastError:e}=U();async function a(i={}){c.value=!0;try{const _=await P.get("/api/categories",{params:{page:b.value,perPage:S.value,sort:y.value,...k.value}});g.value=_.data,p.value=_.data.last_page}catch(_){console.error("Error fetching categories:",_),e("Error","Failed to fetch categories.")}finally{c.value=!1}}const r=i=>{u.value=0,s.value=Math.random(),C("DialogNewCommandGroups")};function $(i){u.value=i,s.value=Math.random(),C("DialogNewCommandGroups")}const V=async i=>{try{await P.delete(`/api/categories/${i}`),a(),x("CommandGroups Deleted","The Command Group has been deleted successfully.")}catch(_){_.status===422?e("Error",_.response.data.message):(console.error("Error deleting Command:",_),e("Error","Failed to delete Command."))}},E=async i=>{try{await P.post("/api/categories/delete-many",{ids:i}),a(),x("CommandGroups Deleted","The command groups have been deleted successfully."),w.value=!1,de.emit("deleteManyCommandGroupsSuccess")}catch(_){_.status===422?e("Error",_.response.data.message):(console.error("Error deleting Commands:",_),e("Error","Failed to delete Commands.")),w.value=!1}},f=i=>{u.value=i,s.value=Math.random(),C("DialogNewCommandGroups")},m=()=>{a(),s.value=Math.random()};function z(i){i.altKey&&i.key==="n"&&(i.preventDefault(),C("DialogNewCommandGroups"))}const q=ne(()=>{k.value["filter[categoryName]"]=I.value,b.value=1,a()},500);B([b,S],()=>{a()}),B(I,()=>{q()}),B(S,i=>{localStorage.setItem("perPage",i.toString())});function R(i){y.value===i?y.value=`-${i}`:y.value=i,a()}return{categories:g,isLoading:c,currentPage:b,perPage:S,lastPage:p,editId:u,newCommandGroupsModalKey:s,searchTerm:I,openDialog:C,fetchCommandGroups:a,createCommandGroup:r,updateCommandGroup:$,deleteCommandGroup:V,deleteManyCommandGroups:E,handleSave:m,handleKeyDown:z,viewEditDialog:f,toggleSort:R,sortParam:y,showConfirmDelete:w}}const Be={class:"relative items-center w-full"},Le={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Ke={class:"py-1"},ze=["onClick"],Ae={"data-size":"20"},Fe={class:"p-1 border-5"},ut=W({__name:"CategoryMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(b,{emit:S}){const y=S,{newCommandGroupsModalKey:I,handleSave:k,viewEditDialog:v}=Pe(),u=d([]);d([]);const c=d(!1),p=d(""),s=d([]),g=b,w=re(()=>u.value.filter(a=>a.categoryName.toLowerCase().includes(p.value.toLowerCase())&&!s.value.some(r=>r.id===a.id)));j(()=>{e(),g.modelValue&&g.modelValue.length>0&&(s.value=g.modelValue)}),B(()=>g.modelValue,a=>{s.value=a}),B(I,()=>{e()});function C(a){g.singleSelect?s.value=[a]:s.value.push(a),c.value=!1,p.value="",y("update:modelValue",s.value)}function x(a){const r=s.value.findIndex($=>$.categoryName===a);r!==-1&&s.value.splice(r,1),y("update:modelValue",s.value)}function e(){P.get("/api/categories/?perPage=10000").then(a=>{u.value=a.data.data})}return(a,r)=>{const $=T("Icon"),V=T("Button"),E=T("Input"),f=T("Separator");return h(),M(l(Y),null,{default:n(()=>[r[4]||(r[4]=o("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(l(H),{class:"col-span-3"},{default:n(()=>[t(V,{variant:"ghost",class:K(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",s.value.length===0?"text-muted-foreground":" "]),style:ie(s.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:n(()=>[D(N(s.value&&s.value.length===0?"Select categories":"")+" ",1),(h(!0),G(F,null,A(s.value,m=>(h(),G("span",{key:m.id,class:"relative my-1 group"},[o("span",{class:K([m.badgeColor?m.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[D(N(m.categoryName)+" ",1),t($,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:J(z=>x(m.categoryName),["stop"])},null,8,["onClick"])],2)]))),128))]),_:1},8,["class","style"])]),_:1}),t(l(X),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:n(()=>[o("div",Be,[t(E,{id:"search",type:"text",modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=m=>p.value=m),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",Le,[t($,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(f),t(l(Q),{class:"h-64"},{default:n(()=>[o("div",Ke,[(h(!0),G(F,null,A(w.value,m=>(h(),G("div",{key:m.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:z=>C(m)},[o("span",{"data-size":"20",class:K(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",m.badgeColor?m.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[o("span",Ae,N(m.categoryName),1)],2)],8,ze))),128))])]),_:1}),t(f),o("div",Fe,[t(V,{variant:"ghost",onClick:r[1]||(r[1]=m=>l(v)(0)),class:"justify-start w-full p-1"},{default:n(()=>[t($,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),r[3]||(r[3]=o("span",null,"Create new record",-1))]),_:1})])]),_:1}),(h(),M(Me,{onSave:r[2]||(r[2]=m=>l(k)()),key:l(I),editId:0}))]),_:1})}}}),ct={__name:"ConfirmCloseAlert",props:{showConfirmCloseAlert:{type:Boolean,required:!0}},emits:["handleConfirm","handleClose"],setup(b,{emit:S}){const y=S;function I(u){u.key==="Escape"?v():u.key===" "&&k()}j(()=>{window.addEventListener("keydown",I)}),Z(()=>{window.removeEventListener("keydown",I)});function k(){y("handleConfirm")}function v(){y("handleClose")}return(u,c)=>(h(),M(l(be),{open:b.showConfirmCloseAlert},{default:n(()=>[t(l(ue),null,{default:n(()=>[t(l(ce),null,{default:n(()=>[t(l(me),null,{default:n(()=>[...c[2]||(c[2]=[D("Are you absolutely sure?",-1)])]),_:1}),t(l(ge),null,{default:n(()=>[...c[3]||(c[3]=[D("Confirming will close the previous dialog box and result in unsaved changes.",-1)])]),_:1})]),_:1}),t(l(pe),null,{default:n(()=>[t(l(fe),{class:"h-8 px-2 py-0 text-sm hover:bg-gray-700 hover:animate-pulse",onCancel:c[0]||(c[0]=p=>v())},{default:n(()=>[...c[4]||(c[4]=[D(" Cancel ",-1)])]),_:1}),t(l(ve),{class:"h-8 px-2 py-0 text-sm hover:bg-gray-700 hover:animate-pulse",onAction:c[1]||(c[1]=p=>k())},{default:n(()=>[...c[5]||(c[5]=[D(" Continue ",-1),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class"},"SPC")],-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"]))}},je={class:"flex items-center"},Ue={class:"ml-2"},Oe={class:"grid gap-2 py-4"},qe={class:"grid items-center grid-cols-4 gap-2"},Re={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Je={class:"grid items-center grid-cols-4 gap-2"},We={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Ye={class:"pl-2 ml-auto"},He={class:"rc-kdb-class2"},Qe={class:"pl-2 ml-auto"},Xe={class:"rc-kdb-class2"},Ze={__name:"TagAddEditDialog",props:{editId:Number},emits:["save"],setup(b,{emit:S}){const{toastSuccess:y}=U(),I=O(),{openDialog:k,closeDialog:v,isDialogOpen:u}=I,c=S;d([]);const p=d([]),s=d({tagname:"",tagDescription:""}),g=b;function w(x){x.ctrlKey&&x.key==="Enter"&&C()}j(()=>{g.editId>0&&P.get(`/api/tags/${g.editId}`).then(x=>{s.value=x.data}),window.addEventListener("keydown",w)}),Z(()=>{window.removeEventListener("keydown",w)});function C(){let x=g.editId>0?`/${g.editId}`:"",e=g.editId>0?"patch":"post";P[e]("/api/tags"+x,s.value).then(a=>{c("save",a.data),y("Tag created","The tag has been created successfully."),v("DialogNewTag")}).catch(a=>{p.value=a.response.data.errors})}return(x,e)=>{const a=T("CommandsIcon"),r=T("Label"),$=T("Input"),V=T("Button"),E=T("Icon");return h(),M(l(le),{open:l(u)("DialogNewTag")},{default:n(()=>[t(l(ee),{"as-child":""}),t(l(te),{class:"w-full p-0",onEscapeKeyDown:e[5]||(e[5]=f=>l(v)("DialogNewTag")),onPointerDownOutside:e[6]||(e[6]=f=>l(v)("DialogNewTag")),onCloseClicked:e[7]||(e[7]=f=>l(v)("DialogNewTag"))},{default:n(()=>[t(l(ae),{class:"rc-dialog-header"},{default:n(()=>[t(l(se),{class:"text-sm text-rcgray-200"},{default:n(()=>[o("div",je,[t(a),o("span",Ue,N(b.editId>0?"Edit":"Add")+" Tag "+N(b.editId>0?"(ID: "+b.editId+")":""),1)])]),_:1})]),_:1}),o("div",Oe,[o("div",qe,[t(r,{for:"tagname",class:"text-right"},{default:n(()=>[...e[8]||(e[8]=[D(" Tag Name ",-1)])]),_:1}),t($,{modelValue:s.value.tagname,"onUpdate:modelValue":e[0]||(e[0]=f=>s.value.tagname=f),id:"tagname",class:"col-span-3"},null,8,["modelValue"]),p.value.tagname?(h(),G("span",Re,N(p.value.tagname[0]),1)):L("",!0)]),o("div",Je,[t(r,{for:"tagDescription",class:"text-right"},{default:n(()=>[...e[9]||(e[9]=[D(" Description ",-1)])]),_:1}),t($,{modelValue:s.value.tagDescription,"onUpdate:modelValue":e[1]||(e[1]=f=>s.value.tagDescription=f),id:"tagDescription",class:"col-span-3"},null,8,["modelValue"]),p.value.tagDescription?(h(),G("span",We,N(p.value.tagDescription[0]),1)):L("",!0)])]),t(l(oe),{class:"rc-dialog-footer bg-rcgray-800"},{default:n(()=>[t(V,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:e[2]||(e[2]=f=>l(v)("DialogNewTag")),size:"sm"},{default:n(()=>[...e[10]||(e[10]=[D(" Cancel ",-1),o("div",{class:"pl-2 ml-auto"},[o("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),g.editId===0?(h(),M(V,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[3]||(e[3]=f=>C()),variant:"primary"},{default:n(()=>[e[12]||(e[12]=D(" Save ",-1)),o("div",Ye,[o("kbd",He,[e[11]||(e[11]=D(" Ctrl  ",-1)),t(E,{icon:"uil:enter",class:""})])])]),_:1})):L("",!0),g.editId>0?(h(),M(V,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e[4]||(e[4]=f=>C()),variant:"primary"},{default:n(()=>[e[14]||(e[14]=D(" Update ",-1)),o("div",Qe,[o("kbd",Xe,[e[13]||(e[13]=D(" Ctrl  ",-1)),t(E,{icon:"uil:enter",class:""})])])]),_:1})):L("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function et(){const b=d(1),S=d(parseInt(localStorage.getItem("perPage")||"10")),y=d("-id"),I=d(""),k=d({}),v=O(),u=d(0),c=d(!1),p=d(1),s=d(1),g=d([]),w=d(!1),{openDialog:C}=v,{toastSuccess:x,toastError:e}=U();async function a(i={}){c.value=!0;try{const _=await P.get("/api/tags",{params:{page:b.value,perPage:S.value,sort:y.value,...k.value}});g.value=_.data,p.value=_.data.last_page}catch(_){console.error("Error fetching tags:",_),e("Error","Failed to fetch tags.")}finally{c.value=!1}}const r=i=>{u.value=0,s.value=Math.random(),C("DialogNewTag")};function $(i){u.value=i,s.value=Math.random(),C("DialogNewTag")}const V=async i=>{try{await P.delete(`/api/tags/${i}`),a(),x("Tag Deleted","The tag has been deleted successfully."),w.value=!1}catch(_){_.status===422?e("Error",_.response.data.message):(console.error("Error deleting Tag:",_),e("Error","Failed to delete Tag."))}},E=async i=>{try{await P.post("/api/tags/delete-many",{ids:i}),a(),x("Tags Deleted","The tags have been deleted successfully."),w.value=!1,de.emit("deleteManyTagsSuccess")}catch(_){_.status===422?e("Error",_.response.data.message):(console.error("Error deleting Tags:",_),e("Error","Failed to delete Tags.")),w.value=!1}},f=i=>{u.value=i,s.value=Math.random(),C("DialogNewTag")},m=()=>{a(),s.value=Math.random()};function z(i){i.altKey&&i.key==="n"&&(i.preventDefault(),C("DialogNewTag"))}const q=ne(()=>{k.value["filter[tagname]"]=I.value,b.value=1,a()},500);B([b,S],()=>{a()}),B(I,()=>{q()}),B(S,i=>{localStorage.setItem("perPage",i.toString())});function R(i){y.value===i?y.value=`-${i}`:y.value=i,a()}return{tags:g,isLoading:c,currentPage:b,perPage:S,lastPage:p,editId:u,newTagModalKey:s,searchTerm:I,openDialog:C,fetchTags:a,createTag:r,updateTag:$,deleteTag:V,deleteManyTags:E,handleSave:m,handleKeyDown:z,viewEditDialog:f,toggleSort:R,sortParam:y,showConfirmDelete:w}}const tt={class:"relative items-center w-full"},at={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},st={class:"py-1"},ot=["onClick"],lt={"data-size":"20"},nt={class:"p-1 border-5"},mt=W({__name:"TagMultiSelect",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(b,{emit:S}){const y=S,I=d([]);d([]);const k=d(!1),v=d(""),u=d([]),{newTagModalKey:c,createTag:p,handleSave:s}=et(),g=re(()=>I.value.filter(a=>a.tagname.toLowerCase().includes(v.value.toLowerCase())&&!u.value.some(r=>r.id===a.id))),w=b;j(()=>{e(),w.modelValue&&w.modelValue.length>0&&u.value.push(...w.modelValue)}),B(()=>w.modelValue,a=>{u.value=a}),B(c,()=>{e()});function C(a){u.value.push(a),k.value=!1,v.value="";const r=g.value.findIndex($=>$.tagname===a.tagname);r!==-1&&g.value.splice(r,1),y("update:modelValue",u.value)}function x(a){const r=u.value.findIndex($=>$.tagname===a);r!==-1&&u.value.splice(r,1),y("update:modelValue",u.value)}function e(){P.get("/api/tags/?perPage=10000").then(a=>{I.value=a.data.data})}return(a,r)=>{const $=T("Icon"),V=T("Button"),E=T("Input"),f=T("Separator");return h(),M(l(Y),null,{default:n(()=>[t(l(H),{class:"col-span-3"},{default:n(()=>[t(V,{variant:"ghost",class:K(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",u.value.length===0?"text-muted-foreground":" "]),style:ie(u.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:n(()=>[D(N(u.value&&u.value.length===0?"Select tags":"")+" ",1),(h(!0),G(F,null,A(u.value,m=>(h(),G("span",{key:m.id,class:"relative my-1 group"},[o("span",{class:K([m.badgeColor?m.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[D(N(m.tagname)+" ",1),t($,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:J(z=>x(m.tagname),["stop"])},null,8,["onClick"])],2)]))),128))]),_:1},8,["class","style"])]),_:1}),t(l(X),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:n(()=>[o("div",tt,[t(E,{id:"search",type:"text",modelValue:v.value,"onUpdate:modelValue":r[0]||(r[0]=m=>v.value=m),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),o("span",at,[t($,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),t(f),t(l(Q),{class:"h-64"},{default:n(()=>[o("div",st,[(h(!0),G(F,null,A(g.value,m=>(h(),G("div",{key:m.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:z=>C(m)},[o("span",{"data-size":"20",class:K(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",m.badgeColor?m.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[o("span",lt,N(m.tagname),1)],2)],8,ot))),128))])]),_:1}),t(f),o("div",nt,[t(V,{variant:"ghost",onClick:r[1]||(r[1]=J(m=>l(p)(),["prevent"])),class:"justify-start w-full p-1"},{default:n(()=>[t($,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),r[3]||(r[3]=o("span",null,"Create new record",-1))]),_:1})])]),_:1}),(h(),M(Ze,{onSave:r[2]||(r[2]=m=>l(s)()),key:l(c),editId:0}))]),_:1})}}});export{ut as _,Me as a,et as b,Ze as c,ct as d,mt as e,Pe as u};
