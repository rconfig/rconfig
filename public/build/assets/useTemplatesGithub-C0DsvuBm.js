import{i as me,v as u,E as Y,y as R,U as z,r as O,e as N,o as n,w as o,a,b as t,u as e,at as de,x as ve,n as ne,c as _,M as K,t as T,d as V,a4 as Z,N as X,au as re,a3 as pe,a0 as ie,av as ce,C as ee,B as te,F as fe,H as be,I as he,J as xe,K as we,q as P,P as ke,Q as De,l as ue,bP as ct,S as Te,p as je,j as Me,k as Oe,m as Pe,a2 as Ne,O as ut,X as Se,bQ as Ie,R as Be,bR as mt,g as ze,a8 as vt,a9 as Le,aa as Fe,bS as pt,bT as ft,ac as gt,bU as _t}from"./app-CJzaFoze.js";import{u as ge,_ as yt,a as bt}from"./TagMultiSelect-DRXu6HV2.js";import{u as ht,_ as xt,S as wt}from"./useCredentials-rUu0RaSU.js";import{X as J}from"./x-BZtJYEPQ.js";import{S as kt}from"./search-C_mFc5fq.js";import{P as Dt}from"./plus-Cu7n14hY.js";import{o as qe,u as Ue,h as Ae,i as Re,j as Ke}from"./useRowSelection-BFCWzlct.js";import{I as Ct}from"./info-DQTur3RV.js";import{C as Ee}from"./corner-down-left-Cca6O_d0.js";const $t={key:0},Vt={key:0},St={key:1,class:"flex items-center text-xs font-medium px-2.5 py-0.5 rounded-xl border bg-muted"},It={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},Et={class:"relative items-center w-full"},Tt={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},jt={class:"py-1"},Mt=["onClick"],Ot={"data-size":"20"},Pt={class:"p-1 border-5"},Nt=me({__name:"CredentialsMultiSelect",props:{modelValue:{type:[Array,Object],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select credentials"},align:{type:String,default:"end"}},emits:["update:modelValue"],setup(g,{emit:E}){const w=E,k=u([]),c=u(!0),{createCred:p,newCredModalKey:l,handleSave:C}=ht({autoMount:!1}),h=g,{selectedItems:$,searchTerm:S,filteredItems:d,selectItem:j,deleteItem:D}=ge({items:k,modelValue:h.modelValue,singleSelect:h.singleSelect,displayField:"cred_name",searchFields:["cred_name"],emit:w});Y(()=>{m()}),R(l,()=>{m()});function m(){c.value=!0,z.get("/api/settings/credentials/?perPage=10000").then(v=>{k.value=v.data.data,c.value=!1})}return(v,y)=>{const s=O("RcIcon"),r=O("Button"),i=O("Input"),x=O("Separator");return n(),N(e(ce),null,{default:o(()=>[y[4]||(y[4]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(e(de),{class:"col-span-3"},{default:o(()=>[t(r,{variant:"ghost",class:ne(["flex items-center justify-start w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700",e($).length===0?" text-rcgray-400":""]),style:ve(e($).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:o(()=>[c.value?(n(),_("span",$t,"Loading credentials...")):(n(),_(K,{key:1},[t(s,{name:"credentials",class:"mx-2"}),e($).length===0?(n(),_("span",Vt,T(h.placeholder),1)):h.singleSelect&&e($).length>0?(n(),_("span",St,[V(T(e($)[0].cred_name)+" ",1),t(e(J),{size:"16",class:"ml-1 cursor-pointer hover:text-primary",onClick:y[0]||(y[0]=Z(I=>e(D)(e($)[0].id),["stop"]))})])):(n(!0),_(K,{key:2},X(e($),I=>(n(),_("span",{key:I.id,class:"relative my-1 group"},[a("span",It,[V(T(I.cred_name)+" ",1),t(e(J),{size:"16",class:"ml-1 cursor-pointer hover:text-white",onClick:Z(b=>e(D)(I.id),["stop"])},null,8,["onClick"])])]))),128))],64))]),_:1},8,["class","style"])]),_:1}),t(e(re),{side:"bottom",align:g.align,class:"col-span-3 p-0"},{default:o(()=>[a("div",Et,[t(i,{id:"search",type:"text",modelValue:e(S),"onUpdate:modelValue":y[1]||(y[1]=I=>pe(S)?S.value=I:null),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Tt,[t(e(kt),{class:"size-6 text-muted-foreground"})])]),t(x),t(e(ie),{class:"h-64"},{default:o(()=>[a("div",jt,[c.value?(n(),N(s,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(n(!0),_(K,{key:1},X(e(d),I=>(n(),_("div",{key:I.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:b=>e(j)(I)},[a("span",{"data-size":"20",class:ne(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",I.badgeColor?I.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[a("span",Ot,T(I.cred_name),1)],2)],8,Mt))),128))])]),_:1}),t(x),a("div",Pt,[t(r,{variant:"ghost",onClick:e(p),class:"justify-start w-full p-1"},{default:o(()=>[t(s,{name:"plus",class:"w-8"}),y[3]||(y[3]=a("div",{class:"rc-text-xs-muted ml-1"},"Create new record",-1))]),_:1},8,["onClick"])])]),_:1},8,["align"]),(n(),N(xt,{onSave:y[2]||(y[2]=I=>e(C)()),key:e(l),editId:0}))]),_:1})}}}),Bt={class:"flex items-center"},zt={class:"ml-2"},Lt={class:"grid gap-2 p-4"},Ft={class:"grid items-center grid-cols-1 gap-4"},qt={key:0,class:"col-start-2 -mt-4 text-sm text-red-400"},Ut={class:"pl-2 ml-auto"},At={class:"rc-kdb-class2"},Rt={__name:"DeviceModelAddDialog",props:{editId:{type:Number,default:0}},emits:["save"],setup(g,{emit:E}){const{toastSuccess:w}=ee(),k=te(),{openDialog:c,closeDialog:p,isDialogOpen:l}=k,C=E,h=u([]),$=u({name:""}),S=g;function d(D){D.ctrlKey&&D.key==="Enter"&&j()}Y(()=>{window.addEventListener("keydown",d)}),fe(()=>{window.removeEventListener("keydown",d)});function j(){z.post("/api/add-device-model",{name:$.value.name}).then(()=>{C("save"),w("Device model created","The device model has been created successfully."),p("DialogDeviceModelAdd"),$.value={name:""},h.value=[]}).catch(D=>{var m,v;h.value=((v=(m=D.response)==null?void 0:m.data)==null?void 0:v.errors)||{}})}return(D,m)=>{const v=O("Button"),y=O("RcIcon"),s=O("Label"),r=O("Input");return n(),N(e(De),{open:e(l)("DialogDeviceModelAdd")},{default:o(()=>[t(e(be),{"as-child":""},{default:o(()=>[t(v,{variant:"ghost",onClick:m[0]||(m[0]=i=>e(c)("DialogDeviceModelAdd")),class:"justify-start w-full p-1"},{default:o(()=>[t(e(Dt),{size:"16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),m[7]||(m[7]=a("span",null,"Add new device model",-1))]),_:1})]),_:1}),t(e(he),{class:"p-0 sm:max-w-1/3",onEscapeKeyDown:m[4]||(m[4]=i=>e(p)("DialogDeviceModelAdd")),onPointerDownOutside:m[5]||(m[5]=i=>e(p)("DialogDeviceModelAdd")),onCloseClicked:m[6]||(m[6]=i=>e(p)("DialogDeviceModelAdd"))},{default:o(()=>[t(e(xe),{class:"rc-dialog-header"},{default:o(()=>[t(e(we),{class:"text-sm text-rcgray-200"},{default:o(()=>[a("div",Bt,[t(y,{name:"user",class:"w-5 h-5"}),a("span",zt,T(g.editId>0?"Edit":"Add")+" Device Model "+T(g.editId>0?"(ID: "+g.editId+")":""),1)])]),_:1})]),_:1}),a("div",Lt,[a("div",Ft,[t(s,{for:"name",class:"text-left"},{default:o(()=>[...m[8]||(m[8]=[V(" Device model name ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(r,{modelValue:$.value.name,"onUpdate:modelValue":m[1]||(m[1]=i=>$.value.name=i),id:"name",class:"col-span-3",autocomplete:"off"},null,8,["modelValue"]),h.value.name?(n(),_("span",qt,T(h.value.name[0]),1)):P("",!0)])]),t(e(ke),{class:"rc-dialog-footer bg-rcgray-800"},{default:o(()=>[t(v,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:m[2]||(m[2]=i=>e(p)("DialogDeviceModelAdd")),size:"sm"},{default:o(()=>[...m[9]||(m[9]=[V(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),t(v,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:m[3]||(m[3]=i=>j()),variant:"primary"},{default:o(()=>[V(T(S.editId===0?"Save":"Update")+" ",1),a("div",Ut,[a("kbd",At,[m[10]||(m[10]=V(" Ctrl  ",-1)),t(y,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},Kt={key:0},Ht={key:0},Gt={key:1,class:"flex items-center text-xs font-medium px-2.5 py-0.5 rounded-xl border bg-muted"},Qt={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},Xt={class:"relative items-center w-full"},Yt={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Jt={class:"py-1"},Wt=["onClick"],Zt={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},es={"data-size":"20"},ts={key:2,class:"flex flex-col items-center justify-center text-rcgray-400 text-sm py-4"},ss={class:"p-1 border-5"},ls={__name:"DeviceModelMultiSelect",props:{modelValue:{type:[Array,Object],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select device model"}},emits:["update:modelValue"],setup(g,{emit:E}){const w=E,k=u([]),c=u(!0),p=g,{selectedItems:l,searchTerm:C,filteredItems:h,selectItem:$,deleteItem:S}=ge({items:k,modelValue:p.modelValue,singleSelect:p.singleSelect,displayField:"name",searchFields:["name"],emit:w});Y(()=>{d()});function d(){c.value=!0,z.get("/api/get-device-models/?perPage=10000").then(D=>{k.value=D.data.data}).finally(()=>{c.value=!1})}function j(){d()}return(D,m)=>{const v=O("RcIcon"),y=O("Button"),s=O("Input"),r=O("Separator");return n(),N(e(ce),null,{default:o(()=>[t(e(de),{class:"col-span-3"},{default:o(()=>[t(y,{variant:"ghost",class:ne(["flex items-center justify-start w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700",e(l).length===0?" text-rcgray-400":""]),style:ve(e(l).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:o(()=>[c.value?(n(),_("span",Kt,"Loading device models...")):(n(),_(K,{key:1},[t(v,{name:"model",class:"mx-2"}),e(l).length===0?(n(),_("span",Ht,T(p.placeholder),1)):p.singleSelect&&e(l).length>0?(n(),_("span",Gt,[V(T(e(l)[0].name)+" ",1),t(e(J),{size:"16",class:"ml-1 cursor-pointer hover:text-primary",onClick:m[0]||(m[0]=Z(i=>e(S)(e(l)[0].id),["stop"]))})])):(n(),_(K,{key:2},[e(l).length>0?(n(!0),_(K,{key:0},X(e(l),i=>(n(),_("span",{key:i.id,class:"relative my-1 group"},[a("span",Qt,[V(T(i.name)+" ",1),t(e(J),{size:"16",class:"ml-1 cursor-pointer hover:text-white",onClick:Z(x=>e(S)(i.id),["stop"])},null,8,["onClick"])])]))),128)):P("",!0)],64))],64))]),_:1},8,["class","style"])]),_:1}),t(e(re),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:o(()=>[a("div",Xt,[t(s,{id:"search",type:"text",modelValue:e(C),"onUpdate:modelValue":m[1]||(m[1]=i=>pe(C)?C.value=i:null),autocomplete:"off",placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Yt,[t(v,{name:"search"})])]),t(r),t(e(ie),{class:"h-48 max-h-48"},{default:o(()=>[a("div",Jt,[c.value?(n(),N(v,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(n(!0),_(K,{key:1},X(e(h),i=>(n(),_("div",{key:i.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:x=>e($)(i)},[a("span",Zt,[a("span",es,T(i.name),1)])],8,Wt))),128)),k.value.length===0?(n(),_("div",ts,[...m[3]||(m[3]=[a("span",{class:"font-semibold"},"No Results",-1),a("span",{class:"mt-1"},"No device models found. You can add a new model below.",-1)])])):P("",!0)])]),_:1}),t(r),a("div",ss,[t(Rt,{onSave:m[2]||(m[2]=i=>j())})])]),_:1})]),_:1})}}},as={class:"grid gap-4"},os={class:"space-y-2"},ns={class:"flex items-center space-x-2"},ds={class:"font-medium leading-none"},rs=["innerHTML"],ye=me({__name:"HelpPopover",props:{title:{type:String,required:!0},content:{type:String,required:!1},hasIcon:{type:Boolean,default:!0},side:{type:String,default:"top"}},setup(g){const E=u(!1),w=()=>{E.value=!0},k=()=>{E.value=!1};return(c,p)=>{const l=O("Button");return n(),_("div",{onMouseenter:w,onMouseleave:k,class:"inline-flex"},[t(e(ce),{open:E.value},{default:o(()=>[t(e(de),{"as-child":""},{default:o(()=>[t(l,{tabindex:"-1",variant:"ghost",class:"h-0 p-0 m-0 ml-1"},{default:o(()=>[g.hasIcon?(n(),N(e(ct),{key:0,size:"12"})):ue(c.$slots,"default",{key:1})]),_:3})]),_:3}),t(e(re),{class:"w-80",side:g.side,align:"start"},{default:o(()=>[a("div",as,[a("div",os,[a("div",ns,[a("h4",ds,T(g.title),1)]),g.content?(n(),_("span",{key:0,class:"text-sm text-muted-foreground mt-2",innerHTML:g.content},null,8,rs)):ue(c.$slots,"default",{key:1})])])]),_:3},8,["side"])]),_:3},8,["open"])],32)}}});function is(g,E,w){const k=u(!1);Y(()=>{window.addEventListener("keydown",c)}),fe(()=>{window.removeEventListener("keydown",c)});function c(h){h.ctrlKey&&h.key==="Enter"&&(k.value=!1)}function p(){k.value=!0}function l(){k.value=!1}function C(){k.value=!1}return{showConfirmCloseAlert:k,showConfirmCloseDialog:p,cancelCloseDialog:l,confirmCloseDialog:C}}const cs={key:0},us={key:1,class:"flex items-center justify-start w-full"},ms={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},vs={class:"relative items-center w-full"},ps={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},fs={class:"py-1"},gs=["onClick"],_s={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ys={"data-size":"20"},bs={class:"p-1 border-5"},hs={class:"ml-auto"},xs=me({__name:"TemplateMultiSelect",props:{modelValue:{type:[Array,Object],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select a template"}},emits:["update:modelValue"],setup(g,{emit:E}){const w=E,k=u([]),c=Te(),{showConfirmCloseAlert:p,showConfirmCloseDialog:l,cancelCloseDialog:C}=is(),h=u(!0),$=g,{selectedItems:S,searchTerm:d,filteredItems:j,selectItem:D,deleteItem:m}=ge({items:k,modelValue:$.modelValue,singleSelect:$.singleSelect,displayField:"templateName",searchFields:["templateName"],emit:w});Y(()=>{v()});function v(){h.value=!0,z.get("/api/templates/?perPage=10000").then(s=>{k.value=s.data.data,h.value=!1})}function y(){c.push({path:"/templates/view/0"})}return(s,r)=>{const i=O("RcIcon"),x=O("Button"),I=O("Input"),b=O("Separator");return n(),N(e(ce),null,{default:o(()=>[t(e(de),{class:"col-span-3"},{default:o(()=>[t(x,{variant:"ghost",class:ne(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",e(S).length===0?"text-muted-foreground":" "]),style:ve(e(S).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:o(()=>[h.value?(n(),_("span",cs,"Loading device models...")):(n(),_("div",us,[t(i,{name:"template",class:"mx-2"}),V(" "+T(e(S).length===0?"Selected templates: ":"")+" ",1),(n(!0),_(K,null,X(e(S),A=>(n(),_("span",{key:A.id,class:"relative my-1 group"},[a("span",ms,[V(T(A.templateName)+" ",1),t(e(J),{size:"10",class:"ml-1 cursor-pointer text-rcgray-300 hover:text-white",onClick:Z(se=>e(m)(A.id),["stop"])},null,8,["onClick"])])]))),128))]))]),_:1},8,["class","style"])]),_:1}),t(e(re),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:o(()=>[a("div",vs,[t(I,{id:"search",type:"text",modelValue:e(d),"onUpdate:modelValue":r[0]||(r[0]=A=>pe(d)?d.value=A:null),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",ps,[t(i,{name:"search"})])]),t(b),t(e(ie),{class:"h-64"},{default:o(()=>[a("div",fs,[h.value?(n(),N(i,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(n(!0),_(K,{key:1},X(e(j),A=>(n(),_("div",{key:A.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:se=>e(D)(A)},[a("span",_s,[a("span",ys,T(A.templateName),1)])],8,gs))),128))])]),_:1}),t(b),a("div",bs,[t(x,{variant:"ghost",onClick:r[1]||(r[1]=A=>e(l)()),class:"justify-start w-full p-1"},{default:o(()=>[t(i,{name:"plus",class:"w-8"}),r[4]||(r[4]=a("div",{class:"rc-text-xs-muted ml-1"},"Create new record",-1)),t(e(je),null,{default:o(()=>[t(e(Me),null,{default:o(()=>[t(e(Oe),{"as-child":""},{default:o(()=>[a("span",hs,[t(e(Ct),{class:"w-3 h-3 text-muted-foreground"})])]),_:1}),t(e(Pe),{class:"text-white bg-rcgray-800"},{default:o(()=>[...r[3]||(r[3]=[a("p",null,"Navigate to new template page",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),t(qe,{showConfirmCloseAlert:e(p),onHandleClose:e(C),onHandleConfirm:r[2]||(r[2]=A=>y())},null,8,["showConfirmCloseAlert","onHandleClose"])]),_:1})}}}),ws={class:"flex items-center"},ks={class:"ml-2"},Ds={class:"grid gap-2 py-4"},Cs={class:"grid items-center grid-cols-4 gap-2"},$s={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Vs={class:"pl-2 ml-auto"},Ss={class:"rc-kdb-class2"},Is={class:"pl-2 ml-auto"},Es={class:"rc-kdb-class2"},Ts={__name:"VendorAddEditDialog",props:{editId:Number},emits:["save"],setup(g,{emit:E}){const{toastSuccess:w,toastError:k}=ee(),c=te(),{openDialog:p,closeDialog:l,isDialogOpen:C}=c,h=E,$=u([]),S=u({vendorName:""}),d=g;function j(m){m.ctrlKey&&m.key==="Enter"&&D()}Y(()=>{d.editId>0&&z.get(`/api/vendors/${d.editId}`).then(m=>{S.value=m.data}),window.addEventListener("keydown",j)}),fe(()=>{window.removeEventListener("keydown",j)});function D(){let m=d.editId>0?`/${d.editId}`:"",v=d.editId>0?"patch":"post";z[v]("/api/vendors"+m,S.value).then(y=>{h("save",y.data),w("Vendor saved","The vendor has been saved successfully."),l("DialogNewVendor")}).catch(y=>{$.value=y.response.data.errors,k("Error","Failed to save vendor.")})}return(m,v)=>{const y=O("RcIcon"),s=O("Label"),r=O("Input"),i=O("Button");return n(),N(e(De),{open:e(C)("DialogNewVendor")},{default:o(()=>[t(e(be),{"as-child":""}),t(e(he),{class:"w-full p-0",onEscapeKeyDown:v[2]||(v[2]=x=>e(l)("DialogNewVendor")),onPointerDownOutside:v[3]||(v[3]=x=>e(l)("DialogNewVendor")),onCloseClicked:v[4]||(v[4]=x=>e(l)("DialogNewVendor"))},{default:o(()=>[t(e(xe),{class:"rc-dialog-header"},{default:o(()=>[t(e(we),{class:"text-sm text-rcgray-200"},{default:o(()=>[a("div",ws,[t(y,{name:"commands"}),a("span",ks,T(g.editId>0?"Edit":"New")+" Vendor "+T(g.editId>0?"(ID: "+g.editId+")":""),1)])]),_:1})]),_:1}),a("div",Ds,[a("div",Cs,[t(s,{for:"vendorName",class:"text-right"},{default:o(()=>[...v[5]||(v[5]=[V("Vendor Name",-1)])]),_:1}),t(r,{modelValue:S.value.vendorName,"onUpdate:modelValue":v[0]||(v[0]=x=>S.value.vendorName=x),id:"vendorName",class:"col-span-3"},null,8,["modelValue"]),$.value.vendorName?(n(),_("span",$s,T($.value.vendorName[0]),1)):P("",!0)])]),t(e(ke),{class:"rc-dialog-footer bg-rcgray-800"},{default:o(()=>[t(i,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:v[1]||(v[1]=x=>e(l)("DialogNewVendor")),size:"sm"},{default:o(()=>[...v[6]||(v[6]=[V(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),d.editId===0?(n(),N(i,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:D,variant:"primary"},{default:o(()=>[v[8]||(v[8]=V(" Save ",-1)),a("div",Vs,[a("kbd",Ss,[v[7]||(v[7]=V(" Ctrl  ",-1)),t(y,{name:"enter",class:"ml-1"})])])]),_:1})):(n(),N(i,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:D,variant:"primary"},{default:o(()=>[v[10]||(v[10]=V(" Update ",-1)),a("div",Is,[a("kbd",Es,[v[9]||(v[9]=V(" Ctrl  ",-1)),t(y,{name:"enter",class:"ml-1"})])])]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"])}}};function js(){const g=u(1),E=Ue(),w=u(E.get("useVendors","perPage",10)),k=u("-id"),c=u(""),p=u({}),l=te(),C=u(0),h=u(!1),$=u(1),S=u(1),d=u([]),j=u(!1),{openDialog:D}=l,{toastSuccess:m,toastError:v}=ee(),{reload:y}=Re(r),{toggleSort:s}=Ae(k,r,"useVendors");async function r(L={}){h.value=!0;try{const U=await z.get("/api/vendors",{params:{page:g.value,perPage:w.value,sort:k.value,...p.value}});d.value=U.data,$.value=U.data.last_page}catch(U){console.error("Error fetching vendors:",U),v("Error","Failed to fetch vendors.")}finally{h.value=!1}}const i=L=>{C.value=0,S.value=Math.random(),D("DialogNewVendor")};function x(L){C.value=L,S.value=Math.random(),D("DialogNewVendor")}const I=async L=>{try{await z.delete(`/api/vendors/${L}`),r(),m("Vendor Deleted","The vendor has been deleted successfully.")}catch(U){U.status===422?v("Error",U.response.data.message):(console.error("Error deleting Command:",U),v("Error","Failed to delete Command."))}},b=async L=>{try{await z.post("/api/vendors/delete-many",{ids:L}),r(),m("Vendors Deleted","The vendors have been deleted successfully."),j.value=!1,Ke.emit("deleteManyVendorsSuccess")}catch(U){U.status===422?v("Error",U.response.data.message):(console.error("Error deleting Commands:",U),v("Error","Failed to delete Commands.")),j.value=!1}},A=L=>{C.value=L,S.value=Math.random(),D("DialogNewVendor")},se=()=>{r(),S.value=Math.random()};function _e(L){L.altKey&&L.key==="n"&&(L.preventDefault(),D("DialogNewVendor"))}const W=Ne(()=>{p.value["filter[q]"]=c.value,g.value=1,r()},500);return R(g,()=>{r()}),R(c,()=>{W()}),R(w,L=>{E.set("useVendors","perPage",L),r()}),{reload:y,vendors:d,isLoading:h,currentPage:g,perPage:w,lastPage:$,editId:C,newVendorModalKey:S,searchTerm:c,openDialog:D,fetchVendors:r,createVendor:i,updateVendor:x,deleteVendor:I,deleteManyVendors:b,handleSave:se,handleKeyDown:_e,viewEditDialog:A,toggleSort:s,sortParam:k,showConfirmDelete:j}}const Ms={key:0},Os={key:1,class:"flex items-center justify-start w-full"},Ps={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},Ns={class:"relative items-center w-full"},Bs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},zs={class:"py-1"},Ls=["onClick"],Fs={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},qs={"data-size":"20"},Us={class:"p-1 border-5"},As=me({__name:"VendorMultiSelect",props:{modelValue:{type:[Array,Object],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select a vendor"}},emits:["update:modelValue"],setup(g,{emit:E}){const w=E,k=u([]),{createVendor:c,newVendorModalKey:p,handleSave:l}=js(),C=u(!0),h=g,{selectedItems:$,searchTerm:S,filteredItems:d,selectItem:j,deleteItem:D}=ge({items:k,modelValue:h.modelValue,singleSelect:h.singleSelect,displayField:"vendorName",searchFields:["vendorName"],emit:w});Y(()=>{m()}),R(p,()=>{m()});function m(){C.value=!0,z.get("/api/vendors/?perPage=10000&sort=vendorName").then(v=>{k.value=v.data.data,C.value=!1})}return(v,y)=>{const s=O("RcIcon"),r=O("Button"),i=O("Input"),x=O("Separator");return n(),N(e(ce),null,{default:o(()=>[t(e(de),{class:"col-span-3"},{default:o(()=>[t(r,{variant:"ghost",class:ne(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",e($).length===0?"text-muted-foreground":" "]),style:ve(e($).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:o(()=>[C.value?(n(),_("span",Ms,"Loading vendors...")):(n(),_("div",Os,[t(s,{name:"vendor",class:"mx-2"}),V(" "+T(e($).length===0?"Selected a vendor":"")+" ",1),(n(!0),_(K,null,X(e($),I=>(n(),_("span",{key:I.id,class:"relative my-1 group"},[a("span",Ps,[V(T(I.vendorName)+" ",1),t(e(J),{size:"10",class:"ml-1 cursor-pointer text-rcgray-300 hover:text-white",onClick:Z(b=>e(D)(I.id),["stop"])},null,8,["onClick"])])]))),128))]))]),_:1},8,["class","style"])]),_:1}),t(e(re),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:o(()=>[a("div",Ns,[t(i,{id:"search",type:"text",modelValue:e(S),"onUpdate:modelValue":y[0]||(y[0]=I=>pe(S)?S.value=I:null),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Bs,[t(s,{name:"search"})])]),t(x),t(e(ie),{class:"h-64"},{default:o(()=>[a("div",zs,[C.value?(n(),N(s,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(n(!0),_(K,{key:1},X(e(d),I=>(n(),_("div",{key:I.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:b=>e(j)(I)},[a("span",Fs,[a("span",qs,T(I.vendorName),1)])],8,Ls))),128))])]),_:1}),t(x),a("div",Us,[t(r,{variant:"ghost",onClick:y[1]||(y[1]=I=>e(c)()),class:"justify-start w-full p-1"},{default:o(()=>[t(s,{name:"plus",class:"w-8"}),y[3]||(y[3]=a("div",{class:"rc-text-xs-muted ml-1"},"Create new record",-1))]),_:1})])]),_:1}),(n(),N(Ts,{onSave:y[2]||(y[2]=I=>e(l)()),key:e(p),editId:0}))]),_:1})}}});function Rs(g,E,w){const k=te(),c=u(!1),p=u(!1),{closeDialog:l,isDialogOpen:C}=k,{toastSuccess:h,toastError:$}=ee(),S=u([]),d=u({device_name:"",device_ip:"",device_port_override:"",device_cred_id:0,device_cred:[],device_vendor:[],device_model:"",selectedVendorObj:[],selectedCategoryObj:[],selectedModelObj:[],selectedTemplateObj:[],device_category_id:0,selectedTagObj:[],device_username:"",device_password:"",device_enable_password:"",device_template:[],device_main_prompt:"",device_enable_prompt:""});Y(()=>{g>0&&(c.value=!0,z.get(`/api/devices/${g}`).then(r=>{d.value.device_name=w?`${r.data.device_name}-Clone`:r.data.device_name,d.value.device_ip=w?`${r.data.device_ip}-Clone`:r.data.device_ip,d.value.device_port_override=r.data.device_port_override,d.value.device_model=r.data.device_model,d.value.device_category_id=r.data.device_category_id,d.value.device_username=r.data.device_username,d.value.device_password=r.data.device_password,d.value.device_enable_password=r.data.device_enable_password,d.value.device_main_prompt=r.data.device_main_prompt,d.value.device_enable_prompt=r.data.device_enable_prompt,d.value.device_cred_id=r.data.device_cred_id,d.value.device_cred=r.data.device_cred_name||[],d.value.selectedVendorObj=r.data.vendor[0],d.value.selectedTemplateObj=r.data.template[0],d.value.selectedCategoryObj=r.data.category[0],d.value.selectedModelObj={id:1,name:r.data.device_model},r.data.tag.forEach(i=>d.value.selectedTagObj.push(i)),c.value=!1})),window.addEventListener("keydown",j)}),fe(()=>{window.removeEventListener("keydown",j)});function j(r){r.ctrlKey&&r.key==="Enter"&&D()}function D(){Object.keys(d.value.selectedVendorObj).length>0&&(d.value.device_vendor=d.value.selectedVendorObj.id),Object.keys(d.value.selectedCategoryObj).length>0&&(d.value.device_category_id=d.value.selectedCategoryObj.id),Object.keys(d.value.selectedModelObj).length>0&&(d.value.device_model=d.value.selectedModelObj.name),Object.keys(d.value.selectedTemplateObj).length>0&&(d.value.device_template=d.value.selectedTemplateObj.id),Object.keys(d.value.selectedTagObj).length>0&&(d.value.device_tags=d.value.selectedTagObj.map(x=>x.id));let r=g>0?`/${g}`:"",i=g>0?"patch":"post";w===!0&&(r="",i="post"),z[i]("/api/devices"+r,d.value).then(x=>{E("save",x.data),h("Device saved","The device has been saved successfully."),l("DialogNewDevice")}).catch(x=>{var I,b;x.response&&x.response.data&&$("Error","There was an error saving the device."),x.response&&x.response.status===500&&$("Server Error",x.response.data.message),S.value=((b=(I=x.response)==null?void 0:I.data)==null?void 0:b.errors)||[]})}function m(){d.value.device_main_prompt=d.value.device_name+"#",d.value.device_enable_prompt=d.value.device_name+">"}function v(){p.value=!0}function y(){p.value=!1}function s(){p.value=!1,E("close"),l("DialogNewDevice")}return{errors:S,isLoading:c,model:d,showConfirmCloseAlert:p,cancelCloseDialog:y,confirmCloseDialog:s,generatePrompts:m,isDialogOpen:C,saveDialog:D,showConfirmCloseDialog:v}}const Ks={class:"flex items-center"},Hs={class:"ml-2"},Gs={key:0},Qs={key:0},Xs={class:"text-muted-foreground"},Ys={key:0,class:"grid gap-6 px-4"},Js={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Ws={class:"flex flex-col"},Zs={key:0,class:"text-red-400 text-sm"},el={class:"flex flex-row space-x-4"},tl={class:"flex flex-col w-1/2"},sl={key:0,class:"text-red-400 text-sm"},ll={class:"flex flex-col w-1/2"},al={key:1,class:"text-red-400 text-sm"},ol={key:2,class:"text-red-400 text-sm"},nl={key:3,class:"text-red-400 text-sm"},dl={key:4,class:"text-red-400 text-sm"},rl={class:"flex flex-col"},il={key:0,class:"text-sm text-muted-foreground"},cl={class:"flex w-full max-w-full items-center gap-1.5"},ul={key:0,class:"text-red-400 text-sm"},ml={key:3,class:"text-red-400 text-sm"},vl={key:6,class:"text-red-400 text-sm"},pl={key:7,class:"text-red-400 text-sm"},fl={key:8,class:"text-red-400 text-sm"},gl={key:9,class:"text-red-400 text-sm"},_l={class:"pl-2 ml-auto"},yl={class:"rc-kdb-class2"},bl={class:"pl-2 ml-auto"},hl={class:"rc-kdb-class2"},Tl={__name:"DeviceAddEditDialog",props:{editId:Number,isClone:{type:Boolean,default:!1}},emits:["save","close"],setup(g,{emit:E}){const w=g,k=E,{errors:c,isLoading:p,model:l,showConfirmCloseAlert:C,cancelCloseDialog:h,confirmCloseDialog:$,generatePrompts:S,isDialogOpen:d,saveDialog:j,showConfirmCloseDialog:D}=Rs(w.editId,k,w.isClone);function m(y){if(y.length===0){l.value.device_cred=[],l.value.device_cred_id=0;return}l.value.device_cred=y,l.value.device_cred_id=y.id,l.value.device_username=y.cred_username,l.value.device_password="",l.value.device_enable_password=""}function v(){l.value.device_cred=null,l.value.device_cred_id=0,l.value.device_username="",l.value.device_password="",l.value.device_enable_password=""}return(y,s)=>{const r=O("RcIcon"),i=O("Label"),x=O("Input"),I=O("Button");return n(),_(K,null,[t(e(De),{open:e(d)("DialogNewDevice")},{default:o(()=>[t(e(be),{"as-child":""}),t(e(he),{onInteractOutside:s[16]||(s[16]=b=>e(D)()),onPointerDownOutside:s[17]||(s[17]=b=>e(D)()),class:"p-0 sm:max-w-7xl",onEscapeKeyDown:s[18]||(s[18]=b=>e(D)()),onCloseClicked:s[19]||(s[19]=b=>e(D)())},{default:o(()=>[t(e(xe),{class:"rc-dialog-header"},{default:o(()=>[t(e(we),{class:"text-sm text-rcgray-200"},{default:o(()=>[a("div",Ks,[t(r,{name:"device"}),a("span",Hs,[V(T(g.editId===0?g.isClone?"":"Add":g.isClone?"Clone":"Edit")+" Device ",1),g.editId>0&&!g.isClone?(n(),_("span",Gs,"(ID: "+T(g.editId)+")",1)):P("",!0)]),e(l).device_name?(n(),_("span",Qs,[s[20]||(s[20]=V(" :   ",-1)),a("span",Xs,T(e(l).device_name),1)])):P("",!0)])]),_:1})]),_:1}),t(e(ie),{class:"min-h-96 xl:h-auto"},{default:o(()=>[e(p)?(n(),N(ut,{key:0})):P("",!0),t(Se,{name:"fade"},{default:o(()=>[e(p)?P("",!0):(n(),_("div",Ys,[a("div",null,[a("div",Js,[a("div",Ws,[s[28]||(s[28]=a("h3",{class:"text-lg font-semibold border-b"},"Device Information",-1)),t(i,{for:"device_name",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[21]||(s[21]=[V(" Device Name ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(x,{modelValue:e(l).device_name,"onUpdate:modelValue":s[0]||(s[0]=b=>e(l).device_name=b),id:"device_name",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(c).device_name?(n(),_("span",Zs,T(e(c).device_name[0]),1)):P("",!0),a("div",el,[a("div",tl,[t(i,{for:"device_ip",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[22]||(s[22]=[V(" IP Address ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(x,{modelValue:e(l).device_ip,"onUpdate:modelValue":s[1]||(s[1]=b=>e(l).device_ip=b),id:"device_ip",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(c).device_ip?(n(),_("span",sl,T(e(c).device_ip[0]),1)):P("",!0)]),a("div",ll,[t(i,{for:"device_port_override",class:"mt-4 mb-1 font-light"},{default:o(()=>[s[23]||(s[23]=V(" Port ",-1)),t(ye,{title:"Device Port",content:"Set the connection port specific to this device. It overrides the value set in the connection template. Leave empty otherwise."})]),_:1}),t(x,{modelValue:e(l).device_port_override,"onUpdate:modelValue":s[2]||(s[2]=b=>e(l).device_port_override=b),id:"device_port_override",type:"number",autocomplete:"off",class:"w-full"},null,8,["modelValue"])])]),t(i,{for:"vector",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[24]||(s[24]=[V(" Vendor ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(As,{singleSelect:!0,modelValue:e(l).selectedVendorObj,"onUpdate:modelValue":s[3]||(s[3]=b=>e(l).selectedVendorObj=b),id:"selectedVendorObj",class:"w-full"},null,8,["modelValue"]),e(c).device_vendor?(n(),_("span",al,T(e(c).device_vendor[0]),1)):P("",!0),t(i,{for:"device_category_id",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[25]||(s[25]=[V(" Command Group ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(yt,{modelValue:e(l).selectedCategoryObj,"onUpdate:modelValue":s[4]||(s[4]=b=>e(l).selectedCategoryObj=b),id:"selectedCategoryObj",singleSelect:!0,class:"w-full"},null,8,["modelValue"]),e(c).device_category_id?(n(),_("span",ol,T(e(c).device_category_id[0]),1)):P("",!0),t(i,{for:"device_model",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[26]||(s[26]=[V(" Model ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(ls,{singleSelect:!0,modelValue:e(l).selectedModelObj,"onUpdate:modelValue":s[5]||(s[5]=b=>e(l).selectedModelObj=b),id:"selectedModelObj",class:"w-full"},null,8,["modelValue"]),e(c).device_model?(n(),_("span",nl,T(e(c).device_model[0]),1)):P("",!0),t(i,{for:"selectedTagObj",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[27]||(s[27]=[V(" Tags ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(bt,{modelValue:e(l).selectedTagObj,"onUpdate:modelValue":s[6]||(s[6]=b=>e(l).selectedTagObj=b),id:"selectedTagObj",class:"w-full"},null,8,["modelValue"]),e(c).device_tags?(n(),_("span",dl,T(e(c).device_tags[0]),1)):P("",!0)]),a("div",rl,[s[38]||(s[38]=a("h3",{class:"text-lg font-semibold border-b"},"Connection Information",-1)),t(i,{for:"device_username",class:"mt-4 mb-1 font-light"},{default:o(()=>[s[29]||(s[29]=V(" Username ",-1)),s[30]||(s[30]=a("span",{class:"text-red-400"},"*",-1)),e(l).device_cred_id!=0?(n(),_("span",il,"- Credential set selected")):P("",!0)]),_:1}),a("div",cl,[t(x,{disabled:e(l).device_cred_id!=0,modelValue:e(l).device_username,"onUpdate:modelValue":s[7]||(s[7]=b=>e(l).device_username=b),id:"device_username",class:"flex-grow w-2/3"},null,8,["disabled","modelValue"]),e(l).device_cred?(n(),N(Nt,{key:0,modelValue:e(l).device_cred,"onUpdate:modelValue":s[8]||(s[8]=b=>m(b)),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):P("",!0),t(e(je),null,{default:o(()=>[t(e(Me),null,{default:o(()=>[t(e(Oe),{"as-child":""},{default:o(()=>[t(I,{type:"button",variant:"ghost",onClick:v,class:"p-1.5 ml-1",disabled:e(l).device_cred_id===0},{default:o(()=>[t(e(J),{class:"text-muted-foreground",size:"12"})]),_:1},8,["disabled"])]),_:1}),t(e(Pe),null,{default:o(()=>[...s[31]||(s[31]=[V("Remove Device Credentials",-1)])]),_:1})]),_:1})]),_:1})]),e(c).device_username?(n(),_("span",ul,T(e(c).device_username[0]),1)):P("",!0),e(l).device_cred_id===0?(n(),N(i,{key:1,for:"device_password",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[32]||(s[32]=[V(" Password ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1})):P("",!0),e(l).device_cred_id===0?(n(),N(e(Ie),{key:2,modelValue:e(l).device_password,"onUpdate:modelValue":s[9]||(s[9]=b=>e(l).device_password=b),id:"device_password",class:"w-full"},null,8,["modelValue"])):P("",!0),e(c).device_password?(n(),_("span",ml,T(e(c).device_password[0]),1)):P("",!0),e(l).device_cred_id===0?(n(),N(i,{key:4,for:"device_enable_password",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[33]||(s[33]=[V("Enable Password",-1)])]),_:1})):P("",!0),e(l).device_cred_id===0?(n(),N(e(Ie),{key:5,modelValue:e(l).device_enable_password,"onUpdate:modelValue":s[10]||(s[10]=b=>e(l).device_enable_password=b),id:"device_enable_password",class:"w-full"},null,8,["modelValue"])):P("",!0),e(c).device_enable_password?(n(),_("span",vl,T(e(c).device_enable_password[0]),1)):P("",!0),t(i,{for:"device_template",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[34]||(s[34]=[V(" Template ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(xs,{singleSelect:!0,modelValue:e(l).selectedTemplateObj,"onUpdate:modelValue":s[11]||(s[11]=b=>e(l).selectedTemplateObj=b),id:"selectedTemplateObj",class:"w-full"},null,8,["modelValue"]),e(c).device_template?(n(),_("span",pl,T(e(c).device_template[0]),1)):P("",!0),t(i,{for:"main_prompt",class:"mt-4 mb-1 font-light"},{default:o(()=>[s[35]||(s[35]=V(" Main Prompt ",-1)),t(ye,{title:"Device Main Prompt",content:"This is the 'Privileged EXEC' prompt. You will run show commands from this prompt and you can access configure mode. Usually 'router1#'"})]),_:1}),t(x,{modelValue:e(l).device_main_prompt,"onUpdate:modelValue":s[12]||(s[12]=b=>e(l).device_main_prompt=b),id:"device_main_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(c).device_main_prompt?(n(),_("span",fl,T(e(c).device_main_prompt[0]),1)):P("",!0),t(i,{for:"enable_prompt",class:"mt-4 mb-1 font-light"},{default:o(()=>[s[36]||(s[36]=V(" Enable Prompt ",-1)),t(ye,{title:"Device Main Prompt",content:"This is the 'User EXEC' prompt. The first level of access prompt. Usually 'router1>'"})]),_:1}),t(x,{modelValue:e(l).device_enable_prompt,"onUpdate:modelValue":s[13]||(s[13]=b=>e(l).device_enable_prompt=b),id:"device_enable_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),a("button",{class:"flex items-center p-2 text-sm text-left rounded-lg pf-c-button pf-m-link pf-m-inline hover:bg-rcgray-800 max-w-fit text-muted-foreground hover:text-gray-200",type:"button",onClick:s[14]||(s[14]=b=>e(S)())},[t(e(wt),{class:"w-4 h-4 mr-1 text-gray-500",size:"16"}),s[37]||(s[37]=V(" Auto-generate prompts ",-1))]),e(c).device_enable_prompt?(n(),_("span",gl,T(e(c).device_enable_prompt[0]),1)):P("",!0)])])])]))]),_:1})]),_:1}),t(Se,{name:"fade"},{default:o(()=>[e(p)?P("",!0):(n(),N(e(ke),{key:0,class:"rc-dialog-footer bg-rcgray-800"},{default:o(()=>[t(I,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[15]||(s[15]=b=>e(D)()),size:"sm"},{default:o(()=>[...s[39]||(s[39]=[V(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),w.editId===0||w.isClone?(n(),N(I,{key:0,type:"button",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e(j),variant:"primary"},{default:o(()=>[s[41]||(s[41]=V(" Save ",-1)),a("div",_l,[a("kbd",yl,[s[40]||(s[40]=V(" Ctrl  ",-1)),t(e(Ee),{class:"ml-1",size:"16"})])])]),_:1},8,["onClick"])):(n(),N(I,{key:1,type:"button",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e(j),variant:"primary"},{default:o(()=>[s[43]||(s[43]=V(" Update ",-1)),a("div",bl,[a("kbd",hl,[s[42]||(s[42]=V(" Ctrl  ",-1)),t(e(Ee),{class:"ml-1",size:"16"})])])]),_:1},8,["onClick"]))]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"]),t(qe,{showConfirmCloseAlert:e(C),onHandleClose:e(h),onHandleConfirm:e($)},null,8,["showConfirmCloseAlert","onHandleClose","onHandleConfirm"])],64)}}};function jl(){const g=u(1),E=Ue(),w=u(E.get("useDevices","perPage",10)),k=u("-id"),c=u(""),p=u({}),l=te(),C=u(0),h=u(!1),$=u(1),S=u(0),d=u(1),j=u(1),D=u([]),m=u(!1),v=u([]),y=u([]),s=u([]),r=u([]),i=u([]),x=Te(),I=Be("formatters"),b=u(!1),A=u(null),{reload:se}=Re(q),{toggleSort:_e}=Ae(k,q,"useDevices"),W=u(!1),L=u(!0),U=u(1),H=u(!1),le=u(null),{openDialog:ae}=l,{toastSuccess:G,toastError:Q}=ee(),He=f=>{f>=1e7?(H.value=!0,le.value=f,U.value=1,L.value=!0):(H.value=!1,le.value=null)};async function q(f={},M=!1){if(M?W.value=!0:(h.value=!0,U.value=1,L.value=!0),v.value.length>0){const B=v.value.map(F=>F.id);p.value["filter[status]"]=B.join(",")}try{const B=M?U.value:g.value,F=await z.get("/api/devices",{params:{page:B,perPage:w.value,sort:k.value,loadMore:H.value,...p.value}});M?(D.value=[...D.value,...F.data.data],U.value++):D.value=F.data.data,$.value=F.data.last_page,L.value=B<F.data.last_page,S.value=F.data.total}catch(B){console.error("Error fetching devices:",B),Q("Error","Failed to fetch devices.")}finally{h.value=!1,W.value=!1}}function Ge(){b.value=!0,z.get("/api/device/inventory/export/").then(f=>{const M=f.data.data.downloadLink,B=document.createElement("div");B.innerHTML=M;const F=B.querySelector("a");if(!F||!F.href)throw new Error("Download link not found in response.");const it=F.href,oe=document.createElement("a");oe.href=it,oe.setAttribute("download","inventory_report.csv"),document.body.appendChild(oe),oe.click(),oe.remove(),b.value=!1,G("Export Successful","The inventory report has been successfully exported.")}).catch(f=>{b.value=!1,Q("Error","Failed to export inventory report."),console.error("Error exporting inventory report:",f)})}const Qe=async()=>{!L.value||W.value||await q({},!0)},Xe=f=>{C.value=0,d.value=Math.random(),ae("DialogNewDevice")};function Ye(){j.value=Math.random(),ae("DeviceBulkEditDialog")}const Je=async f=>{try{await z.delete(`/api/devices/${f}`),q(),G("Device Deleted","The device has been deleted successfully.")}catch(M){console.error("Error deleting device:",M),Q("Error","Failed to delete device.")}},We=async f=>{try{await z.post("/api/devices/delete-many",{ids:f}),q(),G("Devices Deleted","The devices have been deleted successfully."),m.value=!1,Ke.emit("deleteManyDevicesSuccess")}catch(M){console.error("Error deleting devices:",M),Q("Error","Failed to delete devices."),m.value=!1}},Ce=async(f,M=!0)=>{try{await z.get(`/api/device/disable/${f}`),M&&q(),G("Device Disabled","The device has been disabled successfully.")}catch(B){console.error("Error disabling device:",B),Q("Error","Failed to disable device.")}},$e=async(f,M=!0)=>{try{await z.get(`/api/device/enable/${f}`),M&&q(),G("Device Enabled","The device has been enabled successfully.")}catch(B){console.error("Error enabling device:",B),Q("Error","Failed to enable device.")}},Ze=async f=>{try{f.forEach(async M=>{Ce(M,!1)}),setTimeout(()=>{q()},1e3),G("Devices Disabled","The devices have been disabled successfully.")}catch(M){console.error("Error disabling devices:",M),Q("Error","Failed to disable devices.")}},et=async f=>{try{f.forEach(async M=>{$e(M,!1)}),setTimeout(()=>{q()},1e3),G("Devices Enabled","The devices have been enabled successfully.")}catch(M){console.error("Error enabling devices:",M),Q("Error","Failed to enable devices.")}},tt=async f=>{try{const M=await z.post("/api/device/download-many",{device_ids:f});G("Download Queued","The download job for the selected devices has been queued successfully."),G("Download Queued","Check the download status in the Queue Manager.")}catch(M){console.error("Error downloading devices:",M),Q("Error","Failed to download devices.")}},st=f=>{C.value=f,d.value=Math.random(),ae("DialogNewDevice")},lt=()=>{q(),d.value=Math.random()};function at(f){f.altKey&&f.key==="n"&&(f.preventDefault(),ae("DialogNewDevice"))}const ot=Ne(()=>{p.value["filter[q]"]=c.value,g.value=1,q()},500);R([g],()=>{H.value||q()}),R(w,(f,M)=>{if(f>=1e7&&!H.value){H.value=!0,le.value=f,E.set("useDevices","perPage",1e7),(()=>{E.set("useDevices","perPage",50),localStorage.setItem("DevicePerPage","50")})();return}f<1e7&&H.value&&le.value!==null&&(f!==50||M<1e7)&&(H.value=!1,le.value=null,E.set("useDevices","perPage",f)),(!H.value||f<1e7&&f!==50)&&E.set("useDevices","perPage",f),f>=1e7&&!H.value||q()}),R(c,()=>{ot()}),R(v,(f,M)=>{if(f&&f.length>0){const B=f.map(F=>F.id);p.value["filter[status]"]=B.join(",")}else delete p.value["filter[status]"];q()},{deep:!0}),R(y,(f,M)=>{if(f&&f.length>0){const B=f.map(F=>F.id);p.value["filter[category]"]=B.join(",")}else delete p.value["filter[category]"];q()},{deep:!0}),R(s,(f,M)=>{if(f&&f.length>0){const B=f.map(F=>F.id);p.value["filter[tag]"]=B.join(",")}else delete p.value["filter[tag]"];q()},{deep:!0}),R(r,(f,M)=>{if(f&&f.length>0){const B=f.map(F=>F.id);p.value["filter[vendor]"]=B.join(",")}else delete p.value["filter[vendor]"];q()},{deep:!0}),R(i,(f,M)=>{if(f&&f.length>0){const B=f.map(F=>F.name);p.value["filter[device_model]"]=B.join(",")}else delete p.value["filter[device_model]"];q()},{deep:!0});function nt(){p.value={},v.value=[],y.value=[],s.value=[],r.value=[],i.value=[],c.value="",q()}function dt(f){x.push({name:"device-view",params:{id:parseInt(f)}})}const Ve=parseInt(localStorage.getItem("DevicePerPage")||"10");Ve>=1e7&&He(Ve);function rt(){ae("SendSnippetModal")}return{devices:D,currentPage:g,perPage:w,lastPage:$,totalRecords:S,isLoading:h,isLoadingMore:W,hasMoreData:L,isLoadMoreMode:H,showConfirmDelete:m,editId:C,newDeviceModalKey:d,newBulkEditModalKey:j,searchTerm:c,filterStatus:v,filterCategories:y,filterTags:s,filterVendor:r,filterModel:i,sortParam:k,formatters:I,inventoryIsLoading:b,downloadLink:A,createDevice:Xe,deleteDevice:Je,deleteManyDevices:We,disableDevice:Ce,enableDevice:$e,exportInventoryReport:Ge,handleKeyDown:at,handleSave:lt,reload:se,viewDeviceDetailsPane:dt,viewEditDialog:st,openBulkEditDialog:Ye,disableManyDevices:Ze,enableManyDevices:et,downloadManyDevices:tt,openSendSnippetModal:rt,fetchDevices:q,loadMoreDevices:Qe,clearFilters:nt,toggleSort:_e}}const Ml={__name:"ToggleGroup",props:{rovingFocus:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},orientation:{type:String,required:!1},dir:{type:String,required:!1},loop:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},type:{type:null,required:!1},modelValue:{type:null,required:!1},defaultValue:{type:null,required:!1},class:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1}},emits:["update:modelValue"],setup(g,{emit:E}){const w=g,k=E;mt("toggleGroup",{variant:w.variant,size:w.size});const c=ze(()=>{const{class:l,...C}=w;return C}),p=vt(c,k);return(l,C)=>(n(),N(e(pt),Le(e(p),{class:e(Fe)("flex items-center justify-center gap-1",w.class)}),{default:o(()=>[ue(l.$slots,"default")]),_:3},16,["class"]))}},xl=ft("inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent shadow-sm hover:bg-accent hover:text-accent-foreground"},size:{default:"h-9 px-3",sm:"h-8 px-2",lg:"h-10 px-3"}},defaultVariants:{variant:"default",size:"default"}}),Ol={__name:"ToggleGroupItem",props:{value:{type:String,required:!0},defaultValue:{type:Boolean,required:!1},pressed:{type:Boolean,required:!1},disabled:{type:Boolean,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1},variant:{type:null,required:!1},size:{type:null,required:!1}},setup(g){const E=g,w=Be("toggleGroup"),k=ze(()=>{const{class:p,variant:l,size:C,...h}=E;return h}),c=gt(k);return(p,l)=>{var C,h;return n(),N(e(_t),Le(e(c),{class:e(Fe)(e(xl)({variant:((C=e(w))==null?void 0:C.variant)||g.variant,size:((h=e(w))==null?void 0:h.size)||g.size}),E.class)}),{default:o(()=>[ue(p.$slots,"default")]),_:3},16,["class"])}}};function Pl(g){const{toastSuccess:E,toastError:w}=ee(),k=te(),{openDialog:c}=k,p=u(!1),l=u(!1),C=u([]),h=u("");u(null);const $=u(!1),S=u([]),d=u(!1),j=u(""),D=u("");function m(){p.value=!0,z.get("/api/import-github-templates").then(i=>{E("Templates imported from github successfully")}).catch(i=>{w("Error importing templates from github")}),setTimeout(()=>{p.value=!1},1e3)}R(h,()=>{h.value!==""&&s(h.value)}),R(j,()=>{j.value!==null&&r(j.value)});function v(){c("DialogTemplateImport")}function y(){p.value=!0,z.get("/api/list-template-repo-folders").then(i=>{C.value=i.data.data,l.value=!0,p.value=!1}).catch(i=>{console.log(i),i.response.data.message.msg==='rConfig-templates is empty, or does not exist. Clone from "https://github.com/rconfig/rconfig-templates" may have failed! Try importing the templates again.!'?l.value=!1:w("Error getting vendor templates"),p.value=!1})}function s(i){$.value=!1,d.value=!1,z.post("/api/list-repo-folders-contents",{directory:i}).then(x=>{S.value=x.data.data,$.value=!0,typeof x.data.data.readme<"u"&&(d.value=!0)}).catch(x=>{console.log(x),w("Error getting file list")})}function r(i){z.post("/api/get-template-file-contents",{filepath:i}).then(x=>{D.value=x.data.data.data.code}).catch(x=>{w("Error getting file contents")})}return{fileOptionSelected:j,getTemplateFileContents:r,getTemplateRepoFolders:y,getTemplatesList:s,hasReadmeFile:d,hasVendorTemplateOptions:l,importTemplates:m,importingTemplates:p,listedFiles:S,openImportDialog:v,selectedTemplateCode:D,showFileOptions:$,vendorOptionSelected:h,vendorTemplateOptions:C}}export{Tl as _,Ml as a,Ol as b,Pl as c,ls as d,As as e,xs as f,js as g,Ts as h,jl as u};
