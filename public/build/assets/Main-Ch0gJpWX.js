import{j as Ue,aU as At,o as n,e as m,u as e,di as Bt,aR as Ft,aS as Lt,w as s,m as xt,g as re,ad as oe,ar as Q,ae as _e,r as K,b as l,ag as kt,ah as Ne,ai as Ae,a,t as L,d as f,c as N,E as S,an as Be,ao as Fe,K as V,aJ as ye,ak as ee,al as ne,aq as De,X as ae,aK as Qe,aL as te,aM as se,dj as _t,n as Ce,q as bt,k as wt,l as ht,p as $t,bM as zt,ap as Ct,bm as et,bn as tt,bo as fe,au as Ot,bI as jt,i as Kt,bJ as ct,cC as Dt,cD as St,bK as qt,bq as lt,b9 as Le,at as de,bb as ze,aA as Ze,df as We,aG as Oe,bc as je,_ as st,dk as Gt,bi as Vt,dl as Ht,cz as mt,C as Jt,aE as Xt,aj as Yt,aC as Ye,bf as Zt,bg as Wt,c6 as Qt,cA as el,dm as tl,dn as gt,bG as ll,dp as sl,ay as yt,aB as al,dh as nl,cV as ol,dq as dl}from"./app-DTbHGiGB.js";import{u as be,a as at,i as nt,k as ot,j as xe,l as Se,_ as Ve,b as ce,c as X,d as Pe,e as Ie,f as H,m as Ke,n as Ee,g as Me,h as Re,o as he,p as Te,q as ge,r as rl}from"./useRowSelection-BzkL5dsX.js";import{_ as $e}from"./BadgeList-CAM3rV1A.js";import{_ as pt,b as il,c as ul,a as cl}from"./TagMultiSelect-DzoHSUiI.js";import{S as He}from"./Spinner-CBq_y1PE.js";import{_ as qe,u as ml}from"./useCopy-D-1TQTOE.js";import{_ as pl}from"./RcToolTip.vue_vue_type_script_setup_true_lang-BoQ6aw6B.js";import{b as vl,c as fl,d as gl,e as yl,u as xl,_ as kl,a as _l,f as bl,g as wl}from"./useTemplatesGithub-TVhlQ0gG.js";import{_ as hl,a as $l,b as Cl,c as Dl,d as Sl}from"./SelectScrollDownButton-B2IB2tZJ.js";/* empty css               */import"./HoverCardTrigger-BEt43Di4.js";import"./useCredentials-D3G7Kd8C.js";import"./AlertInfo.vue_vue_type_style_index_0_scoped_c93aa73f_lang-C3NQ2GB1.js";const Vl=Ue({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(k){const B=k,b=re(()=>{const{class:$,...o}=B;return o}),h=At(b);return($,o)=>(n(),m(e(Bt),Ft(e(h),{class:e(Lt)("px-2 py-1.5 text-sm font-semibold",k.inset&&"pl-8",B.class)}),{default:s(()=>[xt($.$slots,"default")]),_:3},16,["class"]))}}),Pl={class:"flex items-center"},Il={class:"ml-2"},El={class:"grid gap-2 p-4"},Ml={class:"grid items-center grid-cols-4 gap-2"},Rl={key:0,class:"col-span-3"},Tl={key:2,class:"col-span-3 col-start-2 text-sm text-red-400"},Ul={class:"grid items-center grid-cols-4 gap-2"},Nl={key:0,class:"col-span-3"},Al={class:"grid items-center grid-cols-4 gap-2"},Bl={key:0,class:"col-span-3"},Fl={key:2,class:"col-span-3 col-start-2 text-sm text-red-400"},Ll={class:"pl-2 ml-auto"},zl={class:"rc-kdb-class2"},Ol={__name:"CommandAddEditDialog",props:{editId:Number},emits:["save"],setup(k,{emit:B}){const{toastSuccess:b}=ye(),h=be(),{openDialog:$,closeDialog:o,isDialogOpen:T}=h,g=B,_=V([]),M=V(!1),w=V({command:"",description:"",category:[]}),U=k;function x(p){p.ctrlKey&&p.key==="Enter"&&v()}oe(()=>{U.editId>0&&(M.value=!0,Q.get(`/api/commands/${U.editId}`).then(p=>{w.value=p.data,w.value.categoryArray=p.data.category.map(c=>c.id)}).catch(p=>{console.error("Error loading command:",p)}).finally(()=>{M.value=!1})),window.addEventListener("keydown",x)}),_e(()=>{window.removeEventListener("keydown",x)});function v(){const p=U.editId>0?`/${U.editId}`:"",c=U.editId>0?"patch":"post";Q[c]("/api/commands"+p,w.value).then(C=>{g("save",C.data),b("Command saved","The command has been saved successfully."),o("DialogNewCommand")}).catch(C=>{var y,u;_.value=((u=(y=C.response)==null?void 0:y.data)==null?void 0:u.errors)||{}})}return(p,c)=>{const C=K("RcIcon"),y=K("Label"),u=K("Skeleton"),I=K("Input"),A=K("Button");return n(),m(e(Fe),{open:e(T)("DialogNewCommand")},{default:s(()=>[l(e(kt),{"as-child":""}),l(e(Ne),{class:"p-0 sm:max-w-fit",onEscapeKeyDown:c[4]||(c[4]=r=>e(o)("DialogNewCommand")),onPointerDownOutside:c[5]||(c[5]=r=>e(o)("DialogNewCommand")),onCloseClicked:c[6]||(c[6]=r=>e(o)("DialogNewCommand"))},{default:s(()=>[l(e(qe),{class:"rc-dialog-header"},{default:s(()=>[l(e(Ae),{class:"text-sm text-rcgray-200"},{default:s(()=>[a("div",Pl,[l(C,{name:"commands"}),a("span",Il,L(k.editId>0?"Edit":"Add")+" Command "+L(k.editId>0?"(ID: "+k.editId+")":""),1)])]),_:1})]),_:1}),a("div",El,[a("div",Ml,[l(y,{for:"command",class:"text-right"},{default:s(()=>[...c[7]||(c[7]=[f(" Command Name ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),M.value?(n(),N("div",Rl,[l(u,{class:"h-6 w-full"})])):(n(),m(I,{key:1,modelValue:w.value.command,"onUpdate:modelValue":c[0]||(c[0]=r=>w.value.command=r),id:"command",class:"col-span-3"},null,8,["modelValue"])),_.value.command&&!M.value?(n(),N("span",Tl,L(_.value.command[0]),1)):S("",!0)]),a("div",Ul,[l(y,{for:"description",class:"text-right"},{default:s(()=>[...c[8]||(c[8]=[f("Description",-1)])]),_:1}),M.value?(n(),N("div",Nl,[l(u,{class:"h-6 w-full"})])):(n(),m(I,{key:1,modelValue:w.value.description,"onUpdate:modelValue":c[1]||(c[1]=r=>w.value.description=r),id:"description",class:"col-span-3"},null,8,["modelValue"]))]),a("div",Al,[l(y,{class:"text-right"},{default:s(()=>[...c[9]||(c[9]=[f(" Command Group ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),M.value?(n(),N("div",Bl,[l(u,{class:"h-6 w-full"})])):(n(),m(pt,{key:1,modelValue:w.value.category,"onUpdate:modelValue":c[2]||(c[2]=r=>w.value.category=r)},null,8,["modelValue"])),_.value.categoryArray&&!M.value?(n(),N("span",Fl,L(_.value.categoryArray[0]),1)):S("",!0)])]),l(e(Be),{class:"rc-dialog-footer bg-rcgray-800"},{default:s(()=>[l(A,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:c[3]||(c[3]=r=>e(o)("DialogNewCommand")),size:"sm"},{default:s(()=>[...c[10]||(c[10]=[f(" Close ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),l(A,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:v,variant:"primary"},{default:s(()=>[f(L(U.editId===0?"Save":"Update")+" ",1),a("div",Ll,[a("kbd",zl,[c[11]||(c[11]=f(" Ctrl  ",-1)),l(C,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},jl={class:"flex items-center"},Kl={class:"grid gap-4 p-4"},ql={class:"max-h-40 overflow-y-auto rounded-lg border border-border bg-background/80 backdrop-blur-sm p-2"},Gl={class:"space-y-1.5"},Hl={class:"text-foreground"},Jl={class:"grid gap-2"},Xl={key:0,class:"text-sm text-red-400 bg-red-900/20 border border-red-700 rounded p-2"},Yl={key:1,class:"pl-2 ml-auto"},Zl={class:"rc-kdb-class2"},Wl={__name:"CommandsBulkUpdateModal",props:{data:{type:Array,required:!0},isOpen:{type:Boolean,default:!1}},emits:["close","updated"],setup(k,{emit:B}){const{toastSuccess:b,toastError:h}=ye(),$=be(),{closeDialog:o,isDialogOpen:T}=$,g=k,_=B,M=V(""),w=V([]),U=V(!1),x=V([]);async function v(y={}){U.value=!0;try{const u=await Q.get("/api/categories?per_page=1000",{});x.value=u.data}catch(u){console.error("Error fetching categories:",u),h("Error","Failed to fetch categories.")}finally{U.value=!1}}function p(y){y.ctrlKey&&y.key==="Enter"&&C(),y.key==="Escape"&&o("DialogBulkUpdateCommands")}oe(()=>{v(),window.addEventListener("keydown",p)}),_e(()=>{window.removeEventListener("keydown",p)});function c(y){_(y==="updated"?"updated":"close")}async function C(){var y,u;if(w.value.length===0){M.value="You must select at least one command group.";return}U.value=!0,M.value="";try{await Q.post("/api/commands/bulk-update-categories",{categories:w.value,commands:g.data}),b("Command groups updated",`Successfully updated ${g.data.length} command(s) with new command groups.`),c("updated")}catch(I){const A=((u=(y=I.response)==null?void 0:y.data)==null?void 0:u.message)||"Failed to update command groups";M.value=A,h("Update failed",A)}finally{U.value=!1}}return(y,u)=>{const I=K("RcIcon"),A=K("Label"),r=K("Button");return n(),m(e(Fe),{open:e(T)("DialogBulkUpdateCommands")},{default:s(()=>[l(e(Ne),{class:"p-0 sm:max-w-2xl",onEscapeKeyDown:c,onPointerDownOutside:c,onCloseClicked:c},{default:s(()=>[l(e(qe),{class:"rc-dialog-header"},{default:s(()=>[l(e(Ae),{class:"text-sm text-rcgray-200"},{default:s(()=>[a("div",jl,[l(I,{name:"commands"}),u[1]||(u[1]=a("span",{class:"ml-2"},"Update Command Groups",-1))])]),_:1})]),_:1}),a("div",Kl,[u[5]||(u[5]=a("p",{class:"text-sm text-rcgray-300"},"The commands below will be updated with the selected command groups.",-1)),a("div",ql,[a("ul",Gl,[(n(!0),N(ee,null,ne(k.data,O=>(n(),N("li",{key:O.id||O.command,class:"flex items-center text-xs font-mono text-muted-foreground bg-muted/60 hover:bg-muted px-3 py-1.5 rounded transition-colors"},[u[2]||(u[2]=a("span",{class:"text-green-400 mr-2"},"$",-1)),a("span",Hl,L(O.command),1)]))),128))])]),a("div",Jl,[l(A,{class:"text-sm font-medium text-rcgray-200"},{default:s(()=>[...u[3]||(u[3]=[f(" Command Groups ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),l(pt,{modelValue:w.value,"onUpdate:modelValue":u[0]||(u[0]=O=>w.value=O),id:"selectedCategoryObj"},null,8,["modelValue"]),u[4]||(u[4]=a("p",{class:"text-xs text-rcgray-400"},"You must associate one or multiple command groups to the chosen commands.",-1))]),M.value?(n(),N("div",Xl,L(M.value),1)):S("",!0)]),l(e(Be),{class:"rc-dialog-footer bg-rcgray-800"},{default:s(()=>[l(r,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:c,size:"sm"},{default:s(()=>[...u[6]||(u[6]=[f(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),l(r,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:C,variant:"primary",disabled:U.value||w.value.length===0},{default:s(()=>[U.value?(n(),m(He,{key:0,class:"w-4 h-4 mr-2"})):S("",!0),u[8]||(u[8]=f(" Confirm ",-1)),U.value?S("",!0):(n(),N("div",Yl,[a("kbd",Zl,[u[7]||(u[7]=f(" Ctrl  ",-1)),l(I,{name:"enter",class:"ml-1"})])]))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])}}};function Ql(){const k=V(1),B=at(),b=V(B.get("useCommands","perPage",10)),h=V("-id"),$=V(""),o=V({}),T=be(),g=V(0),_=V(!1),M=V(1),w=V(1),U=V(1),x=V([]),v=V(!1),{openDialog:p,closeDialog:c}=T,{toastSuccess:C,toastError:y}=ye(),{reload:u}=ot(A),{toggleSort:I}=nt(h,A,"useCommands");De();async function A(W={}){_.value=!0;try{const G=await Q.get("/api/commands",{params:{page:k.value,perPage:b.value,sort:h.value,...o.value}});x.value=G.data,M.value=G.data.last_page}catch(G){console.error("Error fetching commands:",G),y("Error","Failed to fetch commands.")}finally{_.value=!1}}const r=W=>{g.value=0,w.value=Math.random(),p("DialogNewCommand")};function O(W){g.value=W,w.value=Math.random(),p("DialogNewCommand")}const J=async W=>{try{await Q.delete(`/api/commands/${W}`),A(),C("Command Deleted","The command has been deleted successfully."),v.value=!1}catch(G){G.status===422?y("Error",G.response.data.message):(console.error("Error deleting Command Group:",G),y("Error","Failed to delete Command Group."))}},P=async W=>{try{await Q.post("/api/commands/delete-many",{ids:W}),A(),C("Commands Deleted","The commands have been deleted successfully."),v.value=!1,xe.emit("deleteManyCommandsSuccess")}catch(G){G.status===422?y("Error",G.response.data.message):(console.error("Error deleting Command Group:",G),y("Error","Failed to delete Command Group."))}},Z=W=>{g.value=W,w.value=Math.random(),p("DialogNewCommand")},d=()=>{U.value=Math.random(),p("DialogBulkUpdateCommands")},z=()=>{U.value=Math.random(),c("DialogBulkUpdateCommands")},i=()=>{A(),U.value=Math.random(),c("DialogBulkUpdateCommands"),C("Bulk Update","Commands updated successfully.")},q=()=>{A(),w.value=Math.random()};function E(W){W.altKey&&W.key==="n"&&(W.preventDefault(),p("DialogNewCommand"))}const R=Qe(()=>{o.value["filter[q]"]=$.value,k.value=1,A()},500);return ae(k,()=>{A()}),ae($,()=>{R()}),ae(b,W=>{B.set("useCommands","perPage",b.value),A()}),{commands:x,currentPage:k,editId:g,isLoading:_,lastPage:M,newCommandModalKey:w,newBulkUpdateCommandsKey:U,perPage:b,searchTerm:$,showConfirmDelete:v,sortParam:h,createCommand:r,deleteCommand:J,deleteManyCommands:P,fetchCommands:A,handleKeyDown:E,handleSave:q,openDialog:p,reload:u,toggleSort:I,updateCommand:O,viewEditDialog:Z,openBulkUpdateDialog:d,handleCloseBulkUpdate:z,handleUpdateBulkCommands:i}}const es={class:"flex flex-col h-full gap-1 text-center"},ts={class:"flex items-center justify-between p-4"},ls={class:"flex items-center"},ss={class:"flex items-center justify-end"},as={class:"px-6"},ns={key:0,class:"fixed bottom-5 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-4 bg-rcgray-900 text-white border border-rcgray-600 shadow-xl px-4 py-1.5 rounded-lg"},os={class:"text-sm"},ds={class:"hidden md:inline-flex mr-1"},rs={__name:"Main",setup(k){const{commands:B,currentPage:b,editId:h,isLoading:$,lastPage:o,newCommandModalKey:T,newBulkUpdateCommandsKey:g,perPage:_,searchTerm:M,showConfirmDelete:w,sortParam:U,createCommand:x,deleteCommand:v,deleteManyCommands:p,fetchCommands:c,handleKeyDown:C,handleSave:y,reload:u,toggleSort:I,viewEditDialog:A,openBulkUpdateDialog:r,handleCloseBulkUpdate:O,handleUpdateBulkCommands:J}=Ql(),{selectedRows:P,selectAll:Z,toggleSelectAll:d,toggleSelectRow:z}=Te(B);oe(()=>{c(),window.addEventListener("keydown",C),xe.on("deleteManyCommandsSuccess",()=>{P.value=[],Z.value=!1})}),_e(()=>{window.removeEventListener("keydown",C)});const i=re(()=>{var q;return(((q=B.value)==null?void 0:q.data)||[]).filter(E=>P.value.includes(E.id))});return(q,E)=>{const R=K("Input"),W=K("Button"),G=K("RcIcon"),Y=K("Checkbox"),ke=K("RcBadge");return n(),N("div",es,[a("div",ts,[a("div",ls,[l(R,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter commands...",modelValue:e(M),"onUpdate:modelValue":E[0]||(E[0]=j=>te(M)?M.value=j:null)},null,8,["modelValue"]),e(M)?(n(),m(Se,{key:0,"onUpdate:modelValue":E[1]||(E[1]=j=>M.value="")})):S("",!0)]),a("div",ss,[l(W,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:se(e(x),["prevent"]),variant:"primary"},{default:s(()=>[...E[13]||(E[13]=[f(" New Command ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),l(G,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:E[2]||(E[2]=j=>e(u)())})])]),a("div",as,[l(e(Me),null,{default:s(()=>[l(e(Ve),null,{default:s(()=>[l(e(ce),null,{default:s(()=>[l(e(X),{class:"w-[2%]"},{default:s(()=>[l(Y,{id:"selectAll",modelValue:e(Z),"onUpdate:modelValue":E[3]||(E[3]=j=>te(Z)?Z.value=j:null),checked:e(Z),onClick:E[4]||(E[4]=j=>e(d)())},null,8,["modelValue","checked"])]),_:1}),l(e(X),{class:"w-[5%]"},{default:s(()=>[l(W,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:E[5]||(E[5]=j=>e(I)("id"))},{default:s(()=>[l(G,{name:"sort",sortParam:e(U),field:"id"},null,8,["sortParam"]),E[14]||(E[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[l(W,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:E[6]||(E[6]=j=>e(I)("command"))},{default:s(()=>[l(G,{name:"sort",sortParam:e(U),field:"command"},null,8,["sortParam"]),E[15]||(E[15]=a("span",{class:"ml-2"},"Command",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[...E[16]||(E[16]=[f("Description",-1)])]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[...E[17]||(E[17]=[f("Command Groups",-1)])]),_:1}),l(e(X),{class:"w-[10%]"},{default:s(()=>[...E[18]||(E[18]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),l(e(Pe),null,{default:s(()=>[e($)?(n(),m(Ie,{key:0})):e($)?(n(),m(Ee,{key:2})):(n(!0),N(ee,{key:1},ne(e(B).data,(j,me)=>(n(),m(e(ce),{key:j.id},{default:s(()=>[l(e(H),{class:"text-start"},{default:s(()=>[l(Y,{class:"cursor-pointer",id:"select-"+j.id,checked:!!e(P).includes(j.id),onClick:Je=>e(z)(j.id)},null,8,["id","checked","onClick"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(j.id),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(j.command),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(j.description),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l($e,{items:j.category,displayField:"categoryName",linkField:"view_url",maxVisible:8,hoverCardFields:["id","categoryName"]},null,8,["items"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l(Ke,{rowData:j,onOnEdit:Je=>e(A)(j.id),onOnDelete:Je=>e(v)(j.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(P).length?(n(),N("div",ns,[a("span",os,[l(ke,{variant:"primary",class:"mr-1"},{default:s(()=>[f(L(e(P).length),1)]),_:1}),E[19]||(E[19]=f(" command(s) selected ",-1))]),l(W,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",variant:"outline",onClick:e(r)},{default:s(()=>[l(G,{name:"command-group",class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),E[20]||(E[20]=a("span",{class:"hidden md:inline-flex"},"Bulk assign command group",-1))]),_:1},8,["onClick"]),l(W,{class:"text-sm px-1.5 py-0 bg-red-600 hover:bg-red-700 hover:animate-pulse h-8",onClick:E[7]||(E[7]=se(j=>w.value=!0,["prevent"])),variant:"primary"},{default:s(()=>[l(e(_t),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),a("span",ds,"Delete "+L(e(P).length),1)]),_:1})])):S("",!0),l(Re,{currentPage:e(b),lastPage:e(o),perPage:e(_),"onUpdate:currentPage":E[8]||(E[8]=j=>b.value=j),"onUpdate:perPage":E[9]||(E[9]=j=>_.value=j),totalRecords:e(B).total,isLoading:e($)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(Ol,{onSave:E[10]||(E[10]=j=>e(y)()),key:e(T),editId:e(h)},null,8,["editId"])),(n(),m(Wl,{key:e(g),editId:e(h),data:i.value,onClose:e(O),onUpdated:e(J)},null,8,["editId","data","onClose","onUpdated"])),l(he,{ids:e(P),showConfirmDelete:e(w),onClose:E[11]||(E[11]=j=>w.value=!1),onHandleDelete:E[12]||(E[12]=j=>e(p)(e(P)))},null,8,["ids","showConfirmDelete"])])])}}},is={class:"text-xs text-gray-500 line-clamp-1 mt-1 ml-1"},us={class:"max-w-xs"},cs={key:1,class:"text-xs text-gray-500"},ms={__name:"CategoryCell",props:{categoryName:{type:String,required:!0},categoryDescription:{type:String,required:!0},badgeColor:{type:String,default:""},defaultBadgeClass:{type:String,default:"bg-gray-600 text-gray-200 border-gray-500"},wordLimit:{type:Number,default:10},delayDuration:{type:Number,default:800},skipDelayDuration:{type:Number,default:500}},setup(k){const B=k,b=re(()=>B.categoryDescription&&B.categoryDescription.split(" ").length>B.wordLimit);return(h,$)=>(n(),m(e(H),{class:"text-start"},{default:s(()=>[a("span",{class:Ce([k.badgeColor||k.defaultBadgeClass,"w-fit flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},L(k.categoryName),3),b.value?(n(),m(e(bt),{key:0,"delay-duration":k.delayDuration,"skip-delay-duration":k.skipDelayDuration},{default:s(()=>[l(e(wt),null,{default:s(()=>[l(e(ht),{"as-child":""},{default:s(()=>[a("span",is,L(k.categoryDescription),1)]),_:1}),l(e($t),{side:"bottom"},{default:s(()=>[a("p",us,L(k.categoryDescription),1)]),_:1})]),_:1})]),_:1},8,["delay-duration","skip-delay-duration"])):(n(),N("span",cs,L(k.categoryDescription),1))]),_:1}))}},ps={class:"flex flex-col h-full gap-1 text-center"},vs={class:"flex items-center justify-between p-4"},fs={class:"flex items-center"},gs={class:"flex items-center justify-end"},ys={class:"px-6"},xs={__name:"Main",setup(k){const{reload:B,editId:b,categories:h,currentPage:$,perPage:o,searchTerm:T,lastPage:g,isLoading:_,fetchCommandGroups:M,viewEditDialog:w,createCommandGroup:U,deleteCommandGroup:x,deleteManyCommandGroups:v,handleSave:p,showConfirmDelete:c,handleKeyDown:C,newCommandGroupsModalKey:y,toggleSort:u,sortParam:I}=il(),{selectedRows:A,selectAll:r,toggleSelectAll:O,toggleSelectRow:J}=Te(h),P=De();return oe(()=>{var Z,d;M(),(d=(Z=P.currentRoute)==null?void 0:Z.value.params)!=null&&d.id&&(b.value=parseInt(P.currentRoute.value.params.id),w(b.value)),window.addEventListener("keydown",C),xe.on("deleteManyCommandGroupsSuccess",()=>{A.value=[],r.value=!1})}),_e(()=>{window.removeEventListener("keydown",C)}),(Z,d)=>{const z=K("Input"),i=K("Button"),q=K("RcIcon"),E=K("Checkbox");return n(),N("div",ps,[d[20]||(d[20]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),a("div",vs,[a("div",fs,[l(z,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter Command Groups...",modelValue:e(T),"onUpdate:modelValue":d[0]||(d[0]=R=>te(T)?T.value=R:null)},null,8,["modelValue"]),e(T)?(n(),m(Se,{key:0,"onUpdate:modelValue":d[1]||(d[1]=R=>T.value="")})):S("",!0)]),a("div",gs,[e(A).length?(n(),m(i,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:d[2]||(d[2]=se(R=>c.value=!0,["prevent"])),variant:"primary"},{default:s(()=>[f(" Delete Selected "+L(e(A).length)+" Command Group(s) ",1)]),_:1})):S("",!0),l(i,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:se(e(U),["prevent"]),variant:"primary"},{default:s(()=>[...d[13]||(d[13]=[f(" New Command Group ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),l(q,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:d[3]||(d[3]=R=>e(B)())})])]),a("div",ys,[l(e(Me),null,{default:s(()=>[l(e(Ve),null,{default:s(()=>[l(e(ce),null,{default:s(()=>[l(e(X),{class:"w-[2%]"},{default:s(()=>[l(E,{id:"selectAll",modelValue:e(r),"onUpdate:modelValue":d[4]||(d[4]=R=>te(r)?r.value=R:null),checked:e(r),onClick:d[5]||(d[5]=R=>e(O)())},null,8,["modelValue","checked"])]),_:1}),l(e(X),{class:"w-[5%]"},{default:s(()=>[l(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[6]||(d[6]=R=>e(u)("id"))},{default:s(()=>[l(q,{name:"sort",sortParam:e(I),field:"id"},null,8,["sortParam"]),d[14]||(d[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[10%]"},{default:s(()=>[l(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[7]||(d[7]=R=>e(u)("categoryName"))},{default:s(()=>[l(q,{name:"sort",sortParam:e(I),field:"categoryName"},null,8,["sortParam"]),d[15]||(d[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[...d[16]||(d[16]=[f("Commands",-1)])]),_:1}),l(e(X),{class:"w-[40%]"},{default:s(()=>[...d[17]||(d[17]=[f("Devices",-1)])]),_:1}),l(e(X),{class:"w-[10%]"},{default:s(()=>[...d[18]||(d[18]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),l(e(Pe),null,{default:s(()=>[e(_)?(n(),m(Ie,{key:0})):e(_)?(n(),m(Ee,{key:2})):(n(!0),N(ee,{key:1},ne(e(h).data,R=>(n(),m(e(ce),{key:R.id},{default:s(()=>[l(e(H),{class:"text-start"},{default:s(()=>[l(E,{class:"cursor-pointer",id:"select-"+R.id,checked:!!e(A).includes(R.id),onClick:W=>e(J)(R.id)},null,8,["id","checked","onClick"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(R.id),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l(ms,{"category-name":R.categoryName,"category-description":R.categoryDescription,"badge-color":R.badgeColor,"word-limit":8},null,8,["category-name","category-description","badge-color"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[R.command.length==0?(n(),m(pl,{key:0,delayDuration:100,content:"No commands attached to this command group",side:"bottom"},{trigger:s(()=>[l(zt,{class:"ml-1 px-2",variant:"warning",size:"sm"},{default:s(()=>[...d[19]||(d[19]=[f("0 Commands",-1)])]),_:1})]),_:1})):S("",!0),l($e,{items:R.command,displayField:"command",linkField:"view_url",maxVisible:8,hoverCardFields:["id","command"],showEmptyText:!1},null,8,["items"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l($e,{items:R.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l(Ke,{rowData:R,onOnEdit:W=>e(w)(R.id),onOnDelete:W=>e(x)(R.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(Re,{currentPage:e($),lastPage:e(g),perPage:e(o),"onUpdate:currentPage":d[8]||(d[8]=R=>$.value=R),"onUpdate:perPage":d[9]||(d[9]=R=>o.value=R),totalRecords:e(h).total,isLoading:e(_)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(ul,{onSave:d[10]||(d[10]=R=>e(p)()),key:e(y),editId:e(b)},null,8,["editId"])),l(he,{ids:e(A),showConfirmDelete:e(c),onClose:d[11]||(d[11]=R=>c.value=!1),onHandleDelete:d[12]||(d[12]=R=>e(v)(e(A)))},null,8,["ids","showConfirmDelete"])])])}}},ks={__name:"ActionsMenuDevices",props:{rowData:{type:Object,required:!0},showEditBtn:{type:Boolean,default:!0},showViewDetailsBtn:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!0},isLocked:{type:Boolean,default:!1},showRolesBtn:{type:Boolean,default:!1},showCopyDownloadDebug:{type:Boolean,default:!1}},emits:["onEdit","onDelete","onDisable","onClone","onViewDetails","onEnable","onRoleAssignment"],setup(k,{emit:B}){const b=V(!1),h=V(!1),$=B,{toastSuccess:o,toastError:T}=ye(),{copyItem:g}=ml(),_=Ct("appDirPath",null),M=k;function w(){$("onEdit")}function U(){$("onClone")}function x(){b.value=!0}function v(){$("onDelete"),b.value=!1}function p(){h.value=!0}function c(){$("onDisable"),h.value=!1}function C(){$("onEnable")}function y(){$("onViewDetails")}function u(){$("onRoleAssignment")}function I(){if(!_){console.error("appDirPath not available");return}const A=`cd ${_} && php artisan rconfig:download-device ${M.rowData.id} -d`;try{g(M.rowData.id,A),o("Device Download {ID:"+M.rowData.id+"} debug command copied to clipboard")}catch(r){console.error("Failed to copy snippet:",r),T("Failed to copy Device Download debug command")}}return(A,r)=>{const O=K("Button"),J=K("RcIcon");return n(),N("div",null,[l(e(lt),null,{default:s(()=>[l(e(et),{"as-child":""},{default:s(()=>[l(O,{variant:"ghost",class:"hover:animate-pulse"},{default:s(()=>[...r[2]||(r[2]=[f(" ... ",-1)])]),_:1})]),_:1}),l(e(tt),{class:"w-56",align:"end",side:"bottom"},{default:s(()=>[k.showCopyDownloadDebug?(n(),m(e(fe),{key:0,class:"cursor-pointer hover:bg-rcgray-800",onClick:I},{default:s(()=>[r[3]||(r[3]=a("span",{class:"text-gray-300 group-hover:text-gray-200"},"Debug Cmd",-1)),l(e(ge),null,{default:s(()=>[l(J,{name:"commands",size:"16",class:"text-blue-300"})]),_:1})]),_:1})):S("",!0),k.showRolesBtn?(n(),m(e(fe),{key:1,class:"cursor-pointer hover:bg-rcgray-800",onClick:u},{default:s(()=>[r[4]||(r[4]=a("span",null,"Roles",-1)),l(e(ge),null,{default:s(()=>[l(J,{name:"rbac",size:"16"})]),_:1})]),_:1})):S("",!0),k.showViewDetailsBtn?(n(),m(e(fe),{key:2,class:"cursor-pointer hover:bg-rcgray-800",onClick:y},{default:s(()=>[r[5]||(r[5]=a("span",null,"View Details",-1)),l(e(ge),null,{default:s(()=>[l(e(Ot),{size:"16"})]),_:1})]),_:1})):S("",!0),k.showEditBtn?(n(),m(e(fe),{key:3,class:"cursor-pointer hover:bg-rcgray-800",onClick:w},{default:s(()=>[r[6]||(r[6]=a("span",null,"Edit",-1)),l(e(ge),null,{default:s(()=>[l(e(jt),{size:"16"})]),_:1})]),_:1})):S("",!0),k.showEditBtn?(n(),m(e(fe),{key:4,class:"cursor-pointer hover:bg-rcgray-800 group",onClick:U},{default:s(()=>[r[7]||(r[7]=a("span",{class:"text-blue-400 group-hover:text-blue-500"},"Clone",-1)),l(e(ge),null,{default:s(()=>[l(e(Kt),{size:"16",class:"text-blue-400 group-hover:text-blue-500"})]),_:1})]),_:1})):S("",!0),k.showEditBtn?(n(),m(e(ct),{key:5})):S("",!0),k.rowData.status===100?(n(),m(e(fe),{key:6,class:"cursor-pointer hover:bg-rcgray-800",onClick:C},{default:s(()=>[r[8]||(r[8]=a("span",null,"Enable",-1)),l(e(ge),null,{default:s(()=>[l(e(Dt),{size:"16",class:"text-green-400"})]),_:1})]),_:1})):S("",!0),k.rowData.status!=100?(n(),m(e(fe),{key:7,class:"cursor-pointer hover:bg-rcgray-800",onClick:p},{default:s(()=>[r[9]||(r[9]=a("span",null,"Disable",-1)),l(e(ge),null,{default:s(()=>[l(e(St),{size:"16",class:"text-red-300"})]),_:1})]),_:1})):S("",!0),k.canDelete&&!k.isLocked?(n(),m(e(fe),{key:8,class:"group cursor-pointer hover:bg-rcgray-800",onClick:x},{default:s(()=>[r[10]||(r[10]=a("span",{class:"text-red-500 group-hover:text-red-400"},"Delete",-1)),l(e(ge),null,{default:s(()=>[l(e(qt),{size:"16",class:"text-red-500 group-hover:text-red-400"})]),_:1})]),_:1})):S("",!0),k.isLocked?(n(),m(e(fe),{key:9,disabled:"",class:"cursor-default opacity-70"},{default:s(()=>[r[11]||(r[11]=a("span",{class:"italic text-slate-500"},"Vector CM Locked",-1)),l(e(ge),null,{default:s(()=>[l(J,{name:"lock"})]),_:1})]),_:1})):S("",!0)]),_:1})]),_:1}),l(he,{ids:[k.rowData.id],showConfirmDisable:h.value,onClose:r[0]||(r[0]=P=>h.value=!1),onHandleDisable:c},null,8,["ids","showConfirmDisable"]),l(he,{ids:[k.rowData.id],showConfirmDelete:b.value,onClose:r[1]||(r[1]=P=>b.value=!1),onHandleDelete:v},null,8,["ids","showConfirmDelete"])])}}},_s={class:"hidden lg:inline-flex"},bs={key:0,class:"text-sm font-light"},ws={class:"text-sm font-semibold"},hs={class:"relative items-center w-full"},$s={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Cs={class:"py-1"},Ds=["onClick"],Ss=["checked"],Vs={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ps={"data-size":"20"},Is={class:"p-1 border-5"},Es=Ue({__name:"CategoryFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:B}){const b=B,h=V([]),$=V(!1),o=V([]),T=V(""),g=V(!1),_=k;oe(()=>{w()}),ae(()=>_.modelValue,x=>{o.value=x,g.value=o.value.length===h.value.length});function M(x){if(x.id===9999999)g.value?(o.value=[],g.value=!1):(o.value=[...h.value],g.value=!0);else{const v=o.value.findIndex(p=>p.id===x.id);v!==-1?(o.value.splice(v,1),g.value=!1):(o.value.push(x),o.value.length===h.value.length&&(g.value=!0))}$.value=!1,b("update:modelValue",o.value)}function w(){Q.get("/api/categories/?perPage=10000&sort=categoryName").then(x=>{h.value=x.data.data})}const U=re(()=>h.value.filter(x=>x.categoryName.toLowerCase().includes(T.value.toLowerCase())));return(x,v)=>{const p=K("RcIcon");return n(),m(e(je),null,{default:s(()=>[l(e(Le),null,{default:s(()=>[l(e(de),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:s(()=>[l(p,{name:"command-group",class:"lg:mr-2"}),a("div",_s,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Command Group")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",bs,[v[2]||(v[2]=f(" Command Group ",-1)),a("strong",ws,L(o.value.length)+" Selected",1)])):S("",!0)],64))])]),_:1})]),_:1}),l(e(ze),{side:"bottom",align:"start",class:"w-64 p-0"},{default:s(()=>[a("div",hs,[l(e(Ze),{id:"search",type:"text",modelValue:T.value,"onUpdate:modelValue":v[0]||(v[0]=c=>T.value=c),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",$s,[l(p,{name:"search"})])]),l(e(We)),l(e(Oe),{class:"h-44"},{default:s(()=>[a("div",Cs,[(n(!0),N(ee,null,ne(U.value,c=>(n(),N("div",{key:c.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:C=>M(c)},[a("input",{type:"checkbox",checked:o.value.some(C=>C.id===c.id),class:"mr-2"},null,8,Ss),a("span",Vs,[a("span",Ps,L(c.categoryName),1)])],8,Ds))),128))])]),_:1}),l(e(We)),a("div",Is,[l(e(de),{variant:"ghost",class:"justify-start w-full p-1",onClick:v[1]||(v[1]=c=>M({id:9999999}))},{default:s(()=>[l(p,{name:"select-all",isSelected:g.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,L(g.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Ms={class:"p-2"},Rs={class:"flex justify-between mb-2"},Ts={class:"p-2"},Us={class:"flex items-center space-x-2"},Ns=["for"],As={key:0,class:"text-xs text-muted-foreground ml-1"},Bs={key:0,class:"flex items-center space-x-1"},Fs={__name:"ColumnChooser",props:{columns:{type:Array,required:!0},modelValue:{type:Array,required:!0},storageKey:{type:String,required:!0}},emits:["update:modelValue"],setup(k,{emit:B}){const b=k,h=B,$=V(!1),o=V([...b.modelValue]);ae(()=>b.modelValue,C=>{o.value=[...C]},{deep:!0});const T=re(()=>[...b.columns].sort((C,y)=>{const u=o.value.indexOf(C.key),I=o.value.indexOf(y.key);if(u>=0&&I>=0)return u-I;if(u>=0)return-1;if(I>=0)return 1;const A=b.columns.findIndex(O=>O.key===C.key),r=b.columns.findIndex(O=>O.key===y.key);return A-r})),g=C=>o.value.includes(C);function _(){localStorage.setItem(b.storageKey,JSON.stringify(o.value))}function M(){const C=localStorage.getItem(b.storageKey);if(C)try{const u=JSON.parse(C).filter(I=>b.columns.some(A=>A.key===I));o.value=u,h("update:modelValue",u)}catch(y){console.error("Error loading column preferences:",y)}}function w(C){o.value.includes(C)?o.value=o.value.filter(y=>y!==C):(o.value.push(C),o.value.sort((y,u)=>{const I=b.columns.findIndex(r=>r.key===y),A=b.columns.findIndex(r=>r.key===u);return I-A})),h("update:modelValue",o.value),_()}function U(C){const y=o.value.indexOf(C);if(y>0){const u=[...o.value],I=u[y];u[y]=u[y-1],u[y-1]=I,o.value=u,h("update:modelValue",u),_()}}function x(C){const y=o.value.indexOf(C);if(y<o.value.length-1){const u=[...o.value],I=u[y];u[y]=u[y+1],u[y+1]=I,o.value=u,h("update:modelValue",u),_()}}function v(){o.value=b.columns.map(C=>C.key),h("update:modelValue",o.value),_()}function p(){const C=b.columns.filter(y=>y.mandatory).map(y=>y.key);o.value=C,h("update:modelValue",o.value),_()}function c(){const C=b.columns.filter(y=>y.default).map(y=>y.key);o.value=C,h("update:modelValue",o.value),_()}return oe(()=>{M()}),(C,y)=>(n(),m(e(lt),{open:$.value,"onUpdate:open":y[0]||(y[0]=u=>$.value=u)},{default:s(()=>[l(e(et),{"as-child":""},{default:s(()=>[l(e(de),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 hidden xl:inline-flex",title:"Column Options"},{default:s(()=>[l(e(Gt),{class:"h-4 w-4"}),y[1]||(y[1]=a("span",{class:"sr-only"},"Column Options",-1))]),_:1})]),_:1}),l(e(tt),{align:"end",class:"w-60"},{default:s(()=>[l(e(Vl),null,{default:s(()=>[...y[2]||(y[2]=[f("Customize Columns",-1)])]),_:1}),l(e(ct)),a("div",Ms,[a("div",Rs,[l(e(de),{variant:"outline",size:"sm",class:"text-xs",onClick:v},{default:s(()=>[...y[3]||(y[3]=[f(" Show All ",-1)])]),_:1}),l(e(de),{variant:"outline",size:"sm",class:"text-xs",onClick:p},{default:s(()=>[...y[4]||(y[4]=[f(" Hide All ",-1)])]),_:1}),l(e(de),{variant:"outline",size:"sm",class:"text-xs",onClick:c},{default:s(()=>[...y[5]||(y[5]=[f(" Reset ",-1)])]),_:1})])]),l(e(ct)),l(e(Oe),{class:"h-[300px]"},{default:s(()=>[a("div",Ts,[(n(!0),N(ee,null,ne(T.value,u=>(n(),N("div",{key:u.key,class:"flex items-center justify-between py-1"},[a("div",Us,[l(e(Vt),{id:`col-toggle-${u.key}`,checked:g(u.key),disabled:u.mandatory,"onUpdate:checked":I=>w(u.key)},null,8,["id","checked","disabled","onUpdate:checked"]),a("label",{for:`col-toggle-${u.key}`,class:Ce(["text-sm cursor-pointer",{"opacity-50":u.mandatory}])},[f(L(u.label)+" ",1),u.mandatory?(n(),N("span",As,"(Required)")):S("",!0)],10,Ns)]),g(u.key)?(n(),N("div",Bs,[l(e(de),{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:I=>U(u.key),disabled:o.value.indexOf(u.key)===0},{default:s(()=>[l(e(Ht),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"]),l(e(de),{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:I=>x(u.key),disabled:o.value.indexOf(u.key)===o.value.length-1},{default:s(()=>[l(e(mt),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"])])):S("",!0)]))),128))])]),_:1})]),_:1})]),_:1},8,["open"]))}},Ls=st(Fs,[["__scopeId","data-v-89b28009"]]),zs={class:"alert-success"},Os={class:"alert-content"},js={class:"alert-icon"},Ks={key:0},qs=["innerHTML"],Gs={class:"alert-slot"},Hs={__name:"AlertSuccess",props:{title:{type:String,default:"Success"},titleEnabled:{type:Boolean,default:!0},message:{type:String,required:!0},small:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1}},emits:["closed"],setup(k,{emit:B}){const b=B;function h(){b("closed")}return($,o)=>(n(),N("div",zs,[a("div",Os,[a("div",js,[l(e(Jt)),o[0]||(o[0]=a("span",{class:"alert-icon-pulse"},null,-1))]),a("div",{class:Ce(["alert-body",{"text-size-sm":k.small}])},[k.titleEnabled?(n(),N("h5",Ks,L(k.title),1)):S("",!0),a("div",{innerHTML:k.message,class:"alert-message"},null,8,qs),a("div",Gs,[xt($.$slots,"default",{},void 0,!0)])],2),k.showClose?(n(),N("button",{key:0,onClick:h,class:"alert-close-btn","aria-label":"Close",type:"button"},[l(e(Xt)),o[1]||(o[1]=a("span",{class:"alert-close-ripple"},null,-1))])):S("",!0)])]))}},Js=st(Hs,[["__scopeId","data-v-f0f980b3"]]);function Xs(k,B){const b=be(),h=Ct("formatters"),{closeDialog:$,isDialogOpen:o}=b,{toastSuccess:T,toastError:g}=ye(),_=V(!1),M=V([]),w=V([]),U=V([]),x=V([]),v=V([]),p=V(""),c=V(""),C=V([]),y=V(!1),u=V(""),I=V(""),A=[{id:2,name:"command_group"},{id:1,name:"credentials"},{id:4,name:"device_enable_prompt"},{id:5,name:"device_main_prompt"},{id:6,name:"model"},{id:9,name:"tag"},{id:10,name:"template"},{id:11,name:"vendor"}],r=A,O=V(""),J=re(()=>A.find(j=>j.name===O.value)||{});function P(){setTimeout(()=>{u.value="",I.value=""},4e3)}function Z(){$("DeviceBulkEditDialog"),d(),B("close")}function d(){_.value=!1,J.value={},M.value=0,w.value=0,x.value=0,v.value=0,p.value="",c.value="",C.value="",y.value=!1,u.value="",I.value=""}function z(){if(u.value="",k.checkedRows.length===0){g("Error","Please select at least one device to update."),u.value="Please select at least one device to update.";return}const j={credentials:{value:v.value,errorMessage:"Please select Credentials",updateFunction:i},command_group:{value:w.value,errorMessage:"Please select a Command Group",updateFunction:q},vendor:{value:x.value,errorMessage:"Please select a Vendor",updateFunction:E},device_enable_prompt:{value:p.value,errorMessage:"Please enter a Device Enable Prompt",updateFunction:W},device_main_prompt:{value:c.value,errorMessage:"Please enter a Device Main Prompt",updateFunction:R},model:{value:C.value,errorMessage:"Please enter a Model",updateFunction:G},template:{value:M.value,errorMessage:"Please select a template",updateFunction:Y},tag:{value:U.value,errorMessage:"Please select one or more tags",updateFunction:ke},default:{value:0,errorMessage:"Please select a Property",updateFunction:()=>{}}},me=j[J.value.name]||j.default;if(me.value.length===0){g("Error",me.errorMessage),u.value=me.errorMessage;return}me.updateFunction()}function i(){_.value=!0,Q.post("/api/device/bulk-update/credentials",{device_ids:k.checkedRows,cred_id:v.value.id}).then(j=>{T("Success",j.data.message),_.value=!1,I.value="Credentials updated successfully, you can now close this dialog or continue updating other properties.",P(),B("bulkUpdateSuccess")}).catch(j=>{g("Error",j.response.data.message||"An error occurred while updating vendors"),_.value=!1,B("bulkUpdateSuccess")})}function q(){_.value=!0,Q.post("/api/device/bulk-update/category",{device_ids:k.checkedRows,category_id:w.value.id}).then(j=>{T("Success",j.data.message),_.value=!1,I.value="Categories updated successfully, you can now close this dialog or continue updating other properties.",P(),B("bulkUpdateSuccess")}).catch(j=>{g("Error",j.response.data.message||"An error occurred while updating categories"),_.value=!1,B("bulkUpdateSuccess")})}function E(){_.value=!0,Q.post("/api/device/bulk-update/vendor",{device_ids:k.checkedRows,vendor_id:x.value.id}).then(j=>{T("Success",j.data.message),_.value=!1,I.value="Vendor updated successfully, you can now close this dialog or continue updating other properties.",P(),B("bulkUpdateSuccess")}).catch(j=>{g("Error",j.response.data.message||"An error occurred while updating vendors"),_.value=!1,B("bulkUpdateSuccess")})}function R(){_.value=!0,Q.post("/api/device/bulk-update/device_main_prompt",{device_ids:k.checkedRows,device_main_prompt:c.value}).then(j=>{T("Success",j.data.message),_.value=!1,I.value="Device main prompt updated successfully, you can now close this dialog or continue updating other properties.",P(),B("bulkUpdateSuccess")}).catch(j=>{g("Error",j.response.data.message||"An error occurred while updating device main prompt"),_.value=!1,B("bulkUpdateSuccess")})}function W(){_.value=!0,Q.post("/api/device/bulk-update/device_enable_prompt",{device_ids:k.checkedRows,device_enable_prompt:p.value}).then(j=>{T("Success",j.data.message),_.value=!1,I.value="Device enable prompt updated successfully, you can now close this dialog or continue updating other properties.",P(),B("bulkUpdateSuccess")}).catch(j=>{g("Error",j.response.data.message||"An error occurred while updating device enable prompt"),_.value=!1,B("bulkUpdateSuccess")})}function G(){_.value=!0,Q.post("/api/device/bulk-update/model",{device_ids:k.checkedRows,device_model:C.value.name}).then(j=>{T("Success",j.data.message),_.value=!1,I.value="Model updated successfully, you can now close this dialog or continue updating other properties.",P(),B("bulkUpdateSuccess")}).catch(j=>{g("Error",j.response.data.message||"An error occurred while updating model"),_.value=!1,B("bulkUpdateSuccess")})}function Y(){_.value=!0,Q.post("/api/device/bulk-update/template",{device_ids:k.checkedRows,template_id:M.value.id}).then(j=>{T("Success",j.data.message),_.value=!1,I.value="Template updated successfully, you can now close this dialog or continue updating other properties.",P(),B("bulkUpdateSuccess")}).catch(j=>{g("Error",j.response.data.message||"An error occurred while updating template"),_.value=!1,B("bulkUpdateSuccess")})}function ke(){const j=U.value.map(me=>me.id);_.value=!0,Q.post("/api/device/bulk-update/tags",{device_ids:k.checkedRows,tag_ids:j,append:y.value?1:0}).then(me=>{T("Success",me.data.message),_.value=!1,I.value="Tags updated successfully, you can now close this dialog or continue updating other properties.",P(),B("bulkUpdateSuccess")}).catch(me=>{g("Error",me.response.data.message||"An error occurred while updating tags"),_.value=!1,B("bulkUpdateSuccess")})}return{append:y,deviceEnablePrompt:p,deviceMainPrompt:c,errorMessage:u,formatters:h,isUpdating:_,selectedModel:C,selectedCategory:w,selectedCredentials:v,selectedProperty:J,selectedPropertyName:O,selectedTemplate:M,selectedVendor:x,successMsg:I,selectedTags:U,finalPropertyOptions:r,clearMsgs:P,close:Z,closeDialog:$,confirm:z,isDialogOpen:o,resetData:d}}const Ys={class:"py-4 space-y-4"},Zs={key:0,class:"space-y-4"},Ws={class:"grid items-center grid-cols-4 gap-2"},Qs={class:"col-span-3"},ea={key:0,class:"grid items-start grid-cols-4 gap-2"},ta={key:3,class:"col-span-3"},la={key:4,class:"col-span-3"},sa={key:9,class:"col-span-3 col-start-2 text-red-400 text-sm"},aa={key:1,class:"grid items-center grid-cols-4 gap-2"},na={class:"flex items-center gap-2 col-span-3"},oa={class:"col-span-3 col-start-2 text-xs text-muted-foreground"},da={key:0},ra={key:1},ia={key:1,class:"flex flex-col items-center justify-center gap-4"},ua={class:"pl-2 ml-auto"},ca={class:"rc-kdb-class2"},ma={__name:"DeviceBulkEditDialog",props:{checkedRows:{type:Array,required:!0,default:()=>[]}},emits:["close","bulkUpdateSuccess"],setup(k,{emit:B}){const b=k,h=B,{append:$,deviceEnablePrompt:o,deviceMainPrompt:T,errorMessage:g,formatters:_,isUpdating:M,selectedModel:w,selectedCategory:U,selectedCredentials:x,selectedProperty:v,selectedPropertyName:p,selectedTemplate:c,selectedVendor:C,successMsg:y,selectedTags:u,finalPropertyOptions:I,close:A,confirm:r,isDialogOpen:O}=Xs(b,h);return(J,P)=>{const Z=K("RcIcon");return n(),m(e(Fe),{open:e(O)("DeviceBulkEditDialog")&&k.checkedRows.length>0},{default:s(()=>[l(e(Ne),{class:"max-w-2xl",onInteractOutside:P[12]||(P[12]=d=>e(A)()),onPointerDownOutside:P[13]||(P[13]=d=>e(A)()),onEscapeKeyDown:P[14]||(P[14]=d=>e(A)()),onCloseClicked:P[15]||(P[15]=d=>e(A)())},{default:s(()=>[l(e(qe),null,{default:s(()=>[l(e(Ae),{class:"text-lg font-semibold"},{default:s(()=>[...P[16]||(P[16]=[f(" Bulk Edit Devices ",-1)])]),_:1}),l(e(Yt),null,{default:s(()=>[f(" Device IDs ("+L(e(_).arrayToPrettyString(k.checkedRows.slice(0,10)))+L(k.checkedRows.length>10?" and "+(k.checkedRows.length-10)+" more":"")+") ",1)]),_:1})]),_:1}),a("div",Ys,[e(M)?(n(),N("div",ia,[...P[23]||(P[23]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-300"},null,-1),a("p",{class:"text-sm text-gray-200"},"Processing bulk update. This may take a few moments...",-1)])])):(n(),N("div",Zs,[a("div",Ws,[l(e(Ye),{for:"property-select",class:"text-right"},{default:s(()=>[...P[17]||(P[17]=[f(" Select Property ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),a("div",Qs,[l(e(hl),{modelValue:e(p),"onUpdate:modelValue":P[0]||(P[0]=d=>te(p)?p.value=d:null)},{default:s(()=>[l(e($l),{id:"property-select",class:"w-full"},{default:s(()=>[l(e(Cl),{placeholder:"Choose a property to update"})]),_:1}),l(e(Dl),null,{default:s(()=>[(n(!0),N(ee,null,ne(e(I),d=>(n(),m(e(Sl),{value:d.name,key:d.id},{default:s(()=>[f(L(e(_).capitalizeFirstLetter(d.name)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),e(v)?(n(),N("div",ea,[e(p)?(n(),m(e(Ye),{key:0,for:"property-field",class:"text-right pt-2"},{default:s(()=>[f(L(e(_).capitalizeFirstLetter(e(p)))+" ",1),P[18]||(P[18]=a("span",{class:"text-red-400"},"*",-1))]),_:1})):S("",!0),e(v).name==="credentials"?(n(),m(vl,{key:1,modelValue:e(x),"onUpdate:modelValue":P[1]||(P[1]=d=>te(x)?x.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):S("",!0),e(v).name==="command_group"?(n(),m(pt,{key:2,modelValue:e(U),"onUpdate:modelValue":P[2]||(P[2]=d=>te(U)?U.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):S("",!0),e(v).name==="device_enable_prompt"?(n(),N("div",ta,[l(e(Ze),{modelValue:e(o),"onUpdate:modelValue":P[3]||(P[3]=d=>te(o)?o.value=d:null),id:"device_enable_prompt",autocomplete:"new-name",name:"new-name"},null,8,["modelValue"])])):S("",!0),e(v).name==="device_main_prompt"?(n(),N("div",la,[l(e(Ze),{modelValue:e(T),"onUpdate:modelValue":P[4]||(P[4]=d=>te(T)?T.value=d:null),id:"device_main_prompt",autocomplete:"new-name",name:"new-name"},null,8,["modelValue"])])):S("",!0),e(v).name==="model"?(n(),m(fl,{key:5,modelValue:e(w),"onUpdate:modelValue":P[5]||(P[5]=d=>te(w)?w.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):S("",!0),e(v).name==="vendor"?(n(),m(gl,{key:6,modelValue:e(C),"onUpdate:modelValue":P[6]||(P[6]=d=>te(C)?C.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):S("",!0),e(v).name==="template"?(n(),m(yl,{key:7,modelValue:e(c),"onUpdate:modelValue":P[7]||(P[7]=d=>te(c)?c.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):S("",!0),e(v).name==="tag"?(n(),m(cl,{key:8,modelValue:e(u),"onUpdate:modelValue":P[8]||(P[8]=d=>te(u)?u.value=d:null),singleSelect:!1,class:"w-full"},null,8,["modelValue"])):S("",!0),e(g)?(n(),N("span",sa,L(e(g)),1)):S("",!0)])):S("",!0),e(p)==="tag"?(n(),N("div",aa,[l(e(Ye),{for:"append-toggle",class:"text-right"},{default:s(()=>[...P[19]||(P[19]=[f(" Append ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),a("div",na,[l(e(Vt),{id:"append-toggle",checked:e($),"onUpdate:checked":P[9]||(P[9]=d=>$.value=!e($)),disabled:e(M)},null,8,["checked","disabled"]),P[20]||(P[20]=a("span",{class:"text-sm"},"Append to existing",-1))]),a("span",oa,[e($)?(n(),N("span",da,[...P[21]||(P[21]=[f("Selected items will be ",-1),a("strong",null,"added",-1),f(" to existing items for selected devices.",-1)])])):(n(),N("span",ra,[...P[22]||(P[22]=[f("Selected items will ",-1),a("strong",null,"replace",-1),f(" all existing items for selected devices.",-1)])]))])])):S("",!0),e(y)?(n(),m(Js,{key:2,small:"",class:"mb-6",title:"Success",message:e(y),showClose:!0,onClosed:P[10]||(P[10]=d=>y.value="")},null,8,["message"])):S("",!0)]))]),l(e(Be),null,{default:s(()=>[l(e(de),{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:e(A),size:"sm"},{default:s(()=>[...P[24]||(P[24]=[f(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1},8,["onClick"]),l(e(de),{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:P[11]||(P[11]=d=>e(r)()),variant:"primary"},{default:s(()=>[l(He,{state:e(M),class:"items-center mr-2",color:"white",fillColor:"white"},null,8,["state"]),P[26]||(P[26]=f(" Confirm ",-1)),a("div",ua,[a("kbd",ca,[P[25]||(P[25]=f(" Ctrl  ",-1)),l(Z,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},pa={class:"hidden lg:inline-flex"},va={key:0,class:"text-sm font-light"},fa={class:"text-sm font-semibold"},ga={class:"py-1"},ya=["onClick"],xa=["checked"],ka={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},_a={"data-size":"20"},ba=Ue({__name:"StatusFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:B}){const b=B,h=re(()=>[{id:0,name:"Unreachable"},{id:1,name:"Reachable"},{id:2,name:"Unknown"},{id:100,name:"Disabled"},{id:200,name:"All"}]),$=V(!1),o=V([]),T=k;ae(()=>T.modelValue,_=>{o.value=_});function g(_){if(_.id===200)o.value.length===h.value.length?o.value=[]:o.value=[...h.value];else{const M=o.value.findIndex(w=>w.id===_.id);if(M!==-1){o.value.splice(M,1);const w=o.value.findIndex(U=>U.id===200);w!==-1&&o.value.splice(w,1)}else o.value.push(_)}$.value=!1,b("update:modelValue",o.value)}return(_,M)=>(n(),m(e(je),null,{default:s(()=>[l(e(Le),null,{default:s(()=>[l(e(de),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:s(()=>[l(e(Zt),{class:"w-4 h-4 lg:mr-2 text-rcgray-400"}),a("div",pa,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Status")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",va,[M[0]||(M[0]=f(" Status ",-1)),a("strong",fa,L(o.value.length)+" Selected",1)])):S("",!0)],64))])]),_:1})]),_:1}),l(e(ze),{side:"bottom",align:"start",class:"p-0 w-44"},{default:s(()=>[l(e(Oe),{class:"h-44"},{default:s(()=>[a("div",ga,[(n(!0),N(ee,null,ne(h.value,w=>(n(),N("div",{key:w.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:U=>g(w)},[a("input",{type:"checkbox",checked:o.value.some(U=>U.id===w.id),class:"mr-2"},null,8,xa),a("span",ka,[a("span",_a,L(w.name),1)])],8,ya))),128))])]),_:1})]),_:1})]),_:1}))}}),wa={class:"hidden lg:inline-flex"},ha={key:0,class:"text-sm font-light"},$a={class:"text-sm font-semibold"},Ca={class:"relative items-center w-full"},Da={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Sa={class:"py-1"},Va=["onClick"],Pa=["checked"],Ia={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ea={"data-size":"20"},Ma={class:"p-1 border-5"},Ra=Ue({__name:"TagFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:B}){const b=B,h=V([]),$=V(!1),o=V([]),T=V(""),g=V(!1),_=k;oe(()=>{w()}),ae(()=>_.modelValue,x=>{o.value=x,g.value=o.value.length===h.value.length});function M(x){if(x.id===9999999)g.value?(o.value=[],g.value=!1):(o.value=[...h.value],g.value=!0);else{const v=o.value.findIndex(p=>p.id===x.id);v!==-1?(o.value.splice(v,1),g.value=!1):(o.value.push(x),o.value.length===h.value.length&&(g.value=!0))}$.value=!1,b("update:modelValue",o.value)}function w(){Q.get("/api/tags/?perPage=10000&sort=tagname").then(x=>{h.value=x.data.data})}const U=re(()=>h.value.filter(x=>x.tagname.toLowerCase().includes(T.value.toLowerCase())));return(x,v)=>{const p=K("RcIcon");return n(),m(e(je),null,{default:s(()=>[l(e(Le),null,{default:s(()=>[l(e(de),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:s(()=>[l(p,{name:"tag",class:"lg:mr-2"}),a("div",wa,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Tag")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",ha,[v[2]||(v[2]=f(" Tag ",-1)),a("strong",$a,L(o.value.length)+" Selected",1)])):S("",!0)],64))])]),_:1})]),_:1}),l(e(ze),{side:"bottom",align:"start",class:"w-64 p-0"},{default:s(()=>[a("div",Ca,[l(e(Ze),{id:"search",type:"text",modelValue:T.value,"onUpdate:modelValue":v[0]||(v[0]=c=>T.value=c),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Da,[l(p,{name:"search"})])]),l(e(We)),l(e(Oe),{class:"h-44"},{default:s(()=>[a("div",Sa,[(n(!0),N(ee,null,ne(U.value,c=>(n(),N("div",{key:c.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:C=>M(c)},[a("input",{type:"checkbox",checked:o.value.some(C=>C.id===c.id),class:"mr-2"},null,8,Pa),a("span",Ia,[a("span",Ea,L(c.tagname),1)])],8,Va))),128))])]),_:1}),l(e(We)),a("div",Ma,[l(e(de),{variant:"ghost",class:"justify-start w-full p-1",onClick:v[1]||(v[1]=c=>M({id:9999999}))},{default:s(()=>[l(p,{name:"select-all",isSelected:g.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,L(g.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Ta={class:"hidden lg:inline-flex"},Ua={key:0,class:"text-sm font-light"},Na={class:"text-sm font-semibold"},Aa={class:"relative items-center w-full"},Ba={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Fa={class:"py-1"},La=["onClick"],za=["checked"],Oa={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ja={"data-size":"20"},Ka={class:"p-1 border-5"},qa=Ue({__name:"VendorFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:B}){const b=B,h=V([]),$=V(!1),o=V([]),T=V(""),g=V(!1),_=k;oe(()=>{w()}),ae(()=>_.modelValue,x=>{o.value=x,g.value=o.value.length===h.value.length});function M(x){if(x.id===9999999)g.value?(o.value=[],g.value=!1):(o.value=[...h.value],g.value=!0);else{const v=o.value.findIndex(p=>p.id===x.id);v!==-1?(o.value.splice(v,1),g.value=!1):(o.value.push(x),o.value.length===h.value.length&&(g.value=!0))}$.value=!1,b("update:modelValue",o.value)}function w(){Q.get("/api/vendors/?perPage=10000&sort=vendorName").then(x=>{h.value=x.data.data})}const U=re(()=>h.value.filter(x=>x.vendorName.toLowerCase().includes(T.value.toLowerCase())));return(x,v)=>{const p=K("RcIcon"),c=K("Button"),C=K("Input"),y=K("Separator");return n(),m(e(je),null,{default:s(()=>[l(e(Le),null,{default:s(()=>[l(c,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:s(()=>[l(p,{name:"vendor",class:"lg:mr-2"}),a("div",Ta,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Vendor")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",Ua,[v[2]||(v[2]=f(" Vendor ",-1)),a("strong",Na,L(o.value.length)+" Selected",1)])):S("",!0)],64))])]),_:1})]),_:1}),l(e(ze),{side:"bottom",align:"start",class:"w-64 p-0"},{default:s(()=>[a("div",Aa,[l(C,{id:"search",type:"text",modelValue:T.value,"onUpdate:modelValue":v[0]||(v[0]=u=>T.value=u),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Ba,[l(p,{name:"search"})])]),l(y),l(e(Oe),{class:"h-44"},{default:s(()=>[a("div",Fa,[(n(!0),N(ee,null,ne(U.value,u=>(n(),N("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:I=>M(u)},[a("input",{type:"checkbox",checked:o.value.some(I=>I.id===u.id),class:"mr-2"},null,8,za),a("span",Oa,[a("span",ja,L(u.vendorName),1)])],8,La))),128))])]),_:1}),l(y),a("div",Ka,[l(c,{variant:"ghost",class:"justify-start w-full p-1",onClick:v[1]||(v[1]=u=>M({id:9999999}))},{default:s(()=>[l(p,{name:"select-all",isSelected:g.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,L(g.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Ga={class:"hidden lg:inline-flex"},Ha={key:0,class:"text-sm font-light"},Ja={class:"text-sm font-semibold"},Xa={class:"relative items-center w-full"},Ya={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Za={class:"py-1"},Wa=["onClick"],Qa=["checked"],en={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},tn={"data-size":"20"},ln={class:"p-1 border-5"},sn=Ue({__name:"ModelFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:B}){const b=B,h=V([]),$=V(!1),o=V([]),T=V(""),g=V(!1),_=k;oe(()=>{w()}),ae(()=>_.modelValue,x=>{o.value=x,g.value=o.value.length===h.value.length});function M(x){if(x.id===9999999)g.value?(o.value=[],g.value=!1):(o.value=[...h.value],g.value=!0);else{const v=o.value.findIndex(p=>p.id===x.id);v!==-1?(o.value.splice(v,1),g.value=!1):(o.value.push(x),o.value.length===h.value.length&&(g.value=!0))}$.value=!1,b("update:modelValue",o.value)}function w(){Q.get("/api/device-models/?perPage=10000&sort=name").then(x=>{h.value=x.data.data})}const U=re(()=>h.value.filter(x=>x.name.toLowerCase().includes(T.value.toLowerCase())));return(x,v)=>{const p=K("RcIcon"),c=K("Button"),C=K("Input"),y=K("Separator");return n(),m(e(je),null,{default:s(()=>[l(e(Le),null,{default:s(()=>[l(c,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:s(()=>[l(p,{name:"model",class:"lg:mr-2"}),a("div",Ga,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Device Model")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",Ha,[v[2]||(v[2]=f(" Device Model ",-1)),a("strong",Ja,L(o.value.length)+" Selected",1)])):S("",!0)],64))])]),_:1})]),_:1}),l(e(ze),{side:"bottom",align:"start",class:"w-64 p-0"},{default:s(()=>[a("div",Xa,[l(C,{id:"search",type:"text",modelValue:T.value,"onUpdate:modelValue":v[0]||(v[0]=u=>T.value=u),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Ya,[l(p,{name:"search"})])]),l(y),l(e(Oe),{class:"h-44"},{default:s(()=>[a("div",Za,[(n(!0),N(ee,null,ne(U.value,u=>(n(),N("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:I=>M(u)},[a("input",{type:"checkbox",checked:o.value.some(I=>I.id===u.id),class:"mr-2"},null,8,Qa),a("span",en,[a("span",tn,L(u.name),1)])],8,Wa))),128))])]),_:1}),l(y),a("div",ln,[l(c,{variant:"ghost",class:"justify-start w-full p-1",onClick:v[1]||(v[1]=u=>M({id:9999999}))},{default:s(()=>[l(p,{name:"select-all",isSelected:g.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,L(g.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),an={class:"flex flex-col h-full gap-1 text-center"},nn={class:"flex items-center justify-between p-4"},on={class:"flex items-center"},dn={class:"flex gap-2"},rn={class:"flex items-center justify-end"},un={class:"px-6"},cn={class:"flex items-center"},mn=["title"],pn={class:"flex justify-between"},vn={class:"flex items-center"},fn={class:"border-b"},gn=["title"],yn=["title"],xn={key:1},kn=["title"],_n={key:1},bn=["title"],wn=["title"],hn={key:1},$n={class:"badge-container-fixed"},Cn={class:"button-cell-fixed"},Dn={key:0,class:"fixed bottom-5 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-4 bg-rcgray-900 text-white border border-rcgray-600 shadow-xl px-4 py-1.5 rounded-lg"},Sn={class:"text-sm"},Vn={class:"flex flex-col items-start gap-1"},Pn={class:"hidden md:inline-flex mr-1"},In={__name:"Main",props:{statusId:{type:Number,required:!1}},setup(k){const{devices:B,currentPage:b,perPage:h,lastPage:$,totalRecords:o,isLoading:T,isLoadingMore:g,hasMoreData:_,isLoadMoreMode:M,showConfirmDelete:w,editId:U,newDeviceModalKey:x,newBulkEditModalKey:v,searchTerm:p,filterStatus:c,filterCategories:C,filterTags:y,filterVendor:u,filterModel:I,sortParam:A,formatters:r,inventoryIsLoading:O,createDevice:J,deleteDevice:P,deleteManyDevices:Z,disableDevice:d,enableDevice:z,exportInventoryReport:i,handleKeyDown:q,handleSave:E,reload:R,viewDeviceDetailsPane:W,viewEditDialog:G,openBulkEditDialog:Y,disableManyDevices:ke,enableManyDevices:j,downloadManyDevices:me,fetchDevices:Je,loadMoreDevices:Pt,clearFilters:It,toggleSort:dt}=xl(),{selectedRows:pe,selectAll:Ge,toggleSelectAll:Et,toggleSelectRow:Mt}=Te(B),Xe=V(!1),rt=Wt(),Rt=De(),vt=re(()=>[{key:"checkbox",label:"Select",mandatory:!0,default:!0},{key:"id",label:"ID",default:!0},{key:"status",label:"Status",default:!0},{key:"device_name",label:"Name",mandatory:!0,default:!0},{key:"device_ip",label:"IP Address",default:!0},{key:"category",label:"Command Group",default:!0},{key:"vendor",label:"Vendor",default:!0},{key:"device_model",label:"Model",default:!0},{key:"config_good_count",label:"Config Count",default:!0},{key:"config_bad_count",label:"Config Failures",default:!0},{key:"last_config",label:"Last Config",default:!0},{key:"tags",label:"Tags",default:!0},{key:"actions",label:"Actions",mandatory:!0,default:!0}]),it=V(vt.value.filter(we=>we.default).map(we=>we.key)),le=re(()=>we=>it.value.includes(we));return oe(()=>{rt.query.statusId&&(c.value=[{id:parseInt(rt.query.statusId)}]),Je(),window.addEventListener("keydown",q),xe.on("deleteManyDevicesSuccess",()=>{pe.value=[],Ge.value=!1})}),ae(()=>rt.query,async we=>{if(we.openDeviceDialog){J(),await Qt();const{openDeviceDialog:D,...ut}=we;Rt.replace({query:ut},void 0,{replace:!0})}},{immediate:!0}),_e(()=>{window.removeEventListener("keydown",q)}),(we,D)=>{const ut=K("Input"),Tt=K("Separator"),ie=K("Button"),ve=K("RcIcon"),ft=K("Checkbox"),Ut=K("RcBadge"),Nt=K("Toaster");return n(),N("div",an,[a("div",nn,[a("div",on,[l(ut,{class:"ml-2 min-w-32 lg:min-w-60",autocomplete:"off",placeholder:"Filter [id, name, ip]...",modelValue:e(p),"onUpdate:modelValue":D[0]||(D[0]=F=>te(p)?p.value=F:null)},null,8,["modelValue"]),l(Tt,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),D[29]||(D[29]=a("span",{class:"mr-2 text-muted-foreground flex-grow min-w-max"},"Filters:",-1)),a("div",dn,[l(Es,{modelValue:e(C),"onUpdate:modelValue":D[1]||(D[1]=F=>te(C)?C.value=F:null)},null,8,["modelValue"]),l(Ra,{modelValue:e(y),"onUpdate:modelValue":D[2]||(D[2]=F=>te(y)?y.value=F:null)},null,8,["modelValue"]),l(qa,{modelValue:e(u),"onUpdate:modelValue":D[3]||(D[3]=F=>te(u)?u.value=F:null)},null,8,["modelValue"]),l(sn,{modelValue:e(I),"onUpdate:modelValue":D[4]||(D[4]=F=>te(I)?I.value=F:null)},null,8,["modelValue"]),l(ba,{modelValue:e(c),"onUpdate:modelValue":D[5]||(D[5]=F=>te(c)?c.value=F:null)},null,8,["modelValue"]),e(p)||e(C).length||e(y).length||e(u).length||e(I).length||e(c).length?(n(),m(Se,{key:0,"onUpdate:modelValue":e(It)},null,8,["onUpdate:modelValue"])):S("",!0)])]),a("div",rn,[l(Ls,{columns:vt.value,modelValue:it.value,"onUpdate:modelValue":D[6]||(D[6]=F=>it.value=F),storageKey:"rconfig.deviceTable.columns"},null,8,["columns","modelValue"]),l(e(lt),null,{default:s(()=>[l(e(et),{"as-child":"",class:"inline-flex xl:hidden"},{default:s(()=>[l(ie,{variant:"ghost",class:"h-8 ml-2"},{default:s(()=>[l(e(el),{size:"16"})]),_:1})]),_:1}),l(e(tt),{class:"w-56",align:"end",side:"bottom"},{default:s(()=>[l(e(fe),{class:"cursor-pointer hover:bg-rcgray-600 group",onClick:D[7]||(D[7]=se(F=>e(J)(),["prevent"]))},{default:s(()=>[D[30]||(D[30]=f(" New Device ",-1)),l(e(ge),{class:"group"},{default:s(()=>[l(e(tl),{size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})]),_:1})]),_:1}),l(e(fe),{class:"cursor-pointer hover:bg-rcgray-600 group",onClick:D[8]||(D[8]=se(F=>e(i)(),["prevent"]))},{default:s(()=>[D[31]||(D[31]=f(" Inventory Report ",-1)),l(e(ge),{class:"group"},{default:s(()=>[e(O)?S("",!0):(n(),m(e(gt),{key:0,size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})),l(He,{state:e(O),class:"mr-2"},null,8,["state"])]),_:1})]),_:1})]),_:1})]),_:1}),l(ie,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse hidden xl:inline-flex",size:"sm",onClick:D[9]||(D[9]=se(F=>e(J)(),["prevent"])),variant:"primary"},{default:s(()=>[...D[32]||(D[32]=[f(" New Device ",-1),a("div",{class:"pl-2 py-1 px-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),l(ie,{type:"submit",class:"px-2 py-1 ml-2 text-sm hidden xl:inline-flex",size:"sm",onClick:D[10]||(D[10]=se(F=>e(i)(),["prevent"])),variant:"outline"},{default:s(()=>[e(O)?S("",!0):(n(),m(e(gt),{key:0,size:"16",class:"text-muted-foreground mr-2"})),l(He,{state:e(O),class:"mr-2"},null,8,["state"]),D[33]||(D[33]=f(" Inventory Report ",-1))]),_:1}),l(ve,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:D[11]||(D[11]=F=>e(R)())})])]),a("div",un,[l(e(Me),null,{default:s(()=>[l(e(Ve),null,{default:s(()=>[l(e(ce),null,{default:s(()=>[le.value("checkbox")?(n(),m(e(X),{key:0,class:"w-[2%]"},{default:s(()=>[l(ft,{id:"selectAll",modelValue:e(Ge),"onUpdate:modelValue":D[12]||(D[12]=F=>te(Ge)?Ge.value=F:null),checked:e(Ge),onClick:D[13]||(D[13]=F=>e(Et)())},null,8,["modelValue","checked"])]),_:1})):S("",!0),le.value("id")?(n(),m(e(X),{key:1,class:"w-[5%]"},{default:s(()=>[l(ie,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:D[14]||(D[14]=F=>e(dt)("id"))},{default:s(()=>[l(ve,{name:"sort",sortParam:e(A),field:"id"},null,8,["sortParam"]),D[34]||(D[34]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1})):S("",!0),le.value("status")?(n(),m(e(X),{key:2,class:"w-[2%]"},{default:s(()=>[l(ie,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:D[15]||(D[15]=F=>e(dt)("status"))},{default:s(()=>[l(ve,{name:"sort",sortParam:e(A),field:"status"},null,8,["sortParam"]),D[35]||(D[35]=a("span",{class:"ml-2"},"Status",-1))]),_:1})]),_:1})):S("",!0),le.value("device_name")?(n(),m(e(X),{key:3,class:"w-[20%]"},{default:s(()=>[l(ie,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:D[16]||(D[16]=F=>e(dt)("device_name"))},{default:s(()=>[l(ve,{name:"sort",sortParam:e(A),field:"device_name"},null,8,["sortParam"]),D[36]||(D[36]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1})):S("",!0),le.value("device_ip")?(n(),m(e(X),{key:4,class:"w-[10%]"},{default:s(()=>[...D[37]||(D[37]=[f("IP Address",-1)])]),_:1})):S("",!0),le.value("category")?(n(),m(e(X),{key:5,class:"w-[10%]"},{default:s(()=>[...D[38]||(D[38]=[f("Command Group",-1)])]),_:1})):S("",!0),le.value("vendor")?(n(),m(e(X),{key:6,class:"w-[10%]"},{default:s(()=>[...D[39]||(D[39]=[f("Vendor",-1)])]),_:1})):S("",!0),le.value("device_model")?(n(),m(e(X),{key:7,class:"w-[10%]"},{default:s(()=>[...D[40]||(D[40]=[f("Model",-1)])]),_:1})):S("",!0),le.value("config_good_count")?(n(),m(e(X),{key:8,class:"w-[10%]"},{default:s(()=>[...D[41]||(D[41]=[f("Config Count",-1)])]),_:1})):S("",!0),le.value("config_bad_count")?(n(),m(e(X),{key:9,class:"w-[10%]"},{default:s(()=>[...D[42]||(D[42]=[f("Config Failures",-1)])]),_:1})):S("",!0),le.value("last_config")?(n(),m(e(X),{key:10,class:"w-[10%]"},{default:s(()=>[...D[43]||(D[43]=[f("Last Config",-1)])]),_:1})):S("",!0),le.value("tags")?(n(),m(e(X),{key:11,class:"w-[10%]"},{default:s(()=>[...D[44]||(D[44]=[f("Tags",-1)])]),_:1})):S("",!0),le.value("actions")?(n(),m(e(X),{key:12,class:"w-[10%]"},{default:s(()=>[...D[45]||(D[45]=[f("Actions",-1)])]),_:1})):S("",!0)]),_:1})]),_:1}),l(e(Pe),null,{default:s(()=>[e(T)?(n(),m(Ie,{key:0})):e(T)?(n(),m(Ee,{key:2})):(n(!0),N(ee,{key:1},ne(e(B),F=>(n(),m(e(ce),{key:F.id,class:"table-row-fixed"},{default:s(()=>[le.value("checkbox")?(n(),m(e(H),{key:0,class:"text-start table-cell-fixed"},{default:s(()=>[l(ft,{class:"cursor-pointer",id:"select-"+F.id,checked:!!e(pe).includes(F.id),onClick:ue=>e(Mt)(F.id)},null,8,["id","checked","onClick"])]),_:2},1024)):S("",!0),le.value("id")?(n(),m(e(H),{key:1,class:"text-start table-cell-fixed"},{default:s(()=>[a("div",cn,[a("span",{class:Ce({"text-red-500":F.device_added_by==9e3,"text-blue-500":F.device_added_by==9001}),title:F.device_added_by==9e3?"Added by Zabbix":F.device_added_by==9001?"Added by Netbox":""},L(F.id),11,mn),F.device_added_by&&F.device_added_by>=9e3?(n(),m(ve,{key:0,name:"imported-device",addedBy:F.device_added_by,source:F.device_added_by===9001?"Netbox":F.device_added_by===9e3?"Zabbix":"Integration"},null,8,["addedBy","source"])):S("",!0)])]),_:2},1024)):S("",!0),le.value("status")?(n(),m(e(H),{key:2,class:"text-start table-cell-fixed"},{default:s(()=>[F.status===0?(n(),m(ve,{key:0,name:"status-red"})):S("",!0),F.status===1?(n(),m(ve,{key:1,name:"status-green"})):S("",!0),F.status===2?(n(),m(ve,{key:2,name:"status-yellow"})):S("",!0),F.status===100?(n(),m(ve,{key:3,name:"status-gray"})):S("",!0),F.status===300?(n(),m(ve,{key:4,name:"status-red-agent",size:"16"})):S("",!0),F.status===301?(n(),m(ve,{key:5,name:"status-gray-agent"})):S("",!0)]),_:2},1024)):S("",!0),le.value("device_name")?(n(),m(e(H),{key:3,class:"text-start"},{default:s(()=>[a("div",pn,[l(ie,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:ue=>e(W)(F.id)},{default:s(()=>[a("div",vn,[a("span",fn,L(F.device_name),1)])]),_:2},1032,["onClick"])])]),_:2},1024)):S("",!0),le.value("device_ip")?(n(),m(e(H),{key:4,class:"text-start table-cell-fixed"},{default:s(()=>[a("span",{class:"text-truncate",title:F.device_ip},L(F.device_ip),9,gn)]),_:2},1024)):S("",!0),le.value("category")?(n(),m(e(H),{key:5,class:"text-start table-cell-fixed"},{default:s(()=>[F.category.length>0?(n(),N("span",{key:0,class:"text-truncate",title:F.category[0].categoryName},L(F.category[0].categoryName),9,yn)):(n(),N("span",xn,"--"))]),_:2},1024)):S("",!0),le.value("vendor")?(n(),m(e(H),{key:6,class:"text-start table-cell-fixed"},{default:s(()=>[F.vendor.length>0?(n(),N("span",{key:0,class:"text-truncate",title:F.vendor[0].vendorName},L(F.vendor[0].vendorName),9,kn)):(n(),N("span",_n,"--"))]),_:2},1024)):S("",!0),le.value("device_model")?(n(),m(e(H),{key:7,class:"text-start table-cell-fixed"},{default:s(()=>[a("span",{class:"text-truncate",title:F.device_model},L(F.device_model),9,bn)]),_:2},1024)):S("",!0),le.value("config_good_count")?(n(),m(e(H),{key:8,class:"text-start table-cell-fixed"},{default:s(()=>{var ue;return[f(L(((ue=F.config_summary)==null?void 0:ue.total_count)||"--"),1)]}),_:2},1024)):S("",!0),le.value("config_bad_count")?(n(),m(e(H),{key:9,class:"text-start table-cell-fixed"},{default:s(()=>{var ue;return[f(L(((ue=F.config_summary)==null?void 0:ue.download_status_0_count)||"--"),1)]}),_:2},1024)):S("",!0),le.value("last_config")?(n(),m(e(H),{key:10,class:"text-start table-cell-fixed"},{default:s(()=>[F.last_config?(n(),N("span",{key:0,class:"text-truncate",title:e(r).formatTime(F.last_config.created_at)},L(e(r).formatTime(F.last_config.created_at)),9,wn)):(n(),N("span",hn,"--"))]),_:2},1024)):S("",!0),le.value("tags")?(n(),m(e(H),{key:11,class:"text-start table-cell-fixed"},{default:s(()=>[a("div",$n,[l($e,{items:F.tag,displayField:"tagname",linkField:"view_url",maxVisible:1,hoverCardFields:["id","tagname","description"]},null,8,["items"])])]),_:2},1024)):S("",!0),le.value("actions")?(n(),m(e(H),{key:12,class:"text-start table-cell-fixed"},{default:s(()=>[a("div",Cn,[l(ks,{rowData:F,onOnEnable:ue=>e(z)(F.id),onOnClone:ue=>(e(G)(F.id),Xe.value=!0),onOnDisable:ue=>e(d)(F.id),onOnEdit:ue=>(e(G)(F.id),Xe.value=!1),onOnDelete:ue=>e(P)(F.id),showCopyDownloadDebug:!0},null,8,["rowData","onOnEnable","onOnClone","onOnDisable","onOnEdit","onOnDelete"])])]),_:2},1024)):S("",!0)]),_:2},1024))),128))]),_:1})]),_:1}),e(pe).length?(n(),N("div",Dn,[a("span",Sn,[l(Ut,{variant:"primary",class:"mr-1"},{default:s(()=>[f(L(e(pe).length),1)]),_:1}),D[46]||(D[46]=f(" Devices Selected ",-1))]),l(e(je),null,{default:s(({open:F})=>[l(e(Le),{class:"col-span-3"},{default:s(()=>[l(ie,{class:"text-sm px-1.5 py-0 h-8 flex items-center gap-1 group",variant:"outline"},{default:s(()=>[l(e(ll),{class:"inline-block mr-1 ml-0",size:"14"}),D[47]||(D[47]=a("span",{class:"hidden md:inline-flex"},"Enable/Disable",-1)),l(e(mt),{class:Ce(["transition-transform duration-200 ease-in-out group-hover:rotate-180",{"rotate-180":F}]),size:"14"},null,8,["class"])]),_:2},1024)]),_:2},1024),l(e(ze),{side:"bottom",align:"start",class:"col-span-3 p-1 text-left w-max"},{default:s(()=>[a("div",Vn,[l(ie,{class:"text-sm px-1.5 py-0 h-8 hover:animate-pulse w-full",onClick:D[17]||(D[17]=se(ue=>e(j)(e(pe)),["prevent"])),variant:"ghost"},{default:s(()=>[l(e(Dt),{size:"16",class:"text-green-300 mr-1"}),D[48]||(D[48]=f(" Enable Selected ",-1))]),_:1}),l(ie,{class:"text-sm px-1.5 py-0 h-8 w-full",onClick:D[18]||(D[18]=se(ue=>e(ke)(e(pe)),["prevent"])),variant:"ghost"},{default:s(()=>[l(e(St),{size:"16",class:"text-red-300 mr-1"}),D[49]||(D[49]=f(" Disable Selected ",-1))]),_:1})])]),_:1})]),_:1}),l(ie,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",onClick:D[19]||(D[19]=se(F=>e(me)(e(pe)),["prevent"])),variant:"outline"},{default:s(()=>[l(ve,{name:"folder-download-open",class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),D[50]||(D[50]=a("span",{class:"hidden md:inline-flex"},"Download Now",-1))]),_:1}),l(ie,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",onClick:D[20]||(D[20]=se(F=>e(Y)(),["prevent"])),variant:"outline"},{default:s(()=>[l(e(sl),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),D[51]||(D[51]=a("span",{class:"hidden md:inline-flex"},"Bulk Edit",-1))]),_:1}),l(ie,{class:"text-sm px-1.5 py-0 bg-red-600 hover:bg-red-700 hover:animate-pulse h-8",onClick:D[21]||(D[21]=se(F=>w.value=!0,["prevent"])),variant:"primary"},{default:s(()=>[l(e(_t),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),a("span",Pn,"Delete "+L(e(pe).length),1)]),_:1})])):S("",!0),e(M)&&e(_)?(n(),m(ie,{key:1,onClick:e(Pt),disabled:e(g),class:"load-more-btn my-4",variant:"outline"},{default:s(()=>[D[52]||(D[52]=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M12 8v8m0 0l4-4m-4 4l-4-4"}),a("path",{d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"})],-1)),f(" "+L(e(g)?"Loading...":"Load More Results"),1)]),_:1},8,["onClick","disabled"])):S("",!0),l(Re,{currentPage:e(b),lastPage:e($),perPage:e(h),"onUpdate:currentPage":D[22]||(D[22]=F=>b.value=F),"onUpdate:perPage":D[23]||(D[23]=F=>h.value=F),totalRecords:e(o),isLoading:e(T)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(kl,{onSave:D[24]||(D[24]=F=>e(E)()),onClose:D[25]||(D[25]=F=>Xe.value=!1),key:e(x),editId:e(U),isClone:Xe.value},null,8,["editId","isClone"])),e(pe).length>0?(n(),m(ma,{checkedRows:e(pe),key:e(v),onBulkUpdateSuccess:D[26]||(D[26]=F=>e(R)())},null,8,["checkedRows"])):S("",!0),l(he,{ids:e(pe),showConfirmDelete:e(w),onClose:D[27]||(D[27]=F=>w.value=!1),onHandleDelete:D[28]||(D[28]=F=>e(Z)(e(pe)))},null,8,["ids","showConfirmDelete"]),l(Nt)])])}}};function En(k,B){const b=V(!1),h=V([]),$=V([]),o=V([]),{toastSuccess:T,toastError:g}=ye(),_=be(),{closeDialog:M,isDialogOpen:w}=_,U={1:"device",2:"tag",3:"snippet",4:"agent"};oe(()=>{v()});const x=re(()=>(console.log(U[k.type]),U[k.type]||"Item")),v=async()=>{switch(b.value=!0,await p(),k.type){case 1:await c();break;case 2:await C();break;case 3:await y();break;case 4:await u();break;default:$.value=[]}b.value=!1},p=async()=>{try{const z=await axios.get("/api/roles");h.value=z.data.data}catch(z){o.value=z.response.data.errors,g("Error","Failed to fetch roles",z.response.data.message),console.error("Error fetching roles:",z)}},c=async()=>{try{const z=await axios.get(`/api/devices/${k.itemId}`);z.data.roles.length>0&&($.value=z.data.roles.map(i=>i.id))}catch(z){o.value=z.response.data.errors,g("Error","Failed to fetch device roles",z.response.data.message)}},C=async()=>{try{const z=await axios.get(`/api/tags/${k.itemId}`);z.data.roles.length>0&&($.value=z.data.roles.map(i=>i.id))}catch(z){o.value=z.response.data.errors,g("Error","Failed to fetch tag roles",z.response.data.message)}},y=async()=>{try{const z=await axios.get(`/api/snippets/${k.itemId}`);z.data.roles.length>0&&($.value=z.data.roles.map(i=>i.id))}catch(z){o.value=z.response.data.errors,g("Error","Failed to fetch snippet roles",z.response.data.message)}},u=async()=>{try{const z=await axios.get(`/api/agents/${k.itemId}`);z.data.roles.length>0&&($.value=z.data.roles.map(i=>i.id))}catch(z){o.value=z.response.data.errors,g("Error","Failed to fetch agent roles",z.response.data.message)}};function I(){switch(k.type){case 1:A();break;case 2:r();break;case 3:O();break;case 4:J();break;default:$.value=[]}setTimeout(()=>{B("updateRoles",$.value)},300)}const A=async()=>{if($.value.length===0)return g("Error","Please select at least one role"),!1;try{return await axios.post(`/api/device/update-roles/${k.itemId}`,{roles:$.value}),T("Success","Roles assigned successfully"),d(),!0}catch(z){return o.value=z.response.data.errors,g("Error","Failed to update roles",z.response.data.message),!1}},r=async()=>{if($.value.length===0)return g("Error","Please select at least one role"),!1;try{return await axios.post(`/api/tags/update-roles/${k.itemId}`,{roles:$.value}),T("Success","Roles assigned successfully"),d(),!0}catch(z){return o.value=z.response.data.errors,g("Error","Failed to update roles",z.response.data.message),!1}},O=async()=>{if($.value.length===0)return g("Error","Please select at least one role"),!1;try{return await axios.post(`/api/snippets/update-roles/${k.itemId}`,{roles:$.value}),T("Success","Roles assigned successfully"),d(),!0}catch(z){return o.value=z.response.data.errors,g("Error","Failed to update roles",z.response.data.message),!1}},J=async()=>{if($.value.length===0)return g("Error","Please select at least one role"),!1;try{return await axios.post(`/api/agents/update-roles/${k.itemId}`,{roles:$.value}),T("Success","Roles assigned successfully"),d(),!0}catch(z){return o.value=z.response.data.errors,g("Error","Failed to update roles",z.response.data.message),!1}},P=z=>$.value.includes(z),Z=z=>{if(z===1)return;const i=$.value.indexOf(z);i>-1?$.value.splice(i,1):$.value.push(z)};function d(){M("DialogRoleAssignment")}return{displayName:x,isLoading:b,roles:h,updateRoles:I,isDialogOpen:w,isRoleSelected:P,toggleRole:Z,close:d}}const Mn={class:"grid gap-2 p-4"},Rn={key:0,class:"text-xs text-muted-foreground"},Tn={class:"rc-kdb-class2 ml-2"},Un={__name:"RcRoleDialog",props:{itemId:{type:Number,required:!0},type:{type:Number,default:0,validator:k=>[k,1,2,3,4].includes(k)}},emits:["close","confirm","updateRoles"],setup(k,{emit:B}){const b=k,h=B,{displayName:$,isLoading:o,roles:T,updateRoles:g,isDialogOpen:_,isRoleSelected:M,toggleRole:w,close:U}=En(b,h);return(x,v)=>{const p=K("RcIcon");return n(),m(e(Fe),{open:e(_)("DialogRoleAssignment")},{default:s(()=>[l(e(Ne),{class:"w-full p-0 bg-background text-foreground border border-border",onInteractOutside:v[2]||(v[2]=c=>e(U)()),onPointerDownOutside:v[3]||(v[3]=c=>e(U)()),onEscapeKeyDown:v[4]||(v[4]=c=>e(U)()),onCloseClicked:v[5]||(v[5]=c=>e(U)())},{default:s(()=>[l(e(qe),{class:"rc-dialog-header"},{default:s(()=>[l(e(Ae),{class:"text-sm text-muted-foreground flex items-center"},{default:s(()=>[l(p,{name:"rbac",class:"inline-block mr-2"}),a("span",null,"Assign roles to "+L(e($))+" ID: "+L(k.itemId),1)]),_:1})]),_:1}),a("div",Mn,[e(o)?(n(),N(ee,{key:0},ne(3,c=>a("div",{class:"flex items-center space-x-2",key:c},[l(e(yt),{class:"h-4 w-4"}),l(e(yt),{class:"h-4 w-[250px]"})])),64)):(n(!0),N(ee,{key:1},ne(e(T),c=>(n(),N("div",{key:c.id,class:"flex items-center space-x-2"},[l(e(al),{id:`role-${c.id}`,checked:e(M)(c.id),"onUpdate:checked":C=>e(w)(c.id),disabled:c.id===1},null,8,["id","checked","onUpdate:checked","disabled"]),l(e(Ye),{for:`role-${c.id}`,class:"text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:s(()=>[f(L(c.name),1)]),_:2},1032,["for"]),c.id===1?(n(),N("div",Rn,"   - Primary admin role cannot be removed ")):S("",!0)]))),128))]),l(e(Be),{class:"rc-dialog-footer"},{default:s(()=>[l(e(de),{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm",onClick:v[0]||(v[0]=c=>e(U)()),size:"sm"},{default:s(()=>[...v[6]||(v[6]=[f(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ESC")],-1)])]),_:1}),l(e(de),{type:"submit",variant:"primary",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700",size:"sm",onClick:v[1]||(v[1]=c=>e(g)())},{default:s(()=>[v[8]||(v[8]=f(" Save ",-1)),a("kbd",Tn,[v[7]||(v[7]=f(" Ctrl  ",-1)),l(p,{name:"enter",class:"ml-1"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},Nn={class:"flex items-center"},An={class:"ml-2"},Bn={class:"grid gap-2 py-4"},Fn={class:"grid items-center grid-cols-4 gap-2"},Ln={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},zn={class:"grid items-center grid-cols-4 gap-2"},On={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},jn={class:"pl-2 ml-auto"},Kn={class:"rc-kdb-class2"},qn={class:"pl-2 ml-auto"},Gn={class:"rc-kdb-class2"},Hn={__name:"TagAddEditDialog",props:{editId:Number},emits:["save"],setup(k,{emit:B}){const{toastSuccess:b,toastError:h}=ye(),$=be(),{closeDialog:o,isDialogOpen:T}=$,g=B,_=V([]),M=V({tagname:"",tagDescription:""}),w=k;function U(v){v.ctrlKey&&v.key==="Enter"&&x()}oe(()=>{w.editId>0&&Q.get(`/api/tags/${w.editId}`).then(v=>{M.value=v.data}),window.addEventListener("keydown",U)}),_e(()=>{window.removeEventListener("keydown",U)});function x(){let v=w.editId>0?`/${w.editId}`:"",p=w.editId>0?"patch":"post";Q[p]("/api/tags"+v,M.value).then(c=>{g("save",c.data),b("Tag saved","The tag has been saved successfully."),o("DialogNewTag")}).catch(c=>{_.value=c.response.data.errors,h("Error","Failed to save tag.")})}return(v,p)=>{const c=K("RcIcon"),C=K("Label"),y=K("Input"),u=K("Button");return n(),m(e(Fe),{open:e(T)("DialogNewTag")},{default:s(()=>[l(e(kt),{"as-child":""}),l(e(Ne),{class:"w-full p-0",onEscapeKeyDown:p[3]||(p[3]=I=>e(o)("DialogNewTag")),onPointerDownOutside:p[4]||(p[4]=I=>e(o)("DialogNewTag")),onCloseClicked:p[5]||(p[5]=I=>e(o)("DialogNewTag"))},{default:s(()=>[l(e(qe),{class:"rc-dialog-header"},{default:s(()=>[l(e(Ae),{class:"text-sm text-rcgray-200"},{default:s(()=>[a("div",Nn,[l(c,{name:"commands"}),a("span",An,L(k.editId>0?"Edit":"New")+" Tag "+L(k.editId>0?"(ID: "+k.editId+")":""),1)])]),_:1})]),_:1}),a("div",Bn,[a("div",Fn,[l(C,{for:"tagname",class:"text-right"},{default:s(()=>[...p[6]||(p[6]=[f(" Tag Name ",-1),a("span",{class:"text-red-600"},"*",-1)])]),_:1}),l(y,{modelValue:M.value.tagname,"onUpdate:modelValue":p[0]||(p[0]=I=>M.value.tagname=I),id:"tagname",class:"col-span-3"},null,8,["modelValue"]),_.value.tagname?(n(),N("span",Ln,L(_.value.tagname[0]),1)):S("",!0)]),a("div",zn,[l(C,{for:"tagDescription",class:"text-right"},{default:s(()=>[...p[7]||(p[7]=[f("Description",-1)])]),_:1}),l(y,{modelValue:M.value.tagDescription,"onUpdate:modelValue":p[1]||(p[1]=I=>M.value.tagDescription=I),id:"tagDescription",class:"col-span-3"},null,8,["modelValue"]),_.value.tagDescription?(n(),N("span",On,L(_.value.tagDescription[0]),1)):S("",!0)])]),l(e(Be),{class:"rc-dialog-footer bg-rcgray-800"},{default:s(()=>[l(u,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:p[2]||(p[2]=I=>e(o)("DialogNewTag")),size:"sm"},{default:s(()=>[...p[8]||(p[8]=[f(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),w.editId===0?(n(),m(u,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:x,variant:"primary"},{default:s(()=>[p[10]||(p[10]=f(" Save ",-1)),a("div",jn,[a("kbd",Kn,[p[9]||(p[9]=f(" Ctrl  ",-1)),l(c,{name:"enter",class:"ml-1"})])])]),_:1})):(n(),m(u,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:x,variant:"primary"},{default:s(()=>[p[12]||(p[12]=f(" Update ",-1)),a("div",qn,[a("kbd",Gn,[p[11]||(p[11]=f(" Ctrl  ",-1)),l(c,{name:"enter",class:"ml-1"})])])]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"])}}};function Jn(){const k=V(1),B=at(),b=V(B.get("useTags","perPage",10)),h=V("-id"),$=V(""),o=V({}),T=V([]),g=V(!1),_=V(1),M=V(0),w=V(1),U=V(1),x=V(!1),v=be(),{openDialog:p}=v,{toastSuccess:c,toastError:C}=ye(),{reload:y}=ot(I),{toggleSort:u}=nt(h,I,"useTags");async function I(q={}){g.value=!0;try{const E=await Q.get("/api/tags",{params:{page:k.value,perPage:b.value,sort:h.value,...o.value}});T.value=E.data,_.value=E.data.last_page}catch(E){console.error("Error fetching tags:",E),C("Error","Failed to fetch tags.")}finally{g.value=!1}}const A=async()=>{M.value=0,w.value=Math.random(),p("DialogNewTag")};function r(q){M.value=q,w.value=Math.random(),p("DialogNewTag")}const O=q=>{M.value=q,U.value=Math.random(),p("DialogRoleAssignment")},J=async q=>{try{await Q.delete(`/api/tags/${q}`),I(),c("Tag Deleted","The tag has been deleted successfully."),x.value=!1}catch(E){E.status===422?C("Error",E.response.data.message):(console.error("Error deleting Tag:",E),C("Error","Failed to delete Tag."))}},P=async q=>{try{await Q.post("/api/tags/delete-many",{ids:q}),I(),c("Tags Deleted","The tags have been deleted successfully."),x.value=!1,xe.emit("deleteManyTagsSuccess")}catch(E){E.status===422?C("Error",E.response.data.message):(console.error("Error deleting Tags:",E),C("Error","Failed to delete Tags.")),x.value=!1}},Z=q=>{M.value=q,w.value=Math.random(),p("DialogNewTag")},d=()=>{I(),w.value=Math.random()};function z(q){q.altKey&&q.key==="n"&&(q.preventDefault(),p("DialogNewTag"))}const i=Qe(()=>{o.value["filter[q]"]=$.value,k.value=1,I()},500);return ae(k,()=>{I()}),ae($,()=>{i()}),ae(b,q=>{B.set("useTags","perPage",q),I()}),{reload:y,tags:T,isLoading:g,currentPage:k,perPage:b,lastPage:_,editId:M,newTagModalKey:w,newRoleModalKey:U,searchTerm:$,showConfirmDelete:x,openDialog:p,fetchTags:I,createTag:A,updateTag:r,deleteTag:J,deleteManyTags:P,handleSave:d,handleRoleAssignment:O,handleKeyDown:z,viewEditDialog:Z,toggleSort:u,sortParam:h}}const Xn={class:"flex flex-col h-full gap-1 text-center"},Yn={class:"flex items-center justify-between p-4"},Zn={class:"flex items-center"},Wn={class:"flex items-center justify-end"},Qn={class:"px-6"},eo={__name:"Main",setup(k){const{reload:B,tags:b,isLoading:h,currentPage:$,perPage:o,lastPage:T,editId:g,newTagModalKey:_,newRoleModalKey:M,searchTerm:w,showConfirmDelete:U,fetchTags:x,createTag:v,deleteTag:p,deleteManyTags:c,handleSave:C,handleKeyDown:y,handleRoleAssignment:u,viewEditDialog:I,toggleSort:A,sortParam:r}=Jn(),{selectedRows:O,selectAll:J,toggleSelectAll:P,toggleSelectRow:Z}=Te(b),d=De();return oe(()=>{var z,i;(i=(z=d.currentRoute)==null?void 0:z.value.params)!=null&&i.id&&(g.value=parseInt(d.currentRoute.value.params.id),I(g.value)),x(),window.addEventListener("keydown",y),xe.on("deleteManyTagsSuccess",()=>{O.value=[],J.value=!1})}),_e(()=>{window.removeEventListener("keydown",y)}),(z,i)=>{const q=K("Input"),E=K("Button"),R=K("RcIcon"),W=K("Checkbox");return n(),N("div",Xn,[a("div",Yn,[a("div",Zn,[l(q,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter tags...",modelValue:e(w),"onUpdate:modelValue":i[0]||(i[0]=G=>te(w)?w.value=G:null)},null,8,["modelValue"]),e(w)?(n(),m(Se,{key:0,"onUpdate:modelValue":i[1]||(i[1]=G=>w.value="")})):S("",!0)]),a("div",Wn,[e(O).length?(n(),m(E,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=se(G=>U.value=!0,["prevent"])),variant:"primary"},{default:s(()=>[f("Delete Selected "+L(e(O).length)+" Tag(s) ",1)]),_:1})):S("",!0),l(E,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:se(e(v),["prevent"]),variant:"primary"},{default:s(()=>[...i[14]||(i[14]=[f(" New Tag ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),l(R,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:i[3]||(i[3]=G=>e(B)())})])]),a("div",Qn,[l(e(Me),null,{default:s(()=>[l(e(Ve),null,{default:s(()=>[l(e(ce),null,{default:s(()=>[l(e(X),{class:"w-[2%]"},{default:s(()=>[l(W,{id:"selectAll",modelValue:e(J),"onUpdate:modelValue":i[4]||(i[4]=G=>te(J)?J.value=G:null),checked:e(J),onClick:i[5]||(i[5]=G=>e(P)())},null,8,["modelValue","checked"])]),_:1}),l(e(X),{class:"w-[5%]"},{default:s(()=>[l(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[6]||(i[6]=G=>e(A)("id"))},{default:s(()=>[l(R,{name:"sort",sortParam:e(r),field:"id"},null,8,["sortParam"]),i[15]||(i[15]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[l(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[7]||(i[7]=G=>e(A)("tagname"))},{default:s(()=>[l(R,{name:"sort",sortParam:e(r),field:"tagname"},null,8,["sortParam"]),i[16]||(i[16]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[...i[17]||(i[17]=[f("Description",-1)])]),_:1}),l(e(X),{class:"w-[40%]"},{default:s(()=>[...i[18]||(i[18]=[f("Devices",-1)])]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[...i[19]||(i[19]=[f("Roles",-1)])]),_:1}),l(e(X),{class:"w-[10%]"},{default:s(()=>[...i[20]||(i[20]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),l(e(Pe),null,{default:s(()=>[e(h)?(n(),m(Ie,{key:0})):e(h)?(n(),m(Ee,{key:2})):(n(!0),N(ee,{key:1},ne(e(b).data,G=>(n(),m(e(ce),{key:G.id},{default:s(()=>[l(e(H),{class:"text-start"},{default:s(()=>[l(W,{class:"cursor-pointer",id:"select-"+G.id,checked:!!e(O).includes(G.id),onClick:Y=>e(Z)(G.id)},null,8,["id","checked","onClick"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(G.id),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(G.tagname),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(G.tagDescription),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l($e,{items:G.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l($e,{items:G.roles,displayField:"name",linkString:"/settings/roles",maxVisible:3,hoverCardFields:["id","name","description"]},null,8,["items"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l(Ke,{rowData:G,onOnEdit:Y=>e(I)(G.id),onOnDelete:Y=>e(p)(G.id),showRolesBtn:!0,onOnRoleAssignment:Y=>e(u)(G.id)},null,8,["rowData","onOnEdit","onOnDelete","onOnRoleAssignment"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(Re,{currentPage:e($),lastPage:e(T),perPage:e(o),"onUpdate:currentPage":i[8]||(i[8]=G=>$.value=G),"onUpdate:perPage":i[9]||(i[9]=G=>o.value=G),totalRecords:e(b).total,isLoading:e(h)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(Hn,{onSave:i[10]||(i[10]=G=>e(C)()),key:e(_),editId:e(g)},null,8,["editId"])),l(he,{ids:e(O),showConfirmDelete:e(U),onClose:i[11]||(i[11]=G=>U.value=!1),onHandleDelete:i[12]||(i[12]=G=>e(c)(e(O)))},null,8,["ids","showConfirmDelete"]),e(g)>0?(n(),m(Un,{itemId:e(g),key:e(M),type:2,onUpdateRoles:i[13]||(i[13]=G=>e(x)())},null,8,["itemId"])):S("",!0)])])}}},to={key:0,class:"flex justify-center py-8"},lo={class:"space-y-2"},so={key:0,class:"text-sm text-red-600"},ao={key:0,class:"space-y-2"},no={class:"max-h-32 overflow-y-auto border rounded-md p-3 bg-gray-50"},oo={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},ro=["title"],io={key:1,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4"},uo={class:"pl-2 ml-auto"},co={class:"rc-kdb-class2"},mo={class:"pl-2 ml-auto"},po={class:"rc-kdb-class2"},vo={__name:"DeviceModelAddEditDialog",props:{editModelName:{type:String,default:""},editId:{type:Number,default:0}},emits:["save"],setup(k,{emit:B}){const b=k,h=B,$=V({name:""}),o=V(!1),T=V({}),g=V([]),_=be(),{isDialogOpen:M,closeDialog:w}=_,{toastSuccess:U,toastError:x}=ye(),v=re(()=>!!b.editModelName),p=re(()=>b.editId!=0?"Edit Device Model":"New Device Model"),c=async()=>{o.value=!0;try{const r=(await Q.get(`/api/device-models/${b.editId}`)).data;$.value.name=r.name,g.value=r.devices||[]}catch(A){console.error("Error fetching device model:",A),x("Error","Failed to fetch device model data."),w("DialogNewDeviceModel")}finally{o.value=!1}},C=()=>{var A;return T.value={},(A=$.value.name)!=null&&A.trim()?$.value.name.length>255?(T.value.name=t("validation.maxLength",{field:t("common.entities.deviceModel"),max:255}),!1):!0:(T.value.name=t("validation.required",{field:t("common.entities.deviceModel")}),!1)},y=async()=>{var A,r;if(C()){o.value=!0,T.value={};try{let O;b.editId!=0?(O=await Q.patch("/api/device-models/"+b.editId,$.value),U("Success","The device model has been updated successfully. Devices associated with this model will take a few moments to reflect the changes.",{count:O.data.data.devices_updated||0})):(O=await Q.post("/api/device-models",$.value),U("Success","The device model has been created successfully.")),h("save"),w("DialogNewDeviceModel"),u()}catch(O){((A=O.response)==null?void 0:A.status)===422?(T.value=O.response.data.data||{},x("Validation Error",O.response.data.message)):((r=O.response)==null?void 0:r.status)===409?(T.value.name=O.response.data.message,x("Error",O.response.data.message)):(console.error("Error saving device model:",O),x("Error","Failed to save device model."))}finally{o.value=!1}}},u=()=>{$.value={name:""},T.value={},g.value=[]},I=()=>{u(),w("DialogNewDeviceModel")};return ae(()=>b.editModelName,()=>{M("DialogNewDeviceModel")&&(v.value?c():u())}),oe(()=>{b.editId!=0&&c()}),(A,r)=>{const O=K("Label"),J=K("Input"),P=K("Button"),Z=K("RcIcon");return n(),m(e(Fe),{open:e(M)("DialogNewDeviceModel"),"onUpdate:open":I},{default:s(()=>[l(e(Ne),{class:"sm:max-w-[600px]"},{default:s(()=>[l(e(qe),null,{default:s(()=>[l(e(Ae),null,{default:s(()=>[f(L(p.value),1)]),_:1})]),_:1}),o.value?(n(),N("div",to,[...r[3]||(r[3]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(n(),N("form",{key:1,onSubmit:se(y,["prevent"]),class:"space-y-6"},[a("div",lo,[l(O,{for:"name",class:"text-sm font-medium"},{default:s(()=>[...r[4]||(r[4]=[f(" Device Model Name * ",-1)])]),_:1}),l(J,{id:"name",modelValue:$.value.name,"onUpdate:modelValue":r[0]||(r[0]=d=>$.value.name=d),type:"text",placeholder:"Enter device model name",class:Ce({"border-red-500":T.value.name}),maxlength:"255",required:""},null,8,["modelValue","class"]),T.value.name?(n(),N("p",so,L(T.value.name),1)):S("",!0)]),v.value&&g.value.length>0?(n(),N("div",ao,[l(O,{class:"text-sm font-medium"},{default:s(()=>[f(" Devices Using This Model ("+L(g.value.length)+") ",1)]),_:1}),a("div",no,[a("div",oo,[(n(!0),N(ee,null,ne(g.value,d=>(n(),N("div",{key:d.id,class:"text-sm text-gray-700 truncate",title:d.name},"• "+L(d.name),9,ro))),128))])]),r[5]||(r[5]=a("p",{class:"text-xs text-gray-600"}," Updating the device model name will affect all devices using this model. ",-1))])):S("",!0),v.value?(n(),N("div",io,[...r[6]||(r[6]=[a("div",{class:"flex"},[a("div",{class:"flex-shrink-0"},[a("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),a("div",{class:"ml-3"},[a("p",{class:"text-sm text-yellow-700"}," Editing the device model name will affect all devices using this model. ")])],-1)])])):S("",!0),l(e(Be),null,{default:s(()=>[l(P,{type:"button",variant:"outline",onClick:I,disabled:o.value},{default:s(()=>[...r[7]||(r[7]=[f(" Cancel ",-1)])]),_:1},8,["disabled"]),b.editId===0?(n(),m(P,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[1]||(r[1]=d=>y()),variant:"primary",disabled:o.value},{default:s(()=>[r[9]||(r[9]=f(" Save ",-1)),a("div",uo,[a("kbd",co,[r[8]||(r[8]=f(" Ctrl  ",-1)),l(Z,{name:"enter",class:"ml-1"})])])]),_:1},8,["disabled"])):(n(),m(P,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[2]||(r[2]=d=>y()),variant:"primary",disabled:o.value},{default:s(()=>[r[11]||(r[11]=f(" Update ",-1)),a("div",mo,[a("kbd",po,[r[10]||(r[10]=f(" Ctrl  ",-1)),l(Z,{name:"enter",class:"ml-1"})])])]),_:1},8,["disabled"]))]),_:1})],32))]),_:1})]),_:1},8,["open"])}}};function fo(){const k=V(1),B=at(),b=V(B.get("useDeviceModels","perPage",15)),h=V("name"),$=V(""),o=V({}),T=V([]),g=V(!1),_=V(1),M=V(""),w=V(1),U=V(!1),x=V(0),v=be(),{openDialog:p}=v,{toastSuccess:c,toastError:C}=ye(),{reload:y}=ot(I),{toggleSort:u}=nt(h,I,"useDeviceModels");async function I(E={}){g.value=!0;try{const R=await Q.get("/api/device-models",{params:{page:k.value,perPage:b.value,sort:h.value,...o.value}});T.value=R.data,_.value=R.data.last_page}catch(R){console.error("Error fetching device models:",R),C("Error",R.response.data.message||"Failed to fetch device models.")}finally{g.value=!1}}const A=async E=>{M.value="",x.value=E||0,w.value=Math.random(),p("DialogNewDeviceModel")};function r(E){M.value=E,w.value=Math.random(),p("DialogNewDeviceModel")}const O=async E=>{try{await Q.delete(`/api/device-models/${encodeURIComponent(E)}`),I(),c("Device Model Deleted","The device model has been deleted successfully."),U.value=!1}catch(R){R.status===422||R.status===409?C("Error",R.response.data.message):(console.error("Error deleting Device Model:",R),C("Error","Failed to delete Device Model."))}},J=async E=>{try{await Q.post("/api/device-models/delete-many",{ids:E}),I(),c("Device Models Deleted","The device models have been deleted successfully."),U.value=!1,xe.emit("deleteManyDeviceModelsSuccess")}catch(R){R.status===422?C("Error",R.response.data.message):(console.error("Error deleting Device Models:",R),C("Error","Failed to delete Device Models.")),U.value=!1}},P=E=>{x.value=E,w.value=Math.random(),p("DialogNewDeviceModel")},Z=E=>{window.open(`/devices?filter[device_model]=${encodeURIComponent(E)}`,"_blank")},d=async E=>{try{return(await Q.get(`/api/device-models/${encodeURIComponent(E)}/devices`)).data.data}catch(R){return console.error("Error fetching devices for model:",R),C("Error","Failed to fetch devices for this model."),null}},z=()=>{I(),w.value=Math.random()};function i(E){E.altKey&&E.key==="n"&&(E.preventDefault(),p("DialogNewDeviceModel"))}const q=Qe(()=>{o.value["filter[q]"]=$.value,k.value=1,I()},500);return ae(k,()=>{I()}),ae($,()=>{q()}),ae(b,E=>{B.set("useDeviceModels","perPage",E),I()}),{reload:y,deviceModels:T,isLoading:g,currentPage:k,perPage:b,lastPage:_,editModelName:M,newModelModalKey:w,searchTerm:$,showConfirmDelete:U,editId:x,openDialog:p,fetchDeviceModels:I,createDeviceModel:A,updateDeviceModel:r,deleteDeviceModel:O,deleteManyDeviceModels:J,handleSave:z,handleKeyDown:i,viewEditDialog:P,viewDevicesDialog:Z,getDevicesForModel:d,toggleSort:u,sortParam:h}}const go={class:"flex flex-col h-full gap-1 text-center"},yo={class:"flex items-center justify-between p-4"},xo={class:"flex items-center"},ko={class:"flex items-center justify-end"},_o={class:"px-6"},bo={class:"flex items-center space-x-2"},wo={key:1,class:"text-muted-foreground text-sm"},ho={__name:"Main",setup(k){const{reload:B,deviceModels:b,isLoading:h,currentPage:$,perPage:o,lastPage:T,editId:g,editModelName:_,newModelModalKey:M,searchTerm:w,showConfirmDelete:U,fetchDeviceModels:x,createDeviceModel:v,deleteDeviceModel:p,deleteManyDeviceModels:c,handleSave:C,handleKeyDown:y,viewEditDialog:u,viewDevicesDialog:I,toggleSort:A,sortParam:r}=fo(),{selectedRows:O,selectAll:J,toggleSelectAll:P,toggleSelectRow:Z}=Te(b),d=De();return oe(()=>{var z,i;(i=(z=d.currentRoute)==null?void 0:z.value.params)!=null&&i.modelName&&(_.value=decodeURIComponent(d.currentRoute.value.params.modelName),u(_.value)),x(),window.addEventListener("keydown",y),xe.on("deleteManyDeviceModelsSuccess",()=>{O.value=[],J.value=!1})}),_e(()=>{window.removeEventListener("keydown",y)}),(z,i)=>{const q=K("Input"),E=K("Button"),R=K("RcIcon"),W=K("Checkbox"),G=K("RcBadge");return n(),N("div",go,[a("div",yo,[a("div",xo,[l(q,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter Device Models...",modelValue:e(w),"onUpdate:modelValue":i[0]||(i[0]=Y=>te(w)?w.value=Y:null)},null,8,["modelValue"]),e(w)?(n(),m(Se,{key:0,"onUpdate:modelValue":i[1]||(i[1]=Y=>w.value="")})):S("",!0)]),a("div",ko,[e(O).length?(n(),m(E,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=se(Y=>U.value=!0,["prevent"])),variant:"primary"},{default:s(()=>[f(" Delete Selected "+L(e(O).length)+" Device(s) Model(s) ",1)]),_:1})):S("",!0),l(E,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:i[3]||(i[3]=se(Y=>e(v)(0),["prevent"])),variant:"primary"},{default:s(()=>[...i[15]||(i[15]=[f(" Add Model ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),l(R,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:i[4]||(i[4]=Y=>e(B)())})])]),a("div",_o,[l(e(Me),null,{default:s(()=>[l(e(Ve),null,{default:s(()=>[l(e(ce),null,{default:s(()=>[l(e(X),{class:"w-[2%]"},{default:s(()=>[l(W,{id:"selectAll",modelValue:e(J),"onUpdate:modelValue":i[5]||(i[5]=Y=>te(J)?J.value=Y:null),checked:e(J),onClick:i[6]||(i[6]=Y=>e(P)())},null,8,["modelValue","checked"])]),_:1}),l(e(X),{class:"w-[5%]"},{default:s(()=>[l(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[7]||(i[7]=Y=>e(A)("id"))},{default:s(()=>[l(R,{name:"sort",sortParam:e(r),field:"id"},null,8,["sortParam"]),i[16]||(i[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[30%]"},{default:s(()=>[l(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[8]||(i[8]=Y=>e(A)("name"))},{default:s(()=>[l(R,{name:"sort",sortParam:e(r),field:"name"},null,8,["sortParam"]),i[17]||(i[17]=a("span",{class:"ml-2"}," Name ",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[15%]"},{default:s(()=>[l(E,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[9]||(i[9]=Y=>e(A)("devices_count"))},{default:s(()=>[l(R,{name:"sort",sortParam:e(r),field:"devices_count"},null,8,["sortParam"]),i[18]||(i[18]=a("span",{class:"ml-2"}," Device Count ",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[35%]"},{default:s(()=>[...i[19]||(i[19]=[f(" Devices ",-1)])]),_:1}),l(e(X),{class:"w-[10%]"},{default:s(()=>[...i[20]||(i[20]=[f(" Actions ",-1)])]),_:1})]),_:1})]),_:1}),l(e(Pe),null,{default:s(()=>[e(h)?(n(),m(Ie,{key:0})):!e(h)&&e(b).data&&e(b).data.length?(n(!0),N(ee,{key:1},ne(e(b).data,Y=>(n(),m(e(ce),{key:Y.id},{default:s(()=>[l(e(H),{class:"text-start"},{default:s(()=>[l(W,{class:"cursor-pointer",id:"select-"+Y.id,checked:!!e(O).includes(Y.id),onClick:ke=>e(Z)(Y.id)},null,8,["id","checked","onClick"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(Y.id),1)]),_:2},1024),l(e(H),{class:"text-start font-medium"},{default:s(()=>[f(L(Y.name),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l(G,{variant:"info",class:"px-3 py-1"},{default:s(()=>[f(L(Y.devices_count),1)]),_:2},1024)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[a("div",bo,[Y.devices_count>0?(n(),m(E,{key:0,variant:"outline",size:"sm",onClick:ke=>e(I)(Y.name)},{default:s(()=>[f(" View Devices ("+L(Y.devices_count)+") ",1),l(e(nl),{size:"12",class:"ml-2"})]),_:2},1032,["onClick"])):(n(),N("span",wo," -- "))])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l(Ke,{rowData:Y,onOnEdit:ke=>e(u)(Y.id),onOnDelete:ke=>e(p)(Y.name),showRolesBtn:!1,showViewDevicesBtn:Y.devices_count>0,onOnViewDevices:ke=>e(I)(Y.name)},null,8,["rowData","onOnEdit","onOnDelete","showViewDevicesBtn","onOnViewDevices"])]),_:2},1024)]),_:2},1024))),128)):(n(),m(Ee,{key:2}))]),_:1})]),_:1}),l(Re,{currentPage:e($),lastPage:e(T),perPage:e(o),"onUpdate:currentPage":i[10]||(i[10]=Y=>$.value=Y),"onUpdate:perPage":i[11]||(i[11]=Y=>o.value=Y),totalRecords:e(b).total,isLoading:e(h)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(vo,{onSave:i[12]||(i[12]=Y=>e(C)()),key:e(M),editModelName:e(_),editId:e(g)},null,8,["editModelName","editId"])),l(he,{ids:e(O),showConfirmDelete:e(U),onClose:i[13]||(i[13]=Y=>U.value=!1),onHandleDelete:i[14]||(i[14]=Y=>e(c)(e(O)))},null,8,["ids","showConfirmDelete"])])])}}};function $o(k){const B=V(1),b=at(),h=V(b.get("useTemplates","perPage",10)),$=V("-id"),o=V(""),T=V({}),g=be(),_=V(0),M=V(!1),w=V(1),U=V(1),x=V([]),v=V(!1),p=De(),{openDialog:c}=g,{toastSuccess:C,toastError:y}=ye(),{reload:u}=ot(A),{toggleSort:I}=nt($,A,"useTemplates");oe(()=>{var i,q;(q=(i=p.currentRoute)==null?void 0:i.value.params)!=null&&q.id?(_.value=p.currentRoute.value.params.id,r(_.value)):(_.value=0,A()),window.addEventListener("keydown",d)}),_e(()=>{window.removeEventListener("keydown",d)});async function A(i={}){M.value=!0;try{const q=await Q.get("/api/templates",{params:{page:B.value,perPage:h.value,sort:$.value,...T.value}});x.value=q.data,w.value=q.data.last_page}catch(q){console.error("Error fetching templates:",q),y("Error","Failed to fetch templates.")}finally{M.value=!1}}function r(i){p.push({name:"template-view",params:{id:i}})}const O=async i=>{try{await Q.delete(`/api/templates/${i}`),A(),C("Template Deleted","The template has been deleted successfully.")}catch(q){q.status===422?y("Error",q.response.data.message):(console.error("Error deleting template:",q),y("Error","Failed to delete template."))}},J=async i=>{try{await Q.post("/api/templates/delete-many",{ids:i}),A(),C("Templates Deleted","The templates have been deleted successfully."),v.value=!1,xe.emit("deleteManyTemplatesSuccess")}catch(q){q.status===422?y("Error",q.response.data.message):(console.error("Error deleting Templates:",q),y("Error","Failed to delete Templates.")),v.value=!1}},P=i=>{_.value=i,U.value=Math.random(),c("DialogNewTemplate")},Z=()=>{A(),U.value=Math.random()};function d(i){i.altKey&&i.key==="n"&&(i.preventDefault(),c("DialogNewTemplate"))}const z=Qe(()=>{T.value["filter[q]"]=o.value,B.value=1,A()},500);return ae(B,()=>{A()}),ae(o,()=>{z()}),ae(h,i=>{b.set("useTemplates","perPage",i),A()}),{reload:u,templates:x,isLoading:M,currentPage:B,perPage:h,lastPage:w,editId:_,newTemplateModalKey:U,searchTerm:o,openDialog:c,fetchTemplates:A,viewTemplateDetailsPane:r,deleteTemplate:O,deleteManyTemplates:J,handleSave:Z,handleKeyDown:d,viewEditDialog:P,toggleSort:I,sortParam:$,showConfirmDelete:v}}const Co={class:"flex flex-col h-full gap-1 text-center"},Do={class:"flex items-center justify-between p-4"},So={class:"flex items-center"},Vo={class:"flex items-center justify-end"},Po={class:"px-6"},Io={class:"border-b"},Eo={__name:"Main",setup(k){const{reload:B,templates:b,isLoading:h,currentPage:$,perPage:o,lastPage:T,searchTerm:g,viewTemplateDetailsPane:_,deleteTemplate:M,deleteManyTemplates:w,toggleSort:U,sortParam:x,showConfirmDelete:v}=$o(),{importTemplates:p,importingTemplates:c}=_l(),{selectedRows:C,selectAll:y,toggleSelectAll:u,toggleSelectRow:I}=Te(b);return oe(()=>{xe.on("deleteManyTemplatesSuccess",()=>{C.value=[],y.value=!1,document.getElementById("selectAll").checked=!1})}),(A,r)=>{const O=K("Input"),J=K("Button"),P=K("RcIcon"),Z=K("Checkbox");return n(),N("div",Co,[a("div",Do,[a("div",So,[l(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter templates...",modelValue:e(g),"onUpdate:modelValue":r[0]||(r[0]=d=>te(g)?g.value=d:null)},null,8,["modelValue"]),e(g)?(n(),m(Se,{key:0,"onUpdate:modelValue":r[1]||(r[1]=d=>g.value="")})):S("",!0)]),a("div",Vo,[e(C).length?(n(),m(J,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:r[2]||(r[2]=se(d=>v.value=!0,["prevent"])),variant:"primary"},{default:s(()=>[f("Delete Selected "+L(e(C).length)+" Template(s) ",1)]),_:1})):S("",!0),l(J,{type:"close",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700",onClick:r[3]||(r[3]=d=>e(p)()),variant:"outline"},{default:s(()=>[e(c)?S("",!0):(n(),m(e(ol),{key:0,class:"w-4 h-4 mr-2 text-white github-shake"})),l(He,{state:e(c),class:"mr-2"},null,8,["state"]),r[14]||(r[14]=f(" Import Templates ",-1))]),_:1}),l(J,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[4]||(r[4]=se(d=>e(_)(0),["prevent"])),variant:"primary"},{default:s(()=>[...r[15]||(r[15]=[f(" New Template ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),l(P,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:r[5]||(r[5]=d=>e(B)())})])]),a("div",Po,[l(e(Me),null,{default:s(()=>[l(e(Ve),null,{default:s(()=>[l(e(ce),null,{default:s(()=>[l(e(X),{class:"w-[2%]"},{default:s(()=>[l(Z,{id:"selectAll",modelValue:e(y),"onUpdate:modelValue":r[6]||(r[6]=d=>te(y)?y.value=d:null),checked:e(y),onClick:r[7]||(r[7]=d=>e(u)())},null,8,["modelValue","checked"])]),_:1}),l(e(X),{class:"w-[5%]"},{default:s(()=>[l(J,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[8]||(r[8]=d=>e(U)("id"))},{default:s(()=>[l(P,{name:"sort",sortParam:e(x),field:"id"},null,8,["sortParam"]),r[16]||(r[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[l(J,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[9]||(r[9]=d=>e(U)("templateName"))},{default:s(()=>[l(P,{name:"sort",sortParam:e(x),field:"templateName"},null,8,["sortParam"]),r[17]||(r[17]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[...r[18]||(r[18]=[f("Description",-1)])]),_:1}),l(e(X),{class:"w-[40%]"},{default:s(()=>[...r[19]||(r[19]=[f("Devices",-1)])]),_:1}),l(e(X),{class:"w-[10%]"},{default:s(()=>[...r[20]||(r[20]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),l(e(Pe),null,{default:s(()=>[e(h)?(n(),m(Ie,{key:0})):e(h)?(n(),m(Ee,{key:2})):(n(!0),N(ee,{key:1},ne(e(b).data,d=>(n(),m(e(ce),{key:d.id},{default:s(()=>[l(e(H),{class:"text-start"},{default:s(()=>[l(Z,{class:"cursor-pointer",id:"select-"+d.id,checked:!!e(C).includes(d.id),onClick:z=>e(I)(d.id)},null,8,["id","checked","onClick"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(d.id),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l(J,{class:"px-2 py-0 text-sm hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:z=>e(_)(d.id)},{default:s(()=>[a("span",Io,L(d.templateName),1)]),_:2},1032,["onClick"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(d.description),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l($e,{items:d.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l(Ke,{rowData:d,onOnEdit:z=>e(_)(d.id),onOnDelete:z=>e(M)(d.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(Re,{currentPage:e($),lastPage:e(T),perPage:e(o),"onUpdate:currentPage":r[10]||(r[10]=d=>$.value=d),"onUpdate:perPage":r[11]||(r[11]=d=>o.value=d),totalRecords:e(b).total,isLoading:e(h)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),l(he,{ids:e(C),showConfirmDelete:e(v),onClose:r[12]||(r[12]=d=>v.value=!1),onHandleDelete:r[13]||(r[13]=d=>e(w)(e(C)))},null,8,["ids","showConfirmDelete"])])])}}},Mo=st(Eo,[["__scopeId","data-v-d820045f"]]),Ro={class:"flex flex-col h-full gap-1 text-center"},To={class:"flex items-center justify-between p-4"},Uo={class:"flex items-center"},No={class:"flex items-center justify-end"},Ao={class:"px-6"},Bo={__name:"Main",setup(k){const{reload:B,editId:b,vendors:h,currentPage:$,perPage:o,searchTerm:T,lastPage:g,isLoading:_,fetchVendors:M,viewEditDialog:w,createVendor:U,deleteVendor:x,deleteManyVendors:v,handleSave:p,handleKeyDown:c,newVendorModalKey:C,toggleSort:y,sortParam:u,showConfirmDelete:I}=bl(),{selectedRows:A,selectAll:r,toggleSelectAll:O,toggleSelectRow:J}=Te(h),P=De();return oe(()=>{var Z,d;M(),(d=(Z=P.currentRoute)==null?void 0:Z.value.params)!=null&&d.id&&(b.value=parseInt(P.currentRoute.value.params.id),w(b.value)),window.addEventListener("keydown",c),xe.on("deleteManyVendorsSuccess",()=>{A.value=[],r.value=!1,document.getElementById("selectAll").checked=!1})}),_e(()=>{window.removeEventListener("keydown",c)}),(Z,d)=>{const z=K("Input"),i=K("Button"),q=K("RcIcon"),E=K("Checkbox");return n(),N("div",Ro,[a("div",To,[a("div",Uo,[l(z,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter vendors...",modelValue:e(T),"onUpdate:modelValue":d[0]||(d[0]=R=>te(T)?T.value=R:null)},null,8,["modelValue"]),e(T)?(n(),m(Se,{key:0,"onUpdate:modelValue":d[1]||(d[1]=R=>T.value="")})):S("",!0)]),a("div",No,[e(A).length?(n(),m(i,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:d[2]||(d[2]=se(R=>I.value=!0,["prevent"])),variant:"primary"},{default:s(()=>[f("Delete Selected "+L(e(A).length)+" Vendor(s) ",1)]),_:1})):S("",!0),l(i,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:se(e(U),["prevent"]),variant:"primary"},{default:s(()=>[...d[13]||(d[13]=[f(" New Vendor ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),l(q,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:d[3]||(d[3]=R=>e(B)())})])]),a("div",Ao,[l(e(Me),null,{default:s(()=>[l(e(Ve),null,{default:s(()=>[l(e(ce),null,{default:s(()=>[l(e(X),{class:"w-[2%]"},{default:s(()=>[l(E,{id:"selectAll",modelValue:e(r),"onUpdate:modelValue":d[4]||(d[4]=R=>te(r)?r.value=R:null),checked:e(r),onClick:d[5]||(d[5]=R=>e(O)())},null,8,["modelValue","checked"])]),_:1}),l(e(X),{class:"w-[5%]"},{default:s(()=>[l(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[6]||(d[6]=R=>e(y)("id"))},{default:s(()=>[l(q,{name:"sort",sortParam:e(u),field:"id"},null,8,["sortParam"]),d[14]||(d[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[20%]"},{default:s(()=>[l(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[7]||(d[7]=R=>e(y)("vendorName"))},{default:s(()=>[l(q,{name:"sort",sortParam:e(u),field:"vendorName"},null,8,["sortParam"]),d[15]||(d[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),l(e(X),{class:"w-[50%]"},{default:s(()=>[...d[16]||(d[16]=[f("Devices",-1)])]),_:1}),l(e(X),{class:"w-[10%]"},{default:s(()=>[...d[17]||(d[17]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),l(e(Pe),null,{default:s(()=>[e(_)?(n(),m(Ie,{key:0})):e(_)?(n(),m(Ee,{key:2})):(n(!0),N(ee,{key:1},ne(e(h).data,R=>(n(),m(e(ce),{key:R.id},{default:s(()=>[l(e(H),{class:"text-start"},{default:s(()=>[l(E,{class:"cursor-pointer",id:"select-"+R.id,checked:!!e(A).includes(R.id),onClick:W=>e(J)(R.id)},null,8,["id","checked","onClick"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(R.id),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[f(L(R.vendorName),1)]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l($e,{items:R.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),l(e(H),{class:"text-start"},{default:s(()=>[l(Ke,{rowData:R,onOnEdit:W=>e(w)(R.id),onOnDelete:W=>e(x)(R.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),l(Re,{currentPage:e($),lastPage:e(g),perPage:e(o),"onUpdate:currentPage":d[8]||(d[8]=R=>$.value=R),"onUpdate:perPage":d[9]||(d[9]=R=>o.value=R),totalRecords:e(h).total,isLoading:e(_)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),m(wl,{onSave:d[10]||(d[10]=R=>e(p)()),key:e(C),editId:e(b)},null,8,["editId"])),l(he,{ids:e(A),showConfirmDelete:e(I),onClose:d[11]||(d[11]=R=>I.value=!1),onHandleDelete:d[12]||(d[12]=R=>e(v)(e(A)))},null,8,["ids","showConfirmDelete"])])])}}},Fo={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},Lo={class:"border-t border-b topRow"},zo={class:"flex items-center justify-between"},Oo={class:"flex items-center justify-start w-full gap-2"},jo={class:"truncate"},Ko={class:"flex items-center gap-2 mr-4"},qo={class:"flex items-center gap-2"},Go={key:1,class:"flex flex-col h-full gap-1 text-center"},Ho={class:"flex items-center justify-between p-4"},Jo={class:"flex items-center"},Xo={class:"text-lg text-red-500 font-semibold"},Yo={__name:"Main",setup(k){const B=V(!1),{currentView:b,viewItems:h,changeView:$,toggleFavorite:o}=dl(),T=re(()=>["devices","commandgroups","commands","templates","vendors","tags","models"].includes(b.value));return(g,_)=>{const M=K("RcIcon");return n(),N("main",Fo,[a("div",Lo,[l(e(lt),{"onUpdate:open":_[0]||(_[0]=w=>B.value=w)},{default:s(()=>{var w,U;return[a("div",zo,[l(e(et),{"as-child":"",class:"p-4 ml-2"},{default:s(()=>[l(e(de),{variant:"outline",class:"w-48"},{default:s(()=>{var x;return[a("div",Oo,[l(M,{name:"pin",class:"w-4 h-4 text-blue-400 shrink-0"}),a("span",jo,L(((x=e(h).find(v=>v.id===e(b)))==null?void 0:x.label)||"Select View"),1),l(e(mt),{class:Ce(["w-4 h-4 ml-auto transition-transform duration-300",{"rotate-180":B.value}])},null,8,["class"])])]}),_:1})]),_:1})]),a("div",Ko,[l(M,{name:((w=e(h).find(x=>x.id===e(b)))==null?void 0:w.icon)||""},null,8,["name"]),f(" "+L(((U=e(h).find(x=>x.id===e(b)))==null?void 0:U.label)||""),1)]),l(e(tt),{class:"w-56",align:"start"},{default:s(()=>[l(e(rl),null,{default:s(()=>[(n(!0),N(ee,null,ne(e(h),x=>(n(),m(e(fe),{key:x.id,onClick:v=>e($)(x.id)},{default:s(()=>[a("span",qo,[l(M,{name:x.icon},null,8,["name"]),f(" "+L(x.label),1)]),l(e(bt),null,{default:s(()=>[l(e(wt),null,{default:s(()=>[l(e(ht),{"as-child":""},{default:s(()=>[l(e(ge),{onClick:se(v=>e(o)(x.id),["stop","prevent"])},{default:s(()=>[x.isFavorite?S("",!0):(n(),m(M,{key:0,name:"star-unselected",class:"animated-star"})),x.isFavorite?(n(),m(M,{key:1,name:"star-selected",class:"animated-star"})):S("",!0)]),_:2},1032,["onClick"])]),_:2},1024),l(e($t),null,{default:s(()=>[a("p",null,L(x.isFavorite?"Remove from favorites":"Add to favorites"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]}),_:1})]),a("div",null,[T.value?(n(),N(ee,{key:0},[e(b)==="devices"?(n(),m(In,{key:0})):S("",!0),e(b)==="commandgroups"?(n(),m(xs,{key:1})):S("",!0),e(b)==="commands"?(n(),m(rs,{key:2})):S("",!0),e(b)==="templates"?(n(),m(Mo,{key:3})):S("",!0),e(b)==="vendors"?(n(),m(Bo,{key:4})):S("",!0),e(b)==="models"?(n(),m(ho,{key:5})):S("",!0),e(b)==="tags"?(n(),m(eo,{key:6})):S("",!0)],64)):(n(),N("div",Go,[a("div",Ho,[a("div",Jo,[a("p",Xo,L(e(b))+" view not found",1)])])]))])])}}},ud=st(Yo,[["__scopeId","data-v-6b1ceb31"]]);export{ud as default};
