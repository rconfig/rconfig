import{c as S,o as n,a as f,i as fe,B as ze,v as C,C as Le,D as Ke,E as pe,U as re,F as Me,r as z,G as He,e as _,w as a,b as t,u as e,H as Ge,l as O,I as Qe,J as We,K as Je,d as D,t as I,L as Ye,M as N,N as ee,q as E,z as Ze,O as Xe,x as et,n as me,P as tt,Q as at,g as A,a8 as lt,a9 as J,aa as Q,ab as st,ac as te,ad as nt,ae as Ce,af as ot,ag as rt,ah as Te,ai as je,aj as it,ak as dt,al as ut,am as ct,an as ft,ao as pt,ap as mt,aq as gt,ar as vt,as as _t,y as X,at as be,au as $e,av as we,aw as Se,ax as xe,a2 as Ee,a0 as Ne,S as Ue,ay as Oe,R as yt,_ as ht,a3 as ce,az as Pe,a4 as xt,p as De,j as qe,k as Ie,m as Be,aA as Ct}from"./app-_UDfBfmc.js";import{u as bt,h as $t,i as wt,j as Ae,k as kt,l as St,_ as Pt,a as Ve,b as Y,c as Dt,d as qt,n as It,f as Bt,g as Vt,o as Rt,e as Z,m as Ft}from"./useRowSelection-LyBqYf6e.js";import{S as zt}from"./square-terminal-BKzEcOW6.js";import{S as Lt}from"./search-ChWcFoo3.js";import{S as Mt,a as Tt}from"./square-DSF_iliN.js";import{C as jt}from"./calendar-D0oiA-Xf.js";import{_ as Et,a as Nt,b as Ut,c as Ot,d as At}from"./SelectScrollDownButton-D_ioT7lb.js";import{_ as Kt}from"./SelectGroup-CoVq4xjG.js";import{W as Ht}from"./wifi-BtXBYeXU.js";import{_ as Re}from"./RcToolTip.vue_vue_type_script_setup_true_lang-BO87hi4I.js";import{_ as Gt}from"./BadgeList-CFMZljHv.js";import{F as Qt,P as Wt}from"./package-check-B8OKr9EF.js";function Jt(p,i){return n(),S("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[f("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor"})])}const Yt={class:"flex justify-between items-center"},Zt={class:"flex items-center gap-2"},Xt={class:"flex items-center gap-2"},ea={class:"flex items-center gap-4"},ta={key:0,size:"sm",class:"text-sm text-blue-400 font-medium flex justify-between items-center"},aa={class:"overflow-y-auto px-6 py-4"},la={class:"rounded bg-muted overflow-auto whitespace-pre"},sa=fe({__name:"PeekConfigDialog",props:{editId:Number},setup(p){const i=ze(),u=C(""),r=C(!0),o=C(""),l=C(0),g=C(localStorage.getItem("selectedPeekLanguage")||"language-plaintext"),h=C(parseInt(localStorage.getItem("peekFontSize")||"14",10)),{closeDialog:b,isDialogOpen:x}=i,{toastError:w}=Le(),{copy:m,copied:$}=Ke(),y=p,L=["bash","c","cpp","css","html","java","javascript","language-plaintext","php","python","typescript"];pe(()=>{K(),window.addEventListener("keydown",P)});function K(){o.value="",r.value=!0,re.get("/api/configs/view-config/"+y.editId).then(V=>{o.value=V.data.data.content,u.value=V.data.data.config_location,l.value=V.data.data.is_hardlink,g.value=localStorage.getItem("selectedPeekLanguage")||"language-plaintext",r.value=!1}).catch(V=>{console.log(V),o.value="Something went wrong - could not retrieve the template from the file system!",w("Error","Could not retrieve the template from the file system!"),r.value=!1})}function P(V){V.key==="Escape"&&B()}Me(()=>{window.removeEventListener("keydown",P)});function B(){b("peek-config-dialog-"+y.editId)}function W(){h.value=Math.min(h.value+2,32),localStorage.setItem("peekFontSize",h.value.toString())}function F(){h.value=Math.max(h.value-2,10),localStorage.setItem("peekFontSize",h.value.toString())}function H(){h.value=14,localStorage.setItem("peekFontSize",h.value.toString())}return(V,v)=>{const T=z("Button"),ne=z("RcIcon"),ie=He("highlightjs");return n(),_(e(at),{open:e(x)("peek-config-dialog-"+p.editId)},{default:a(()=>[t(e(Ge),{"as-child":""},{default:a(()=>[O(V.$slots,"default")]),_:3}),t(e(Qe),{class:"sm:max-w-[70dvw] max-h-[90dvh] grid grid-rows-[auto_minmax(0,1fr)_auto] p-0",onEscapeKeyDown:v[3]||(v[3]=M=>e(b)("peek-config-dialog-"+p.editId)),onPointerDownOutside:v[4]||(v[4]=M=>e(b)("peek-config-dialog-"+p.editId)),onCloseClicked:v[5]||(v[5]=M=>e(b)("peek-config-dialog-"+p.editId))},{default:a(()=>[t(e(We),{class:"p-6 pb-0"},{default:a(()=>[t(e(Je),null,{default:a(()=>[D("Configuration Quick Peek (Config ID: "+I(p.editId)+")",1)]),_:1}),t(e(Ye),null,{default:a(()=>[f("div",Yt,[f("div",Zt,[v[9]||(v[9]=f("div",null,"Language:",-1)),t(e(Et),{modelValue:g.value,"onUpdate:modelValue":v[0]||(v[0]=M=>g.value=M)},{default:a(()=>[t(e(Nt),{class:"w-[180px] focus:ring-0 focus:outline-none"},{default:a(()=>[t(e(Ut),{placeholder:"Select a language"})]),_:1}),t(e(Ot),null,{default:a(()=>[t(e(Kt),null,{default:a(()=>[(n(),S(N,null,ee(L,M=>t(e(At),{value:M,key:M},{default:a(()=>[D(I(M),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"]),f("div",Xt,[t(T,{variant:"outline",size:"sm",onClick:F},{default:a(()=>[...v[6]||(v[6]=[D("A-",-1)])]),_:1}),t(T,{variant:"outline",size:"sm",onClick:H},{default:a(()=>[...v[7]||(v[7]=[D("A",-1)])]),_:1}),t(T,{variant:"outline",size:"sm",onClick:W},{default:a(()=>[...v[8]||(v[8]=[D("A+",-1)])]),_:1})])]),f("div",ea,[l.value===1?(n(),S("div",ta," ðŸ”— HardLink ")):E("",!0),t(T,{variant:"outline",size:"sm",onClick:v[1]||(v[1]=M=>e(m)(u.value)),class:"flex items-center gap-2"},{default:a(()=>[t(ne,{name:"copy-transition",isActive:e($)},null,8,["isActive"]),D(" "+I(e($)?"Copied":"Copy path"),1)]),_:1})])])]),_:1})]),_:1}),f("div",aa,[r.value?(n(),_(Xe,{key:0})):E("",!0),Ze((n(),S("pre",la,[f("code",{class:me(["pf-v5-c-code-block__code",g.value]),style:et([{background:"none !important"},{background:"none",fontSize:h.value+"px"}])},I(o.value)+`
            `,7),v[10]||(v[10]=D(` 
         `,-1))])),[[ie]])]),t(e(tt),{class:"p-6 pt-0"},{default:a(()=>[t(T,{onClick:v[2]||(v[2]=M=>B()),variant:"outline"},{default:a(()=>[...v[11]||(v[11]=[D("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:3},8,["open"])}}}),na={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},oa={__name:"RangeCalendar",props:{defaultPlaceholder:{type:null,required:!1},defaultValue:{type:Object,required:!1},modelValue:{type:Object,required:!1},placeholder:{type:null,required:!1},pagedNavigation:{type:Boolean,required:!1},preventDeselect:{type:Boolean,required:!1},weekStartsOn:{type:Number,required:!1},weekdayFormat:{type:String,required:!1},calendarLabel:{type:String,required:!1},fixedWeeks:{type:Boolean,required:!1},maxValue:{type:null,required:!1},minValue:{type:null,required:!1},locale:{type:String,required:!1},numberOfMonths:{type:Number,required:!1},disabled:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},initialFocus:{type:Boolean,required:!1},isDateDisabled:{type:Function,required:!1},isDateUnavailable:{type:Function,required:!1},dir:{type:String,required:!1},nextPage:{type:Function,required:!1},prevPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["update:modelValue","update:placeholder","update:startValue"],setup(p,{emit:i}){const u=p,r=i,o=A(()=>{const{class:g,...h}=u;return h}),l=lt(o,r);return(g,h)=>(n(),_(e(st),J({class:e(Q)("p-3",u.class)},e(l)),{default:a(({grid:b,weekDays:x})=>[t(e(pa),null,{default:a(()=>[t(e(va)),t(e(ma)),t(e(ga))]),_:1}),f("div",na,[(n(!0),S(N,null,ee(b,w=>(n(),_(e(da),{key:w.value.toString()},{default:a(()=>[t(e(ca),null,{default:a(()=>[t(e(Fe),null,{default:a(()=>[(n(!0),S(N,null,ee(x,m=>(n(),_(e(fa),{key:m},{default:a(()=>[D(I(m),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(e(ua),null,{default:a(()=>[(n(!0),S(N,null,ee(w.rows,(m,$)=>(n(),_(e(Fe),{key:`weekDate-${$}`,class:"mt-2 w-full"},{default:a(()=>[(n(!0),S(N,null,ee(m,y=>(n(),_(e(ra),{key:y.toString(),date:y},{default:a(()=>[t(e(ia),{day:y,month:w.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},16,["class"]))}},ra={__name:"RangeCalendarCell",props:{date:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const i=p,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(nt),J({class:e(Q)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:bg-accent first:[&:has([data-selected])]:rounded-l-md last:[&:has([data-selected])]:rounded-r-md [&:has([data-selected][data-outside-view])]:bg-accent/50 [&:has([data-selected][data-selection-end])]:rounded-r-md [&:has([data-selected][data-selection-start])]:rounded-l-md",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},ia={__name:"RangeCalendarCellTrigger",props:{day:{type:null,required:!0},month:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const i=p,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(ot),J({class:e(Q)(e(Ce)({variant:"ghost"}),"h-8 w-8 p-0 font-normal data-[selected]:opacity-100","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selection-start]:bg-primary data-[selection-start]:text-primary-foreground data-[selection-start]:hover:bg-primary data-[selection-start]:hover:text-primary-foreground data-[selection-start]:focus:bg-primary data-[selection-start]:focus:text-primary-foreground","data-[selection-end]:bg-primary data-[selection-end]:text-primary-foreground data-[selection-end]:hover:bg-primary data-[selection-end]:hover:text-primary-foreground data-[selection-end]:focus:bg-primary data-[selection-end]:focus:text-primary-foreground","data-[outside-view]:text-muted-foreground data-[outside-view]:opacity-50 [&[data-outside-view][data-selected]]:text-muted-foreground [&[data-outside-view][data-selected]]:opacity-30","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},da={__name:"RangeCalendarGrid",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const i=p,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(rt),J({class:e(Q)("w-full border-collapse space-y-1",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},ua={__name:"RangeCalendarGridBody",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(p){const i=p;return(u,r)=>(n(),_(e(it),Te(je(i)),{default:a(()=>[O(u.$slots,"default")]),_:3},16))}},ca={__name:"RangeCalendarGridHead",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(p){const i=p;return(u,r)=>(n(),_(e(dt),Te(je(i)),{default:a(()=>[O(u.$slots,"default")]),_:3},16))}},Fe={__name:"RangeCalendarGridRow",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const i=p,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(ut),J({class:e(Q)("flex",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},fa={__name:"RangeCalendarHeadCell",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const i=p,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(ct),J({class:e(Q)("w-8 rounded-md text-[0.8rem] font-normal text-muted-foreground",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},pa={__name:"RangeCalendarHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const i=p,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(ft),J({class:e(Q)("relative flex w-full items-center justify-between pt-1",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},ma={__name:"RangeCalendarHeading",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const i=p,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(pt),J({class:e(Q)("text-sm font-medium",i.class)},e(r)),{default:a(({headingValue:g})=>[O(o.$slots,"default",{headingValue:g},()=>[D(I(g),1)])]),_:3},16,["class"]))}},ga={__name:"RangeCalendarNextButton",props:{step:{type:String,required:!1},nextPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const i=p,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(gt),J({class:e(Q)(e(Ce)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default",{},()=>[t(e(mt),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},va={__name:"RangeCalendarPrevButton",props:{step:{type:String,required:!1},prevPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(p){const i=p,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(vt),J({class:e(Q)(e(Ce)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default",{},()=>[t(e(Jt),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},_a={class:"hidden lg:inline-flex ml-2"},ya=fe({__name:"ConfigSearchFilterCardDateRangePicker",props:{useDefaultRange:{type:Boolean,default:!0},placeholder:{default:"Pick a date range"},width:{default:"w-[40px] lg:w-[280px]"},initialRange:{default:void 0}},emits:["dateChange"],setup(p,{expose:i,emit:u}){const r=p,o=u,l=new _t("en-US",{dateStyle:"medium"}),g=new Date().getFullYear(),h=new Date().getMonth()+1,b=new Date().getDate(),x=()=>({start:new Se(g,h,b).subtract({days:7}),end:new Se(g,h,b)}),m=C((()=>{if(r.initialRange)return r.initialRange;if(r.useDefaultRange)return x()})()),$=Ee(P=>{o("dateChange",P)},500);X(m,P=>{$(P)}),pe(()=>{m.value&&o("dateChange",m.value)});const y=A(()=>{var P;return(P=m.value)!=null&&P.start?m.value.end?`${l.format(m.value.start.toDate(xe()))} - ${l.format(m.value.end.toDate(xe()))}`:l.format(m.value.start.toDate(xe())):r.placeholder});return i({clearSelection:()=>{m.value=void 0},setDefaultRange:()=>{m.value=x(),o("dateChange",m.value)}}),(P,B)=>{const W=z("Button");return n(),_(e(we),null,{default:a(()=>[t(e(be),{"as-child":""},{default:a(()=>{var F;return[t(W,{variant:"outline",class:me(e(Q)(r.width,"justify-start text-left font-normal rounded-xl px-2 py-1 h-fit",!((F=m.value)!=null&&F.start)&&"text-muted-foreground"))},{default:a(()=>[t(e(jt),{class:"w-4 h-4",size:"16"}),f("div",_a,I(y.value),1)]),_:1},8,["class"])]}),_:1}),t(e($e),{class:"w-auto p-0"},{default:a(()=>[t(e(oa),{modelValue:m.value,"onUpdate:modelValue":B[0]||(B[0]=F=>m.value=F),"initial-focus":"","number-of-months":2,"onUpdate:startValue":B[1]||(B[1]=F=>{m.value?m.value.start=F:m.value={start:F,end:void 0}})},null,8,["modelValue"])]),_:1})]),_:1})}}}),ha={class:"hidden lg:inline-flex ml-2"},xa={key:0,class:"text-sm font-light"},Ca={class:"text-sm font-semibold"},ba={class:"relative items-center w-full"},$a={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},wa={class:"py-1"},ka=["onClick"],Sa=["checked"],Pa={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Da={"data-size":"20"},qa={class:"p-1 border-5"},Ia=fe({__name:"CommandFilter",props:{modelValue:{type:Array,required:!0},deviceId:{type:Number,default:0}},emits:["update:modelValue"],setup(p,{emit:i}){const u=i,r=C([]),o=C(!1),l=C([]),g=C(""),h=C(!1),b=p;pe(()=>{w()}),X(()=>b.modelValue,$=>{l.value=$,h.value=l.value.length===r.value.length});function x($){if($.id===9999999)h.value?(l.value=[],h.value=!1):(l.value=[...r.value],h.value=!0);else{const y=l.value.findIndex(L=>L.command===$.command);y!==-1?(l.value.splice(y,1),h.value=!1):(l.value.push($),l.value.length===r.value.length&&(h.value=!0))}o.value=!1,u("update:modelValue",l.value)}function w(){re.get(`/api/configs/distinct-commands/${b.deviceId}/?perPage=10000`).then($=>{r.value=$.data.data})}const m=A(()=>r.value.filter($=>$.command.toLowerCase().includes(g.value.toLowerCase())));return($,y)=>{const L=z("Button"),K=z("Input"),P=z("Separator");return n(),_(e(we),null,{default:a(()=>[t(e(be),null,{default:a(()=>[t(L,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:a(()=>[t(e(zt),{class:"",size:"16"}),f("div",ha,[l.value&&l.value.length===0?(n(),S(N,{key:0},[D("Command")],64)):(n(),S(N,{key:1},[l.value.length>0?(n(),S("span",xa,[y[2]||(y[2]=D(" Command ",-1)),f("strong",Ca,I(l.value.length)+" selected",1)])):E("",!0)],64))])]),_:1})]),_:1}),t(e($e),{side:"bottom",align:"start",class:"w-64 p-0"},{default:a(()=>[f("div",ba,[t(K,{id:"search",type:"text",modelValue:g.value,"onUpdate:modelValue":y[0]||(y[0]=B=>g.value=B),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),f("span",$a,[t(e(Lt),{size:"16"})])]),t(P),t(e(Ne),{class:"h-44"},{default:a(()=>[f("div",wa,[(n(!0),S(N,null,ee(m.value,B=>(n(),S("div",{key:B.command,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:W=>x(B)},[f("input",{type:"checkbox",checked:l.value.some(W=>W.command===B.command),class:"mr-2"},null,8,Sa),f("span",Pa,[f("span",Da,I(B.command),1)])],8,ka))),128))])]),_:1}),t(P),f("div",qa,[t(L,{variant:"ghost",class:"justify-start w-full p-1",onClick:y[1]||(y[1]=B=>x({id:9999999}))},{default:a(()=>[h.value?(n(),_(e(Mt),{key:0,class:"mr-2",size:"16"})):(n(),_(e(Tt),{key:1,class:"mr-2",size:"16"})),f("span",null,I(h.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}}),Ba={class:"hidden lg:inline-flex ml-2"},Va={key:0,class:"text-sm font-light"},Ra={class:"text-sm font-semibold"},Fa={class:"py-1"},za=["onClick"],La=["checked"],Ma={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ta={"data-size":"20"},ja=fe({__name:"StatusFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(p,{emit:i}){const u=i,r=C([{id:0,name:"Error"},{id:1,name:"Good"},{id:2,name:"Unknown"},{id:200,name:"All"}]),o=C(!1),l=C([]),g=p;X(()=>g.modelValue,b=>{l.value=b});function h(b){if(b.id===200)l.value.length===r.value.length?l.value=[]:l.value=[...r.value];else{const x=l.value.findIndex(w=>w.id===b.id);if(x!==-1){l.value.splice(x,1);const w=l.value.findIndex(m=>m.id===200);w!==-1&&l.value.splice(w,1)}else l.value.push(b)}o.value=!1,u("update:modelValue",l.value)}return(b,x)=>{const w=z("Button");return n(),_(e(we),null,{default:a(()=>[t(e(be),null,{default:a(()=>[t(w,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:a(()=>[t(e(Ht),{class:"",size:"16"}),f("div",Ba,[l.value&&l.value.length===0?(n(),S(N,{key:0},[D("Status")],64)):(n(),S(N,{key:1},[l.value.length>0?(n(),S("span",Va,[x[0]||(x[0]=D(" Status ",-1)),f("strong",Ra,I(l.value.length)+" selected",1)])):E("",!0)],64))])]),_:1})]),_:1}),t(e($e),{side:"bottom",align:"start",class:"p-0 w-44"},{default:a(()=>[t(e(Ne),{class:"h-44"},{default:a(()=>[f("div",Fa,[(n(!0),S(N,null,ee(r.value,m=>(n(),S("div",{key:m.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:$=>h(m)},[f("input",{type:"checkbox",checked:l.value.some($=>$.id===m.id),class:"mr-2"},null,8,La),f("span",Ma,[f("span",Ta,I(m.name),1)])],8,za))),128))])]),_:1})]),_:1})]),_:1})}}});function Ea(p){const i=C(1),u=bt(),r=C(u.get("useConfigsTable","perPage",10)),o=C("-id"),l=C(""),g=C({}),h=ze(),b=C(!1),x=C(1),w=C([]),m=C(!1),$=C([]),y=C([]),L=Ue(),K=Oe().name,P=C(!1),{reload:B}=wt(R),{toggleSort:W}=$t(o,R,"useConfigsTable"),F=C(!1),H=C(!0),V=C(1),v=C(!1),T=C(null),{openDialog:ne,isDialogOpen:ie}=h,{toastSuccess:M,toastError:oe}=Le(),ge=yt("formatters"),le=parseInt(localStorage.getItem("ConfigPerPage")||"10");le>=1e7&&ve(le);function R(c=!1){if($.value.length>0){const k=$.value.map(q=>q.id);g.value["filter[download_status]"]=k.join(",")}p.configsId===0?ae({},c):se({},c)}async function ae(c={},k=!1){k?F.value=!0:(b.value=!0,V.value=1,H.value=!0);try{const q=k?V.value:i.value,j=await re.get("/api/configs/",{params:{page:q,perPage:r.value,sort:o.value,loadMore:v.value,...g.value}});k?(w.value=[...w.value,...j.data.data],V.value++):w.value=j.data.data,x.value=j.data.last_page,H.value=q<j.data.last_page}catch(q){console.error("Error fetching configs:",q),oe("Error","Failed to fetch configs.")}finally{b.value=!1,F.value=!1}}async function se(c={},k=!1){k?F.value=!0:(b.value=!0,V.value=1,H.value=!0),g.value["filter[device_id]"]=p.configsId;try{const q=k?V.value:i.value,j=await re.get(`/api/configs/all-by-deviceid/${p.configsId}`,{params:{page:q,perPage:r.value,sort:o.value,loadMore:v.value,...g.value}});k?(w.value=[...w.value,...j.data.data],V.value++):w.value=j.data.data,x.value=j.data.last_page,H.value=q<j.data.last_page}catch(q){console.error("Error fetching configs:",q),oe("Error","Failed to fetch configs.")}finally{b.value=!1,F.value=!1}}const ve=c=>{c>=1e7?(v.value=!0,T.value=c,V.value=1,H.value=!0):(v.value=!1,T.value=null)};function _e(c){let k="",q="";console.log(c.start),console.log(c.end),c.start&&c.end&&(k=c.start.toString(),q=c.end.toString()),k&&q&&(g.value["filter[created_at_between]"]=`${k},${q}`),R()}const ke=async()=>{!H.value||F.value||R(!0)},d=async c=>{try{await re.delete(`/api/configs/${c}`),R(),M("Config Deleted","The config has been deleted successfully."),m.value=!1}catch(k){console.error("Error deleting config:",k),oe("Error","Failed to delete config."),m.value=!1}},ye=async c=>{try{await re.post("/api/configs/delete-many",{ids:c}),R(),M("Configs Deleted","The configs have been deleted successfully."),m.value=!1,Ae.emit("deleteManyConfigsSuccess")}catch(k){console.error("Error deleting configs:",k),oe("Error","Failed to delete configs."),m.value=!1}};function de(c){c.altKey&&c.key==="n"&&(c.preventDefault(),ne("DialogNewConfig"))}function G(c){c?g.value["filter[latest_version]"]=1:delete g.value["filter[latest_version]"],R()}function U(c){c?(g.value["filter[config_downloaded]"]=1,P.value=!0):(delete g.value["filter[config_downloaded]"],P.value=!1),R()}function ue(){g.value={},$.value=[],y.value=[],l.value="",R()}function he(c){let k="configs";K==="device-view"&&(k="device-view"),L.push({name:"config-view",params:{id:parseInt(c)},query:{ref:k}})}const s=Ee(()=>{g.value["filter[q]"]=l.value,i.value=1,R()},500);return X(i,()=>{v.value||R()}),X(r,(c,k)=>{if(u.set("useConfigsTable","perPage",r.value),c>=1e7&&!v.value){v.value=!0,T.value=c,(()=>{r.value=50,u.set("useConfigsTable","perPage",50)})();return}c<1e7&&v.value&&T.value!==null&&(c!==50||k<1e7)&&(v.value=!1,T.value=null),(!v.value||c<1e7&&c!==50)&&u.set("useConfigsTable","perPage",c),c>=1e7&&!v.value||R()}),X(l,()=>{s()}),X($,(c,k)=>{if(c&&c.length>0){const q=c.map(j=>j.id);g.value["filter[download_status]"]=q.join(",")}else delete g.value["filter[download_status]"];R()},{deep:!0}),X(y,(c,k)=>{if(c&&c.length>0){const q=c.map(j=>j.command);g.value["filter[command]"]=q.join(",")}else delete g.value["filter[command]"];R()},{deep:!0}),{configs:w,currentPage:i,perPage:r,lastPage:x,isLoading:b,isLoadingMore:F,hasMoreData:H,isLoadMoreMode:v,showConfirmDelete:m,searchTerm:l,filters:g,filterStatus:$,filterCommand:y,sortParam:o,showDownloadedConfigs:P,formatters:ge,isDialogOpen:ie,clearFilters:ue,openDialog:ne,deleteConfig:d,deleteManyConfigs:ye,getTabledata:R,handleKeyDown:de,loadMoreConfigs:ke,reload:B,setDates:_e,toggleDownloaded:U,toggleLatestVersion:G,toggleSort:W,viewDetailsPane:he}}const Na={__name:"DataPurgeButton",props:{srcName:{type:String,required:!0,default:""}},setup(p){const i=Ue();function u(r){i.push({name:"settings-data-purge",query:{src:r}})}return(r,o)=>{const l=z("RcIcon"),g=z("Button");return n(),_(g,{variant:"outline",size:"sm",class:"group ml-2 hidden lg:inline-flex",onClick:o[0]||(o[0]=h=>u(p.srcName)),title:"Purge & Retention",alt:"Purge & Retention"},{default:a(()=>[t(l,{name:"purge",class:"2xl:mr-2 h-4 w-4"}),o[1]||(o[1]=f("span",{class:"hidden 2xl:inline-flex"},"Purge and Retention",-1))]),_:1})}}},Ua={class:"flex flex-col h-full gap-1 text-center"},Oa={class:"flex items-center justify-between p-4"},Aa={class:"flex items-center mr-2"},Ka={class:"flex gap-2"},Ha={class:"flex items-center"},Ga={class:"flex items-center"},Qa={class:"flex items-center justify-end"},Wa={class:"px-6"},Ja=["title"],Ya={key:1,class:"text-truncate"},Za=["title"],Xa=["title"],el=["title"],tl=["title"],al={class:"flex items-center button-cell-fixed"},ll={__name:"ConfigsTable",props:{configsId:{type:[String,Number],default:0},statusId:{type:[String,Number],default:0}},setup(p){const i=p;Oe();const{configs:u,currentPage:r,perPage:o,lastPage:l,isLoading:g,isLoadingMore:h,hasMoreData:b,isLoadMoreMode:x,showConfirmDelete:w,searchTerm:m,filters:$,filterStatus:y,filterCommand:L,sortParam:K,formatters:P,isDialogOpen:B,clearFilters:W,openDialog:F,deleteConfig:H,deleteManyConfigs:V,getTabledata:v,handleKeyDown:T,loadMoreConfigs:ne,reload:ie,setDates:M,toggleDownloaded:oe,toggleLatestVersion:ge,toggleSort:le,viewDetailsPane:R}=Ea(i),{selectedRows:ae,selectAll:se,toggleSelectAll:ve,toggleSelectRow:_e}=kt(u);return pe(()=>{i.statusId&&(y.value=[{id:i.statusId}]),v(),window.addEventListener("keydown",T),Ae.on("deleteManyConfigsSuccess",()=>{ae.value=[],se.value=!1})}),Me(()=>{window.removeEventListener("keydown",T)}),(ke,d)=>{const ye=z("Input"),de=z("Separator"),G=z("Button"),U=z("RcIcon"),ue=z("Checkbox"),he=z("Toaster");return n(),S("div",Ua,[f("div",Oa,[f("div",Aa,[t(ye,{class:"max-w-sm ml-4 hidden xl:inline-flex",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter [id, device_name]",modelValue:e(m),"onUpdate:modelValue":d[0]||(d[0]=s=>ce(m)?m.value=s:null)},null,8,["modelValue"]),t(de,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border hidden xl:inline-flex"}),f("div",Ka,[t(ya,{"use-default-range":!1,placeholder:"Select date range",onDateChange:d[1]||(d[1]=s=>e(M)(s)),width:"200px"}),t(Ia,{modelValue:e(L),"onUpdate:modelValue":d[2]||(d[2]=s=>ce(L)?L.value=s:null),deviceId:p.configsId},null,8,["modelValue","deviceId"]),t(ja,{modelValue:e(y),"onUpdate:modelValue":d[3]||(d[3]=s=>ce(y)?y.value=s:null)},null,8,["modelValue"]),Object.keys(e($)).length>0||e(m)||e(y).length||e(L).length?(n(),_(St,{key:0,"onUpdate:modelValue":e(W)},null,8,["onUpdate:modelValue"])):E("",!0),t(de,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),f("div",Ha,[t(Re,{delayDuration:100,content:"Latest configs only",side:"bottom"},{trigger:a(()=>[t(e(Qt),{size:"16",class:"mr-2"})]),_:1}),t(e(Pe),{id:"airplane-mode","onUpdate:checked":e(ge)},null,8,["onUpdate:checked"])]),f("div",Ga,[t(Re,{delayDuration:100,content:"Downloaded configs only",side:"bottom"},{trigger:a(()=>[t(e(Wt),{size:"16",class:"mr-2"})]),_:1}),t(e(Pe),{id:"airplane-mode","onUpdate:checked":e(oe)},null,8,["onUpdate:checked"])])])]),f("div",Qa,[e(ae).length?(n(),_(G,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:d[4]||(d[4]=xt(s=>w.value=!0,["prevent"])),variant:"primary"},{default:a(()=>[D("Delete Selected "+I(e(ae).length)+" Config(s) ",1)]),_:1})):E("",!0),t(Na,{srcName:"configs"}),t(U,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:d[5]||(d[5]=s=>e(ie)())})])]),f("div",Wa,[t(e(Bt),null,{default:a(()=>[t(e(Pt),null,{default:a(()=>[t(e(Ve),null,{default:a(()=>[t(e(Y),{class:"w-[2%] rc-th-heading"},{default:a(()=>[t(ue,{id:"selectAll",modelValue:e(se),"onUpdate:modelValue":d[6]||(d[6]=s=>ce(se)?se.value=s:null),checked:e(se),onClick:d[7]||(d[7]=s=>e(ve)())},null,8,["modelValue","checked"])]),_:1}),t(e(Y),{class:"w-[2%] rc-th-heading"},{default:a(()=>[t(G,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[8]||(d[8]=s=>e(le)("id"))},{default:a(()=>[t(U,{name:"sort",sortParam:e(K),field:"id"},null,8,["sortParam"]),d[16]||(d[16]=f("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(Y),{class:"w-[2%] rc-th-heading"},{default:a(()=>[t(G,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[9]||(d[9]=s=>e(le)("download_status"))},{default:a(()=>[t(U,{name:"sort",sortParam:e(K),field:"download_status"},null,8,["sortParam"]),d[17]||(d[17]=f("span",{class:"ml-2"},null,-1))]),_:1})]),_:1}),t(e(Y),{class:"w-[10%] rc-th-heading"},{default:a(()=>[t(G,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[10]||(d[10]=s=>e(le)("device_name"))},{default:a(()=>[t(U,{name:"sort",sortParam:e(K),field:"device_name"},null,8,["sortParam"]),d[18]||(d[18]=f("span",{class:"ml-2"},"Filename",-1))]),_:1})]),_:1}),t(e(Y),{class:"w-[15%] rc-th-heading"},{default:a(()=>[t(G,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[11]||(d[11]=s=>e(le)("command"))},{default:a(()=>[t(U,{name:"sort",sortParam:e(K),field:"command"},null,8,["sortParam"]),d[19]||(d[19]=f("span",{class:"ml-2"},"Command",-1))]),_:1})]),_:1}),t(e(Y),{class:"w-[10%] rc-th-heading"},{default:a(()=>[...d[20]||(d[20]=[D("Device",-1)])]),_:1}),t(e(Y),{class:"w-[10%] rc-th-heading"},{default:a(()=>[...d[21]||(d[21]=[D("File Size",-1)])]),_:1}),t(e(Y),{class:"w-[10%] rc-th-heading"},{default:a(()=>[...d[22]||(d[22]=[D("Downloaded",-1)])]),_:1}),t(e(Y),{class:"w-[10%] rc-th-heading"})]),_:1})]),_:1}),t(e(Dt),null,{default:a(()=>[e(g)?(n(),_(qt,{key:0})):e(g)?(n(),_(It,{key:2})):(n(!0),S(N,{key:1},ee(e(u),s=>(n(),_(e(Ve),{key:s.id,class:me([{"rc-text-sm-muted":s.config_downloaded===0},"table-row-fixed"])},{default:a(()=>[t(e(Z),{class:"text-start table-cell-fixed"},{default:a(()=>[t(ue,{class:"cursor-pointer",id:"select-"+s.id,checked:!!e(ae).includes(s.id),onClick:c=>e(_e)(s.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(Z),{class:"text-start table-cell-fixed"},{default:a(()=>[D(I(s.id),1)]),_:2},1024),t(e(Z),{class:"text-start table-cell-fixed"},{default:a(()=>[s.download_status===0?(n(),_(U,{key:0,name:"status-red"})):E("",!0),s.download_status===1?(n(),_(U,{key:1,name:"status-green"})):E("",!0),s.download_status===2?(n(),_(U,{key:2,name:"status-yellow"})):E("",!0),s.download_status===100?(n(),_(U,{key:3,name:"status-gray"})):E("",!0)]),_:2},1024),t(e(Z),{class:"text-start table-cell-fixed"},{default:a(()=>[s.config_filename?(n(),_(G,{key:0,class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl button-cell-fixed",variant:"ghost",onClick:c=>e(R)(s.id)},{default:a(()=>[f("span",{class:"border-b text-truncate",title:s.config_filename},I(s.config_filename),9,Ja)]),_:2},1032,["onClick"])):(n(),S("span",Ya,"Not Downloaded - unchanged"))]),_:2},1024),t(e(Z),{class:"text-start table-cell-fixed"},{default:a(()=>[f("span",{class:"text-truncate",title:s.command},I(s.command),9,Za)]),_:2},1024),t(e(Z),{class:"text-start table-cell-fixed"},{default:a(()=>[f("span",{class:"text-truncate",title:s.device_name},[t(Gt,{items:[{id:s.device_id,device_name:s.device_name,view_url:"device/view/"+s.device_id}],displayField:"device_name",linkField:"view_url",maxVisible:2,hoverCardFields:["id","device_name"]},null,8,["items"])],8,Xa)]),_:2},1024),t(e(Z),{class:"text-start table-cell-fixed"},{default:a(()=>[f("span",{class:"text-truncate",title:s.config_filesize?e(P).formatFileSize(s.config_filesize):""},I(s.config_filesize?e(P).formatFileSize(s.config_filesize):""),9,el)]),_:2},1024),t(e(Z),{class:"text-start table-cell-fixed"},{default:a(()=>[f("span",{class:"text-truncate",title:e(P).formatTime(s.created_at)},I(e(P).formatTime(s.created_at)),9,tl)]),_:2},1024),t(e(Z),{class:"text-start table-cell-fixed"},{default:a(()=>[f("div",al,[t(e(De),null,{default:a(()=>[t(e(qe),null,{default:a(()=>[t(e(Ie),{"as-child":""},{default:a(()=>[t(G,{variant:"ghost",onClick:c=>e(F)("peek-config-dialog-"+s.id),disabled:s.config_downloaded==0},{default:a(()=>[t(U,{name:"peek-eye"})]),_:1},8,["onClick","disabled"])]),_:2},1024),t(e(Be),{class:"text-white bg-rcgray-800"},{default:a(()=>[...d[23]||(d[23]=[f("p",null,"Peek Config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),t(e(De),null,{default:a(()=>[t(e(qe),null,{default:a(()=>[t(e(Ie),{"as-child":""},{default:a(()=>[t(G,{variant:"ghost",onClick:c=>e(R)(s.id),disabled:s.config_downloaded==0},{default:a(()=>[t(e(Ct),{size:"16",class:"text-muted-foreground hover:text-blue-500"})]),_:1},8,["onClick","disabled"])]),_:2},1024),t(e(Be),{class:"text-white bg-rcgray-800"},{default:a(()=>[...d[24]||(d[24]=[f("p",null,"Open Config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),e(B)("peek-config-dialog-"+s.id)?(n(),_(sa,{key:0,editId:s.id},null,8,["editId"])):E("",!0),t(Ft,{rowData:s,showEditBtn:!1,showViewDetailsBtn:s.config_downloaded==1,onOnViewDetails:c=>e(R)(s.id),onOnDelete:c=>e(H)(s.id)},null,8,["rowData","showViewDetailsBtn","onOnViewDetails","onOnDelete"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1}),e(x)&&e(b)?(n(),_(G,{key:0,onClick:e(ne),disabled:e(h),class:"load-more-btn my-4",variant:"outline"},{default:a(()=>[d[25]||(d[25]=f("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[f("path",{d:"M12 8v8m0 0l4-4m-4 4l-4-4"}),f("path",{d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"})],-1)),D(" "+I(e(h)?"Loading...":"Load More Results"),1)]),_:1},8,["onClick","disabled"])):E("",!0),t(Vt,{currentPage:e(r),lastPage:e(l),perPage:e(o),"onUpdate:currentPage":d[12]||(d[12]=s=>r.value=s),"onUpdate:perPage":d[13]||(d[13]=s=>o.value=s)},null,8,["currentPage","lastPage","perPage"]),t(Rt,{ids:e(ae),showConfirmDelete:e(w),onClose:d[14]||(d[14]=s=>w.value=!1),onHandleDelete:d[15]||(d[15]=s=>e(V)(e(ae)))},null,8,["ids","showConfirmDelete"]),t(he)])])}}},_l=ht(ll,[["__scopeId","data-v-1a3e36e2"]]),sl={class:"flex items-center"},yl={__name:"NavPills",props:{items:{type:Array,required:!0},modelValue:{type:String,default:null},persistKey:{type:String,default:null}},emits:["update:modelValue","select"],setup(p,{emit:i}){var h,b;const u=p,r=i,o=C(u.modelValue??(u.persistKey?localStorage.getItem(u.persistKey):null)??((b=(h=u.items)==null?void 0:h[0])==null?void 0:b.to)??null);X(()=>u.modelValue,x=>{x&&x!==o.value&&(o.value=x)});function l(x){o.value=x,u.persistKey&&localStorage.setItem(u.persistKey,x),r("update:modelValue",x),r("select",x)}function g(x){return o.value===x}return(x,w)=>{const m=z("RcIcon"),$=z("Button");return n(),S("div",sl,[(n(!0),S(N,null,ee(p.items,y=>(n(),_($,{key:y.to,type:"button","data-nav":y.to,variant:"ghost",class:"relative ml-2 border",onClick:L=>l(y.to)},{default:a(()=>[y.icon?(n(),_(m,{key:0,name:y.icon,class:"mr-2"},null,8,["name"])):E("",!0),D(" "+I(y.label)+" ",1),f("span",{class:me(["pointer-events-none absolute left-0 right-0 -bottom-[6px] h-0.5 bg-blue-500 origin-center transition-transform duration-200",g(y.to)?"scale-x-100":"scale-x-0"])},null,2)]),_:2},1032,["data-nav","onClick"]))),128))])}}};export{_l as C,sa as _,ya as a,yl as b,Ea as u};
