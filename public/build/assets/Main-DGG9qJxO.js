import{i as Fe,g as re,ac as Bt,e as p,o as n,u as e,c4 as Ft,a9 as Lt,aa as zt,w as l,l as bt,C as _e,B as be,v as I,E as de,U as X,F as he,r as K,b as s,H as ht,I as Le,a,J as ze,K as Oe,t as L,c as N,q as P,d as f,P as je,Q as Ke,M as ee,N as oe,S as Pe,y as ae,a2 as lt,a3 as te,a4 as le,bO as Ot,n as De,p as wt,j as $t,k as Ct,m as Dt,aS as jt,R as St,aC as at,aE as nt,aF as ge,aP as Kt,aQ as ft,aG as ot,at as qe,c1 as ie,au as Ge,c5 as tt,c2 as st,a0 as He,av as Je,_ as dt,az as Vt,bE as gt,L as qt,c6 as et,ay as Gt,bF as Ht,bb as Jt,aD as _t,Y as Qt,c3 as Yt,c7 as Wt}from"./app-CJzaFoze.js";import{u as rt,h as it,i as ut,j as ke,k as Ie,l as Ee,_ as Me,a as me,b as J,c as Re,d as Te,e as H,m as Qe,n as Ue,f as Ne,g as Ae,o as $e,p as ye,P as Zt,T as Xt,q as es,r as ts}from"./useRowSelection-BFCWzlct.js";import{_ as Se}from"./BadgeList-4vlrJdLK.js";import{_ as yt,b as ss,c as ls,a as as}from"./TagMultiSelect-DRXu6HV2.js";import{S as Ze}from"./Spinner-B_AKjoF9.js";import{_ as Pt}from"./RcToolTip.vue_vue_type_script_setup_true_lang-CHPerM3c.js";import{a as ns,b as os,d as ds,e as rs,f as is,u as us,_ as cs,c as ms,g as ps,h as vs}from"./useTemplatesGithub-C0DsvuBm.js";import{a as fs,T as It,M as Et,G as gs}from"./useCredentials-rUu0RaSU.js";import{B as ys}from"./bell-BdC8xl_v.js";import{S as Mt,C as xs,a as _s,b as ks,F as kt,c as bs}from"./shredder-D_Inzk9j.js";import{u as hs}from"./useCopy-BWNQ9n7L.js";import{C as ws}from"./copy-CgVdFY3O.js";import{C as $s}from"./circle-check-big-CMcUnYvW.js";import{X as Cs}from"./x-BZtJYEPQ.js";import{_ as Ds,a as Ss,b as Vs,c as Ps,d as Is}from"./SelectScrollDownButton-J3p3NQBa.js";import{W as Es}from"./wifi-CrHNjSS3.js";/* empty css               */import"./HoverCardTrigger-Cn5OPtsS.js";import"./cloud-alert-CDaoKUU3.js";import"./search-C_mFc5fq.js";import"./plus-Cu7n14hY.js";import"./info-DQTur3RV.js";import"./corner-down-left-Cca6O_d0.js";import"./AlertInfo.vue_vue_type_style_index_0_scoped_c93aa73f_lang-O2-IZuvQ.js";const Ms=Fe({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(k){const A=k,b=re(()=>{const{class:C,...o}=A;return o}),$=Bt(b);return(C,o)=>(n(),p(e(Ft),Lt(e($),{class:e(zt)("px-2 py-1.5 text-sm font-semibold",k.inset&&"pl-8",A.class)}),{default:l(()=>[bt(C.$slots,"default")]),_:3},16,["class"]))}}),Rs={class:"flex items-center"},Ts={class:"ml-2"},Us={class:"grid gap-2 p-4"},Ns={class:"grid items-center grid-cols-4 gap-2"},As={key:0,class:"col-span-3"},Bs={key:2,class:"col-span-3 col-start-2 text-sm text-red-400"},Fs={class:"grid items-center grid-cols-4 gap-2"},Ls={key:0,class:"col-span-3"},zs={class:"grid items-center grid-cols-4 gap-2"},Os={key:0,class:"col-span-3"},js={key:2,class:"col-span-3 col-start-2 text-sm text-red-400"},Ks={class:"pl-2 ml-auto"},qs={class:"rc-kdb-class2"},Gs={__name:"CommandAddEditDialog",props:{editId:Number},emits:["save"],setup(k,{emit:A}){const{toastSuccess:b}=_e(),$=be(),{openDialog:C,closeDialog:o,isDialogOpen:T}=$,_=A,w=I([]),E=I(!1),h=I({command:"",description:"",category:[]}),U=k;function y(g){g.ctrlKey&&g.key==="Enter"&&x()}de(()=>{U.editId>0&&(E.value=!0,X.get(`/api/commands/${U.editId}`).then(g=>{h.value=g.data,h.value.categoryArray=g.data.category.map(m=>m.id)}).catch(g=>{console.error("Error loading command:",g)}).finally(()=>{E.value=!1})),window.addEventListener("keydown",y)}),he(()=>{window.removeEventListener("keydown",y)});function x(){const g=U.editId>0?`/${U.editId}`:"",m=U.editId>0?"patch":"post";X[m]("/api/commands"+g,h.value).then(D=>{_("save",D.data),b("Command saved","The command has been saved successfully."),o("DialogNewCommand")}).catch(D=>{var v,u;w.value=((u=(v=D.response)==null?void 0:v.data)==null?void 0:u.errors)||{}})}return(g,m)=>{const D=K("RcIcon"),v=K("Label"),u=K("Skeleton"),M=K("Input"),B=K("Button");return n(),p(e(Ke),{open:e(T)("DialogNewCommand")},{default:l(()=>[s(e(ht),{"as-child":""}),s(e(Le),{class:"p-0 sm:max-w-fit",onEscapeKeyDown:m[4]||(m[4]=d=>e(o)("DialogNewCommand")),onPointerDownOutside:m[5]||(m[5]=d=>e(o)("DialogNewCommand")),onCloseClicked:m[6]||(m[6]=d=>e(o)("DialogNewCommand"))},{default:l(()=>[s(e(ze),{class:"rc-dialog-header"},{default:l(()=>[s(e(Oe),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",Rs,[s(D,{name:"commands"}),a("span",Ts,L(k.editId>0?"Edit":"Add")+" Command "+L(k.editId>0?"(ID: "+k.editId+")":""),1)])]),_:1})]),_:1}),a("div",Us,[a("div",Ns,[s(v,{for:"command",class:"text-right"},{default:l(()=>[...m[7]||(m[7]=[f(" Command Name ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),E.value?(n(),N("div",As,[s(u,{class:"h-6 w-full"})])):(n(),p(M,{key:1,modelValue:h.value.command,"onUpdate:modelValue":m[0]||(m[0]=d=>h.value.command=d),id:"command",class:"col-span-3"},null,8,["modelValue"])),w.value.command&&!E.value?(n(),N("span",Bs,L(w.value.command[0]),1)):P("",!0)]),a("div",Fs,[s(v,{for:"description",class:"text-right"},{default:l(()=>[...m[8]||(m[8]=[f("Description",-1)])]),_:1}),E.value?(n(),N("div",Ls,[s(u,{class:"h-6 w-full"})])):(n(),p(M,{key:1,modelValue:h.value.description,"onUpdate:modelValue":m[1]||(m[1]=d=>h.value.description=d),id:"description",class:"col-span-3"},null,8,["modelValue"]))]),a("div",zs,[s(v,{class:"text-right"},{default:l(()=>[...m[9]||(m[9]=[f(" Command Group ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),E.value?(n(),N("div",Os,[s(u,{class:"h-6 w-full"})])):(n(),p(yt,{key:1,modelValue:h.value.category,"onUpdate:modelValue":m[2]||(m[2]=d=>h.value.category=d)},null,8,["modelValue"])),w.value.categoryArray&&!E.value?(n(),N("span",js,L(w.value.categoryArray[0]),1)):P("",!0)])]),s(e(je),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[s(B,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:m[3]||(m[3]=d=>e(o)("DialogNewCommand")),size:"sm"},{default:l(()=>[...m[10]||(m[10]=[f(" Close ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),s(B,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:x,variant:"primary"},{default:l(()=>[f(L(U.editId===0?"Save":"Update")+" ",1),a("div",Ks,[a("kbd",qs,[m[11]||(m[11]=f(" Ctrl  ",-1)),s(D,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},Hs={class:"flex items-center"},Js={class:"grid gap-4 p-4"},Qs={class:"max-h-40 overflow-y-auto rounded-lg border border-border bg-background/80 backdrop-blur-sm p-2"},Ys={class:"space-y-1.5"},Ws={class:"text-foreground"},Zs={class:"grid gap-2"},Xs={key:0,class:"text-sm text-red-400 bg-red-900/20 border border-red-700 rounded p-2"},el={key:1,class:"pl-2 ml-auto"},tl={class:"rc-kdb-class2"},sl={__name:"CommandsBulkUpdateModal",props:{data:{type:Array,required:!0},isOpen:{type:Boolean,default:!1}},emits:["close","updated"],setup(k,{emit:A}){const{toastSuccess:b,toastError:$}=_e(),C=be(),{closeDialog:o,isDialogOpen:T}=C,_=k,w=A,E=I(""),h=I([]),U=I(!1),y=I([]);async function x(v={}){U.value=!0;try{const u=await X.get("/api/categories?per_page=1000",{});y.value=u.data}catch(u){console.error("Error fetching categories:",u),$("Error","Failed to fetch categories.")}finally{U.value=!1}}function g(v){v.ctrlKey&&v.key==="Enter"&&D(),v.key==="Escape"&&o("DialogBulkUpdateCommands")}de(()=>{x(),window.addEventListener("keydown",g)}),he(()=>{window.removeEventListener("keydown",g)});function m(v){w(v==="updated"?"updated":"close")}async function D(){var v,u;if(h.value.length===0){E.value="You must select at least one command group.";return}U.value=!0,E.value="";try{await X.post("/api/commands/bulk-update-categories",{categories:h.value,commands:_.data}),b("Command groups updated",`Successfully updated ${_.data.length} command(s) with new command groups.`),m("updated")}catch(M){const B=((u=(v=M.response)==null?void 0:v.data)==null?void 0:u.message)||"Failed to update command groups";E.value=B,$("Update failed",B)}finally{U.value=!1}}return(v,u)=>{const M=K("RcIcon"),B=K("Label"),d=K("Button");return n(),p(e(Ke),{open:e(T)("DialogBulkUpdateCommands")},{default:l(()=>[s(e(Le),{class:"p-0 sm:max-w-2xl",onEscapeKeyDown:m,onPointerDownOutside:m,onCloseClicked:m},{default:l(()=>[s(e(ze),{class:"rc-dialog-header"},{default:l(()=>[s(e(Oe),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",Hs,[s(M,{name:"commands"}),u[1]||(u[1]=a("span",{class:"ml-2"},"Update Command Groups",-1))])]),_:1})]),_:1}),a("div",Js,[u[5]||(u[5]=a("p",{class:"text-sm text-rcgray-300"},"The commands below will be updated with the selected command groups.",-1)),a("div",Qs,[a("ul",Ys,[(n(!0),N(ee,null,oe(k.data,O=>(n(),N("li",{key:O.id||O.command,class:"flex items-center text-xs font-mono text-muted-foreground bg-muted/60 hover:bg-muted px-3 py-1.5 rounded transition-colors"},[u[2]||(u[2]=a("span",{class:"text-green-400 mr-2"},"$",-1)),a("span",Ws,L(O.command),1)]))),128))])]),a("div",Zs,[s(B,{class:"text-sm font-medium text-rcgray-200"},{default:l(()=>[...u[3]||(u[3]=[f(" Command Groups ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),s(yt,{modelValue:h.value,"onUpdate:modelValue":u[0]||(u[0]=O=>h.value=O),id:"selectedCategoryObj"},null,8,["modelValue"]),u[4]||(u[4]=a("p",{class:"text-xs text-rcgray-400"},"You must associate one or multiple command groups to the chosen commands.",-1))]),E.value?(n(),N("div",Xs,L(E.value),1)):P("",!0)]),s(e(je),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[s(d,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:m,size:"sm"},{default:l(()=>[...u[6]||(u[6]=[f(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),s(d,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:D,variant:"primary",disabled:U.value||h.value.length===0},{default:l(()=>[U.value?(n(),p(Ze,{key:0,class:"w-4 h-4 mr-2"})):P("",!0),u[8]||(u[8]=f(" Confirm ",-1)),U.value?P("",!0):(n(),N("div",el,[a("kbd",tl,[u[7]||(u[7]=f(" Ctrl  ",-1)),s(M,{name:"enter",class:"ml-1"})])]))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])}}};function ll(){const k=I(1),A=rt(),b=I(A.get("useCommands","perPage",10)),$=I("-id"),C=I(""),o=I({}),T=be(),_=I(0),w=I(!1),E=I(1),h=I(1),U=I(1),y=I([]),x=I(!1),{openDialog:g,closeDialog:m}=T,{toastSuccess:D,toastError:v}=_e(),{reload:u}=ut(B),{toggleSort:M}=it($,B,"useCommands");Pe();async function B(R={}){w.value=!0;try{const Z=await X.get("/api/commands",{params:{page:k.value,perPage:b.value,sort:$.value,...o.value}});y.value=Z.data,E.value=Z.data.last_page}catch(Z){console.error("Error fetching commands:",Z),v("Error","Failed to fetch commands.")}finally{w.value=!1}}const d=R=>{_.value=0,h.value=Math.random(),g("DialogNewCommand")};function O(R){_.value=R,h.value=Math.random(),g("DialogNewCommand")}const V=async R=>{try{await X.delete(`/api/commands/${R}`),B(),D("Command Deleted","The command has been deleted successfully."),x.value=!1}catch(Z){Z.status===422?v("Error",Z.response.data.message):(console.error("Error deleting Command Group:",Z),v("Error","Failed to delete Command Group."))}},W=async R=>{try{await X.post("/api/commands/delete-many",{ids:R}),B(),D("Commands Deleted","The commands have been deleted successfully."),x.value=!1,ke.emit("deleteManyCommandsSuccess")}catch(Z){Z.status===422?v("Error",Z.response.data.message):(console.error("Error deleting Command Group:",Z),v("Error","Failed to delete Command Group."))}},j=R=>{_.value=R,h.value=Math.random(),g("DialogNewCommand")},r=()=>{U.value=Math.random(),g("DialogBulkUpdateCommands")},z=()=>{U.value=Math.random(),m("DialogBulkUpdateCommands")},i=()=>{B(),U.value=Math.random(),m("DialogBulkUpdateCommands"),D("Bulk Update","Commands updated successfully.")},G=()=>{B(),h.value=Math.random()};function q(R){R.altKey&&R.key==="n"&&(R.preventDefault(),g("DialogNewCommand"))}const c=lt(()=>{o.value["filter[q]"]=C.value,k.value=1,B()},500);ae(k,()=>{B()}),ae(C,()=>{c()}),ae(b,R=>{A.set("useCommands","perPage",b.value),B()});function ne(R,Z,we){const Y=!we;R.change_notification=Y,X.post(`/api/commands/toggle-change-notification/${Z}`,{change_notification:Y}).then(()=>{D("Success","Change notification setting updated")}).catch(Ce=>{var xe,Ve;R.change_notification=we,console.log(Ce),v("Error",((Ve=(xe=Ce.response)==null?void 0:xe.data)==null?void 0:Ve.message)||"Failed to update change notification")})}function Q(R,Z,we){const Y=!we;R.save_config=Y,X.post(`/api/commands/set-save_config-state/${Z}`,{state:Y}).then(()=>{D("Success","Save config setting updated")}).catch(Ce=>{var xe,Ve;R.save_config=we,console.log(Ce),v("Error",((Ve=(xe=Ce.response)==null?void 0:xe.data)==null?void 0:Ve.message)||"Failed to update save config")})}return{commands:y,currentPage:k,editId:_,isLoading:w,lastPage:E,newCommandModalKey:h,newBulkUpdateCommandsKey:U,perPage:b,searchTerm:C,showConfirmDelete:x,sortParam:$,createCommand:d,deleteCommand:V,deleteManyCommands:W,fetchCommands:B,handleKeyDown:q,handleSave:G,openDialog:g,reload:u,toggleSort:M,updateCommand:O,viewEditDialog:j,openBulkUpdateDialog:r,handleCloseBulkUpdate:z,handleUpdateBulkCommands:i,updateChangeNotification:ne,updateSaveConfig:Q}}const al={class:"flex flex-col h-full gap-1 text-center"},nl={class:"flex items-center justify-between p-4"},ol={class:"flex items-center"},dl={class:"flex items-center justify-end"},rl={class:"px-6"},il={key:0,class:"fixed bottom-5 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-4 bg-rcgray-900 text-white border border-rcgray-600 shadow-xl px-4 py-1.5 rounded-lg"},ul={class:"text-sm"},cl={class:"hidden md:inline-flex mr-1"},ml={__name:"Main",setup(k){const{commands:A,currentPage:b,editId:$,isLoading:C,lastPage:o,newCommandModalKey:T,newBulkUpdateCommandsKey:_,perPage:w,searchTerm:E,showConfirmDelete:h,sortParam:U,createCommand:y,deleteCommand:x,deleteManyCommands:g,fetchCommands:m,handleKeyDown:D,handleSave:v,reload:u,toggleSort:M,viewEditDialog:B,openBulkUpdateDialog:d,handleCloseBulkUpdate:O,handleUpdateBulkCommands:V,updateChangeNotification:W}=ll(),{selectedRows:j,selectAll:r,toggleSelectAll:z,toggleSelectRow:i}=Ie(A);de(()=>{m(),window.addEventListener("keydown",D),ke.on("deleteManyCommandsSuccess",()=>{j.value=[],r.value=!1})}),he(()=>{window.removeEventListener("keydown",D)});const G=re(()=>{var q;return(((q=A.value)==null?void 0:q.data)||[]).filter(c=>j.value.includes(c.id))});return(q,c)=>{const ne=K("Input"),Q=K("Button"),R=K("RcIcon"),Z=K("Checkbox"),we=K("RcBadge");return n(),N("div",al,[a("div",nl,[a("div",ol,[s(ne,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter commands...",modelValue:e(E),"onUpdate:modelValue":c[0]||(c[0]=Y=>te(E)?E.value=Y:null)},null,8,["modelValue"]),e(E)?(n(),p(Ee,{key:0,"onUpdate:modelValue":c[1]||(c[1]=Y=>E.value="")})):P("",!0)]),a("div",dl,[s(Q,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:le(e(y),["prevent"]),variant:"primary"},{default:l(()=>[...c[13]||(c[13]=[f(" New Command ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(R,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:c[2]||(c[2]=Y=>e(u)())})])]),a("div",rl,[s(e(Ne),null,{default:l(()=>[s(e(Me),null,{default:l(()=>[s(e(me),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(Z,{id:"selectAll",modelValue:e(r),"onUpdate:modelValue":c[3]||(c[3]=Y=>te(r)?r.value=Y:null),checked:e(r),onClick:c[4]||(c[4]=Y=>e(z)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(Q,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:c[5]||(c[5]=Y=>e(M)("id"))},{default:l(()=>[s(R,{name:"sort",sortParam:e(U),field:"id"},null,8,["sortParam"]),c[14]||(c[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[s(Q,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:c[6]||(c[6]=Y=>e(M)("command"))},{default:l(()=>[s(R,{name:"sort",sortParam:e(U),field:"command"},null,8,["sortParam"]),c[15]||(c[15]=a("span",{class:"ml-2"},"Command",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...c[16]||(c[16]=[f("Description",-1)])]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...c[17]||(c[17]=[f("Command Groups",-1)])]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[c[18]||(c[18]=f(" Options ",-1)),s(Ot,{title:"Command Options",description:"Enable or Disable change notifications.",href:q.$rconfigDocsUrl+"/devices/commands/",linkText:"Command Docs",align:"end"},{trigger:l(()=>[s(Q,{variant:"link",size:"sm",class:"text-blue-400 hover:text-blue-300 p-0"},{default:l(()=>[s(e(fs),{class:"h-3.5 w-3.5 ml-1"})]),_:1})]),_:1},8,["href"])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...c[19]||(c[19]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Re),null,{default:l(()=>[e(C)?(n(),p(Te,{key:0})):e(C)?(n(),p(Ue,{key:2})):(n(!0),N(ee,{key:1},oe(e(A).data,(Y,Ce)=>(n(),p(e(me),{key:Y.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(Z,{class:"cursor-pointer",id:"select-"+Y.id,checked:!!e(j).includes(Y.id),onClick:xe=>e(i)(Y.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(Y.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(Y.command),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(Y.description),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:Y.category,displayField:"categoryName",linkField:"view_url",maxVisible:8,hoverCardFields:["id","categoryName"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(e(ns),{type:"multiple"},{default:l(()=>[s(e(os),{value:"notify","data-state":Y.change_notification?"on":"off",onClick:xe=>e(W)(Y,Y.id,Y.change_notification),class:"rounded p-1 px-2 transition-colors rc-btn-shadow data-[state=on]:bg-amber-400 data-[state=off]:bg-gray-800 hover:data-[state=off]:bg-gray-700 hover:data-[state=on]:bg-amber-300"},{default:l(()=>[s(Pt,{delayDuration:100,content:Y.change_notification?"Change Notifications: On":"Change Notifications: Off",side:"bottom"},{trigger:l(()=>[s(e(ys),{class:De(["h-4 w-4 focus:outline-none",Y.change_notification?"text-black":"text-amber-300"])},null,8,["class"])]),_:2},1032,["content"])]),_:2},1032,["data-state","onClick"])]),_:2},1024)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Qe,{rowData:Y,onOnEdit:xe=>e(B)(Y.id),onOnDelete:xe=>e(x)(Y.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(j).length?(n(),N("div",il,[a("span",ul,[s(we,{variant:"primary",class:"mr-1"},{default:l(()=>[f(L(e(j).length),1)]),_:1}),c[20]||(c[20]=f(" command(s) selected ",-1))]),s(Q,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",variant:"outline",onClick:e(d)},{default:l(()=>[s(R,{name:"command-group",class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),c[21]||(c[21]=a("span",{class:"hidden md:inline-flex"},"Bulk assign command group",-1))]),_:1},8,["onClick"]),s(Q,{class:"text-sm px-1.5 py-0 bg-red-600 hover:bg-red-700 hover:animate-pulse h-8",onClick:c[7]||(c[7]=le(Y=>h.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[s(e(Mt),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),a("span",cl,"Delete "+L(e(j).length),1)]),_:1})])):P("",!0),s(Ae,{currentPage:e(b),lastPage:e(o),perPage:e(w),"onUpdate:currentPage":c[8]||(c[8]=Y=>b.value=Y),"onUpdate:perPage":c[9]||(c[9]=Y=>w.value=Y),totalRecords:e(A).total,isLoading:e(C)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(Gs,{onSave:c[10]||(c[10]=Y=>e(v)()),key:e(T),editId:e($)},null,8,["editId"])),(n(),p(sl,{key:e(_),editId:e($),data:G.value,onClose:e(O),onUpdated:e(V)},null,8,["editId","data","onClose","onUpdated"])),s($e,{ids:e(j),showConfirmDelete:e(h),onClose:c[11]||(c[11]=Y=>h.value=!1),onHandleDelete:c[12]||(c[12]=Y=>e(g)(e(j)))},null,8,["ids","showConfirmDelete"])])])}}},pl={class:"text-xs text-gray-500 line-clamp-1 mt-1 ml-1"},vl={class:"max-w-xs"},fl={key:1,class:"text-xs text-gray-500"},gl={__name:"CategoryCell",props:{categoryName:{type:String,required:!0},categoryDescription:{type:String,required:!0},badgeColor:{type:String,default:""},defaultBadgeClass:{type:String,default:"bg-gray-600 text-gray-200 border-gray-500"},wordLimit:{type:Number,default:10},delayDuration:{type:Number,default:800},skipDelayDuration:{type:Number,default:500}},setup(k){const A=k,b=re(()=>A.categoryDescription&&A.categoryDescription.split(" ").length>A.wordLimit);return($,C)=>(n(),p(e(H),{class:"text-start"},{default:l(()=>[a("span",{class:De([k.badgeColor||k.defaultBadgeClass,"w-fit flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},L(k.categoryName),3),b.value?(n(),p(e(wt),{key:0,"delay-duration":k.delayDuration,"skip-delay-duration":k.skipDelayDuration},{default:l(()=>[s(e($t),null,{default:l(()=>[s(e(Ct),{"as-child":""},{default:l(()=>[a("span",pl,L(k.categoryDescription),1)]),_:1}),s(e(Dt),{side:"bottom"},{default:l(()=>[a("p",vl,L(k.categoryDescription),1)]),_:1})]),_:1})]),_:1},8,["delay-duration","skip-delay-duration"])):(n(),N("span",fl,L(k.categoryDescription),1))]),_:1}))}},yl={class:"flex flex-col h-full gap-1 text-center"},xl={class:"flex items-center justify-between p-4"},_l={class:"flex items-center"},kl={class:"flex items-center justify-end"},bl={class:"px-6"},hl={__name:"Main",setup(k){const{reload:A,editId:b,categories:$,currentPage:C,perPage:o,searchTerm:T,lastPage:_,isLoading:w,fetchCommandGroups:E,viewEditDialog:h,createCommandGroup:U,deleteCommandGroup:y,deleteManyCommandGroups:x,handleSave:g,showConfirmDelete:m,handleKeyDown:D,newCommandGroupsModalKey:v,toggleSort:u,sortParam:M}=ss(),{selectedRows:B,selectAll:d,toggleSelectAll:O,toggleSelectRow:V}=Ie($),W=Pe();return de(()=>{var j,r;E(),(r=(j=W.currentRoute)==null?void 0:j.value.params)!=null&&r.id&&(b.value=parseInt(W.currentRoute.value.params.id),h(b.value)),window.addEventListener("keydown",D),ke.on("deleteManyCommandGroupsSuccess",()=>{B.value=[],d.value=!1})}),he(()=>{window.removeEventListener("keydown",D)}),(j,r)=>{const z=K("Input"),i=K("Button"),G=K("RcIcon"),q=K("Checkbox");return n(),N("div",yl,[r[20]||(r[20]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),a("div",xl,[a("div",_l,[s(z,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter Command Groups...",modelValue:e(T),"onUpdate:modelValue":r[0]||(r[0]=c=>te(T)?T.value=c:null)},null,8,["modelValue"]),e(T)?(n(),p(Ee,{key:0,"onUpdate:modelValue":r[1]||(r[1]=c=>T.value="")})):P("",!0)]),a("div",kl,[e(B).length?(n(),p(i,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:r[2]||(r[2]=le(c=>m.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[f(" Delete Selected "+L(e(B).length)+" Command Group(s) ",1)]),_:1})):P("",!0),s(i,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:le(e(U),["prevent"]),variant:"primary"},{default:l(()=>[...r[13]||(r[13]=[f(" New Command Group ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(G,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:r[3]||(r[3]=c=>e(A)())})])]),a("div",bl,[s(e(Ne),null,{default:l(()=>[s(e(Me),null,{default:l(()=>[s(e(me),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(q,{id:"selectAll",modelValue:e(d),"onUpdate:modelValue":r[4]||(r[4]=c=>te(d)?d.value=c:null),checked:e(d),onClick:r[5]||(r[5]=c=>e(O)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[6]||(r[6]=c=>e(u)("id"))},{default:l(()=>[s(G,{name:"sort",sortParam:e(M),field:"id"},null,8,["sortParam"]),r[14]||(r[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[7]||(r[7]=c=>e(u)("categoryName"))},{default:l(()=>[s(G,{name:"sort",sortParam:e(M),field:"categoryName"},null,8,["sortParam"]),r[15]||(r[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...r[16]||(r[16]=[f("Commands",-1)])]),_:1}),s(e(J),{class:"w-[40%]"},{default:l(()=>[...r[17]||(r[17]=[f("Devices",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...r[18]||(r[18]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Re),null,{default:l(()=>[e(w)?(n(),p(Te,{key:0})):e(w)?(n(),p(Ue,{key:2})):(n(!0),N(ee,{key:1},oe(e($).data,c=>(n(),p(e(me),{key:c.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(q,{class:"cursor-pointer",id:"select-"+c.id,checked:!!e(B).includes(c.id),onClick:ne=>e(V)(c.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(c.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(gl,{"category-name":c.categoryName,"category-description":c.categoryDescription,"badge-color":c.badgeColor,"word-limit":8},null,8,["category-name","category-description","badge-color"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[c.command.length==0?(n(),p(Pt,{key:0,delayDuration:100,content:"No commands attached to this command group",side:"bottom"},{trigger:l(()=>[s(jt,{class:"ml-1 px-2",variant:"warning",size:"sm"},{default:l(()=>[...r[19]||(r[19]=[f("0 Commands",-1)])]),_:1})]),_:1})):P("",!0),s(Se,{items:c.command,displayField:"command",linkField:"view_url",maxVisible:8,hoverCardFields:["id","command"],showEmptyText:!1},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:c.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Qe,{rowData:c,onOnEdit:ne=>e(h)(c.id),onOnDelete:ne=>e(y)(c.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Ae,{currentPage:e(C),lastPage:e(_),perPage:e(o),"onUpdate:currentPage":r[8]||(r[8]=c=>C.value=c),"onUpdate:perPage":r[9]||(r[9]=c=>o.value=c),totalRecords:e($).total,isLoading:e(w)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(ls,{onSave:r[10]||(r[10]=c=>e(g)()),key:e(v),editId:e(b)},null,8,["editId"])),s($e,{ids:e(B),showConfirmDelete:e(m),onClose:r[11]||(r[11]=c=>m.value=!1),onHandleDelete:r[12]||(r[12]=c=>e(x)(e(B)))},null,8,["ids","showConfirmDelete"])])])}}},wl={__name:"ActionsMenuDevices",props:{rowData:{type:Object,required:!0},showEditBtn:{type:Boolean,default:!0},showViewDetailsBtn:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!0},isLocked:{type:Boolean,default:!1},showRolesBtn:{type:Boolean,default:!1},showCopyDownloadDebug:{type:Boolean,default:!1}},emits:["onEdit","onDelete","onDisable","onClone","onViewDetails","onEnable","onRoleAssignment"],setup(k,{emit:A}){const b=I(!1),$=I(!1),C=A,{toastSuccess:o,toastError:T}=_e(),{copyItem:_}=hs(),w=St("appDirPath",null),E=k;function h(){C("onEdit")}function U(){C("onClone")}function y(){b.value=!0}function x(){C("onDelete"),b.value=!1}function g(){$.value=!0}function m(){C("onDisable"),$.value=!1}function D(){C("onEnable")}function v(){C("onViewDetails")}function u(){C("onRoleAssignment")}function M(){if(!w){console.error("appDirPath not available");return}const B=`cd ${w} && php artisan rconfig:download-device ${E.rowData.id} -d`;try{_(E.rowData.id,B),o("Device Download {ID:"+E.rowData.id+"} debug command copied to clipboard")}catch(d){console.error("Failed to copy snippet:",d),T("Failed to copy Device Download debug command")}}return(B,d)=>{const O=K("Button"),V=K("RcIcon");return n(),N("div",null,[s(e(ot),null,{default:l(()=>[s(e(at),{"as-child":""},{default:l(()=>[s(O,{variant:"ghost",class:"hover:animate-pulse"},{default:l(()=>[...d[2]||(d[2]=[f(" ... ",-1)])]),_:1})]),_:1}),s(e(nt),{class:"w-56",align:"end",side:"bottom"},{default:l(()=>[k.showCopyDownloadDebug?(n(),p(e(ge),{key:0,class:"cursor-pointer hover:bg-rcgray-800",onClick:M},{default:l(()=>[d[3]||(d[3]=a("span",{class:"text-gray-300 group-hover:text-gray-200"},"Debug Cmd",-1)),s(e(ye),null,{default:l(()=>[s(V,{name:"commands",size:"16",class:"text-blue-300"})]),_:1})]),_:1})):P("",!0),k.showRolesBtn?(n(),p(e(ge),{key:1,class:"cursor-pointer hover:bg-rcgray-800",onClick:u},{default:l(()=>[d[4]||(d[4]=a("span",null,"Roles",-1)),s(e(ye),null,{default:l(()=>[s(V,{name:"rbac",size:"16"})]),_:1})]),_:1})):P("",!0),k.showViewDetailsBtn?(n(),p(e(ge),{key:2,class:"cursor-pointer hover:bg-rcgray-800",onClick:v},{default:l(()=>[d[5]||(d[5]=a("span",null,"View Details",-1)),s(e(ye),null,{default:l(()=>[s(e(Kt),{size:"16"})]),_:1})]),_:1})):P("",!0),k.showEditBtn?(n(),p(e(ge),{key:3,class:"cursor-pointer hover:bg-rcgray-800",onClick:h},{default:l(()=>[d[6]||(d[6]=a("span",null,"Edit",-1)),s(e(ye),null,{default:l(()=>[s(e(Zt),{size:"16"})]),_:1})]),_:1})):P("",!0),k.showEditBtn?(n(),p(e(ge),{key:4,class:"cursor-pointer hover:bg-rcgray-800 group",onClick:U},{default:l(()=>[d[7]||(d[7]=a("span",{class:"text-blue-400 group-hover:text-blue-500"},"Clone",-1)),s(e(ye),null,{default:l(()=>[s(e(ws),{size:"16",class:"text-blue-400 group-hover:text-blue-500"})]),_:1})]),_:1})):P("",!0),k.showEditBtn?(n(),p(e(ft),{key:5})):P("",!0),k.rowData.status===100?(n(),p(e(ge),{key:6,class:"cursor-pointer hover:bg-rcgray-800",onClick:D},{default:l(()=>[d[8]||(d[8]=a("span",null,"Enable",-1)),s(e(ye),null,{default:l(()=>[s(e(It),{size:"16",class:"text-green-400"})]),_:1})]),_:1})):P("",!0),k.rowData.status!=100?(n(),p(e(ge),{key:7,class:"cursor-pointer hover:bg-rcgray-800",onClick:g},{default:l(()=>[d[9]||(d[9]=a("span",null,"Disable",-1)),s(e(ye),null,{default:l(()=>[s(e(Et),{size:"16",class:"text-red-300"})]),_:1})]),_:1})):P("",!0),k.canDelete&&!k.isLocked?(n(),p(e(ge),{key:8,class:"group cursor-pointer hover:bg-rcgray-800",onClick:y},{default:l(()=>[d[10]||(d[10]=a("span",{class:"text-red-500 group-hover:text-red-400"},"Delete",-1)),s(e(ye),null,{default:l(()=>[s(e(Xt),{size:"16",class:"text-red-500 group-hover:text-red-400"})]),_:1})]),_:1})):P("",!0),k.isLocked?(n(),p(e(ge),{key:9,disabled:"",class:"cursor-default opacity-70"},{default:l(()=>[d[11]||(d[11]=a("span",{class:"italic text-slate-500"},"Vector CM Locked",-1)),s(e(ye),null,{default:l(()=>[s(V,{name:"lock"})]),_:1})]),_:1})):P("",!0)]),_:1})]),_:1}),s($e,{ids:[k.rowData.id],showConfirmDisable:$.value,onClose:d[0]||(d[0]=W=>$.value=!1),onHandleDisable:m},null,8,["ids","showConfirmDisable"]),s($e,{ids:[k.rowData.id],showConfirmDelete:b.value,onClose:d[1]||(d[1]=W=>b.value=!1),onHandleDelete:x},null,8,["ids","showConfirmDelete"])])}}},$l={class:"hidden lg:inline-flex"},Cl={key:0,class:"text-sm font-light"},Dl={class:"text-sm font-semibold"},Sl={class:"relative items-center w-full"},Vl={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Pl={class:"py-1"},Il=["onClick"],El=["checked"],Ml={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Rl={"data-size":"20"},Tl={class:"p-1 border-5"},Ul=Fe({__name:"CategoryFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const b=A,$=I([]),C=I(!1),o=I([]),T=I(""),_=I(!1),w=k;de(()=>{h()}),ae(()=>w.modelValue,y=>{o.value=y,_.value=o.value.length===$.value.length});function E(y){if(y.id===9999999)_.value?(o.value=[],_.value=!1):(o.value=[...$.value],_.value=!0);else{const x=o.value.findIndex(g=>g.id===y.id);x!==-1?(o.value.splice(x,1),_.value=!1):(o.value.push(y),o.value.length===$.value.length&&(_.value=!0))}C.value=!1,b("update:modelValue",o.value)}function h(){X.get("/api/categories/?perPage=10000&sort=categoryName").then(y=>{$.value=y.data.data})}const U=re(()=>$.value.filter(y=>y.categoryName.toLowerCase().includes(T.value.toLowerCase())));return(y,x)=>{const g=K("RcIcon");return n(),p(e(Je),null,{default:l(()=>[s(e(qe),null,{default:l(()=>[s(e(ie),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(g,{name:"command-group",class:"lg:mr-2"}),a("div",$l,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Command Group")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",Cl,[x[2]||(x[2]=f(" Command Group ",-1)),a("strong",Dl,L(o.value.length)+" Selected",1)])):P("",!0)],64))])]),_:1})]),_:1}),s(e(Ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",Sl,[s(e(tt),{id:"search",type:"text",modelValue:T.value,"onUpdate:modelValue":x[0]||(x[0]=m=>T.value=m),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Vl,[s(g,{name:"search"})])]),s(e(st)),s(e(He),{class:"h-44"},{default:l(()=>[a("div",Pl,[(n(!0),N(ee,null,oe(U.value,m=>(n(),N("div",{key:m.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:D=>E(m)},[a("input",{type:"checkbox",checked:o.value.some(D=>D.id===m.id),class:"mr-2"},null,8,El),a("span",Ml,[a("span",Rl,L(m.categoryName),1)])],8,Il))),128))])]),_:1}),s(e(st)),a("div",Tl,[s(e(ie),{variant:"ghost",class:"justify-start w-full p-1",onClick:x[1]||(x[1]=m=>E({id:9999999}))},{default:l(()=>[s(g,{name:"select-all",isSelected:_.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,L(_.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Nl={class:"p-2"},Al={class:"flex justify-between mb-2"},Bl={class:"p-2"},Fl={class:"flex items-center space-x-2"},Ll=["for"],zl={key:0,class:"text-xs text-muted-foreground ml-1"},Ol={key:0,class:"flex items-center space-x-1"},jl={__name:"ColumnChooser",props:{columns:{type:Array,required:!0},modelValue:{type:Array,required:!0},storageKey:{type:String,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const b=k,$=A,C=I(!1),o=I([...b.modelValue]);ae(()=>b.modelValue,D=>{o.value=[...D]},{deep:!0});const T=re(()=>[...b.columns].sort((D,v)=>{const u=o.value.indexOf(D.key),M=o.value.indexOf(v.key);if(u>=0&&M>=0)return u-M;if(u>=0)return-1;if(M>=0)return 1;const B=b.columns.findIndex(O=>O.key===D.key),d=b.columns.findIndex(O=>O.key===v.key);return B-d})),_=D=>o.value.includes(D);function w(){localStorage.setItem(b.storageKey,JSON.stringify(o.value))}function E(){const D=localStorage.getItem(b.storageKey);if(D)try{const u=JSON.parse(D).filter(M=>b.columns.some(B=>B.key===M));o.value=u,$("update:modelValue",u)}catch(v){console.error("Error loading column preferences:",v)}}function h(D){o.value.includes(D)?o.value=o.value.filter(v=>v!==D):(o.value.push(D),o.value.sort((v,u)=>{const M=b.columns.findIndex(d=>d.key===v),B=b.columns.findIndex(d=>d.key===u);return M-B})),$("update:modelValue",o.value),w()}function U(D){const v=o.value.indexOf(D);if(v>0){const u=[...o.value],M=u[v];u[v]=u[v-1],u[v-1]=M,o.value=u,$("update:modelValue",u),w()}}function y(D){const v=o.value.indexOf(D);if(v<o.value.length-1){const u=[...o.value],M=u[v];u[v]=u[v+1],u[v+1]=M,o.value=u,$("update:modelValue",u),w()}}function x(){o.value=b.columns.map(D=>D.key),$("update:modelValue",o.value),w()}function g(){const D=b.columns.filter(v=>v.mandatory).map(v=>v.key);o.value=D,$("update:modelValue",o.value),w()}function m(){const D=b.columns.filter(v=>v.default).map(v=>v.key);o.value=D,$("update:modelValue",o.value),w()}return de(()=>{E()}),(D,v)=>(n(),p(e(ot),{open:C.value,"onUpdate:open":v[0]||(v[0]=u=>C.value=u)},{default:l(()=>[s(e(at),{"as-child":""},{default:l(()=>[s(e(ie),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 hidden xl:inline-flex",title:"Column Options"},{default:l(()=>[s(e(xs),{class:"h-4 w-4"}),v[1]||(v[1]=a("span",{class:"sr-only"},"Column Options",-1))]),_:1})]),_:1}),s(e(nt),{align:"end",class:"w-60"},{default:l(()=>[s(e(Ms),null,{default:l(()=>[...v[2]||(v[2]=[f("Customize Columns",-1)])]),_:1}),s(e(ft)),a("div",Nl,[a("div",Al,[s(e(ie),{variant:"outline",size:"sm",class:"text-xs",onClick:x},{default:l(()=>[...v[3]||(v[3]=[f(" Show All ",-1)])]),_:1}),s(e(ie),{variant:"outline",size:"sm",class:"text-xs",onClick:g},{default:l(()=>[...v[4]||(v[4]=[f(" Hide All ",-1)])]),_:1}),s(e(ie),{variant:"outline",size:"sm",class:"text-xs",onClick:m},{default:l(()=>[...v[5]||(v[5]=[f(" Reset ",-1)])]),_:1})])]),s(e(ft)),s(e(He),{class:"h-[300px]"},{default:l(()=>[a("div",Bl,[(n(!0),N(ee,null,oe(T.value,u=>(n(),N("div",{key:u.key,class:"flex items-center justify-between py-1"},[a("div",Fl,[s(e(Vt),{id:`col-toggle-${u.key}`,checked:_(u.key),disabled:u.mandatory,"onUpdate:checked":M=>h(u.key)},null,8,["id","checked","disabled","onUpdate:checked"]),a("label",{for:`col-toggle-${u.key}`,class:De(["text-sm cursor-pointer",{"opacity-50":u.mandatory}])},[f(L(u.label)+" ",1),u.mandatory?(n(),N("span",zl,"(Required)")):P("",!0)],10,Ll)]),_(u.key)?(n(),N("div",Ol,[s(e(ie),{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:M=>U(u.key),disabled:o.value.indexOf(u.key)===0},{default:l(()=>[s(e(_s),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"]),s(e(ie),{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:M=>y(u.key),disabled:o.value.indexOf(u.key)===o.value.length-1},{default:l(()=>[s(e(gt),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"])])):P("",!0)]))),128))])]),_:1})]),_:1})]),_:1},8,["open"]))}},Kl=dt(jl,[["__scopeId","data-v-89b28009"]]),ql={class:"alert-success"},Gl={class:"alert-content"},Hl={class:"alert-icon"},Jl={key:0},Ql=["innerHTML"],Yl={class:"alert-slot"},Wl={__name:"AlertSuccess",props:{title:{type:String,default:"Success"},titleEnabled:{type:Boolean,default:!0},message:{type:String,required:!0},small:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1}},emits:["closed"],setup(k,{emit:A}){const b=A;function $(){b("closed")}return(C,o)=>(n(),N("div",ql,[a("div",Gl,[a("div",Hl,[s(e($s)),o[0]||(o[0]=a("span",{class:"alert-icon-pulse"},null,-1))]),a("div",{class:De(["alert-body",{"text-size-sm":k.small}])},[k.titleEnabled?(n(),N("h5",Jl,L(k.title),1)):P("",!0),a("div",{innerHTML:k.message,class:"alert-message"},null,8,Ql),a("div",Yl,[bt(C.$slots,"default",{},void 0,!0)])],2),k.showClose?(n(),N("button",{key:0,onClick:$,class:"alert-close-btn","aria-label":"Close",type:"button"},[s(e(Cs)),o[1]||(o[1]=a("span",{class:"alert-close-ripple"},null,-1))])):P("",!0)])]))}},Zl=dt(Wl,[["__scopeId","data-v-f0f980b3"]]);function Xl(k,A){const b=be(),$=St("formatters"),{closeDialog:C,isDialogOpen:o}=b,{toastSuccess:T,toastError:_}=_e(),w=I(!1),E=I([]),h=I([]),U=I([]),y=I([]),x=I(""),g=I(""),m=I([]),D=I(!1),v=I(""),u=I(""),M=[{id:2,name:"command_group"},{id:4,name:"device_enable_prompt"},{id:5,name:"device_main_prompt"},{id:6,name:"model"},{id:9,name:"tag"},{id:10,name:"template"},{id:11,name:"vendor"}],B=M,d=I(""),O=re(()=>M.find(R=>R.name===d.value)||{});function V(){setTimeout(()=>{v.value="",u.value=""},4e3)}function W(){C("DeviceBulkEditDialog"),j(),A("close")}function j(){w.value=!1,O.value={},E.value=0,h.value=0,y.value=0,x.value="",g.value="",m.value="",D.value=!1,v.value="",u.value=""}function r(){if(v.value="",k.checkedRows.length===0){_("Error","Please select at least one device to update."),v.value="Please select at least one device to update.";return}const R={command_group:{value:h.value,errorMessage:"Please select a Command Group",updateFunction:z},vendor:{value:y.value,errorMessage:"Please select a Vendor",updateFunction:i},device_enable_prompt:{value:x.value,errorMessage:"Please enter a Device Enable Prompt",updateFunction:q},device_main_prompt:{value:g.value,errorMessage:"Please enter a Device Main Prompt",updateFunction:G},model:{value:m.value,errorMessage:"Please enter a Model",updateFunction:c},template:{value:E.value,errorMessage:"Please select a template",updateFunction:ne},tag:{value:U.value,errorMessage:"Please select one or more tags",updateFunction:Q},default:{value:0,errorMessage:"Please select a Property",updateFunction:()=>{}}},Z=R[O.value.name]||R.default;if(Z.value.length===0){_("Error",Z.errorMessage),v.value=Z.errorMessage;return}Z.updateFunction()}function z(){w.value=!0,X.post("/api/device/bulk-update/category",{device_ids:k.checkedRows,category_id:h.value.id}).then(R=>{T("Success",R.data.message),w.value=!1,u.value="Categories updated successfully, you can now close this dialog or continue updating other properties.",V(),A("bulkUpdateSuccess")}).catch(R=>{_("Error",R.response.data.message||"An error occurred while updating categories"),w.value=!1,A("bulkUpdateSuccess")})}function i(){w.value=!0,X.post("/api/device/bulk-update/vendor",{device_ids:k.checkedRows,vendor_id:y.value.id}).then(R=>{T("Success",R.data.message),w.value=!1,u.value="Vendor updated successfully, you can now close this dialog or continue updating other properties.",V(),A("bulkUpdateSuccess")}).catch(R=>{_("Error",R.response.data.message||"An error occurred while updating vendors"),w.value=!1,A("bulkUpdateSuccess")})}function G(){w.value=!0,X.post("/api/device/bulk-update/device_main_prompt",{device_ids:k.checkedRows,device_main_prompt:g.value}).then(R=>{T("Success",R.data.message),w.value=!1,u.value="Device main prompt updated successfully, you can now close this dialog or continue updating other properties.",V(),A("bulkUpdateSuccess")}).catch(R=>{_("Error",R.response.data.message||"An error occurred while updating device main prompt"),w.value=!1,A("bulkUpdateSuccess")})}function q(){w.value=!0,X.post("/api/device/bulk-update/device_enable_prompt",{device_ids:k.checkedRows,device_enable_prompt:x.value}).then(R=>{T("Success",R.data.message),w.value=!1,u.value="Device enable prompt updated successfully, you can now close this dialog or continue updating other properties.",V(),A("bulkUpdateSuccess")}).catch(R=>{_("Error",R.response.data.message||"An error occurred while updating device enable prompt"),w.value=!1,A("bulkUpdateSuccess")})}function c(){w.value=!0,X.post("/api/device/bulk-update/model",{device_ids:k.checkedRows,device_model:m.value.name}).then(R=>{T("Success",R.data.message),w.value=!1,u.value="Model updated successfully, you can now close this dialog or continue updating other properties.",V(),A("bulkUpdateSuccess")}).catch(R=>{_("Error",R.response.data.message||"An error occurred while updating model"),w.value=!1,A("bulkUpdateSuccess")})}function ne(){w.value=!0,X.post("/api/device/bulk-update/template",{device_ids:k.checkedRows,template_id:E.value.id}).then(R=>{T("Success",R.data.message),w.value=!1,u.value="Template updated successfully, you can now close this dialog or continue updating other properties.",V(),A("bulkUpdateSuccess")}).catch(R=>{_("Error",R.response.data.message||"An error occurred while updating template"),w.value=!1,A("bulkUpdateSuccess")})}function Q(){const R=U.value.map(Z=>Z.id);w.value=!0,X.post("/api/device/bulk-update/tags",{device_ids:k.checkedRows,tag_ids:R,append:D.value?1:0}).then(Z=>{T("Success",Z.data.message),w.value=!1,u.value="Tags updated successfully, you can now close this dialog or continue updating other properties.",V(),A("bulkUpdateSuccess")}).catch(Z=>{_("Error",Z.response.data.message||"An error occurred while updating tags"),w.value=!1,A("bulkUpdateSuccess")})}return{append:D,deviceEnablePrompt:x,deviceMainPrompt:g,errorMessage:v,formatters:$,isUpdating:w,selectedModel:m,selectedCategory:h,selectedProperty:O,selectedPropertyName:d,selectedTemplate:E,selectedVendor:y,successMsg:u,selectedTags:U,finalPropertyOptions:B,clearMsgs:V,close:W,closeDialog:C,confirm:r,isDialogOpen:o,resetData:j}}const ea={class:"py-4 space-y-4"},ta={key:0,class:"space-y-4"},sa={class:"grid items-center grid-cols-4 gap-2"},la={class:"col-span-3"},aa={key:0,class:"grid items-start grid-cols-4 gap-2"},na={key:2,class:"col-span-3"},oa={key:3,class:"col-span-3"},da={key:8,class:"col-span-3 col-start-2 text-red-400 text-sm"},ra={key:1,class:"grid items-center grid-cols-4 gap-2"},ia={class:"flex items-center gap-2 col-span-3"},ua={class:"col-span-3 col-start-2 text-xs text-muted-foreground"},ca={key:0},ma={key:1},pa={key:1,class:"flex flex-col items-center justify-center gap-4"},va={class:"pl-2 ml-auto"},fa={class:"rc-kdb-class2"},ga={__name:"DeviceBulkEditDialog",props:{checkedRows:{type:Array,required:!0,default:()=>[]}},emits:["close","bulkUpdateSuccess"],setup(k,{emit:A}){const b=k,$=A,{append:C,deviceEnablePrompt:o,deviceMainPrompt:T,errorMessage:_,formatters:w,isUpdating:E,selectedModel:h,selectedCategory:U,selectedProperty:y,selectedPropertyName:x,selectedTemplate:g,selectedVendor:m,successMsg:D,selectedTags:v,finalPropertyOptions:u,close:M,confirm:B,isDialogOpen:d}=Xl(b,$);return(O,V)=>{const W=K("RcIcon");return n(),p(e(Ke),{open:e(d)("DeviceBulkEditDialog")&&k.checkedRows.length>0},{default:l(()=>[s(e(Le),{class:"max-w-2xl",onInteractOutside:V[11]||(V[11]=j=>e(M)()),onPointerDownOutside:V[12]||(V[12]=j=>e(M)()),onEscapeKeyDown:V[13]||(V[13]=j=>e(M)()),onCloseClicked:V[14]||(V[14]=j=>e(M)())},{default:l(()=>[s(e(ze),null,{default:l(()=>[s(e(Oe),{class:"text-lg font-semibold"},{default:l(()=>[...V[15]||(V[15]=[f(" Bulk Edit Devices ",-1)])]),_:1}),s(e(qt),null,{default:l(()=>[f(" Device IDs ("+L(e(w).arrayToPrettyString(k.checkedRows.slice(0,10)))+L(k.checkedRows.length>10?" and "+(k.checkedRows.length-10)+" more":"")+") ",1)]),_:1})]),_:1}),a("div",ea,[e(E)?(n(),N("div",pa,[...V[22]||(V[22]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-300"},null,-1),a("p",{class:"text-sm text-gray-200"},"Processing bulk update. This may take a few moments...",-1)])])):(n(),N("div",ta,[a("div",sa,[s(e(et),{for:"property-select",class:"text-right"},{default:l(()=>[...V[16]||(V[16]=[f(" Select Property ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),a("div",la,[s(e(Ds),{modelValue:e(x),"onUpdate:modelValue":V[0]||(V[0]=j=>te(x)?x.value=j:null)},{default:l(()=>[s(e(Ss),{id:"property-select",class:"w-full"},{default:l(()=>[s(e(Vs),{placeholder:"Choose a property to update"})]),_:1}),s(e(Ps),null,{default:l(()=>[(n(!0),N(ee,null,oe(e(u),j=>(n(),p(e(Is),{value:j.name,key:j.id},{default:l(()=>[f(L(e(w).capitalizeFirstLetter(j.name)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),e(y)?(n(),N("div",aa,[e(x)?(n(),p(e(et),{key:0,for:"property-field",class:"text-right pt-2"},{default:l(()=>[f(L(e(w).capitalizeFirstLetter(e(x)))+" ",1),V[17]||(V[17]=a("span",{class:"text-red-400"},"*",-1))]),_:1})):P("",!0),e(y).name==="command_group"?(n(),p(yt,{key:1,modelValue:e(U),"onUpdate:modelValue":V[1]||(V[1]=j=>te(U)?U.value=j:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):P("",!0),e(y).name==="device_enable_prompt"?(n(),N("div",na,[s(e(tt),{modelValue:e(o),"onUpdate:modelValue":V[2]||(V[2]=j=>te(o)?o.value=j:null),id:"device_enable_prompt",autocomplete:"new-name",name:"new-name"},null,8,["modelValue"])])):P("",!0),e(y).name==="device_main_prompt"?(n(),N("div",oa,[s(e(tt),{modelValue:e(T),"onUpdate:modelValue":V[3]||(V[3]=j=>te(T)?T.value=j:null),id:"device_main_prompt",autocomplete:"new-name",name:"new-name"},null,8,["modelValue"])])):P("",!0),e(y).name==="model"?(n(),p(ds,{key:4,modelValue:e(h),"onUpdate:modelValue":V[4]||(V[4]=j=>te(h)?h.value=j:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):P("",!0),e(y).name==="vendor"?(n(),p(rs,{key:5,modelValue:e(m),"onUpdate:modelValue":V[5]||(V[5]=j=>te(m)?m.value=j:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):P("",!0),e(y).name==="template"?(n(),p(is,{key:6,modelValue:e(g),"onUpdate:modelValue":V[6]||(V[6]=j=>te(g)?g.value=j:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):P("",!0),e(y).name==="tag"?(n(),p(as,{key:7,modelValue:e(v),"onUpdate:modelValue":V[7]||(V[7]=j=>te(v)?v.value=j:null),singleSelect:!1,class:"w-full"},null,8,["modelValue"])):P("",!0),e(_)?(n(),N("span",da,L(e(_)),1)):P("",!0)])):P("",!0),e(x)==="tag"?(n(),N("div",ra,[s(e(et),{for:"append-toggle",class:"text-right"},{default:l(()=>[...V[18]||(V[18]=[f(" Append ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),a("div",ia,[s(e(Vt),{id:"append-toggle",checked:e(C),"onUpdate:checked":V[8]||(V[8]=j=>C.value=!e(C)),disabled:e(E)},null,8,["checked","disabled"]),V[19]||(V[19]=a("span",{class:"text-sm"},"Append to existing",-1))]),a("span",ua,[e(C)?(n(),N("span",ca,[...V[20]||(V[20]=[f("Selected items will be ",-1),a("strong",null,"added",-1),f(" to existing items for selected devices.",-1)])])):(n(),N("span",ma,[...V[21]||(V[21]=[f("Selected items will ",-1),a("strong",null,"replace",-1),f(" all existing items for selected devices.",-1)])]))])])):P("",!0),e(D)?(n(),p(Zl,{key:2,small:"",class:"mb-6",title:"Success",message:e(D),showClose:!0,onClosed:V[9]||(V[9]=j=>D.value="")},null,8,["message"])):P("",!0)]))]),s(e(je),null,{default:l(()=>[s(e(ie),{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:e(M),size:"sm"},{default:l(()=>[...V[23]||(V[23]=[f(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1},8,["onClick"]),s(e(ie),{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:V[10]||(V[10]=j=>e(B)()),variant:"primary"},{default:l(()=>[s(Ze,{state:e(E),class:"items-center mr-2",color:"white",fillColor:"white"},null,8,["state"]),V[25]||(V[25]=f(" Confirm ",-1)),a("div",va,[a("kbd",fa,[V[24]||(V[24]=f(" Ctrl  ",-1)),s(W,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},ya={class:"hidden lg:inline-flex"},xa={key:0,class:"text-sm font-light"},_a={class:"text-sm font-semibold"},ka={class:"py-1"},ba=["onClick"],ha=["checked"],wa={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},$a={"data-size":"20"},Ca=Fe({__name:"StatusFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const b=A,$=re(()=>[{id:0,name:"Unreachable"},{id:1,name:"Reachable"},{id:2,name:"Unknown"},{id:100,name:"Disabled"},{id:200,name:"All"}]),C=I(!1),o=I([]),T=k;ae(()=>T.modelValue,w=>{o.value=w});function _(w){if(w.id===200)o.value.length===$.value.length?o.value=[]:o.value=[...$.value];else{const E=o.value.findIndex(h=>h.id===w.id);if(E!==-1){o.value.splice(E,1);const h=o.value.findIndex(U=>U.id===200);h!==-1&&o.value.splice(h,1)}else o.value.push(w)}C.value=!1,b("update:modelValue",o.value)}return(w,E)=>(n(),p(e(Je),null,{default:l(()=>[s(e(qe),null,{default:l(()=>[s(e(ie),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(e(Es),{class:"w-4 h-4 lg:mr-2 text-rcgray-400"}),a("div",ya,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Status")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",xa,[E[0]||(E[0]=f(" Status ",-1)),a("strong",_a,L(o.value.length)+" Selected",1)])):P("",!0)],64))])]),_:1})]),_:1}),s(e(Ge),{side:"bottom",align:"start",class:"p-0 w-44"},{default:l(()=>[s(e(He),{class:"h-44"},{default:l(()=>[a("div",ka,[(n(!0),N(ee,null,oe($.value,h=>(n(),N("div",{key:h.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:U=>_(h)},[a("input",{type:"checkbox",checked:o.value.some(U=>U.id===h.id),class:"mr-2"},null,8,ha),a("span",wa,[a("span",$a,L(h.name),1)])],8,ba))),128))])]),_:1})]),_:1})]),_:1}))}}),Da={class:"hidden lg:inline-flex"},Sa={key:0,class:"text-sm font-light"},Va={class:"text-sm font-semibold"},Pa={class:"relative items-center w-full"},Ia={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Ea={class:"py-1"},Ma=["onClick"],Ra=["checked"],Ta={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ua={"data-size":"20"},Na={class:"p-1 border-5"},Aa=Fe({__name:"TagFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const b=A,$=I([]),C=I(!1),o=I([]),T=I(""),_=I(!1),w=k;de(()=>{h()}),ae(()=>w.modelValue,y=>{o.value=y,_.value=o.value.length===$.value.length});function E(y){if(y.id===9999999)_.value?(o.value=[],_.value=!1):(o.value=[...$.value],_.value=!0);else{const x=o.value.findIndex(g=>g.id===y.id);x!==-1?(o.value.splice(x,1),_.value=!1):(o.value.push(y),o.value.length===$.value.length&&(_.value=!0))}C.value=!1,b("update:modelValue",o.value)}function h(){X.get("/api/tags/?perPage=10000&sort=tagname").then(y=>{$.value=y.data.data})}const U=re(()=>$.value.filter(y=>y.tagname.toLowerCase().includes(T.value.toLowerCase())));return(y,x)=>{const g=K("RcIcon");return n(),p(e(Je),null,{default:l(()=>[s(e(qe),null,{default:l(()=>[s(e(ie),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(g,{name:"tag",class:"lg:mr-2"}),a("div",Da,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Tag")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",Sa,[x[2]||(x[2]=f(" Tag ",-1)),a("strong",Va,L(o.value.length)+" Selected",1)])):P("",!0)],64))])]),_:1})]),_:1}),s(e(Ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",Pa,[s(e(tt),{id:"search",type:"text",modelValue:T.value,"onUpdate:modelValue":x[0]||(x[0]=m=>T.value=m),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Ia,[s(g,{name:"search"})])]),s(e(st)),s(e(He),{class:"h-44"},{default:l(()=>[a("div",Ea,[(n(!0),N(ee,null,oe(U.value,m=>(n(),N("div",{key:m.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:D=>E(m)},[a("input",{type:"checkbox",checked:o.value.some(D=>D.id===m.id),class:"mr-2"},null,8,Ra),a("span",Ta,[a("span",Ua,L(m.tagname),1)])],8,Ma))),128))])]),_:1}),s(e(st)),a("div",Na,[s(e(ie),{variant:"ghost",class:"justify-start w-full p-1",onClick:x[1]||(x[1]=m=>E({id:9999999}))},{default:l(()=>[s(g,{name:"select-all",isSelected:_.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,L(_.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Ba={class:"hidden lg:inline-flex"},Fa={key:0,class:"text-sm font-light"},La={class:"text-sm font-semibold"},za={class:"relative items-center w-full"},Oa={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ja={class:"py-1"},Ka=["onClick"],qa=["checked"],Ga={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ha={"data-size":"20"},Ja={class:"p-1 border-5"},Qa=Fe({__name:"VendorFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const b=A,$=I([]),C=I(!1),o=I([]),T=I(""),_=I(!1),w=k;de(()=>{h()}),ae(()=>w.modelValue,y=>{o.value=y,_.value=o.value.length===$.value.length});function E(y){if(y.id===9999999)_.value?(o.value=[],_.value=!1):(o.value=[...$.value],_.value=!0);else{const x=o.value.findIndex(g=>g.id===y.id);x!==-1?(o.value.splice(x,1),_.value=!1):(o.value.push(y),o.value.length===$.value.length&&(_.value=!0))}C.value=!1,b("update:modelValue",o.value)}function h(){X.get("/api/vendors/?perPage=10000&sort=vendorName").then(y=>{$.value=y.data.data})}const U=re(()=>$.value.filter(y=>y.vendorName.toLowerCase().includes(T.value.toLowerCase())));return(y,x)=>{const g=K("RcIcon"),m=K("Button"),D=K("Input"),v=K("Separator");return n(),p(e(Je),null,{default:l(()=>[s(e(qe),null,{default:l(()=>[s(m,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(g,{name:"vendor",class:"lg:mr-2"}),a("div",Ba,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Vendor")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",Fa,[x[2]||(x[2]=f(" Vendor ",-1)),a("strong",La,L(o.value.length)+" Selected",1)])):P("",!0)],64))])]),_:1})]),_:1}),s(e(Ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",za,[s(D,{id:"search",type:"text",modelValue:T.value,"onUpdate:modelValue":x[0]||(x[0]=u=>T.value=u),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Oa,[s(g,{name:"search"})])]),s(v),s(e(He),{class:"h-44"},{default:l(()=>[a("div",ja,[(n(!0),N(ee,null,oe(U.value,u=>(n(),N("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:M=>E(u)},[a("input",{type:"checkbox",checked:o.value.some(M=>M.id===u.id),class:"mr-2"},null,8,qa),a("span",Ga,[a("span",Ha,L(u.vendorName),1)])],8,Ka))),128))])]),_:1}),s(v),a("div",Ja,[s(m,{variant:"ghost",class:"justify-start w-full p-1",onClick:x[1]||(x[1]=u=>E({id:9999999}))},{default:l(()=>[s(g,{name:"select-all",isSelected:_.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,L(_.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Ya={class:"hidden lg:inline-flex"},Wa={key:0,class:"text-sm font-light"},Za={class:"text-sm font-semibold"},Xa={class:"relative items-center w-full"},en={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},tn={class:"py-1"},sn=["onClick"],ln=["checked"],an={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},nn={"data-size":"20"},on={class:"p-1 border-5"},dn=Fe({__name:"ModelFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const b=A,$=I([]),C=I(!1),o=I([]),T=I(""),_=I(!1),w=k;de(()=>{h()}),ae(()=>w.modelValue,y=>{o.value=y,_.value=o.value.length===$.value.length});function E(y){if(y.id===9999999)_.value?(o.value=[],_.value=!1):(o.value=[...$.value],_.value=!0);else{const x=o.value.findIndex(g=>g.id===y.id);x!==-1?(o.value.splice(x,1),_.value=!1):(o.value.push(y),o.value.length===$.value.length&&(_.value=!0))}C.value=!1,b("update:modelValue",o.value)}function h(){X.get("/api/device-models/?perPage=10000&sort=name").then(y=>{$.value=y.data.data})}const U=re(()=>$.value.filter(y=>y.name.toLowerCase().includes(T.value.toLowerCase())));return(y,x)=>{const g=K("RcIcon"),m=K("Button"),D=K("Input"),v=K("Separator");return n(),p(e(Je),null,{default:l(()=>[s(e(qe),null,{default:l(()=>[s(m,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(g,{name:"model",class:"lg:mr-2"}),a("div",Ya,[o.value&&o.value.length===0?(n(),N(ee,{key:0},[f("Device Model")],64)):(n(),N(ee,{key:1},[o.value.length>0?(n(),N("span",Wa,[x[2]||(x[2]=f(" Device Model ",-1)),a("strong",Za,L(o.value.length)+" Selected",1)])):P("",!0)],64))])]),_:1})]),_:1}),s(e(Ge),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",Xa,[s(D,{id:"search",type:"text",modelValue:T.value,"onUpdate:modelValue":x[0]||(x[0]=u=>T.value=u),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",en,[s(g,{name:"search"})])]),s(v),s(e(He),{class:"h-44"},{default:l(()=>[a("div",tn,[(n(!0),N(ee,null,oe(U.value,u=>(n(),N("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:M=>E(u)},[a("input",{type:"checkbox",checked:o.value.some(M=>M.id===u.id),class:"mr-2"},null,8,ln),a("span",an,[a("span",nn,L(u.name),1)])],8,sn))),128))])]),_:1}),s(v),a("div",on,[s(m,{variant:"ghost",class:"justify-start w-full p-1",onClick:x[1]||(x[1]=u=>E({id:9999999}))},{default:l(()=>[s(g,{name:"select-all",isSelected:_.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,L(_.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),rn={class:"flex flex-col h-full gap-1 text-center"},un={class:"flex items-center justify-between p-4"},cn={class:"flex items-center"},mn={class:"flex gap-2"},pn={class:"flex items-center justify-end"},vn={class:"px-6"},fn={class:"flex items-center"},gn=["title"],yn={class:"flex justify-between"},xn={class:"flex items-center"},_n={class:"border-b"},kn=["title"],bn=["title"],hn={key:1},wn=["title"],$n={key:1},Cn=["title"],Dn=["title"],Sn={key:1},Vn={class:"badge-container-fixed"},Pn={class:"button-cell-fixed"},In={key:0,class:"fixed bottom-5 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-4 bg-rcgray-900 text-white border border-rcgray-600 shadow-xl px-4 py-1.5 rounded-lg"},En={class:"text-sm"},Mn={class:"flex flex-col items-start gap-1"},Rn={class:"hidden md:inline-flex mr-1"},Tn={__name:"Main",props:{statusId:{type:Number,required:!1}},setup(k){const{devices:A,currentPage:b,perPage:$,lastPage:C,totalRecords:o,isLoading:T,isLoadingMore:_,hasMoreData:w,isLoadMoreMode:E,showConfirmDelete:h,editId:U,newDeviceModalKey:y,newBulkEditModalKey:x,searchTerm:g,filterStatus:m,filterCategories:D,filterTags:v,filterVendor:u,filterModel:M,sortParam:B,formatters:d,inventoryIsLoading:O,createDevice:V,deleteDevice:W,deleteManyDevices:j,disableDevice:r,enableDevice:z,exportInventoryReport:i,handleKeyDown:G,handleSave:q,reload:c,viewDeviceDetailsPane:ne,viewEditDialog:Q,openBulkEditDialog:R,disableManyDevices:Z,enableManyDevices:we,downloadManyDevices:Y,fetchDevices:Ce,loadMoreDevices:xe,clearFilters:Ve,toggleSort:ct}=us(),{selectedRows:ve,selectAll:Ye,toggleSelectAll:Rt,toggleSelectRow:Tt}=Ie(A),Xe=I(!1),mt=Gt(),Ut=Pe(),pt=re(()=>[{key:"checkbox",label:"Select",mandatory:!0,default:!0},{key:"id",label:"ID",default:!0},{key:"status",label:"Status",default:!0},{key:"device_name",label:"Name",mandatory:!0,default:!0},{key:"device_ip",label:"IP Address",default:!0},{key:"category",label:"Command Group",default:!0},{key:"vendor",label:"Vendor",default:!0},{key:"device_model",label:"Model",default:!0},{key:"config_good_count",label:"Config Count",default:!0},{key:"config_bad_count",label:"Config Failures",default:!0},{key:"last_config",label:"Last Config",default:!0},{key:"tags",label:"Tags",default:!0},{key:"actions",label:"Actions",mandatory:!0,default:!0}]),Be=I(pt.value.filter(pe=>pe.default).map(pe=>pe.key)),se=re(()=>pe=>Be.value.includes(pe));return re(()=>pt.value.filter(pe=>Be.value.includes(pe.key)).sort((pe,S)=>{const We=Be.value.indexOf(pe.key),vt=Be.value.indexOf(S.key);return We-vt})),de(()=>{mt.query.statusId&&(m.value=[{id:parseInt(mt.query.statusId)}]),Ce(),window.addEventListener("keydown",G),ke.on("deleteManyDevicesSuccess",()=>{ve.value=[],Ye.value=!1})}),ae(()=>mt.query,async pe=>{if(pe.openDeviceDialog){V(),await Jt();const{openDeviceDialog:S,...We}=pe;Ut.replace({query:We},void 0,{replace:!0})}},{immediate:!0}),he(()=>{window.removeEventListener("keydown",G)}),(pe,S)=>{const We=K("Input"),vt=K("Separator"),ue=K("Button"),fe=K("RcIcon"),xt=K("Checkbox"),Nt=K("RcBadge"),At=K("Toaster");return n(),N("div",rn,[a("div",un,[a("div",cn,[s(We,{class:"ml-2 min-w-32 lg:min-w-60",autocomplete:"off",placeholder:"Filter [id, name, ip]...",modelValue:e(g),"onUpdate:modelValue":S[0]||(S[0]=F=>te(g)?g.value=F:null)},null,8,["modelValue"]),s(vt,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),S[29]||(S[29]=a("span",{class:"mr-2 text-muted-foreground flex-grow min-w-max"},"Filters:",-1)),a("div",mn,[s(Ul,{modelValue:e(D),"onUpdate:modelValue":S[1]||(S[1]=F=>te(D)?D.value=F:null)},null,8,["modelValue"]),s(Aa,{modelValue:e(v),"onUpdate:modelValue":S[2]||(S[2]=F=>te(v)?v.value=F:null)},null,8,["modelValue"]),s(Qa,{modelValue:e(u),"onUpdate:modelValue":S[3]||(S[3]=F=>te(u)?u.value=F:null)},null,8,["modelValue"]),s(dn,{modelValue:e(M),"onUpdate:modelValue":S[4]||(S[4]=F=>te(M)?M.value=F:null)},null,8,["modelValue"]),s(Ca,{modelValue:e(m),"onUpdate:modelValue":S[5]||(S[5]=F=>te(m)?m.value=F:null)},null,8,["modelValue"]),e(g)||e(D).length||e(v).length||e(u).length||e(M).length||e(m).length?(n(),p(Ee,{key:0,"onUpdate:modelValue":e(Ve)},null,8,["onUpdate:modelValue"])):P("",!0)])]),a("div",pn,[s(Kl,{columns:pt.value,modelValue:Be.value,"onUpdate:modelValue":S[6]||(S[6]=F=>Be.value=F),storageKey:"rconfig.deviceTable.columns"},null,8,["columns","modelValue"]),s(e(ot),null,{default:l(()=>[s(e(at),{"as-child":"",class:"inline-flex xl:hidden"},{default:l(()=>[s(ue,{variant:"ghost",class:"h-8 ml-2"},{default:l(()=>[s(e(Ht),{size:"16"})]),_:1})]),_:1}),s(e(nt),{class:"w-56",align:"end",side:"bottom"},{default:l(()=>[s(e(ge),{class:"cursor-pointer hover:bg-rcgray-600 group",onClick:S[7]||(S[7]=le(F=>e(V)(),["prevent"]))},{default:l(()=>[S[30]||(S[30]=f(" New Device ",-1)),s(e(ye),{class:"group"},{default:l(()=>[s(e(ks),{size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})]),_:1})]),_:1}),s(e(ge),{class:"cursor-pointer hover:bg-rcgray-600 group",onClick:S[8]||(S[8]=le(F=>e(i)(),["prevent"]))},{default:l(()=>[S[31]||(S[31]=f(" Inventory Report ",-1)),s(e(ye),{class:"group"},{default:l(()=>[e(O)?P("",!0):(n(),p(e(kt),{key:0,size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})),s(Ze,{state:e(O),class:"mr-2"},null,8,["state"])]),_:1})]),_:1})]),_:1})]),_:1}),s(ue,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse hidden xl:inline-flex",size:"sm",onClick:S[9]||(S[9]=le(F=>e(V)(),["prevent"])),variant:"primary"},{default:l(()=>[...S[32]||(S[32]=[f(" New Device ",-1),a("div",{class:"pl-2 py-1 px-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),s(ue,{type:"submit",class:"px-2 py-1 ml-2 text-sm hidden xl:inline-flex",size:"sm",onClick:S[10]||(S[10]=le(F=>e(i)(),["prevent"])),variant:"outline"},{default:l(()=>[e(O)?P("",!0):(n(),p(e(kt),{key:0,size:"16",class:"text-muted-foreground mr-2"})),s(Ze,{state:e(O),class:"mr-2"},null,8,["state"]),S[33]||(S[33]=f(" Inventory Report ",-1))]),_:1}),s(fe,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:S[11]||(S[11]=F=>e(c)())})])]),a("div",vn,[s(e(Ne),null,{default:l(()=>[s(e(Me),null,{default:l(()=>[s(e(me),null,{default:l(()=>[se.value("checkbox")?(n(),p(e(J),{key:0,class:"w-[2%]"},{default:l(()=>[s(xt,{id:"selectAll",modelValue:e(Ye),"onUpdate:modelValue":S[12]||(S[12]=F=>te(Ye)?Ye.value=F:null),checked:e(Ye),onClick:S[13]||(S[13]=F=>e(Rt)())},null,8,["modelValue","checked"])]),_:1})):P("",!0),se.value("id")?(n(),p(e(J),{key:1,class:"w-[5%]"},{default:l(()=>[s(ue,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:S[14]||(S[14]=F=>e(ct)("id"))},{default:l(()=>[s(fe,{name:"sort",sortParam:e(B),field:"id"},null,8,["sortParam"]),S[34]||(S[34]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1})):P("",!0),se.value("status")?(n(),p(e(J),{key:2,class:"w-[2%]"},{default:l(()=>[s(ue,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:S[15]||(S[15]=F=>e(ct)("status"))},{default:l(()=>[s(fe,{name:"sort",sortParam:e(B),field:"status"},null,8,["sortParam"]),S[35]||(S[35]=a("span",{class:"ml-2"},"Status",-1))]),_:1})]),_:1})):P("",!0),se.value("device_name")?(n(),p(e(J),{key:3,class:"w-[20%]"},{default:l(()=>[s(ue,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:S[16]||(S[16]=F=>e(ct)("device_name"))},{default:l(()=>[s(fe,{name:"sort",sortParam:e(B),field:"device_name"},null,8,["sortParam"]),S[36]||(S[36]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1})):P("",!0),se.value("device_ip")?(n(),p(e(J),{key:4,class:"w-[10%]"},{default:l(()=>[...S[37]||(S[37]=[f("IP Address",-1)])]),_:1})):P("",!0),se.value("category")?(n(),p(e(J),{key:5,class:"w-[10%]"},{default:l(()=>[...S[38]||(S[38]=[f("Command Group",-1)])]),_:1})):P("",!0),se.value("vendor")?(n(),p(e(J),{key:6,class:"w-[10%]"},{default:l(()=>[...S[39]||(S[39]=[f("Vendor",-1)])]),_:1})):P("",!0),se.value("device_model")?(n(),p(e(J),{key:7,class:"w-[10%]"},{default:l(()=>[...S[40]||(S[40]=[f("Model",-1)])]),_:1})):P("",!0),se.value("config_good_count")?(n(),p(e(J),{key:8,class:"w-[10%]"},{default:l(()=>[...S[41]||(S[41]=[f("Config Count",-1)])]),_:1})):P("",!0),se.value("config_bad_count")?(n(),p(e(J),{key:9,class:"w-[10%]"},{default:l(()=>[...S[42]||(S[42]=[f("Config Failures",-1)])]),_:1})):P("",!0),se.value("last_config")?(n(),p(e(J),{key:10,class:"w-[10%]"},{default:l(()=>[...S[43]||(S[43]=[f("Last Config",-1)])]),_:1})):P("",!0),se.value("tags")?(n(),p(e(J),{key:11,class:"w-[10%]"},{default:l(()=>[...S[44]||(S[44]=[f("Tags",-1)])]),_:1})):P("",!0),se.value("actions")?(n(),p(e(J),{key:12,class:"w-[10%]"},{default:l(()=>[...S[45]||(S[45]=[f("Actions",-1)])]),_:1})):P("",!0)]),_:1})]),_:1}),s(e(Re),null,{default:l(()=>[e(T)?(n(),p(Te,{key:0})):e(T)?(n(),p(Ue,{key:2})):(n(!0),N(ee,{key:1},oe(e(A),F=>(n(),p(e(me),{key:F.id,class:"table-row-fixed"},{default:l(()=>[se.value("checkbox")?(n(),p(e(H),{key:0,class:"text-start table-cell-fixed"},{default:l(()=>[s(xt,{class:"cursor-pointer",id:"select-"+F.id,checked:!!e(ve).includes(F.id),onClick:ce=>e(Tt)(F.id)},null,8,["id","checked","onClick"])]),_:2},1024)):P("",!0),se.value("id")?(n(),p(e(H),{key:1,class:"text-start table-cell-fixed"},{default:l(()=>[a("div",fn,[a("span",{class:De({"text-red-500":F.device_added_by==9e3,"text-blue-500":F.device_added_by==9001}),title:F.device_added_by==9e3?"Added by Zabbix":F.device_added_by==9001?"Added by Netbox":""},L(F.id),11,gn),F.device_added_by&&F.device_added_by>=9e3?(n(),p(fe,{key:0,name:"imported-device",addedBy:F.device_added_by,source:F.device_added_by===9001?"Netbox":F.device_added_by===9e3?"Zabbix":"Integration"},null,8,["addedBy","source"])):P("",!0)])]),_:2},1024)):P("",!0),se.value("status")?(n(),p(e(H),{key:2,class:"text-start table-cell-fixed"},{default:l(()=>[F.status===0?(n(),p(fe,{key:0,name:"status-red"})):P("",!0),F.status===1?(n(),p(fe,{key:1,name:"status-green"})):P("",!0),F.status===2?(n(),p(fe,{key:2,name:"status-yellow"})):P("",!0),F.status===100?(n(),p(fe,{key:3,name:"status-gray"})):P("",!0),F.status===300?(n(),p(fe,{key:4,name:"status-red-agent",size:"16"})):P("",!0),F.status===301?(n(),p(fe,{key:5,name:"status-gray-agent"})):P("",!0)]),_:2},1024)):P("",!0),se.value("device_name")?(n(),p(e(H),{key:3,class:"text-start"},{default:l(()=>[a("div",yn,[s(ue,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:ce=>e(ne)(F.id)},{default:l(()=>[a("div",xn,[a("span",_n,L(F.device_name),1)])]),_:2},1032,["onClick"])])]),_:2},1024)):P("",!0),se.value("device_ip")?(n(),p(e(H),{key:4,class:"text-start table-cell-fixed"},{default:l(()=>[a("span",{class:"text-truncate",title:F.device_ip},L(F.device_ip),9,kn)]),_:2},1024)):P("",!0),se.value("category")?(n(),p(e(H),{key:5,class:"text-start table-cell-fixed"},{default:l(()=>[F.category.length>0?(n(),N("span",{key:0,class:"text-truncate",title:F.category[0].categoryName},L(F.category[0].categoryName),9,bn)):(n(),N("span",hn,"--"))]),_:2},1024)):P("",!0),se.value("vendor")?(n(),p(e(H),{key:6,class:"text-start table-cell-fixed"},{default:l(()=>[F.vendor.length>0?(n(),N("span",{key:0,class:"text-truncate",title:F.vendor[0].vendorName},L(F.vendor[0].vendorName),9,wn)):(n(),N("span",$n,"--"))]),_:2},1024)):P("",!0),se.value("device_model")?(n(),p(e(H),{key:7,class:"text-start table-cell-fixed"},{default:l(()=>[a("span",{class:"text-truncate",title:F.device_model},L(F.device_model),9,Cn)]),_:2},1024)):P("",!0),se.value("config_good_count")?(n(),p(e(H),{key:8,class:"text-start table-cell-fixed"},{default:l(()=>{var ce;return[f(L(((ce=F.config_summary)==null?void 0:ce.total_count)||"--"),1)]}),_:2},1024)):P("",!0),se.value("config_bad_count")?(n(),p(e(H),{key:9,class:"text-start table-cell-fixed"},{default:l(()=>{var ce;return[f(L(((ce=F.config_summary)==null?void 0:ce.download_status_0_count)||"--"),1)]}),_:2},1024)):P("",!0),se.value("last_config")?(n(),p(e(H),{key:10,class:"text-start table-cell-fixed"},{default:l(()=>[F.last_config?(n(),N("span",{key:0,class:"text-truncate",title:e(d).formatTime(F.last_config.created_at)},L(e(d).formatTime(F.last_config.created_at)),9,Dn)):(n(),N("span",Sn,"--"))]),_:2},1024)):P("",!0),se.value("tags")?(n(),p(e(H),{key:11,class:"text-start table-cell-fixed"},{default:l(()=>[a("div",Vn,[s(Se,{items:F.tag,displayField:"tagname",linkField:"view_url",maxVisible:1,hoverCardFields:["id","tagname","description"]},null,8,["items"])])]),_:2},1024)):P("",!0),se.value("actions")?(n(),p(e(H),{key:12,class:"text-start table-cell-fixed"},{default:l(()=>[a("div",Pn,[s(wl,{rowData:F,onOnEnable:ce=>e(z)(F.id),onOnClone:ce=>(e(Q)(F.id),Xe.value=!0),onOnDisable:ce=>e(r)(F.id),onOnEdit:ce=>(e(Q)(F.id),Xe.value=!1),onOnDelete:ce=>e(W)(F.id),showCopyDownloadDebug:!0},null,8,["rowData","onOnEnable","onOnClone","onOnDisable","onOnEdit","onOnDelete"])])]),_:2},1024)):P("",!0)]),_:2},1024))),128))]),_:1})]),_:1}),e(ve).length?(n(),N("div",In,[a("span",En,[s(Nt,{variant:"primary",class:"mr-1"},{default:l(()=>[f(L(e(ve).length),1)]),_:1}),S[46]||(S[46]=f(" Devices Selected ",-1))]),s(e(Je),null,{default:l(({open:F})=>[s(e(qe),{class:"col-span-3"},{default:l(()=>[s(ue,{class:"text-sm px-1.5 py-0 h-8 flex items-center gap-1 group",variant:"outline"},{default:l(()=>[s(e(es),{class:"inline-block mr-1 ml-0",size:"14"}),S[47]||(S[47]=a("span",{class:"hidden md:inline-flex"},"Enable/Disable",-1)),s(e(gt),{class:De(["transition-transform duration-200 ease-in-out group-hover:rotate-180",{"rotate-180":F}]),size:"14"},null,8,["class"])]),_:2},1024)]),_:2},1024),s(e(Ge),{side:"bottom",align:"start",class:"col-span-3 p-1 text-left w-max"},{default:l(()=>[a("div",Mn,[s(ue,{class:"text-sm px-1.5 py-0 h-8 hover:animate-pulse w-full",onClick:S[17]||(S[17]=le(ce=>e(we)(e(ve)),["prevent"])),variant:"ghost"},{default:l(()=>[s(e(It),{size:"16",class:"text-green-300 mr-1"}),S[48]||(S[48]=f(" Enable Selected ",-1))]),_:1}),s(ue,{class:"text-sm px-1.5 py-0 h-8 w-full",onClick:S[18]||(S[18]=le(ce=>e(Z)(e(ve)),["prevent"])),variant:"ghost"},{default:l(()=>[s(e(Et),{size:"16",class:"text-red-300 mr-1"}),S[49]||(S[49]=f(" Disable Selected ",-1))]),_:1})])]),_:1})]),_:1}),s(ue,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",onClick:S[19]||(S[19]=le(F=>e(Y)(e(ve)),["prevent"])),variant:"outline"},{default:l(()=>[s(fe,{name:"folder-download-open",class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),S[50]||(S[50]=a("span",{class:"hidden md:inline-flex"},"Download Now",-1))]),_:1}),s(ue,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",onClick:S[20]||(S[20]=le(F=>e(R)(),["prevent"])),variant:"outline"},{default:l(()=>[s(e(bs),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),S[51]||(S[51]=a("span",{class:"hidden md:inline-flex"},"Bulk Edit",-1))]),_:1}),s(ue,{class:"text-sm px-1.5 py-0 bg-red-600 hover:bg-red-700 hover:animate-pulse h-8",onClick:S[21]||(S[21]=le(F=>h.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[s(e(Mt),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),a("span",Rn,"Delete "+L(e(ve).length),1)]),_:1})])):P("",!0),e(E)&&e(w)?(n(),p(ue,{key:1,onClick:e(xe),disabled:e(_),class:"load-more-btn my-4",variant:"outline"},{default:l(()=>[S[52]||(S[52]=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M12 8v8m0 0l4-4m-4 4l-4-4"}),a("path",{d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"})],-1)),f(" "+L(e(_)?"Loading...":"Load More Results"),1)]),_:1},8,["onClick","disabled"])):P("",!0),s(Ae,{currentPage:e(b),lastPage:e(C),perPage:e($),"onUpdate:currentPage":S[22]||(S[22]=F=>b.value=F),"onUpdate:perPage":S[23]||(S[23]=F=>$.value=F),totalRecords:e(o),isLoading:e(T)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(cs,{onSave:S[24]||(S[24]=F=>e(q)()),onClose:S[25]||(S[25]=F=>Xe.value=!1),key:e(y),editId:e(U),isClone:Xe.value},null,8,["editId","isClone"])),e(ve).length>0?(n(),p(ga,{checkedRows:e(ve),key:e(x),onBulkUpdateSuccess:S[26]||(S[26]=F=>e(c)())},null,8,["checkedRows"])):P("",!0),s($e,{ids:e(ve),showConfirmDelete:e(h),onClose:S[27]||(S[27]=F=>h.value=!1),onHandleDelete:S[28]||(S[28]=F=>e(j)(e(ve)))},null,8,["ids","showConfirmDelete"]),s(At)])])}}};function Un(k,A){const b=I(!1),$=I([]),C=I([]),o=I([]),{toastSuccess:T,toastError:_}=_e(),w=be(),{closeDialog:E,isDialogOpen:h}=w,U={1:"device",2:"tag",3:"snippet",4:"agent"};de(()=>{x()});const y=re(()=>(console.log(U[k.type]),U[k.type]||"Item")),x=async()=>{switch(b.value=!0,await g(),k.type){case 1:await m();break;case 2:await D();break;case 3:await v();break;case 4:await u();break;default:C.value=[]}b.value=!1},g=async()=>{try{const z=await axios.get("/api/roles");$.value=z.data.data}catch(z){o.value=z.response.data.errors,_("Error","Failed to fetch roles",z.response.data.message),console.error("Error fetching roles:",z)}},m=async()=>{try{const z=await axios.get(`/api/devices/${k.itemId}`);z.data.roles.length>0&&(C.value=z.data.roles.map(i=>i.id))}catch(z){o.value=z.response.data.errors,_("Error","Failed to fetch device roles",z.response.data.message)}},D=async()=>{try{const z=await axios.get(`/api/tags/${k.itemId}`);z.data.roles.length>0&&(C.value=z.data.roles.map(i=>i.id))}catch(z){o.value=z.response.data.errors,_("Error","Failed to fetch tag roles",z.response.data.message)}},v=async()=>{try{const z=await axios.get(`/api/snippets/${k.itemId}`);z.data.roles.length>0&&(C.value=z.data.roles.map(i=>i.id))}catch(z){o.value=z.response.data.errors,_("Error","Failed to fetch snippet roles",z.response.data.message)}},u=async()=>{try{const z=await axios.get(`/api/agents/${k.itemId}`);z.data.roles.length>0&&(C.value=z.data.roles.map(i=>i.id))}catch(z){o.value=z.response.data.errors,_("Error","Failed to fetch agent roles",z.response.data.message)}};function M(){switch(k.type){case 1:B();break;case 2:d();break;case 3:O();break;case 4:V();break;default:C.value=[]}setTimeout(()=>{A("updateRoles",C.value)},300)}const B=async()=>{if(C.value.length===0)return _("Error","Please select at least one role"),!1;try{return await axios.post(`/api/device/update-roles/${k.itemId}`,{roles:C.value}),T("Success","Roles assigned successfully"),r(),!0}catch(z){return o.value=z.response.data.errors,_("Error","Failed to update roles",z.response.data.message),!1}},d=async()=>{if(C.value.length===0)return _("Error","Please select at least one role"),!1;try{return await axios.post(`/api/tags/update-roles/${k.itemId}`,{roles:C.value}),T("Success","Roles assigned successfully"),r(),!0}catch(z){return o.value=z.response.data.errors,_("Error","Failed to update roles",z.response.data.message),!1}},O=async()=>{if(C.value.length===0)return _("Error","Please select at least one role"),!1;try{return await axios.post(`/api/snippets/update-roles/${k.itemId}`,{roles:C.value}),T("Success","Roles assigned successfully"),r(),!0}catch(z){return o.value=z.response.data.errors,_("Error","Failed to update roles",z.response.data.message),!1}},V=async()=>{if(C.value.length===0)return _("Error","Please select at least one role"),!1;try{return await axios.post(`/api/agents/update-roles/${k.itemId}`,{roles:C.value}),T("Success","Roles assigned successfully"),r(),!0}catch(z){return o.value=z.response.data.errors,_("Error","Failed to update roles",z.response.data.message),!1}},W=z=>C.value.includes(z),j=z=>{if(z===1)return;const i=C.value.indexOf(z);i>-1?C.value.splice(i,1):C.value.push(z)};function r(){E("DialogRoleAssignment")}return{displayName:y,isLoading:b,roles:$,updateRoles:M,isDialogOpen:h,isRoleSelected:W,toggleRole:j,close:r}}const Nn={class:"grid gap-2 p-4"},An={key:0,class:"text-xs text-muted-foreground"},Bn={class:"rc-kdb-class2 ml-2"},Fn={__name:"RcRoleDialog",props:{itemId:{type:Number,required:!0},type:{type:Number,default:0,validator:k=>[k,1,2,3,4].includes(k)}},emits:["close","confirm","updateRoles"],setup(k,{emit:A}){const b=k,$=A,{displayName:C,isLoading:o,roles:T,updateRoles:_,isDialogOpen:w,isRoleSelected:E,toggleRole:h,close:U}=Un(b,$);return(y,x)=>{const g=K("RcIcon");return n(),p(e(Ke),{open:e(w)("DialogRoleAssignment")},{default:l(()=>[s(e(Le),{class:"w-full p-0 bg-background text-foreground border border-border",onInteractOutside:x[2]||(x[2]=m=>e(U)()),onPointerDownOutside:x[3]||(x[3]=m=>e(U)()),onEscapeKeyDown:x[4]||(x[4]=m=>e(U)()),onCloseClicked:x[5]||(x[5]=m=>e(U)())},{default:l(()=>[s(e(ze),{class:"rc-dialog-header"},{default:l(()=>[s(e(Oe),{class:"text-sm text-muted-foreground flex items-center"},{default:l(()=>[s(g,{name:"rbac",class:"inline-block mr-2"}),a("span",null,"Assign roles to "+L(e(C))+" ID: "+L(k.itemId),1)]),_:1})]),_:1}),a("div",Nn,[e(o)?(n(),N(ee,{key:0},oe(3,m=>a("div",{class:"flex items-center space-x-2",key:m},[s(e(_t),{class:"h-4 w-4"}),s(e(_t),{class:"h-4 w-[250px]"})])),64)):(n(!0),N(ee,{key:1},oe(e(T),m=>(n(),N("div",{key:m.id,class:"flex items-center space-x-2"},[s(e(Qt),{id:`role-${m.id}`,checked:e(E)(m.id),"onUpdate:checked":D=>e(h)(m.id),disabled:m.id===1},null,8,["id","checked","onUpdate:checked","disabled"]),s(e(et),{for:`role-${m.id}`,class:"text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:l(()=>[f(L(m.name),1)]),_:2},1032,["for"]),m.id===1?(n(),N("div",An,"   - Primary admin role cannot be removed ")):P("",!0)]))),128))]),s(e(je),{class:"rc-dialog-footer"},{default:l(()=>[s(e(ie),{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm",onClick:x[0]||(x[0]=m=>e(U)()),size:"sm"},{default:l(()=>[...x[6]||(x[6]=[f(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ESC")],-1)])]),_:1}),s(e(ie),{type:"submit",variant:"primary",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700",size:"sm",onClick:x[1]||(x[1]=m=>e(_)())},{default:l(()=>[x[8]||(x[8]=f(" Save ",-1)),a("kbd",Bn,[x[7]||(x[7]=f(" Ctrl  ",-1)),s(g,{name:"enter",class:"ml-1"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},Ln={class:"flex items-center"},zn={class:"ml-2"},On={class:"grid gap-2 py-4"},jn={class:"grid items-center grid-cols-4 gap-2"},Kn={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},qn={class:"grid items-center grid-cols-4 gap-2"},Gn={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Hn={class:"pl-2 ml-auto"},Jn={class:"rc-kdb-class2"},Qn={class:"pl-2 ml-auto"},Yn={class:"rc-kdb-class2"},Wn={__name:"TagAddEditDialog",props:{editId:Number},emits:["save"],setup(k,{emit:A}){const{toastSuccess:b,toastError:$}=_e(),C=be(),{closeDialog:o,isDialogOpen:T}=C,_=A,w=I([]),E=I({tagname:"",tagDescription:""}),h=k;function U(x){x.ctrlKey&&x.key==="Enter"&&y()}de(()=>{h.editId>0&&X.get(`/api/tags/${h.editId}`).then(x=>{E.value=x.data}),window.addEventListener("keydown",U)}),he(()=>{window.removeEventListener("keydown",U)});function y(){let x=h.editId>0?`/${h.editId}`:"",g=h.editId>0?"patch":"post";X[g]("/api/tags"+x,E.value).then(m=>{_("save",m.data),b("Tag saved","The tag has been saved successfully."),o("DialogNewTag")}).catch(m=>{w.value=m.response.data.errors,$("Error","Failed to save tag.")})}return(x,g)=>{const m=K("RcIcon"),D=K("Label"),v=K("Input"),u=K("Button");return n(),p(e(Ke),{open:e(T)("DialogNewTag")},{default:l(()=>[s(e(ht),{"as-child":""}),s(e(Le),{class:"w-full p-0",onEscapeKeyDown:g[3]||(g[3]=M=>e(o)("DialogNewTag")),onPointerDownOutside:g[4]||(g[4]=M=>e(o)("DialogNewTag")),onCloseClicked:g[5]||(g[5]=M=>e(o)("DialogNewTag"))},{default:l(()=>[s(e(ze),{class:"rc-dialog-header"},{default:l(()=>[s(e(Oe),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",Ln,[s(m,{name:"commands"}),a("span",zn,L(k.editId>0?"Edit":"New")+" Tag "+L(k.editId>0?"(ID: "+k.editId+")":""),1)])]),_:1})]),_:1}),a("div",On,[a("div",jn,[s(D,{for:"tagname",class:"text-right"},{default:l(()=>[...g[6]||(g[6]=[f(" Tag Name ",-1),a("span",{class:"text-red-600"},"*",-1)])]),_:1}),s(v,{modelValue:E.value.tagname,"onUpdate:modelValue":g[0]||(g[0]=M=>E.value.tagname=M),id:"tagname",class:"col-span-3"},null,8,["modelValue"]),w.value.tagname?(n(),N("span",Kn,L(w.value.tagname[0]),1)):P("",!0)]),a("div",qn,[s(D,{for:"tagDescription",class:"text-right"},{default:l(()=>[...g[7]||(g[7]=[f("Description",-1)])]),_:1}),s(v,{modelValue:E.value.tagDescription,"onUpdate:modelValue":g[1]||(g[1]=M=>E.value.tagDescription=M),id:"tagDescription",class:"col-span-3"},null,8,["modelValue"]),w.value.tagDescription?(n(),N("span",Gn,L(w.value.tagDescription[0]),1)):P("",!0)])]),s(e(je),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[s(u,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:g[2]||(g[2]=M=>e(o)("DialogNewTag")),size:"sm"},{default:l(()=>[...g[8]||(g[8]=[f(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),h.editId===0?(n(),p(u,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:y,variant:"primary"},{default:l(()=>[g[10]||(g[10]=f(" Save ",-1)),a("div",Hn,[a("kbd",Jn,[g[9]||(g[9]=f(" Ctrl  ",-1)),s(m,{name:"enter",class:"ml-1"})])])]),_:1})):(n(),p(u,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:y,variant:"primary"},{default:l(()=>[g[12]||(g[12]=f(" Update ",-1)),a("div",Qn,[a("kbd",Yn,[g[11]||(g[11]=f(" Ctrl  ",-1)),s(m,{name:"enter",class:"ml-1"})])])]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"])}}};function Zn(){const k=I(1),A=rt(),b=I(A.get("useTags","perPage",10)),$=I("-id"),C=I(""),o=I({}),T=I([]),_=I(!1),w=I(1),E=I(0),h=I(1),U=I(1),y=I(!1),x=be(),{openDialog:g}=x,{toastSuccess:m,toastError:D}=_e(),{reload:v}=ut(M),{toggleSort:u}=it($,M,"useTags");async function M(G={}){_.value=!0;try{const q=await X.get("/api/tags",{params:{page:k.value,perPage:b.value,sort:$.value,...o.value}});T.value=q.data,w.value=q.data.last_page}catch(q){console.error("Error fetching tags:",q),D("Error","Failed to fetch tags.")}finally{_.value=!1}}const B=async()=>{E.value=0,h.value=Math.random(),g("DialogNewTag")};function d(G){E.value=G,h.value=Math.random(),g("DialogNewTag")}const O=G=>{E.value=G,U.value=Math.random(),g("DialogRoleAssignment")},V=async G=>{try{await X.delete(`/api/tags/${G}`),M(),m("Tag Deleted","The tag has been deleted successfully."),y.value=!1}catch(q){q.status===422?D("Error",q.response.data.message):(console.error("Error deleting Tag:",q),D("Error","Failed to delete Tag."))}},W=async G=>{try{await X.post("/api/tags/delete-many",{ids:G}),M(),m("Tags Deleted","The tags have been deleted successfully."),y.value=!1,ke.emit("deleteManyTagsSuccess")}catch(q){q.status===422?D("Error",q.response.data.message):(console.error("Error deleting Tags:",q),D("Error","Failed to delete Tags.")),y.value=!1}},j=G=>{E.value=G,h.value=Math.random(),g("DialogNewTag")},r=()=>{M(),h.value=Math.random()};function z(G){G.altKey&&G.key==="n"&&(G.preventDefault(),g("DialogNewTag"))}const i=lt(()=>{o.value["filter[q]"]=C.value,k.value=1,M()},500);return ae(k,()=>{M()}),ae(C,()=>{i()}),ae(b,G=>{A.set("useTags","perPage",G),M()}),{reload:v,tags:T,isLoading:_,currentPage:k,perPage:b,lastPage:w,editId:E,newTagModalKey:h,newRoleModalKey:U,searchTerm:C,showConfirmDelete:y,openDialog:g,fetchTags:M,createTag:B,updateTag:d,deleteTag:V,deleteManyTags:W,handleSave:r,handleRoleAssignment:O,handleKeyDown:z,viewEditDialog:j,toggleSort:u,sortParam:$}}const Xn={class:"flex flex-col h-full gap-1 text-center"},eo={class:"flex items-center justify-between p-4"},to={class:"flex items-center"},so={class:"flex items-center justify-end"},lo={class:"px-6"},ao={__name:"Main",setup(k){const{reload:A,tags:b,isLoading:$,currentPage:C,perPage:o,lastPage:T,editId:_,newTagModalKey:w,newRoleModalKey:E,searchTerm:h,showConfirmDelete:U,fetchTags:y,createTag:x,deleteTag:g,deleteManyTags:m,handleSave:D,handleKeyDown:v,handleRoleAssignment:u,viewEditDialog:M,toggleSort:B,sortParam:d}=Zn(),{selectedRows:O,selectAll:V,toggleSelectAll:W,toggleSelectRow:j}=Ie(b),r=Pe();return de(()=>{var z,i;(i=(z=r.currentRoute)==null?void 0:z.value.params)!=null&&i.id&&(_.value=parseInt(r.currentRoute.value.params.id),M(_.value)),y(),window.addEventListener("keydown",v),ke.on("deleteManyTagsSuccess",()=>{O.value=[],V.value=!1})}),he(()=>{window.removeEventListener("keydown",v)}),(z,i)=>{const G=K("Input"),q=K("Button"),c=K("RcIcon"),ne=K("Checkbox");return n(),N("div",Xn,[a("div",eo,[a("div",to,[s(G,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter tags...",modelValue:e(h),"onUpdate:modelValue":i[0]||(i[0]=Q=>te(h)?h.value=Q:null)},null,8,["modelValue"]),e(h)?(n(),p(Ee,{key:0,"onUpdate:modelValue":i[1]||(i[1]=Q=>h.value="")})):P("",!0)]),a("div",so,[e(O).length?(n(),p(q,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=le(Q=>U.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[f("Delete Selected "+L(e(O).length)+" Tag(s) ",1)]),_:1})):P("",!0),s(q,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:le(e(x),["prevent"]),variant:"primary"},{default:l(()=>[...i[14]||(i[14]=[f(" New Tag ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(c,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:i[3]||(i[3]=Q=>e(A)())})])]),a("div",lo,[s(e(Ne),null,{default:l(()=>[s(e(Me),null,{default:l(()=>[s(e(me),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(ne,{id:"selectAll",modelValue:e(V),"onUpdate:modelValue":i[4]||(i[4]=Q=>te(V)?V.value=Q:null),checked:e(V),onClick:i[5]||(i[5]=Q=>e(W)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(q,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[6]||(i[6]=Q=>e(B)("id"))},{default:l(()=>[s(c,{name:"sort",sortParam:e(d),field:"id"},null,8,["sortParam"]),i[15]||(i[15]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[s(q,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[7]||(i[7]=Q=>e(B)("tagname"))},{default:l(()=>[s(c,{name:"sort",sortParam:e(d),field:"tagname"},null,8,["sortParam"]),i[16]||(i[16]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...i[17]||(i[17]=[f("Description",-1)])]),_:1}),s(e(J),{class:"w-[40%]"},{default:l(()=>[...i[18]||(i[18]=[f("Devices",-1)])]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...i[19]||(i[19]=[f("Roles",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...i[20]||(i[20]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Re),null,{default:l(()=>[e($)?(n(),p(Te,{key:0})):e($)?(n(),p(Ue,{key:2})):(n(!0),N(ee,{key:1},oe(e(b).data,Q=>(n(),p(e(me),{key:Q.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(ne,{class:"cursor-pointer",id:"select-"+Q.id,checked:!!e(O).includes(Q.id),onClick:R=>e(j)(Q.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(Q.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(Q.tagname),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(Q.tagDescription),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:Q.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:Q.roles,displayField:"name",linkString:"/settings/roles",maxVisible:3,hoverCardFields:["id","name","description"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Qe,{rowData:Q,onOnEdit:R=>e(M)(Q.id),onOnDelete:R=>e(g)(Q.id),showRolesBtn:!0,onOnRoleAssignment:R=>e(u)(Q.id)},null,8,["rowData","onOnEdit","onOnDelete","onOnRoleAssignment"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Ae,{currentPage:e(C),lastPage:e(T),perPage:e(o),"onUpdate:currentPage":i[8]||(i[8]=Q=>C.value=Q),"onUpdate:perPage":i[9]||(i[9]=Q=>o.value=Q),totalRecords:e(b).total,isLoading:e($)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(Wn,{onSave:i[10]||(i[10]=Q=>e(D)()),key:e(w),editId:e(_)},null,8,["editId"])),s($e,{ids:e(O),showConfirmDelete:e(U),onClose:i[11]||(i[11]=Q=>U.value=!1),onHandleDelete:i[12]||(i[12]=Q=>e(m)(e(O)))},null,8,["ids","showConfirmDelete"]),e(_)>0?(n(),p(Fn,{itemId:e(_),key:e(E),type:2,onUpdateRoles:i[13]||(i[13]=Q=>e(y)())},null,8,["itemId"])):P("",!0)])])}}},no={key:0,class:"flex justify-center py-8"},oo={class:"space-y-2"},ro={key:0,class:"text-sm text-red-600"},io={key:0,class:"space-y-2"},uo={class:"max-h-32 overflow-y-auto border rounded-md p-3 bg-gray-50"},co={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},mo=["title"],po={key:1,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4"},vo={class:"pl-2 ml-auto"},fo={class:"rc-kdb-class2"},go={class:"pl-2 ml-auto"},yo={class:"rc-kdb-class2"},xo={__name:"DeviceModelAddEditDialog",props:{editModelName:{type:String,default:""},editId:{type:Number,default:0}},emits:["save"],setup(k,{emit:A}){const b=k,$=A,C=I({name:""}),o=I(!1),T=I({}),_=I([]),w=be(),{isDialogOpen:E,closeDialog:h}=w,{toastSuccess:U,toastError:y}=_e(),x=re(()=>!!b.editModelName),g=re(()=>b.editId!=0?"Edit Device Model":"New Device Model"),m=async()=>{o.value=!0;try{const d=(await X.get(`/api/device-models/${b.editId}`)).data;C.value.name=d.name,_.value=d.devices||[]}catch(B){console.error("Error fetching device model:",B),y("Error","Failed to fetch device model data."),h("DialogNewDeviceModel")}finally{o.value=!1}},D=()=>{var B;return T.value={},(B=C.value.name)!=null&&B.trim()?C.value.name.length>255?(T.value.name=t("validation.maxLength",{field:t("common.entities.deviceModel"),max:255}),!1):!0:(T.value.name=t("validation.required",{field:t("common.entities.deviceModel")}),!1)},v=async()=>{var B,d;if(D()){o.value=!0,T.value={};try{let O;b.editId!=0?(O=await X.patch("/api/device-models/"+b.editId,C.value),U("Success","The device model has been updated successfully. Devices associated with this model will take a few moments to reflect the changes.",{count:O.data.data.devices_updated||0})):(O=await X.post("/api/device-models",C.value),U("Success","The device model has been created successfully.")),$("save"),h("DialogNewDeviceModel"),u()}catch(O){((B=O.response)==null?void 0:B.status)===422?(T.value=O.response.data.data||{},y("Validation Error",O.response.data.message)):((d=O.response)==null?void 0:d.status)===409?(T.value.name=O.response.data.message,y("Error",O.response.data.message)):(console.error("Error saving device model:",O),y("Error","Failed to save device model."))}finally{o.value=!1}}},u=()=>{C.value={name:""},T.value={},_.value=[]},M=()=>{u(),h("DialogNewDeviceModel")};return ae(()=>b.editModelName,()=>{E("DialogNewDeviceModel")&&(x.value?m():u())}),de(()=>{b.editId!=0&&m()}),(B,d)=>{const O=K("Label"),V=K("Input"),W=K("Button"),j=K("RcIcon");return n(),p(e(Ke),{open:e(E)("DialogNewDeviceModel"),"onUpdate:open":M},{default:l(()=>[s(e(Le),{class:"sm:max-w-[600px]"},{default:l(()=>[s(e(ze),null,{default:l(()=>[s(e(Oe),null,{default:l(()=>[f(L(g.value),1)]),_:1})]),_:1}),o.value?(n(),N("div",no,[...d[3]||(d[3]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(n(),N("form",{key:1,onSubmit:le(v,["prevent"]),class:"space-y-6"},[a("div",oo,[s(O,{for:"name",class:"text-sm font-medium"},{default:l(()=>[...d[4]||(d[4]=[f(" Device Model Name * ",-1)])]),_:1}),s(V,{id:"name",modelValue:C.value.name,"onUpdate:modelValue":d[0]||(d[0]=r=>C.value.name=r),type:"text",placeholder:"Enter device model name",class:De({"border-red-500":T.value.name}),maxlength:"255",required:""},null,8,["modelValue","class"]),T.value.name?(n(),N("p",ro,L(T.value.name),1)):P("",!0)]),x.value&&_.value.length>0?(n(),N("div",io,[s(O,{class:"text-sm font-medium"},{default:l(()=>[f(" Devices Using This Model ("+L(_.value.length)+") ",1)]),_:1}),a("div",uo,[a("div",co,[(n(!0),N(ee,null,oe(_.value,r=>(n(),N("div",{key:r.id,class:"text-sm text-gray-700 truncate",title:r.name},"• "+L(r.name),9,mo))),128))])]),d[5]||(d[5]=a("p",{class:"text-xs text-gray-600"}," Updating the device model name will affect all devices using this model. ",-1))])):P("",!0),x.value?(n(),N("div",po,[...d[6]||(d[6]=[a("div",{class:"flex"},[a("div",{class:"flex-shrink-0"},[a("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),a("div",{class:"ml-3"},[a("p",{class:"text-sm text-yellow-700"}," Editing the device model name will affect all devices using this model. ")])],-1)])])):P("",!0),s(e(je),null,{default:l(()=>[s(W,{type:"button",variant:"outline",onClick:M,disabled:o.value},{default:l(()=>[...d[7]||(d[7]=[f(" Cancel ",-1)])]),_:1},8,["disabled"]),b.editId===0?(n(),p(W,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:d[1]||(d[1]=r=>v()),variant:"primary",disabled:o.value},{default:l(()=>[d[9]||(d[9]=f(" Save ",-1)),a("div",vo,[a("kbd",fo,[d[8]||(d[8]=f(" Ctrl  ",-1)),s(j,{name:"enter",class:"ml-1"})])])]),_:1},8,["disabled"])):(n(),p(W,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:d[2]||(d[2]=r=>v()),variant:"primary",disabled:o.value},{default:l(()=>[d[11]||(d[11]=f(" Update ",-1)),a("div",go,[a("kbd",yo,[d[10]||(d[10]=f(" Ctrl  ",-1)),s(j,{name:"enter",class:"ml-1"})])])]),_:1},8,["disabled"]))]),_:1})],32))]),_:1})]),_:1},8,["open"])}}};function _o(){const k=I(1),A=rt(),b=I(A.get("useDeviceModels","perPage",15)),$=I("name"),C=I(""),o=I({}),T=I([]),_=I(!1),w=I(1),E=I(""),h=I(1),U=I(!1),y=I(0),x=be(),{openDialog:g}=x,{toastSuccess:m,toastError:D}=_e(),{reload:v}=ut(M),{toggleSort:u}=it($,M,"useDeviceModels");async function M(q={}){_.value=!0;try{const c=await X.get("/api/device-models",{params:{page:k.value,perPage:b.value,sort:$.value,...o.value}});T.value=c.data,w.value=c.data.last_page}catch(c){console.error("Error fetching device models:",c),D("Error",c.response.data.message||"Failed to fetch device models.")}finally{_.value=!1}}const B=async q=>{E.value="",y.value=q||0,h.value=Math.random(),g("DialogNewDeviceModel")};function d(q){E.value=q,h.value=Math.random(),g("DialogNewDeviceModel")}const O=async q=>{try{await X.delete(`/api/device-models/${encodeURIComponent(q)}`),M(),m("Device Model Deleted","The device model has been deleted successfully."),U.value=!1}catch(c){c.status===422||c.status===409?D("Error",c.response.data.message):(console.error("Error deleting Device Model:",c),D("Error","Failed to delete Device Model."))}},V=async q=>{try{await X.post("/api/device-models/delete-many",{ids:q}),M(),m("Device Models Deleted","The device models have been deleted successfully."),U.value=!1,ke.emit("deleteManyDeviceModelsSuccess")}catch(c){c.status===422?D("Error",c.response.data.message):(console.error("Error deleting Device Models:",c),D("Error","Failed to delete Device Models.")),U.value=!1}},W=q=>{y.value=q,h.value=Math.random(),g("DialogNewDeviceModel")},j=q=>{window.open(`/devices?filter[device_model]=${encodeURIComponent(q)}`,"_blank")},r=async q=>{try{return(await X.get(`/api/device-models/${encodeURIComponent(q)}/devices`)).data.data}catch(c){return console.error("Error fetching devices for model:",c),D("Error","Failed to fetch devices for this model."),null}},z=()=>{M(),h.value=Math.random()};function i(q){q.altKey&&q.key==="n"&&(q.preventDefault(),g("DialogNewDeviceModel"))}const G=lt(()=>{o.value["filter[q]"]=C.value,k.value=1,M()},500);return ae(k,()=>{M()}),ae(C,()=>{G()}),ae(b,q=>{A.set("useDeviceModels","perPage",q),M()}),{reload:v,deviceModels:T,isLoading:_,currentPage:k,perPage:b,lastPage:w,editModelName:E,newModelModalKey:h,searchTerm:C,showConfirmDelete:U,editId:y,openDialog:g,fetchDeviceModels:M,createDeviceModel:B,updateDeviceModel:d,deleteDeviceModel:O,deleteManyDeviceModels:V,handleSave:z,handleKeyDown:i,viewEditDialog:W,viewDevicesDialog:j,getDevicesForModel:r,toggleSort:u,sortParam:$}}const ko={class:"flex flex-col h-full gap-1 text-center"},bo={class:"flex items-center justify-between p-4"},ho={class:"flex items-center"},wo={class:"flex items-center justify-end"},$o={class:"px-6"},Co={class:"flex items-center space-x-2"},Do={key:1,class:"text-muted-foreground text-sm"},So={__name:"Main",setup(k){const{reload:A,deviceModels:b,isLoading:$,currentPage:C,perPage:o,lastPage:T,editId:_,editModelName:w,newModelModalKey:E,searchTerm:h,showConfirmDelete:U,fetchDeviceModels:y,createDeviceModel:x,deleteDeviceModel:g,deleteManyDeviceModels:m,handleSave:D,handleKeyDown:v,viewEditDialog:u,viewDevicesDialog:M,toggleSort:B,sortParam:d}=_o(),{selectedRows:O,selectAll:V,toggleSelectAll:W,toggleSelectRow:j}=Ie(b),r=Pe();return de(()=>{var z,i;(i=(z=r.currentRoute)==null?void 0:z.value.params)!=null&&i.modelName&&(w.value=decodeURIComponent(r.currentRoute.value.params.modelName),u(w.value)),y(),window.addEventListener("keydown",v),ke.on("deleteManyDeviceModelsSuccess",()=>{O.value=[],V.value=!1})}),he(()=>{window.removeEventListener("keydown",v)}),(z,i)=>{const G=K("Input"),q=K("Button"),c=K("RcIcon"),ne=K("Checkbox"),Q=K("RcBadge");return n(),N("div",ko,[a("div",bo,[a("div",ho,[s(G,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter Device Models...",modelValue:e(h),"onUpdate:modelValue":i[0]||(i[0]=R=>te(h)?h.value=R:null)},null,8,["modelValue"]),e(h)?(n(),p(Ee,{key:0,"onUpdate:modelValue":i[1]||(i[1]=R=>h.value="")})):P("",!0)]),a("div",wo,[e(O).length?(n(),p(q,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=le(R=>U.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[f(" Delete Selected "+L(e(O).length)+" Device(s) Model(s) ",1)]),_:1})):P("",!0),s(q,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:i[3]||(i[3]=le(R=>e(x)(0),["prevent"])),variant:"primary"},{default:l(()=>[...i[15]||(i[15]=[f(" Add Model ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),s(c,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:i[4]||(i[4]=R=>e(A)())})])]),a("div",$o,[s(e(Ne),null,{default:l(()=>[s(e(Me),null,{default:l(()=>[s(e(me),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(ne,{id:"selectAll",modelValue:e(V),"onUpdate:modelValue":i[5]||(i[5]=R=>te(V)?V.value=R:null),checked:e(V),onClick:i[6]||(i[6]=R=>e(W)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(q,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[7]||(i[7]=R=>e(B)("id"))},{default:l(()=>[s(c,{name:"sort",sortParam:e(d),field:"id"},null,8,["sortParam"]),i[16]||(i[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[30%]"},{default:l(()=>[s(q,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[8]||(i[8]=R=>e(B)("name"))},{default:l(()=>[s(c,{name:"sort",sortParam:e(d),field:"name"},null,8,["sortParam"]),i[17]||(i[17]=a("span",{class:"ml-2"}," Name ",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[15%]"},{default:l(()=>[s(q,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[9]||(i[9]=R=>e(B)("devices_count"))},{default:l(()=>[s(c,{name:"sort",sortParam:e(d),field:"devices_count"},null,8,["sortParam"]),i[18]||(i[18]=a("span",{class:"ml-2"}," Device Count ",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[35%]"},{default:l(()=>[...i[19]||(i[19]=[f(" Devices ",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...i[20]||(i[20]=[f(" Actions ",-1)])]),_:1})]),_:1})]),_:1}),s(e(Re),null,{default:l(()=>[e($)?(n(),p(Te,{key:0})):!e($)&&e(b).data&&e(b).data.length?(n(!0),N(ee,{key:1},oe(e(b).data,R=>(n(),p(e(me),{key:R.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(ne,{class:"cursor-pointer",id:"select-"+R.id,checked:!!e(O).includes(R.id),onClick:Z=>e(j)(R.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(R.id),1)]),_:2},1024),s(e(H),{class:"text-start font-medium"},{default:l(()=>[f(L(R.name),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Q,{variant:"info",class:"px-3 py-1"},{default:l(()=>[f(L(R.devices_count),1)]),_:2},1024)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[a("div",Co,[R.devices_count>0?(n(),p(q,{key:0,variant:"outline",size:"sm",onClick:Z=>e(M)(R.name)},{default:l(()=>[f(" View Devices ("+L(R.devices_count)+") ",1),s(e(Yt),{size:"12",class:"ml-2"})]),_:2},1032,["onClick"])):(n(),N("span",Do," -- "))])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Qe,{rowData:R,onOnEdit:Z=>e(u)(R.id),onOnDelete:Z=>e(g)(R.name),showRolesBtn:!1,showViewDevicesBtn:R.devices_count>0,onOnViewDevices:Z=>e(M)(R.name)},null,8,["rowData","onOnEdit","onOnDelete","showViewDevicesBtn","onOnViewDevices"])]),_:2},1024)]),_:2},1024))),128)):(n(),p(Ue,{key:2}))]),_:1})]),_:1}),s(Ae,{currentPage:e(C),lastPage:e(T),perPage:e(o),"onUpdate:currentPage":i[10]||(i[10]=R=>C.value=R),"onUpdate:perPage":i[11]||(i[11]=R=>o.value=R),totalRecords:e(b).total,isLoading:e($)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(xo,{onSave:i[12]||(i[12]=R=>e(D)()),key:e(E),editModelName:e(w),editId:e(_)},null,8,["editModelName","editId"])),s($e,{ids:e(O),showConfirmDelete:e(U),onClose:i[13]||(i[13]=R=>U.value=!1),onHandleDelete:i[14]||(i[14]=R=>e(m)(e(O)))},null,8,["ids","showConfirmDelete"])])])}}};function Vo(k){const A=I(1),b=rt(),$=I(b.get("useTemplates","perPage",10)),C=I("-id"),o=I(""),T=I({}),_=be(),w=I(0),E=I(!1),h=I(1),U=I(1),y=I([]),x=I(!1),g=Pe(),{openDialog:m}=_,{toastSuccess:D,toastError:v}=_e(),{reload:u}=ut(B),{toggleSort:M}=it(C,B,"useTemplates");de(()=>{var i,G;(G=(i=g.currentRoute)==null?void 0:i.value.params)!=null&&G.id?(w.value=g.currentRoute.value.params.id,d(w.value)):(w.value=0,B()),window.addEventListener("keydown",r)}),he(()=>{window.removeEventListener("keydown",r)});async function B(i={}){E.value=!0;try{const G=await X.get("/api/templates",{params:{page:A.value,perPage:$.value,sort:C.value,...T.value}});y.value=G.data,h.value=G.data.last_page}catch(G){console.error("Error fetching templates:",G),v("Error","Failed to fetch templates.")}finally{E.value=!1}}function d(i){g.push({name:"template-view",params:{id:i}})}const O=async i=>{try{await X.delete(`/api/templates/${i}`),B(),D("Template Deleted","The template has been deleted successfully.")}catch(G){G.status===422?v("Error",G.response.data.message):(console.error("Error deleting template:",G),v("Error","Failed to delete template."))}},V=async i=>{try{await X.post("/api/templates/delete-many",{ids:i}),B(),D("Templates Deleted","The templates have been deleted successfully."),x.value=!1,ke.emit("deleteManyTemplatesSuccess")}catch(G){G.status===422?v("Error",G.response.data.message):(console.error("Error deleting Templates:",G),v("Error","Failed to delete Templates.")),x.value=!1}},W=i=>{w.value=i,U.value=Math.random(),m("DialogNewTemplate")},j=()=>{B(),U.value=Math.random()};function r(i){i.altKey&&i.key==="n"&&(i.preventDefault(),m("DialogNewTemplate"))}const z=lt(()=>{T.value["filter[q]"]=o.value,A.value=1,B()},500);return ae(A,()=>{B()}),ae(o,()=>{z()}),ae($,i=>{b.set("useTemplates","perPage",i),B()}),{reload:u,templates:y,isLoading:E,currentPage:A,perPage:$,lastPage:h,editId:w,newTemplateModalKey:U,searchTerm:o,openDialog:m,fetchTemplates:B,viewTemplateDetailsPane:d,deleteTemplate:O,deleteManyTemplates:V,handleSave:j,handleKeyDown:r,viewEditDialog:W,toggleSort:M,sortParam:C,showConfirmDelete:x}}const Po={class:"flex flex-col h-full gap-1 text-center"},Io={class:"flex items-center justify-between p-4"},Eo={class:"flex items-center"},Mo={class:"flex items-center justify-end"},Ro={class:"px-6"},To={class:"border-b"},Uo={__name:"Main",setup(k){const{reload:A,templates:b,isLoading:$,currentPage:C,perPage:o,lastPage:T,searchTerm:_,viewTemplateDetailsPane:w,deleteTemplate:E,deleteManyTemplates:h,toggleSort:U,sortParam:y,showConfirmDelete:x}=Vo(),{importTemplates:g,importingTemplates:m}=ms(),{selectedRows:D,selectAll:v,toggleSelectAll:u,toggleSelectRow:M}=Ie(b);return de(()=>{ke.on("deleteManyTemplatesSuccess",()=>{D.value=[],v.value=!1,document.getElementById("selectAll").checked=!1})}),(B,d)=>{const O=K("Input"),V=K("Button"),W=K("RcIcon"),j=K("Checkbox");return n(),N("div",Po,[a("div",Io,[a("div",Eo,[s(O,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter templates...",modelValue:e(_),"onUpdate:modelValue":d[0]||(d[0]=r=>te(_)?_.value=r:null)},null,8,["modelValue"]),e(_)?(n(),p(Ee,{key:0,"onUpdate:modelValue":d[1]||(d[1]=r=>_.value="")})):P("",!0)]),a("div",Mo,[e(D).length?(n(),p(V,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:d[2]||(d[2]=le(r=>x.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[f("Delete Selected "+L(e(D).length)+" Template(s) ",1)]),_:1})):P("",!0),s(V,{type:"close",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700",onClick:d[3]||(d[3]=r=>e(g)()),variant:"outline"},{default:l(()=>[e(m)?P("",!0):(n(),p(e(gs),{key:0,class:"w-4 h-4 mr-2 text-white github-shake"})),s(Ze,{state:e(m),class:"mr-2"},null,8,["state"]),d[14]||(d[14]=f(" Import Templates ",-1))]),_:1}),s(V,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:d[4]||(d[4]=le(r=>e(w)(0),["prevent"])),variant:"primary"},{default:l(()=>[...d[15]||(d[15]=[f(" New Template ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),s(W,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:d[5]||(d[5]=r=>e(A)())})])]),a("div",Ro,[s(e(Ne),null,{default:l(()=>[s(e(Me),null,{default:l(()=>[s(e(me),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(j,{id:"selectAll",modelValue:e(v),"onUpdate:modelValue":d[6]||(d[6]=r=>te(v)?v.value=r:null),checked:e(v),onClick:d[7]||(d[7]=r=>e(u)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(V,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[8]||(d[8]=r=>e(U)("id"))},{default:l(()=>[s(W,{name:"sort",sortParam:e(y),field:"id"},null,8,["sortParam"]),d[16]||(d[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[s(V,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[9]||(d[9]=r=>e(U)("templateName"))},{default:l(()=>[s(W,{name:"sort",sortParam:e(y),field:"templateName"},null,8,["sortParam"]),d[17]||(d[17]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...d[18]||(d[18]=[f("Description",-1)])]),_:1}),s(e(J),{class:"w-[40%]"},{default:l(()=>[...d[19]||(d[19]=[f("Devices",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...d[20]||(d[20]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Re),null,{default:l(()=>[e($)?(n(),p(Te,{key:0})):e($)?(n(),p(Ue,{key:2})):(n(!0),N(ee,{key:1},oe(e(b).data,r=>(n(),p(e(me),{key:r.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(j,{class:"cursor-pointer",id:"select-"+r.id,checked:!!e(D).includes(r.id),onClick:z=>e(M)(r.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(r.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(V,{class:"px-2 py-0 text-sm hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:z=>e(w)(r.id)},{default:l(()=>[a("span",To,L(r.templateName),1)]),_:2},1032,["onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(r.description),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:r.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Qe,{rowData:r,onOnEdit:z=>e(w)(r.id),onOnDelete:z=>e(E)(r.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Ae,{currentPage:e(C),lastPage:e(T),perPage:e(o),"onUpdate:currentPage":d[10]||(d[10]=r=>C.value=r),"onUpdate:perPage":d[11]||(d[11]=r=>o.value=r),totalRecords:e(b).total,isLoading:e($)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),s($e,{ids:e(D),showConfirmDelete:e(x),onClose:d[12]||(d[12]=r=>x.value=!1),onHandleDelete:d[13]||(d[13]=r=>e(h)(e(D)))},null,8,["ids","showConfirmDelete"])])])}}},No=dt(Uo,[["__scopeId","data-v-d820045f"]]),Ao={class:"flex flex-col h-full gap-1 text-center"},Bo={class:"flex items-center justify-between p-4"},Fo={class:"flex items-center"},Lo={class:"flex items-center justify-end"},zo={class:"px-6"},Oo={__name:"Main",setup(k){const{reload:A,editId:b,vendors:$,currentPage:C,perPage:o,searchTerm:T,lastPage:_,isLoading:w,fetchVendors:E,viewEditDialog:h,createVendor:U,deleteVendor:y,deleteManyVendors:x,handleSave:g,handleKeyDown:m,newVendorModalKey:D,toggleSort:v,sortParam:u,showConfirmDelete:M}=ps(),{selectedRows:B,selectAll:d,toggleSelectAll:O,toggleSelectRow:V}=Ie($),W=Pe();return de(()=>{var j,r;E(),(r=(j=W.currentRoute)==null?void 0:j.value.params)!=null&&r.id&&(b.value=parseInt(W.currentRoute.value.params.id),h(b.value)),window.addEventListener("keydown",m),ke.on("deleteManyVendorsSuccess",()=>{B.value=[],d.value=!1,document.getElementById("selectAll").checked=!1})}),he(()=>{window.removeEventListener("keydown",m)}),(j,r)=>{const z=K("Input"),i=K("Button"),G=K("RcIcon"),q=K("Checkbox");return n(),N("div",Ao,[a("div",Bo,[a("div",Fo,[s(z,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter vendors...",modelValue:e(T),"onUpdate:modelValue":r[0]||(r[0]=c=>te(T)?T.value=c:null)},null,8,["modelValue"]),e(T)?(n(),p(Ee,{key:0,"onUpdate:modelValue":r[1]||(r[1]=c=>T.value="")})):P("",!0)]),a("div",Lo,[e(B).length?(n(),p(i,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:r[2]||(r[2]=le(c=>M.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[f("Delete Selected "+L(e(B).length)+" Vendor(s) ",1)]),_:1})):P("",!0),s(i,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:le(e(U),["prevent"]),variant:"primary"},{default:l(()=>[...r[13]||(r[13]=[f(" New Vendor ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(G,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:r[3]||(r[3]=c=>e(A)())})])]),a("div",zo,[s(e(Ne),null,{default:l(()=>[s(e(Me),null,{default:l(()=>[s(e(me),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(q,{id:"selectAll",modelValue:e(d),"onUpdate:modelValue":r[4]||(r[4]=c=>te(d)?d.value=c:null),checked:e(d),onClick:r[5]||(r[5]=c=>e(O)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[6]||(r[6]=c=>e(v)("id"))},{default:l(()=>[s(G,{name:"sort",sortParam:e(u),field:"id"},null,8,["sortParam"]),r[14]||(r[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[7]||(r[7]=c=>e(v)("vendorName"))},{default:l(()=>[s(G,{name:"sort",sortParam:e(u),field:"vendorName"},null,8,["sortParam"]),r[15]||(r[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[50%]"},{default:l(()=>[...r[16]||(r[16]=[f("Devices",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...r[17]||(r[17]=[f("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Re),null,{default:l(()=>[e(w)?(n(),p(Te,{key:0})):e(w)?(n(),p(Ue,{key:2})):(n(!0),N(ee,{key:1},oe(e($).data,c=>(n(),p(e(me),{key:c.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(q,{class:"cursor-pointer",id:"select-"+c.id,checked:!!e(B).includes(c.id),onClick:ne=>e(V)(c.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(c.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[f(L(c.vendorName),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:c.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Qe,{rowData:c,onOnEdit:ne=>e(h)(c.id),onOnDelete:ne=>e(y)(c.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Ae,{currentPage:e(C),lastPage:e(_),perPage:e(o),"onUpdate:currentPage":r[8]||(r[8]=c=>C.value=c),"onUpdate:perPage":r[9]||(r[9]=c=>o.value=c),totalRecords:e($).total,isLoading:e(w)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(vs,{onSave:r[10]||(r[10]=c=>e(g)()),key:e(D),editId:e(b)},null,8,["editId"])),s($e,{ids:e(B),showConfirmDelete:e(M),onClose:r[11]||(r[11]=c=>M.value=!1),onHandleDelete:r[12]||(r[12]=c=>e(x)(e(B)))},null,8,["ids","showConfirmDelete"])])])}}},jo={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},Ko={class:"border-t border-b topRow"},qo={class:"flex items-center justify-between"},Go={class:"flex items-center justify-start w-full gap-2"},Ho={class:"truncate"},Jo={class:"flex items-center gap-2 mr-4"},Qo={class:"flex items-center gap-2"},Yo={key:1,class:"flex flex-col h-full gap-1 text-center"},Wo={class:"flex items-center justify-between p-4"},Zo={class:"flex items-center"},Xo={class:"text-lg text-red-500 font-semibold"},ed={__name:"Main",setup(k){const A=I(!1),{currentView:b,viewItems:$,changeView:C,toggleFavorite:o}=Wt(),T=re(()=>["devices","commandgroups","commands","templates","vendors","tags","models"].includes(b.value));return(_,w)=>{const E=K("RcIcon");return n(),N("main",jo,[a("div",Ko,[s(e(ot),{"onUpdate:open":w[0]||(w[0]=h=>A.value=h)},{default:l(()=>{var h,U;return[a("div",qo,[s(e(at),{"as-child":"",class:"p-4 ml-2"},{default:l(()=>[s(e(ie),{variant:"outline",class:"w-48"},{default:l(()=>{var y;return[a("div",Go,[s(E,{name:"pin",class:"w-4 h-4 text-blue-400 shrink-0"}),a("span",Ho,L(((y=e($).find(x=>x.id===e(b)))==null?void 0:y.label)||"Select View"),1),s(e(gt),{class:De(["w-4 h-4 ml-auto transition-transform duration-300",{"rotate-180":A.value}])},null,8,["class"])])]}),_:1})]),_:1})]),a("div",Jo,[s(E,{name:((h=e($).find(y=>y.id===e(b)))==null?void 0:h.icon)||""},null,8,["name"]),f(" "+L(((U=e($).find(y=>y.id===e(b)))==null?void 0:U.label)||""),1)]),s(e(nt),{class:"w-56",align:"start"},{default:l(()=>[s(e(ts),null,{default:l(()=>[(n(!0),N(ee,null,oe(e($),y=>(n(),p(e(ge),{key:y.id,onClick:x=>e(C)(y.id)},{default:l(()=>[a("span",Qo,[s(E,{name:y.icon},null,8,["name"]),f(" "+L(y.label),1)]),s(e(wt),null,{default:l(()=>[s(e($t),null,{default:l(()=>[s(e(Ct),{"as-child":""},{default:l(()=>[s(e(ye),{onClick:le(x=>e(o)(y.id),["stop","prevent"])},{default:l(()=>[y.isFavorite?P("",!0):(n(),p(E,{key:0,name:"star-unselected",class:"animated-star"})),y.isFavorite?(n(),p(E,{key:1,name:"star-selected",class:"animated-star"})):P("",!0)]),_:2},1032,["onClick"])]),_:2},1024),s(e(Dt),null,{default:l(()=>[a("p",null,L(y.isFavorite?"Remove from favorites":"Add to favorites"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]}),_:1})]),a("div",null,[T.value?(n(),N(ee,{key:0},[e(b)==="devices"?(n(),p(Tn,{key:0})):P("",!0),e(b)==="commandgroups"?(n(),p(hl,{key:1})):P("",!0),e(b)==="commands"?(n(),p(ml,{key:2})):P("",!0),e(b)==="templates"?(n(),p(No,{key:3})):P("",!0),e(b)==="vendors"?(n(),p(Oo,{key:4})):P("",!0),e(b)==="models"?(n(),p(So,{key:5})):P("",!0),e(b)==="tags"?(n(),p(ao,{key:6})):P("",!0)],64)):(n(),N("div",Yo,[a("div",Wo,[a("div",Zo,[a("p",Xo,L(e(b))+" view not found",1)])])]))])])}}},Cd=dt(ed,[["__scopeId","data-v-6b1ceb31"]]);export{Cd as default};
