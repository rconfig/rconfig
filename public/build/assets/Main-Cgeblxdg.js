import{x as v,D as H,E as K,F as le,r as L,c as w,o as d,b as t,w as s,u as e,G as Ce,a as l,H as qe,d as $,t as D,I as ke,s as F,T as we,J as E,K as q,e as P,L as Se,M as J,z as Q,N as He,O as Re,P as ae,Q as Pe,R as te,S as Ie,n as oe,U as Ge,V as Qe,q as Xe,W as Je,X as ne,Y as We,g as Ye,Z as De,$ as Ze,a0 as et,l as tt,a1 as Le,a2 as Ve,a3 as Fe,a4 as Me,A as st,a5 as je,a6 as ze,a7 as lt,p as W,j as Y,k as Z,m as ee,a8 as xe,_ as Be,a9 as at,aa as se,ab as Ne,ac as ot,v as nt,ad as rt,ae as it}from"./app-DxUp2ikP.js";import{_ as Oe,a as Ue,u as dt,m as ut,e as ye,b as ct,c as ft,C as mt}from"./NavPills-DHw-4phP.js";import{_ as pt}from"./DeviceMultiSelect-XRqlTRg1.js";import{_ as re,a as ie,b as de,c as ue,d as ce}from"./useCopy-BZGZhDrx.js";import{_ as fe}from"./SelectGroup-DSY_CilB.js";import{u as Te,_ as me,a as X,b as B,c as pe,d as ge,e as N,f as Ae,g as ve,h as _e,i as gt,j as vt,k as _t,l as Ee,m as xt,n as yt,o as ht}from"./pageSettings-DAbxUp4v.js";import{_ as he,a as bt}from"./ToggleGroupItem-BiqPWGt1.js";import{X as Ke}from"./HoverCardTrigger-BVx7LLp6.js";import{B as $t,L as Ct}from"./loader-circle-DJTzOaRv.js";/* empty css               */import"./square-terminal-C1um3J2w.js";import"./search-C_9qiQjW.js";import"./square-52ZLNmv6.js";import"./calendar-DZYGlDdF.js";import"./RcToolTip.vue_vue_type_script_setup_true_lang-BTl0em2S.js";import"./BadgeList-Ct6VNEkV.js";import"./package-check-YjAL2zb6.js";import"./useMultiSelect-CeSfADyx.js";function kt(m){const x=v(null),h=v([]),n=v({selectedCommand:[],device:[],start_date:"",end_date:""});H(()=>{b()});function b(){K.get("/api/configs/distinct-commands/0").then(u=>{h.value=u.data.data}).catch(u=>{createNotification({type:"danger",message:u.response.data.message})})}function p(){n.value.selectedCommand=[],n.value.device=[],n.value.start_date="",n.value.end_date="",m("updateConfigFilter",n.value)}function _(u){if(u.start&&u.end){const a=`${u.start.year}-${String(u.start.month).padStart(2,"0")}-${String(u.start.day).padStart(2,"0")}`,o=`${u.end.year}-${String(u.end.month).padStart(2,"0")}-${String(u.end.day).padStart(2,"0")}`;n.value.start_date=a,n.value.end_date=o}else n.value.start_date="",n.value.end_date="";x.value=u}function c(){m("updateConfigFilter",n.value)}return{clearAll:p,commands:h,model:n,performFilter:c,setDates:_}}const wt={class:"grid gap-0.5"},St={key:0,class:"space-y-2"},Rt={key:0,class:"grid gap-3"},Pt={class:"grid items-center"},It={class:"grid items-center"},Dt={class:"flex flex-col items-start w-full space-x-2"},be={__name:"ConfigCompareFilterCard",props:{isLoading:Boolean,comparePosition:String},emits:["updateConfigFilter"],setup(m,{emit:x}){const h=x,n=le("formatters"),{clearAll:b,commands:p,model:_,performFilter:c,setDates:u}=kt(h);return(a,o)=>{const f=L("Skeleton"),S=L("Button");return d(),w("div",null,[t(e(Se),{class:"m-2 overflow-hidden"},{default:s(()=>[t(e(Ce),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:s(()=>[l("div",wt,[t(e(qe),{class:"flex items-center gap-2 text-lg group"},{default:s(()=>[$(D(e(n).capitalize(m.comparePosition))+" Device",1)]),_:1})])]),_:1}),t(e(ke),{class:"p-4 pt-0 text-sm"},{default:s(()=>[m.isLoading?(d(),w("div",St,[t(f,{class:"w-1/2 h-4"}),t(f,{class:"w-full h-4"}),t(f,{class:"w-full h-4"}),t(f,{class:"w-full h-4"}),t(f,{class:"w-full h-4"}),t(f,{class:"w-full h-4"}),t(f,{class:"w-full h-4"}),t(f,{class:"w-full h-4"}),t(f,{class:"w-full h-4"})])):F("",!0),t(we,{name:"fade"},{default:s(()=>[m.isLoading?F("",!0):(d(),w("div",Rt,[l("div",Pt,[t(pt,{singleSelect:!0,modelValue:e(_).device,"onUpdate:modelValue":o[0]||(o[0]=i=>e(_).device=i),id:"selectedModelArray",class:"w-full"},null,8,["modelValue"]),o[5]||(o[5]=l("p",{class:"ml-1 text-xs text-muted-foreground"},[$(" Select a device for the left side (Required) "),l("span",{class:"text-red-400"},"*")],-1))]),l("div",It,[t(e(re),{modelValue:e(_).selectedCommand,"onUpdate:modelValue":o[1]||(o[1]=i=>e(_).selectedCommand=i)},{default:s(()=>[t(e(ie),{class:"w-full"},{default:s(()=>[t(e(de),{class:"placeholder:text-muted-foreground",placeholder:"Select a command"})]),_:1}),t(e(ue),{class:"w-full mb-1 focus:outline-none focus-visible:ring-0"},{default:s(()=>[t(e(fe),null,{default:s(()=>[(d(!0),w(E,null,q(e(p),i=>(d(),P(e(ce),{value:i.command},{default:s(()=>[$(D(i.command),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),o[6]||(o[6]=l("p",{class:"ml-1 text-xs text-muted-foreground"},"Optionally select a command to filter the results",-1))]),l("div",Dt,[t(Oe,{class:"w-full",onDateChange:o[2]||(o[2]=i=>e(u)(i))}),o[7]||(o[7]=l("p",{class:"ml-1 text-xs text-muted-foreground"},"Set date range. Last 7 days by default",-1))])]))]),_:1})]),_:1}),t(e(Ue),{class:"flex flex-row items-center justify-end px-4 py-2 border-t bg-muted/50"},{default:s(()=>[m.isLoading?F("",!0):(d(),P(S,{key:0,variant:"outline",onClick:o[3]||(o[3]=i=>e(b)()),class:"flex items-center h-6 px-2 py-1 ml-2 text-xs text-muted-foreground"},{default:s(()=>[...o[8]||(o[8]=[$(" Clear ",-1)])]),_:1})),m.isLoading?F("",!0):(d(),P(S,{key:1,variant:"primary",onClick:o[4]||(o[4]=i=>e(c)(m.comparePosition)),class:"h-6 px-2 py-1 ml-2 text-xs bg-blue-600 hover:bg-blue-700 hover:animate-pulse"},{default:s(()=>[...o[9]||(o[9]=[$(" Filter ",-1)])]),_:1}))]),_:1})]),_:1})])}}};function Lt(m,x){const{toastError:h}=J(),n=v(!1),b=v(1),p=v(1),_=v(parseInt(localStorage.getItem("perPage")||"5")),c=v([]);H(()=>{m.filterData.device.length>=1&&u()});function u(){if(n.value=!0,m.filterData.device.length===0){console.error("No device selected.");return}K.get("/api/configs/all-by-deviceid/"+m.filterData.device[0].id+"/1?filter[q]="+m.filterData.selectedCommand,{params:{perPage:_.value,page:b.value}}).then(a=>{c.value=a.data,p.value=a.data.last_page,n.value=!1}).catch(a=>{console.error("Error fetching commands:",a),h("Error","Failed to fetch commands."),n.value=!1})}return Q([b,_],()=>{u()}),Q(_,a=>{localStorage.setItem("perPage",a.toString())}),{currentPage:b,isLoading:n,lastPage:p,perPage:_,results:c}}const Vt={class:"w-full"},Ft={key:0,class:"min-h-[35dvh] flex items-center justify-center"},Mt={class:"text-sm text-center"},jt={class:"text-muted-foreground"},zt={key:1,class:"min-h-[35dvh] flex-1 w-full"},Bt={class:"px-6"},Nt={key:0,class:"flex items-center mt-4"},Ot={class:"text-sm"},$e={__name:"ConfigCompareFilterConfigResults",props:{filterData:Object,comparePosition:String},emits:["updateSelectedRows"],setup(m,{emit:x}){const h=le("formatters"),n=x,b=m,{currentPage:p,isLoading:_,lastPage:c,perPage:u,results:a}=Lt(b),{selectedRows:o,toggleSingleSelectRow:f}=Te(a);return Q(o,S=>{n("updateSelectedRows",S)}),(S,i)=>{const g=L("Button"),M=L("Checkbox"),C=L("Icon");return d(),w("div",Vt,[m.filterData.device.length===0?(d(),w("div",Ft,[l("div",Mt,[l("span",jt,D(e(h).capitalize(m.comparePosition))+" selection. No results, yet!",1),i[4]||(i[4]=l("br",null,null,-1)),i[5]||(i[5]=l("span",{class:"text-muted-foreground"},"Add filters to select configurations for comparison",-1))])])):F("",!0),m.filterData.device.length>0?(d(),w("div",zt,[l("div",Bt,[t(e(ve),null,{default:s(()=>[t(e(me),null,{default:s(()=>[t(e(X),null,{default:s(()=>[t(e(B),{class:"w-[2%]"}),t(e(B),{class:"w-[5%]"},{default:s(()=>[t(g,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[0]||(i[0]=k=>S.toggleSort("id"))},{default:s(()=>[...i[6]||(i[6]=[l("span",{class:"ml-2"},"ID",-1)])]),_:1})]),_:1}),t(e(B),{class:"w-[20%]"},{default:s(()=>[t(g,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[1]||(i[1]=k=>S.toggleSort("cred_name"))},{default:s(()=>[...i[7]||(i[7]=[l("span",{class:"ml-2"},"Name",-1)])]),_:1})]),_:1}),t(e(B),{class:"w-[30%]"},{default:s(()=>[...i[8]||(i[8]=[$("Command",-1)])]),_:1}),t(e(B),{class:"w-[30%]"},{default:s(()=>[...i[9]||(i[9]=[$("Filename",-1)])]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[...i[10]||(i[10]=[$("Created",-1)])]),_:1})]),_:1})]),_:1}),t(e(pe),null,{default:s(()=>[e(_)?(d(),P(ge,{key:0})):e(_)?(d(),P(Ae,{key:2})):(d(!0),w(E,{key:1},q(e(a).data,k=>(d(),P(e(X),{onClick:R=>e(f)(k.id),class:"cursor-pointer hover:bg-rcgray-800",key:k.id},{default:s(()=>[t(e(N),{class:"text-start"},{default:s(()=>[t(M,{class:"cursor-pointer",id:"select-"+k.id,checked:!!e(o).includes(k.id),onClick:R=>e(f)(k.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(k.id),1)]),_:2},1024),t(e(N),{class:"text-start"}),t(e(N),{class:"text-start"},{default:s(()=>[$(D(k.command),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(k.config_filename),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(e(h).formatTime(k.created_at)),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1}),t(_e,{currentPage:e(p),lastPage:e(c),perPage:e(u),"onUpdate:currentPage":i[2]||(i[2]=k=>p.value=k),"onUpdate:perPage":i[3]||(i[3]=k=>u.value=k)},null,8,["currentPage","lastPage","perPage"]),e(o).length>0?(d(),w("div",Nt,[t(e(He),{variant:"outline",class:"py-1 mt-1 bg-rcgray-800"},{default:s(()=>[t(C,{icon:"mdi:check-circle",class:"mr-2 text-green-500"}),l("span",Ot,"Config ID "+D(e(o))+" selected for comparison",1)]),_:1})])):F("",!0)])])):F("",!0),i[11]||(i[11]=l("div",{class:"w-full my-4 border-t"},null,-1))])}}},Ut={class:"flex flex-col"},Tt={class:"flex items-center p-2"},At={class:"flex items-center gap-2 ml-auto"},Et={__name:"CompareDiffEditorComponent",props:{leftSelectedId:Number,rightSelectedId:Number,configResultsLeft:Object,configResultsRight:Object},setup(m){const x=m,h=v([]),{checkDarkModeIsSet:n,checkLineNumbersIsSet:b,copyItem:p,download:_,initDiffEditor:c,toggleEditorDarkMode:u,toggleEditorLineNumbers:a}=dt(ut);H(()=>{o(),f()});function o(){n()&&h.value.push("dark"),b()&&h.value.push("lineNumbers")}function f(){var S=ye.createModel(x.configResultsLeft.filecontent,"text/plain"),i=ye.createModel(x.configResultsRight.filecontent,"text/plain");let g=c("code-editor__code-pre","rconfig");g&&g.setModel({original:S,modified:i})}return(S,i)=>{const g=L("Icon"),M=L("Button"),C=L("Separator");return d(),w(E,null,[l("div",Ut,[l("div",Tt,[i[4]||(i[4]=l("div",{class:"flex items-center gap-2"},null,-1)),l("div",null,[t(M,{variant:"ghost",onClick:e(p),title:"copyItem"},{default:s(()=>[t(g,{icon:"mdi:content-copy"})]),_:1},8,["onClick"]),t(M,{variant:"ghost",class:"ml-1",onClick:i[0]||(i[0]=k=>e(_)(S.model.fileName)),title:"download"},{default:s(()=>[t(g,{icon:"mingcute:download-fill"})]),_:1})]),t(C,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),l("div",At,[t(e(bt),{modelValue:h.value,"onUpdate:modelValue":i[3]||(i[3]=k=>h.value=k),type:"multiple"},{default:s(()=>[t(e(he),{value:"dark",title:"Toggle bold",onClick:i[1]||(i[1]=k=>e(u)())},{default:s(()=>[t(g,{icon:"mdi:theme-light-dark",class:"w-4 h-4"})]),_:1}),t(e(he),{value:"lineNumbers",title:"Line Numbers",onClick:i[2]||(i[2]=k=>e(a)())},{default:s(()=>[t(g,{icon:"mingcute:numbers-09-sort-ascending-line",class:"w-4 h-4"})]),_:1})]),_:1},8,["modelValue"])]),t(C,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),i[5]||(i[5]=l("span",null,"CONFIG",-1))]),t(C,{class:"relative w-full h-px shrink-0 bg-border"})]),i[6]||(i[6]=l("div",{class:"code-editor__code-pre",id:"code-editor__code-pre",style:{height:"calc(80vh)"}},null,-1))],64)}}};function Kt(m){const x=v(!0),h=v([]),n=v([]),b=v(parseInt(m.leftSelectedId[0],10)),p=v(parseInt(m.rightSelectedId[0],10)),{toastError:_}=J();H(()=>{x.value=!0,c(b.value),u(p.value),setTimeout(()=>{x.value=!1},Math.floor(Math.random()*1501)+500)});function c(o){K.get("/api/configs/"+o).then(async f=>{h.value=f.data,h.value.filecontent=await a(o)}).catch(f=>{console.error("Error fetching commands:",f),_("Error","Failed to fetch commands.")})}function u(o){K.get("/api/configs/"+o).then(async f=>{n.value=f.data,n.value.filecontent=await a(o)}).catch(f=>{console.error("Error fetching commands:",f),_("Error","Failed to fetch commands.")})}function a(o){return K.get("/api/configs/view-config/"+o).then(f=>f.data.data.content).catch(f=>{console.error("Error fetching commands:",f),_("Error","Failed to fetch commands.")})}return{isLoadingComponent:x,configResultsLeft:h,configResultsRight:n,getConfigLeft:c,getConfigRight:u,getConfigFileContent:a}}const qt={key:0,class:"flex items-center justify-center h-full mt-48"},Ht={__name:"ConfigCompareResults",props:{leftSelectedId:Array,rightSelectedId:Array},setup(m){const x=m,{isLoadingComponent:h,configResultsLeft:n,configResultsRight:b}=Kt(x);return(p,_)=>(d(),w(E,null,[e(h)?(d(),w("div",qt,[t(Re,{text:"Running comparison"})])):F("",!0),e(h)?F("",!0):(d(),P(Et,{key:1,configResultsRight:e(b),configResultsLeft:e(n),leftSelectedId:m.leftSelectedId,rightSelectedId:m.rightSelectedId},null,8,["configResultsRight","configResultsLeft","leftSelectedId","rightSelectedId"]))],64))}};function Gt(){const m=v({selectedCommand:[],device:[],start_date:"",end_date:""}),x=v({selectedCommand:[],device:[],start_date:"",end_date:""}),h=v(100),n=v(200),b=v([]),p=v(!1),_=v(!1),c=v(null),u=v(300),a=v(400),o=v([]),f=ae(),{toastSuccess:S,toastError:i}=J(),g=(V,z)=>{V==="left"?m.value=z:V==="right"&&(x.value=z),n.value+=1,a.value+=1},M=()=>{if(b.length===0||o.length===0){i("Please select configurations for comparison");return}S("Comparing configurations...","",2e3),p.value=!0},C=()=>{f.go(-1)},k=()=>{b.value=[],m.value={selectedCommand:[],device:[],start_date:"",end_date:""},o.value=[],x.value={selectedCommand:[],device:[],start_date:"",end_date:""},p.value=!1,n.value+=1,h.value+=1,a.value+=1,u.value+=1};function R(){c!=null&&c.value.isCollapsed?c==null||c.value.expand():c==null||c.value.collapse(),_.value=!_.value}function r(){c!=null&&c.value.isCollapsed?c==null||c.value.expand():c==null||c.value.collapse(),_.value=!_.value}return{close:C,closeNav:R,leftConfigData:m,leftConfigFilterKey:h,leftConfigResultsKey:n,leftSelectedId:b,loadComparison:p,navClosed:_,openNav:r,panelElement3:c,reset:k,rightConfigData:x,rightConfigFilterKey:u,rightConfigResultsKey:a,rightSelectedId:o,sendConfigCompare:M,updateConfigFilterData:g}}const Qt={class:"w-screen h-[calc(100vh-72px)] border",style:{display:"flex","flex-direction":"column","background-color":"rgb(27, 29, 33)","border-radius":"16px",margin:"4px 8px 8px","max-width":"calc(100% - 16px)",overflow:"hidden"}},Xt={class:"flex justify-between w-full p-2 border-b"},Jt={class:"flex items-center justify-end"},Wt={key:0},Yt={class:"text-sm"},Zt={class:"flex items-center justify-between p-2 mb-2 border-b flex-shrink-0"},es={class:"relative flex flex-col items-center px-2"},ts={class:"w-full mb-4"},ss={class:"w-full mb-4"},ls={class:"h-[80dvh]"},as={class:"flex items-center justify-between p-2 mb-2 border-b"},os={class:"flex items-center"},ns={class:"mx-2"},rs={class:"border-t bg-muted/20 py-1 mt-2"},is={class:"flex items-center text-xs py-2"},ds=["href"],us={key:0,class:"relative flex flex-col items-center"},cs={key:1},fs={__name:"ConfigCompare",setup(m){const{close:x,closeNav:h,leftConfigData:n,leftConfigFilterKey:b,leftConfigResultsKey:p,leftSelectedId:_,loadComparison:c,navClosed:u,reset:a,openNav:o,panelElement3:f,rightConfigData:S,rightConfigFilterKey:i,rightConfigResultsKey:g,rightSelectedId:M,sendConfigCompare:C,updateConfigFilterData:k}=Gt();return(R,r)=>{const V=L("Button"),z=L("RcIcon"),y=L("Badge"),j=L("ResizablePanel"),A=L("ResizableHandle"),G=L("ResizablePanelGroup");return d(),w("div",Qt,[l("div",Xt,[t(V,{onClick:r[0]||(r[0]=O=>e(x)()),size:"sm",variant:"outline",class:"gap-1 border-none hover:bg-rcgray-800"},{default:s(()=>[t(e(Ke),{size:"16",class:"text-muted-foreground hover:animate-pulse"})]),_:1}),r[11]||(r[11]=l("h2",{class:"items-center content-center text-muted-foreground"}," Config Compare ",-1)),l("div",Jt,[e(_).length>0&&e(M).length>0?(d(),w("div",Wt,[t(y,{variant:"outline",class:"py-1 mt-1 bg-rcgray-800"},{default:s(()=>[t(z,{name:"status-green",class:"mr-2"}),l("span",Yt,"Compare Config ID "+D(e(_))+" with Config ID "+D(e(M)),1)]),_:1})])):F("",!0),e(_)&&e(M)?(d(),P(V,{key:1,onClick:r[1]||(r[1]=O=>e(C)(e(_),e(M))),class:"h-8 ml-2 text-white bg-blue-600 hover:bg-blue-700"},{default:s(()=>[...r[9]||(r[9]=[$(" Compare ",-1)])]),_:1})):F("",!0),e(_)&&e(M)?(d(),P(V,{key:2,variant:"outline",onClick:r[2]||(r[2]=O=>e(a)()),class:"h-8 ml-2 text-white"},{default:s(()=>[...r[10]||(r[10]=[$(" Reset ",-1)])]),_:1})):F("",!0)])]),t(G,{direction:"horizontal",class:""},{default:s(()=>[t(j,{"default-size":25,"max-size":30,"min-size":10,collapsible:"","collapsed-size":0,ref_key:"panelElement3",ref:f,class:"flex flex-col"},{default:s(()=>[l("div",Zt,[r[12]||(r[12]=l("h1",{class:"ml-4 text-sm font-semibold"},"Search Options",-1)),t(Pe,{class:"mr-2",onClose:r[3]||(r[3]=O=>e(h)())})]),t(e(te),{class:"flex-1 min-h-0"},{default:s(()=>[l("div",es,[l("div",ts,[(d(),P(be,{key:e(b),onUpdateConfigFilter:r[4]||(r[4]=O=>e(k)("left",O)),comparePosition:"left"}))]),r[13]||(r[13]=l("div",{class:"w-full my-4 border-t"},null,-1)),l("div",ss,[(d(),P(be,{key:e(i),onUpdateConfigFilter:r[5]||(r[5]=O=>e(k)("right",O)),comparePosition:"right"}))]),r[14]||(r[14]=l("div",{class:"w-full my-4 border-t"},null,-1))])]),_:1})]),_:1},512),t(A,{"with-handle":""}),t(j,{class:"min-h-[86vh]"},{default:s(()=>[t(e(te),{class:"border border-none rounded-md"},{default:s(()=>[l("div",ls,[l("div",as,[l("div",os,[t(Ie,{class:"ml-2",onOpenNav:r[6]||(r[6]=O=>e(o)()),navPanelBtnState:e(u)},null,8,["navPanelBtnState"]),l("h1",{class:oe(["w-full text-sm font-semibold",e(u)===!1?"ml-2 ":""])}," Filter Results ",2)]),l("div",ns,[t(e(Ge),null,{default:s(()=>[t(e(Qe),{asChild:""},{default:s(()=>[t(e(Xe),{class:"cursor-pointer transition-transform duration-300 hover:text-blue-500 hover:animate-pulse",size:"16"})]),_:1}),t(e(Je),{class:"w-64 p-4 shadow-lg border bg-card/95 backdrop-blur-xl pb-0",align:"end"},{default:s(()=>[r[16]||(r[16]=l("div",{class:"space-y-3"},[l("div",{class:"text-xs font-medium text-foreground border-b pb-2"},"Filter Results"),l("div",{class:"space-y-2 text-sm"},[l("div",{class:"flex justify-between"},[l("span",{class:"text-muted-foreground"},"Filter results based on your criteria."),l("span",{class:"font-medium"})])])],-1)),l("div",rs,[l("div",is,[l("a",{href:R.$rconfigDocsUrl+"/configtools/compare/",target:"_blank",class:"text-muted-foreground hover:text-foreground transition-colors flex items-center gap-1"},[t(e($t),{size:"12"}),r[15]||(r[15]=$(" View Documentation ",-1))],8,ds)])])]),_:1})]),_:1})])]),e(c)?F("",!0):(d(),w("div",us,[(d(),P($e,{key:e(p),filterData:e(n),onUpdateSelectedRows:r[7]||(r[7]=O=>_.value=O),comparePosition:"left"},null,8,["filterData"])),(d(),P($e,{key:e(g),filterData:e(S),onUpdateSelectedRows:r[8]||(r[8]=O=>M.value=O),comparePosition:"right"},null,8,["filterData"]))])),e(c)?(d(),w("div",cs,[t(Ht,{leftSelectedId:e(_)[0],rightSelectedId:e(M)[0]},null,8,["leftSelectedId","rightSelectedId"])])):F("",!0)])]),_:1})]),_:1})]),_:1})])}}},ms={class:"flex justify-between"},ps={class:"flex items-center"},gs={class:"flex items-center"},vs={class:"grid gap-4 px-6 py-4 overflow-y-auto"},_s={class:"flex flex-col justify-between"},xs={key:1,class:"space-y-4"},ys={class:"mb-2"},hs={class:"text-sm font-medium rc-text-sm-muted underline"},bs=["innerHTML"],$s={__name:"PeekConfigSearchMatchesDialog",props:{editId:{type:Number,required:!0},record:{type:Object,required:!0},searchString:{type:String,required:!0}},setup(m){v({});const x=ne(),h=v({}),n=v(!0),b=v(localStorage.getItem("selectedLanguage")||"language-plaintext"),{closeDialog:p,isDialogOpen:_}=x;J();const{copy:c,copied:u}=We(),a=m,{matches:o}=a.record,f=["bash","c","cpp","css","html","java","javascript","language-plaintext","php","python","typescript"];H(()=>{window.addEventListener("keydown",i),n.value=!1});const S=R=>{if(!a.searchString||!R)return R;const r=Array.isArray(R)?R.join(`
`):String(R),V=a.searchString.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),z=new RegExp(`(${V})`,"gi");return r.replace(z,'<span class="highlightMatch">$1</span>').replace(/\n/g,"<br>")};function i(R){R.key==="Escape"&&k()}const g=Ye(()=>a.record.file);De(()=>{window.removeEventListener("keydown",i)});const M=R=>{h.value[R]=!0},C=R=>{h.value[R]=!1};function k(){p("peek-config-search-matches-dialog-"+a.editId)}return(R,r)=>{const V=L("RcIcon"),z=L("Button"),y=Ze("highlightjs");return d(),P(e(ze),{open:e(_)("peek-config-search-matches-dialog-"+m.editId)},{default:s(()=>[t(e(et),{"as-child":""},{default:s(()=>[tt(R.$slots,"default")]),_:3}),t(e(Le),{class:"sm:max-w-[70dvw] grid-rows-[auto_minmax(0,1fr)_auto] p-0 max-h-[90dvh]",onEscapeKeyDown:r[5]||(r[5]=j=>e(p)("peek-config-search-matches-dialog-"+m.editId)),onPointerDownOutside:r[6]||(r[6]=j=>e(p)("peek-config-search-matches-dialog-"+m.editId)),onCloseClicked:r[7]||(r[7]=j=>e(p)("peek-config-search-matches-dialog-"+m.editId))},{default:s(()=>[t(e(Ve),{class:"p-6 pb-0"},{default:s(()=>[t(e(Fe),null,{default:s(()=>[$("Configuration Quick Peek (Config ID: "+D(m.editId)+")",1)]),_:1}),t(e(Me),null,{default:s(()=>[l("div",ms,[l("div",ps,[r[8]||(r[8]=l("div",{class:"mr-2"},"Language Options:",-1)),t(e(re),{modelValue:b.value,"onUpdate:modelValue":r[0]||(r[0]=j=>b.value=j)},{default:s(()=>[t(e(ie),{class:"w-[180px]"},{default:s(()=>[t(e(de),{placeholder:"Select a language"})]),_:1}),t(e(ue),null,{default:s(()=>[t(e(fe),null,{default:s(()=>[(d(),w(E,null,q(f,j=>t(e(ce),{value:j,key:j},{default:s(()=>[$(D(j),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),l("div",gs,[$(" Path: "+D(g.value)+" ",1),l("span",{class:"ml-2 cursor-pointer",onMouseover:r[1]||(r[1]=j=>M("fileLocation")),onMouseleave:r[2]||(r[2]=j=>C("fileLocation")),onClick:r[3]||(r[3]=j=>e(c)(g.value))},[t(V,{name:"copy-transition",isActive:e(u),size:16},null,8,["isActive"])],32)])])]),_:1})]),_:1}),l("div",vs,[l("div",_s,[n.value?(d(),P(Re,{key:0})):(d(),w("div",xs,[(d(!0),w(E,null,q(e(o),(j,A)=>(d(),w("div",{key:A,class:"context-block border rounded-lg p-4"},[l("div",ys,[l("span",hs," Matched Line: "+D(j.line_number),1)]),st(l("pre",{class:oe([b.value,"whitespace-pre-wrap text-sm p-3 rounded border overflow-x-auto"]),innerHTML:S(j.context)},null,10,bs),[[y]])]))),128))]))])]),t(e(je),{class:"p-6 pt-0"},{default:s(()=>[t(z,{onClick:r[4]||(r[4]=j=>k()),variant:"outline"},{default:s(()=>[...r[9]||(r[9]=[$(" Close ",-1)])]),_:1})]),_:1})]),_:1})]),_:3},8,["open"])}}};function Cs(m){const x=le("formatters"),h=ne(),{openDialog:n,closeDialog:b,isDialogOpen:p}=h,_=ae(),c=v(0),u=v([]),a=v(!1),o=v(1),f=v(1),S=v(5),i=v([]),g=lt({device_name:"",command:"",device_category:"",search_string:"",lines_before:5,lines_after:5,latest_version_only:!0,ignore_case:!0,start_date:"",end_date:""});Q(()=>m.filters,V=>{M(V),C()});function M(V){i.value=[],u.value=[],c.value=0,o.value=1,f.value=1,Object.assign(g,V)}const C=async()=>{var V,z;a.value=!0;try{const y=await K.post("/api/configs/search",{device_name:g.device_name,command:g.command,device_category:g.device_category,search_string:g.search_string,lines_before:g.lines_before,lines_after:g.lines_after,latest_version_only:g.latest_version_only,ignore_case:g.ignore_case,start_date:g.start_date+" 00:00:00",end_date:g.end_date+" 23:59:59",page:f.value,per_page:S.value});y.data.data.length&&(i.value=y.data.data,c.value=y.data.current_page,o.value=y.data.last_page)}catch(y){console.log(y),u.value=((z=(V=y.response)==null?void 0:V.data)==null?void 0:z.errors)||[]}finally{a.value=!1}};function k(V){_.push({name:"configsview",params:{id:parseInt(V)},query:{ref:"configsearch"}})}function R(V){S.value=V,C()}function r(V){console.log(V),f.value=V,C()}return{changePage:r,currentPage:c,errors:u,formatters:x,isDialogOpen:p,isFetching:a,lastPage:o,openDialog:n,perPage:S,results:i,searchModel:g,updatePerpage:R,viewDetailsPane:k}}const ks={class:"px-6"},ws={class:"flex items-center border-b"},Ss={key:0,class:"flex items-center justify-center my-4"},Rs={key:0},Ps={key:1},Is={key:2,class:"flex items-center justify-center pb-8"},Ds={__name:"ConfigSearchResultsTable",props:{filters:Object},setup(m){const x=m,{changePage:h,currentPage:n,errors:b,formatters:p,isDialogOpen:_,isFetching:c,lastPage:u,openDialog:a,perPage:o,results:f,searchModel:S,updatePerpage:i,viewDetailsPane:g}=Cs(x);return(M,C)=>{const k=L("Icon"),R=L("Button");return d(),w("div",ks,[t(e(ve),null,{default:s(()=>[t(e(me),null,{default:s(()=>[t(e(X),null,{default:s(()=>[t(e(B),{class:"w-[5%]"},{default:s(()=>[...C[2]||(C[2]=[$("ID",-1)])]),_:1}),t(e(B),{class:"w-[20%]"},{default:s(()=>[...C[3]||(C[3]=[$("Device",-1)])]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[...C[4]||(C[4]=[$("Command Group",-1)])]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[...C[5]||(C[5]=[$("Filesize",-1)])]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[...C[6]||(C[6]=[$("Config date",-1)])]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[...C[7]||(C[7]=[$("Matches",-1)])]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[...C[8]||(C[8]=[$("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e(pe),null,{default:s(()=>[e(c)?(d(),P(ge,{key:0})):(d(!0),w(E,{key:1},q(e(f),r=>(d(),P(e(X),{key:r.id},{default:s(()=>[t(e(N),{class:"text-start"},{default:s(()=>[$(D(r.id),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(r.device_name),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(r.device_category),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(e(p).formatFileSize(r.config_filesize)),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(e(p).formatTime(r.config_date)),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[t(e(W),null,{default:s(()=>[t(e(Y),null,{default:s(()=>[t(e(Z),{"as-child":""},{default:s(()=>[t(R,{variant:"ghost",onClick:V=>e(a)("peek-config-search-matches-dialog-"+r.id),class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl"},{default:s(()=>[l("span",ws,[t(k,{icon:"charm:eye",class:"mr-2 text-muted-foreground hover:text-blue-500"}),$(" "+D(r.matches.length?r.matches.length:"No")+" match"+D(r.matches.length>1?"es":""),1)])]),_:2},1032,["onClick"])]),_:2},1024),t(e(ee),{class:"text-white bg-rcgray-800"},{default:s(()=>[...C[9]||(C[9]=[l("p",null,"View Matches",-1)])]),_:1})]),_:2},1024)]),_:2},1024)]),_:2},1024),t(e(N),{class:"flex items-center"},{default:s(()=>[t(e(W),null,{default:s(()=>[t(e(Y),null,{default:s(()=>[t(e(Z),{"as-child":""},{default:s(()=>[t(R,{variant:"ghost",onClick:V=>e(a)("peek-config-dialog-"+r.id)},{default:s(()=>[t(k,{icon:"lets-icons:view-alt-fill",class:"size-6 text-muted-foreground hover:text-blue-500"})]),_:1},8,["onClick"])]),_:2},1024),t(e(ee),{class:"text-white bg-rcgray-800"},{default:s(()=>[...C[10]||(C[10]=[l("p",null,"Peek Config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),t(e(W),null,{default:s(()=>[t(e(Y),null,{default:s(()=>[t(e(Z),{"as-child":""},{default:s(()=>[t(R,{variant:"ghost",onClick:V=>e(g)(r.id)},{default:s(()=>[t(k,{icon:"hugeicons:file-view",class:"size-5 text-muted-foreground hover:text-blue-500"})]),_:1},8,["onClick"])]),_:2},1024),t(e(ee),{class:"text-white bg-rcgray-800"},{default:s(()=>[...C[11]||(C[11]=[l("p",null,"Open Config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),e(_)("peek-config-search-matches-dialog-"+r.id)?(d(),P($s,{key:0,record:r,editId:r.id,searchString:e(S).search_string},null,8,["record","editId","searchString"])):F("",!0),e(_)("peek-config-dialog-"+r.id)?(d(),P(ct,{key:1,editId:r.id},null,8,["editId"])):F("",!0)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),!e(c)&&e(f).length===0?(d(),w("div",Ss,[Object.keys(e(b)).length===0?(d(),w("div",Rs,"No results found.")):F("",!0),Object.keys(e(b)).length?(d(),w("div",Ps,[(d(!0),w(E,null,q(e(b),r=>(d(),w("span",{key:r,class:"col-span-3 col-start-2 text-sm text-red-400"},[C[12]||(C[12]=l("br",null,null,-1)),$(" "+D(r[0]),1)]))),128))])):F("",!0)])):F("",!0),!e(c)&&e(f).length>0?(d(),P(_e,{key:1,currentPage:e(n),lastPage:e(u),perPage:e(o),"onUpdate:currentPage":C[0]||(C[0]=r=>e(h)(r)),"onUpdate:perPage":C[1]||(C[1]=r=>e(i)(r))},null,8,["currentPage","lastPage","perPage"])):F("",!0),!e(c)&&e(n)>=e(u)?(d(),w("div",Is,[...C[13]||(C[13]=[l("hr",{class:"flex-grow mx-8"},null,-1),l("div",{class:"text-muted-foreground"},"No more results to load.",-1),l("hr",{class:"flex-grow mx-8"},null,-1)])])):F("",!0)])}}};function Ls(m){const x=v({device_name:"",command:"",device_category:"",search_string:"",lines_before:5,lines_after:5,latest_version_only:v(!0),ignore_case:v(!0),start_date:"",end_date:""}),h=v(null),n=v([]);H(()=>{b()});function b(){K.get("/api/configs/distinct-commands/0").then(u=>{n.value=u.data.data}).catch(u=>{createNotification({type:"danger",message:u.response.data.message})})}function p(){x.value.device_name="",x.value.command="",x.value.device_category="",x.value.search_string="",x.value.lines_before=5,x.value.lines_after=5,x.value.latest_version_only=v(!0),x.value.ignore_case=v(!0),x.value.start_date="",x.value.end_date="",m("searchCompleted",x.value)}function _(u){if(u.start&&u.end){const a=`${u.start.year}-${String(u.start.month).padStart(2,"0")}-${String(u.start.day).padStart(2,"0")}`,o=`${u.end.year}-${String(u.end.month).padStart(2,"0")}-${String(u.end.day).padStart(2,"0")}`;x.start_date=a,x.end_date=o}else x.start_date="",x.end_date="";h.value=u}function c(){m("searchCompleted",x.value)}return{clearAll:p,commands:n,model:x,performSearch:c,setDates:_}}const Vs={key:0,class:"space-y-2"},Fs={key:0,class:"grid gap-3"},Ms={class:"grid items-center"},js={class:"grid items-center"},zs={class:"grid items-center"},Bs={class:"grid items-center"},Ns={class:"flex items-center mt-4 space-x-4"},Os={class:"flex items-center mb-4 space-x-4"},Us={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2"},Ts={class:"flex flex-col items-start"},As={class:"flex flex-col items-start"},Es={class:"flex flex-col items-start w-full space-x-2"},Ks={__name:"ConfigSearchFilterCard",props:{isLoading:Boolean},emits:["searchCompleted"],setup(m,{emit:x}){const h=x,{clearAll:n,commands:b,model:p,performSearch:_,setDates:c}=Ls(h);return(u,a)=>{const o=L("Skeleton"),f=L("Input"),S=L("Label"),i=L("Button");return d(),w("div",null,[t(e(Se),{class:"m-2 overflow-hidden"},{default:s(()=>[t(e(Ce),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:s(()=>[...a[11]||(a[11]=[l("div",{class:"grid gap-0.5"},null,-1)])]),_:1}),t(e(ke),{class:"p-4 pt-0 text-sm"},{default:s(()=>[m.isLoading?(d(),w("div",Vs,[t(o,{class:"w-1/2 h-4"}),t(o,{class:"w-full h-4"}),t(o,{class:"w-full h-4"}),t(o,{class:"w-full h-4"}),t(o,{class:"w-full h-4"}),t(o,{class:"w-full h-4"}),t(o,{class:"w-full h-4"}),t(o,{class:"w-full h-4"}),t(o,{class:"w-full h-4"})])):F("",!0),t(we,{name:"fade"},{default:s(()=>[m.isLoading?F("",!0):(d(),w("div",Fs,[l("div",Ms,[t(e(re),{modelValue:e(p).command,"onUpdate:modelValue":a[0]||(a[0]=g=>e(p).command=g)},{default:s(()=>[t(e(ie),{class:"w-full"},{default:s(()=>[t(e(de),{class:"placeholder:text-muted-foreground",placeholder:"Select a command"})]),_:1}),t(e(ue),{class:"w-full mb-1 focus:outline-none focus-visible:ring-0"},{default:s(()=>[t(e(fe),null,{default:s(()=>[(d(!0),w(E,null,q(e(b),g=>(d(),P(e(ce),{value:g.command},{default:s(()=>[$(D(g.command),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:1})]),_:1},8,["modelValue"]),a[12]||(a[12]=l("p",{class:"ml-1 text-xs text-muted-foreground"},[$(" Required "),l("span",{class:"text-red-400"},"*")],-1))]),l("div",js,[t(f,{modelValue:e(p).search_string,"onUpdate:modelValue":a[1]||(a[1]=g=>e(p).search_string=g),id:"search_string",autocomplete:"off",placeholder:"Search String",class:"w-full mt-4 mb-1 focus:outline-none focus-visible:ring-0"},null,8,["modelValue"]),a[13]||(a[13]=l("p",{class:"ml-1 text-xs text-muted-foreground"},[$(" Required "),l("span",{class:"text-red-400"},"*")],-1))]),l("div",zs,[t(f,{modelValue:e(p).device_name,"onUpdate:modelValue":a[2]||(a[2]=g=>e(p).device_name=g),id:"device_name",autocomplete:"off",placeholder:"Device Name",class:"w-full mt-4 mb-1 focus:outline-none focus-visible:ring-0"},null,8,["modelValue"]),a[14]||(a[14]=l("p",{class:"ml-1 text-xs text-muted-foreground"},"Enter full or partial device name",-1))]),l("div",Bs,[t(f,{modelValue:e(p).device_category,"onUpdate:modelValue":a[3]||(a[3]=g=>e(p).device_category=g),id:"device_category",autocomplete:"off",placeholder:"Command Group",class:"w-full mt-4 mb-1 focus:outline-none focus-visible:ring-0"},null,8,["modelValue"]),a[15]||(a[15]=l("p",{class:"ml-1 text-xs text-muted-foreground"},"Enter full or partial command group name",-1))]),l("div",Ns,[t(e(xe),{id:"ignore_case",checked:e(p).ignore_case,"onUpdate:checked":a[4]||(a[4]=g=>e(p).ignore_case=g)},null,8,["checked"]),a[16]||(a[16]=l("label",{for:"ignore_case",class:"text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Ignore Case ",-1))]),l("div",Os,[t(e(xe),{id:"latest_version_only",checked:e(p).latest_version_only,"onUpdate:checked":a[5]||(a[5]=g=>e(p).latest_version_only=g)},null,8,["checked"]),a[17]||(a[17]=l("label",{for:"latest_version_only",class:"text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70"}," Latest Version Only ",-1))]),l("div",Us,[l("div",Ts,[t(f,{type:"number",id:"lines_before",modelValue:e(p).lines_before,"onUpdate:modelValue":a[6]||(a[6]=g=>e(p).lines_before=g)},null,8,["modelValue"]),t(S,{for:"lines_before",class:"mt-2 text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:s(()=>[...a[18]||(a[18]=[$(" Lines Before ",-1)])]),_:1})]),l("div",As,[t(f,{type:"number",id:"lines_after",modelValue:e(p).lines_after,"onUpdate:modelValue":a[7]||(a[7]=g=>e(p).lines_after=g)},null,8,["modelValue"]),t(S,{for:"lines_after",class:"mt-2 text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:s(()=>[...a[19]||(a[19]=[$(" Lines After ",-1)])]),_:1})])]),l("div",Es,[t(Oe,{class:"w-full",onDateChange:a[8]||(a[8]=g=>e(c)(g))}),a[20]||(a[20]=l("p",{class:"ml-1 text-xs text-muted-foreground"},"Set date range. Last 7 days by default",-1))])]))]),_:1})]),_:1}),t(e(Ue),{class:"flex flex-row items-center justify-end px-4 py-2 border-t bg-muted/50"},{default:s(()=>[m.isLoading?F("",!0):(d(),P(i,{key:0,variant:"outline",onClick:a[9]||(a[9]=g=>e(n)()),class:"flex items-center h-6 px-2 py-1 ml-2 text-xs text-muted-foreground"},{default:s(()=>[...a[21]||(a[21]=[$(" Clear ",-1)])]),_:1})),m.isLoading?F("",!0):(d(),P(i,{key:1,variant:"primary",onClick:a[10]||(a[10]=g=>e(_)()),class:"h-6 px-2 py-1 ml-2 text-xs bg-blue-600 hover:bg-blue-700 hover:animate-pulse"},{default:s(()=>[...a[22]||(a[22]=[$(" Search ",-1)])]),_:1}))]),_:1})]),_:1})])}}},qs={class:"w-screen h-[calc(100vh-72px)] border",style:{display:"flex","flex-direction":"column","background-color":"rgb(27, 29, 33)","border-radius":"16px",margin:"4px 8px 8px","max-width":"calc(100% - 16px)",overflow:"hidden"}},Hs={class:"flex justify-between w-full p-2 border-b"},Gs={class:"flex items-center justify-between p-2 mb-4 border-b"},Qs={class:"flex items-center justify-between p-2 mb-2 border-b"},Xs={__name:"ConfigSearch",setup(m){const x=v({}),h=ae(),n=v(null),b=v(!1),p=a=>{x.value={...a}},_=()=>{h.go(-1)};function c(){n!=null&&n.value.isCollapsed?n==null||n.value.expand():n==null||n.value.collapse(),b.value=!b.value}function u(){n!=null&&n.value.isCollapsed?n==null||n.value.expand():n==null||n.value.collapse(),b.value=!b.value}return(a,o)=>{const f=L("Button"),S=L("ResizablePanel"),i=L("ResizableHandle"),g=L("ResizablePanelGroup");return d(),w("div",qs,[l("div",Hs,[t(f,{onClick:o[0]||(o[0]=M=>_()),size:"sm",variant:"outline",class:"gap-1 border-none hover:bg-rcgray-800"},{default:s(()=>[t(e(Ke),{size:"16",class:"text-muted-foreground hover:animate-pulse"})]),_:1}),o[3]||(o[3]=l("h2",{class:"items-center content-center text-muted-foreground"},"Config Search",-1)),o[4]||(o[4]=l("div",{class:"flex justify-end"},null,-1))]),t(g,{direction:"horizontal",class:""},{default:s(()=>[t(S,{"default-size":25,"max-size":30,"min-size":10,collapsible:"","collapsed-size":0,ref_key:"panelElement4",ref:n,class:"h-[86vh]"},{default:s(()=>[l("div",Gs,[o[5]||(o[5]=l("h1",{class:"ml-4 text-sm font-semibold"},"Search Options",-1)),t(Pe,{class:"mr-2",onClose:o[1]||(o[1]=M=>c())})]),t(Ks,{onSearchCompleted:p})]),_:1},512),t(i,{"with-handle":""}),t(S,{class:"h-[86vh]"},{default:s(()=>[t(e(te),{class:"border border-none rounded-md"},{default:s(()=>[l("div",null,[l("div",Qs,[t(Ie,{class:"ml-2",onOpenNav:o[2]||(o[2]=M=>u()),navPanelBtnState:b.value},null,8,["navPanelBtnState"]),l("h1",{class:oe(["w-full text-sm font-semibold",b.value===!1?"ml-2 ":""])}," Results ",2)]),t(Ds,{filters:x.value},null,8,["filters"])])]),_:1})]),_:1})]),_:1})])}}},Js={class:"relative"},Ws={key:0,class:"flex items-center justify-center py-12"},Ys={key:1,class:"max-h-[70vh] overflow-y-auto"},Zs=["innerHTML"],el={__name:"ReportViewModal",props:{report_id:{type:[String,Number],required:!0},isOpen:{type:Boolean,default:!1}},emits:["update:isOpen"],setup(m,{emit:x}){const h=m,n=x,{toastError:b}=J(),p=v(""),_=v(!0);Q(()=>h.isOpen,a=>{a&&c()}),H(()=>{h.isOpen&&c()});function c(){_.value=!0,axios.get(`/api/reports/${h.report_id}`).then(a=>{const o=a.data.match(/<body[^>]*>([\s\S]*?)<\/body>/i);p.value=o?o[0]:a.data,_.value=!1}).catch(a=>{var o,f;p.value='<h1 class="text-center text-red-600">Error: File not Found!</h1>',_.value=!1,b("Error","Failed to load report",{description:((f=(o=a.response)==null?void 0:o.data)==null?void 0:f.message)||"An error occurred while loading the report."})})}function u(){n("update:isOpen",!1)}return(a,o)=>{const f=L("Button");return d(),P(e(ze),{open:m.isOpen,"onUpdate:open":u},{default:s(()=>[t(e(Le),{class:"w-full max-w-5xl"},{default:s(()=>[t(e(Ve),null,{default:s(()=>[t(e(Fe),null,{default:s(()=>[...o[0]||(o[0]=[$("Report Viewer",-1)])]),_:1}),_.value?F("",!0):(d(),P(e(Me),{key:0,class:"text-sm text-muted-foreground"},{default:s(()=>[$(" Viewing report ID: "+D(m.report_id),1)]),_:1}))]),_:1}),l("div",Js,[_.value?(d(),w("div",Ws,[t(e(Ct),{class:"w-8 h-8 animate-spin text-primary"})])):(d(),w("div",Ys,[l("div",{innerHTML:p.value},null,8,Zs)]))]),t(e(je),null,{default:s(()=>[t(f,{variant:"outline",onClick:u},{default:s(()=>[...o[1]||(o[1]=[$("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},tl=Be(el,[["__scopeId","data-v-449c7c54"]]);function sl(){const m=v(1),x=gt(),h=v(x.get("useConfigReportsTable","perPage",10)),n=v("-id"),b=v(""),p=v({}),_=v([]),c=v(!1),u=v(1),a=v(0),o=v(0),f=v(1),S=v(!1),i=v(!1),g=v(null),M=ne(),{openDialog:C}=M,{toastSuccess:k,toastError:R}=J(),{reload:r}=_t(z),{toggleSort:V}=vt(n,z,"useConfigReportsTable");async function z(U={}){c.value=!0;try{const T=await K.get("/api/reports",{params:{page:m.value,perPage:h.value,sort:n.value,...p.value}});_.value=T.data,u.value=T.data.last_page,a.value=T.data.total}catch(T){console.error("Error fetching reports:",T),R("Error","Failed to fetch reports.")}finally{c.value=!1}}function y(U){g.value=U,i.value=!0}const j=async U=>{try{await K.delete(`/api/reports/${U}`),z(),k("Report Deleted","The report has been deleted successfully."),S.value=!1}catch(T){T.status===422?R("Error",T.response.data.message):(console.error("Error deleting Report:",T),R("Error","Failed to delete Report."))}},A=async U=>{try{await K.post("/api/reports/delete-many",{ids:U}),z(),k("Reports Deleted","The reports have been deleted successfully."),S.value=!1,Ee.emit("deleteManyReportsSuccess")}catch(T){T.status===422?R("Error",T.response.data.message):(console.error("Error deleting Reports:",T),R("Error","Failed to delete Reports.")),S.value=!1}},G=U=>{o.value=U,f.value=Math.random(),C("DialogNewReport")};function O(U){U.altKey&&U.key==="n"&&(U.preventDefault(),C("DialogNewReport"))}const I=at(()=>{p.value["filter[q]"]=b.value,m.value=1,z()},500);return Q(m,()=>{z()}),Q(b,()=>{I()}),Q(h,()=>{x.set("useConfigReportsTable","perPage",h.value),z()}),H(()=>{z(),window.addEventListener("keydown",O)}),De(()=>{window.removeEventListener("keydown",O)}),{reports:_,isLoading:c,currentPage:m,perPage:h,lastPage:u,totalRecords:a,searchTerm:b,showConfirmDelete:S,reload:r,sortParam:n,isReportViewModalOpen:i,currentReportId:g,deleteReport:j,deleteManyReports:A,viewEditDialog:G,toggleSort:V,openReportViewModal:y}}const ll={class:"flex flex-col h-full gap-1 text-center"},al={class:"flex items-center justify-between p-4"},ol={class:"flex items-center"},nl={class:"flex items-center justify-end"},rl={class:"px-6"},il={class:"border-b"},dl={__name:"ConfigReportsTable",setup(m){const{reports:x,isLoading:h,currentPage:n,perPage:b,lastPage:p,totalRecords:_,searchTerm:c,showConfirmDelete:u,reload:a,sortParam:o,isReportViewModalOpen:f,currentReportId:S,deleteReport:i,deleteManyReports:g,toggleSort:M,openReportViewModal:C}=sl(),{selectedRows:k,selectAll:R,toggleSelectAll:r,toggleSelectRow:V}=Te(x);return H(()=>{Ee.on("deleteManyReportsSuccess",()=>{k.value=[],R.value=!1})}),(z,y)=>{const j=L("Input"),A=L("Button"),G=L("RcIcon"),O=L("Checkbox");return d(),w("div",ll,[l("div",al,[l("div",ol,[t(j,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter reports",modelValue:e(c),"onUpdate:modelValue":y[0]||(y[0]=I=>se(c)?c.value=I:null)},null,8,["modelValue"]),e(c)?(d(),P(xt,{key:0,"onUpdate:modelValue":y[1]||(y[1]=I=>c.value="")})):F("",!0)]),l("div",nl,[e(k).length?(d(),P(A,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:y[2]||(y[2]=Ne(I=>u.value=!0,["prevent"])),variant:"primary"},{default:s(()=>[$("Delete Selected "+D(e(k).length)+" Report(s) ",1)]),_:1})):F("",!0),t(G,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:y[3]||(y[3]=I=>e(a)())})])]),l("div",rl,[t(e(ve),null,{default:s(()=>[t(e(me),null,{default:s(()=>[t(e(X),null,{default:s(()=>[t(e(B),{class:"w-[2%]"},{default:s(()=>[t(O,{id:"selectAll",modelValue:e(R),"onUpdate:modelValue":y[4]||(y[4]=I=>se(R)?R.value=I:null),checked:e(R),onClick:y[5]||(y[5]=I=>e(r)())},null,8,["modelValue","checked"])]),_:1}),t(e(B),{class:"w-[5%]"},{default:s(()=>[t(A,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:y[6]||(y[6]=I=>e(M)("id"))},{default:s(()=>[t(G,{name:"sort",sortParam:e(o),field:"id"},null,8,["sortParam"]),y[14]||(y[14]=l("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(B),{class:"w-[20%]"},{default:s(()=>[t(A,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:y[7]||(y[7]=I=>e(M)("report_name"))},{default:s(()=>[t(G,{name:"sort",sortParam:e(o),field:"report_name"},null,8,["sortParam"]),y[15]||(y[15]=l("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[...y[16]||(y[16]=[$("Task ID",-1)])]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[...y[17]||(y[17]=[$("Task Name",-1)])]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[t(A,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:y[8]||(y[8]=I=>e(M)("created_at"))},{default:s(()=>[t(G,{name:"sort",sortParam:e(o),field:"created_at"},null,8,["sortParam"]),y[18]||(y[18]=l("span",{class:"ml-2"},"Created",-1))]),_:1})]),_:1}),t(e(B),{class:"w-[10%]"},{default:s(()=>[...y[19]||(y[19]=[$("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e(pe),null,{default:s(()=>[e(h)?(d(),P(ge,{key:0})):e(h)?(d(),P(Ae,{key:2})):(d(!0),w(E,{key:1},q(e(x).data,I=>(d(),P(e(X),{key:I.id},{default:s(()=>[t(e(N),{class:"text-start"},{default:s(()=>[t(O,{class:"cursor-pointer",id:"select-"+I.id,checked:!!e(k).includes(I.id),onClick:U=>e(V)(I.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(I.id),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[t(A,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:U=>e(C)(I.report_id)},{default:s(()=>[l("span",il,D(I.report_name),1)]),_:2},1032,["onClick"])]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(I.task_id),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(I.task_name),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[$(D(I.created_at),1)]),_:2},1024),t(e(N),{class:"text-start"},{default:s(()=>[t(yt,{showEditBtn:!1,rowData:I,onOnDelete:U=>e(i)(I.id)},null,8,["rowData","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),t(_e,{currentPage:e(n),lastPage:e(p),perPage:e(b),"onUpdate:currentPage":y[9]||(y[9]=I=>n.value=I),"onUpdate:perPage":y[10]||(y[10]=I=>b.value=I),totalRecords:e(_),isLoading:e(h)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),t(ht,{ids:e(k),showConfirmDelete:e(u),onClose:y[11]||(y[11]=I=>u.value=!1),onHandleDelete:y[12]||(y[12]=I=>e(g)(e(k)))},null,8,["ids","showConfirmDelete"]),e(S)?(d(),P(tl,{key:0,report_id:e(S),isOpen:e(f),"onUpdate:isOpen":y[13]||(y[13]=I=>f.value=I)},null,8,["report_id","isOpen"])):F("",!0)])])}}},ul={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},cl={class:"flex flex-row items-center justify-between h-12 gap-3 px-5 border-t border-b"},fl={class:"flex justify-start items-center"},ml=["onClick"],pl={class:"text-2xl text-muted-foreground"},gl={__name:"Main",setup(m){const{configsId:x,statusIdParam:h,currentView:n,viewItems:b,navPillsItems:p,handleNavSelection:_,toggleFavorite:c}=ot();return(u,a)=>{const o=L("RcIcon");return d(),w("main",ul,[l("div",cl,[l("div",fl,[t(ft,{items:e(p),modelValue:e(n),"onUpdate:modelValue":a[0]||(a[0]=f=>se(n)?n.value=f:null),"persist-key":"inventorySelectedView",onSelect:e(_)},null,8,["items","modelValue","onSelect"])]),t(e(W),null,{default:s(()=>[(d(!0),w(E,null,q(e(b),f=>(d(),P(e(Y),{key:f.id},{default:s(()=>[e(n)===f.id?(d(),P(e(Z),{key:0,"as-child":""},{default:s(()=>[l("div",{onClick:Ne(S=>e(c)(f.id),["stop","prevent"]),class:"cursor-pointer"},[t(o,{name:f.isFavorite.value?"star-selected":"star-unselected"},null,8,["name"])],8,ml)]),_:2},1024)):F("",!0),t(e(ee),null,{default:s(()=>[l("p",null,D(f.isFavorite.value?"Remove from favorites":"Add "+e(n)+" to favorites"),1)]),_:2},1024)]),_:2},1024))),128))]),_:1})]),l("div",null,[(d(),P(it,null,[(d(),P(nt(e(n)==="configs"?mt:e(n)==="configsearch"?Xs:e(n)==="configcompare"?fs:e(n)==="configreport"?dl:null),{configsId:e(x),statusId:e(h),key:e(n)},rt({_:2},[["configsearch","configcompare"].includes(e(n))?{name:"default",fn:s(()=>[l("h1",pl,D(e(n)==="configsearch"?"Config Search":e(n)==="configcompare"?"Config Compare":"Config Reports"),1)]),key:"0"}:void 0]),1032,["configsId","statusId"]))],1024))])])}}},Ml=Be(gl,[["__scopeId","data-v-76f28a15"]]);export{Ml as default};
