import{G as De,r as T,c as w,o as g,b as o,w as f,u as a,H as ti,a as m,I as li,d as L,J as oi,s as k,br as P,T as Ce,t as N,M as ai,bF as ft,F as Z,x as O,g as ri,z as Ye,R as pt,bM as vn,E as ne,U as mt,Y as Pe,n as Ze,Q as Je,e as I,K as He,L as Ue,p as sn,j as $n,k as Tn,bD as si,m as Nn,v as vt,a0 as gt,l as Fn,A as ht,bq as ci,bN as _t,bs as ui,bt as de,bE as di,bO as xt,bu as fi,bP as yt,Z as pi,N as Be,$ as Se,_ as wt,P as cn,S as Ge,a1 as bt,a2 as Ct,a3 as kt,a4 as At,a5 as Dt,ab as Ln,a6 as St,a7 as It,aC as Et,aG as $t}from"./app-PdL3VeGb.js";import{C as mi}from"./calendar-C5Ca-EJw.js";import{b as vi,C as Tt,a as Nt,u as gi,m as hi,c as Ft}from"./NavPills-Bap_CZcu.js";import{u as Lt,_ as Ot,a as _i}from"./useTemplatesGithub-Cibx8aO-.js";import{R as gn}from"./refresh-cw-kFdtKgRH.js";import{_ as Rt,a as On,b as ce,c as xi,d as Mt,e as ue,f as yi,g as wi,p as fe,n as Pt}from"./pageSettings-Bj-hzPaM.js";import{a as Bt}from"./package-check-DBoRmXhK.js";import{e as jt,f as Vt,g as zt,X as bi,_ as Rn,a as Mn,b as Pn,c as Bn,d as jn}from"./HoverCardTrigger-DfXCUMzt.js";import{u as Yt}from"./useCopy-BRqE_lcL.js";import{S as Ci}from"./Spinner-CXGHXqCD.js";import{S as Ht,F as Ut,a as Gt,H as Kt,M as qt}from"./sun-moon-1yst-T0u.js";import{C as Wt}from"./copy-CDe-3tIq.js";import{T as Qt,M as Xt,G as Zt,a as Jt}from"./useCredentials-BxJiO0nT.js";import{_ as ae}from"./RcToolTip.vue_vue_type_script_setup_true_lang-DiPYsTJZ.js";import{T as el}from"./terminal-DOwTYIU6.js";import{_ as ke,a as ki}from"./ToggleGroupItem-jc71Sf2r.js";import{_ as nl}from"./GeneralPopover-DDC0ZN_i.js";import{_ as Vn}from"./SelectGroup-Ddr6YdKu.js";import{D as il}from"./download-D8iBLicA.js";/* empty css               */import"./square-terminal-4FOAv9mV.js";import"./search-CrPV8ga5.js";import"./square-D8f3UxMD.js";import"./BadgeList-QdwG4AOm.js";import"./TagMultiSelect-fHI8THHn.js";import"./useMultiSelect-DI8W9kgs.js";import"./cloud-alert-BRdJfJ4U.js";import"./plus-BrfaZo9_.js";import"./info-CnmZMmdk.js";import"./corner-down-left-CAjUGhGc.js";const tl={class:"p-2 mt-2"},ll={class:"grid gap-0.5"},ol={key:0,class:"space-y-2"},al={key:0,class:"grid gap-2 text-sm"},rl={class:"grid gap-2"},sl={class:"flex items-center justify-between"},cl={class:"flex items-center gap-1 text-muted-foreground"},ul={key:0,class:"flex items-center gap-2"},dl={key:1,class:"flex items-center gap-2"},fl={class:"flex items-center justify-between"},pl={class:"flex items-center gap-1 text-muted-foreground"},ml={key:0,class:"flex items-center gap-2"},vl={key:1,class:"flex items-center gap-2"},gl={class:"flex items-center justify-between"},hl={class:"flex items-center gap-1 text-muted-foreground"},_l={key:0,class:"flex items-center gap-2"},xl={key:1,class:"flex items-center gap-2"},yl={class:"flex items-center justify-between"},wl={class:"flex items-center gap-1 text-muted-foreground"},bl={class:"flex items-center gap-2"},Cl={class:"hidden xl:inline"},kl={__name:"ConfigStatusPanel",props:{isLoading:Boolean,data:Object},emits:["refresh"],setup(e,{emit:n}){const i=De("formatters");return(l,t)=>{const s=T("RcIcon");return g(),w("div",tl,[o(a(ai),{class:"overflow-hidden"},{default:f(()=>[o(a(ti),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:f(()=>[m("div",ll,[o(a(li),{class:"flex items-center gap-2 text-lg group"},{default:f(()=>[...t[0]||(t[0]=[L("Configuration Summary",-1)])]),_:1})])]),_:1}),o(a(oi),{class:"p-4 pt-0 text-sm"},{default:f(()=>[e.isLoading?(g(),w("div",ol,[o(a(P),{class:"w-1/2 h-4"}),o(a(P),{class:"w-full h-4"}),o(a(P),{class:"w-full h-4"}),o(a(P),{class:"w-full h-4"}),o(a(P),{class:"w-full h-4"}),o(a(P),{class:"w-full h-4"}),o(a(P),{class:"w-full h-4"}),o(a(P),{class:"w-full h-4"}),o(a(P),{class:"w-full h-4"})])):k("",!0),o(Ce,{name:"fade"},{default:f(()=>{var r,c,u,d,v,p,h,x;return[!e.isLoading&&e.data?(g(),w("div",al,[m("dl",rl,[m("div",sl,[m("dt",cl,[o(s,{name:"status-green"}),t[1]||(t[1]=L(" Good Configs ",-1))]),e.data.config_summary?(g(),w("dd",ul,N(((r=e.data.config_summary)==null?void 0:r.download_status_1_count)??"--"),1)):(g(),w("dd",dl,N(((c=e.data)==null?void 0:c.config_good_count)??"--"),1))]),m("div",fl,[m("dt",pl,[o(s,{name:"status-red"}),t[2]||(t[2]=L(" Failed Configs ",-1))]),e.data.config_summary?(g(),w("dd",ml,N(((u=e.data.config_summary)==null?void 0:u.download_status_0_count)??"--"),1)):(g(),w("dd",vl,N(((d=e.data)==null?void 0:d.config_bad_count)??"--"),1))]),m("div",gl,[m("dt",hl,[o(s,{name:"status-yellow"}),t[3]||(t[3]=L(" Unknown Configs ",-1))]),e.data.config_summary?(g(),w("dd",_l,N(((v=e.data.config_summary)==null?void 0:v.download_status_2_count)??"--"),1)):(g(),w("dd",xl,N(((p=e.data)==null?void 0:p.config_unknown_count)??"--"),1))]),m("div",yl,[m("dt",wl,[o(a(mi),{size:"16",class:"text-indigo-400"}),t[4]||(t[4]=L(" Last Download ",-1))]),m("dd",bl,[m("span",null,N(a(i).formatDateOnly(e.data.last_config_at??((h=e.data.last_config)==null?void 0:h.updated_at))),1),m("span",Cl,N(a(i).formatTimeOnly(e.data.last_config_at??((x=e.data.last_config)==null?void 0:x.updated_at))),1)])])])])):k("",!0)]}),_:1})]),_:1})]),_:1})])}}},Al=ft("comments",{state:()=>({commentCounters:{},initializedDevices:{}}),actions:{async initializeCommentsForDevice(e){if(!this.initializedDevices[e])try{const i=(await Z.get(`/api/device-comments/${e}`)).data;this.commentCounters[e]=i.length,this.initializedDevices[e]=!0}catch(n){console.error(`Failed to load comments for device ${e}:`,n)}},incrementCounter(e){this.commentCounters[e]||(this.commentCounters[e]=0),this.commentCounters[e]++},decrementCounter(e){this.commentCounters[e]&&this.commentCounters[e]--}},persist:{storage:localStorage,paths:["commentCounters","initializedDevices"]}}),Dl={class:"relative flex items-center justify-between border-b"},Sl={class:"flex items-start pt-2 pb-1 px-2 pt-1"},Il={__name:"DetailsViewLeftNav",props:{selectedNav:String,deviceId:Number,context:{type:String,default:"device",validator:e=>["device","config"].includes(e)}},emits:["selectLeftNavView","closeNav"],setup(e,{emit:n}){const i=e,l=O(i.selectedNav),t=Al(),s=O(t.commentCounters[i.deviceId]||0),r=n,c=ri(()=>{const v=[{label:"Details",to:"details",icon:"list-collapse"}];return i.context==="config"&&v.push({label:"Config History",to:"configHistory",icon:"config-history"}),v});Ye(()=>t.commentCounters[i.deviceId],v=>{s.value=v}),Ye(()=>i.selectedNav,v=>{l.value=v});function u(v){l.value=v,r("selectLeftNavView",v)}function d(){r("closeNav")}return(v,p)=>(g(),w("div",Dl,[m("div",Sl,[o(vi,{items:c.value,modelValue:l.value,"onUpdate:modelValue":p[0]||(p[0]=h=>l.value=h),"persist-key":"detailsViewLeftNav",onSelect:u},null,8,["items","modelValue"])]),o(pt,{class:"mr-2",onClose:p[1]||(p[1]=h=>d())})]))}},El={class:"relative flex items-center w-full border-b p-2 pb-1"},$l={class:"flex justify-between w-full mb-0"},Tl={key:0,class:"gap-2 ml-auto mr-4 text-lg font-semibold tracking-tight group"},Nl={key:1,class:"gap-2 ml-auto mr-4 text-lg font-semibold tracking-tight group"},Fl={key:2,class:"gap-2 ml-auto mr-4 text-lg font-semibold tracking-tight group"},Ll={key:3,class:"gap-2 ml-auto mr-4 text-lg font-semibold tracking-tight group"},Ol={__name:"DetailsViewRightNav",props:{selectedNav:String,hasApiEndpoints:{type:Boolean,default:!1},hasXftpFiles:{type:Boolean,default:!1},apiEndpointsCount:{type:Number,default:0}},emits:["selectMainNavView","closeNav"],setup(e,{emit:n}){const i=O(null),l=O(null),t=vn(),s=e,r=n;ne(()=>{const p=localStorage.getItem("DeviceDetailsMainNav");i.value=p||s.selectedNav});function c(p,h){i.value=p,l.value=h,r("selectMainNavView",p),localStorage.setItem("DeviceDetailsMainNav",p)}function u(){var p,h,x;(p=t.panelRef2)!=null&&p.isCollapsed?(h=t.panelRef2)==null||h.expand():(x=t.panelRef2)==null||x.collapse()}Ye(()=>{var p;return(p=t.panelRef2)==null?void 0:p.isCollapsed},()=>{updateBottomBorder()}),Ye(()=>s.selectedNav,p=>{c(p,document.querySelector(`[data-nav='${p}']`))});const d=ri(()=>{const p=[{label:"Configs",to:"configs",icon:"command-group"},{label:"Notifications",to:"notifications",icon:"notification"}];return s.hasXftpFiles&&p.push({label:"XFTP Files",to:"xftp",icon:"xftp"}),s.hasApiEndpoints&&p.push({label:"API Endpoints",to:"api-endpoints",icon:"api-collection",badge:s.apiEndpointsCount>0?s.apiEndpointsCount:null}),p});function v(p){i.value=p,r("selectMainNavView",p),localStorage.setItem("DeviceDetailsMainNav",p)}return(p,h)=>{var x;return g(),w("div",El,[o(mt,{onOpenNav:h[0]||(h[0]=D=>u()),navPanelBtnState:(x=a(t).panelRef2)==null?void 0:x.isCollapsed},null,8,["navPanelBtnState"]),m("div",$l,[m("div",null,[o(vi,{items:d.value,modelValue:i.value,"onUpdate:modelValue":h[1]||(h[1]=D=>i.value=D),"persist-key":"DeviceDetailsMainNav",onSelect:v},null,8,["items","modelValue"])]),m("div",null,[i.value==="notifications"?(g(),w("h3",Tl," Device Last Events ")):k("",!0),i.value==="configs"?(g(),w("h3",Nl," Latest Configs ")):k("",!0),i.value==="xftp"&&e.hasXftpFiles?(g(),w("h3",Fl,"XFTP Files")):k("",!0),i.value==="api-endpoints"&&e.hasApiEndpoints?(g(),w("h3",Ll," API Endpoints ")):k("",!0)])])])}}},Rl={class:"p-2 overflow-none"},Ml={class:"flex flex-row items-center justify-start gap-2 pt-1"},Pl={class:"inline-flex flex-row items-center h-[24px] rounded-md px-1.5 py-0.5 gap-1 shadow-[inset_0_0_0_1px_rgb(69,71,74)] bg-[#313337]"},Bl={class:"flex-[0_1_auto] min-w-0 overflow-hidden text-ellipsis whitespace-nowrap inline-flex line-clamp-1"},jl={key:0,class:"mt-4 space-y-2"},Vl={key:1,class:"mt-6 space-y-4"},zl={class:"flex items-center justify-end mt-4 space-x-2"},Yl={__name:"DeviceConfigsViewPanelAll",props:{deviceId:Number},emits:["toggle-view"],setup(e,{emit:n}){const i=n,l=e,t=Pe(),{openDialog:s,closeDialog:r,isDialogOpen:c}=t,u=O({}),d=O(!1);ne(()=>{p()});function v(){axios.get("/api/configs/latest-by-deviceid/"+l.deviceId).then(x=>{u.value=x.data.data}).catch(x=>{console.log(x)})}function p(){d.value=!0,v(),setTimeout(()=>{d.value=!1},1e3)}function h(){i("toggle-view","latest")}return(x,D)=>{const A=T("Button"),y=T("Skeleton");return g(),w("div",null,[m("div",Rl,[m("div",Ml,[m("span",Pl,[m("span",Bl,"All Config Downloads for Device ID: "+N(l.deviceId),1)]),D[0]||(D[0]=m("span",{class:"flex-1 bg-[rgb(49,51,55)] bg-[rgb(49,51,55)] flex-shrink-0 h-px w-full"},null,-1)),o(A,{type:"button",title:x.t("common.refresh"),variant:"ghost",onClick:p,class:"p-2 h-7"},{default:f(()=>[o(a(gn),{class:Ze([d.value?"text-blue-500 animate-spin":"text-gray-600 hover:text-blue-500","w-4 h-4"])},null,8,["class"])]),_:1},8,["title"])]),d.value?(g(),w("div",jl,[o(y,{class:"w-1/2 h-4"}),o(y,{class:"w-full h-4"}),o(y,{class:"w-full h-4"}),o(y,{class:"w-full h-4"}),o(y,{class:"w-full h-4"}),o(y,{class:"w-full h-4"}),o(y,{class:"w-full h-4"}),o(y,{class:"w-full h-4"}),o(y,{class:"w-full h-4"})])):k("",!0),d.value?k("",!0):(g(),w("div",Vl,[o(Tt,{configsId:e.deviceId},null,8,["configsId"])])),m("div",zl,[o(A,{variant:"outline",onClick:h,class:"text-center"},{default:f(()=>[...D[1]||(D[1]=[L(" Show Latest Configs ",-1)])]),_:1})])])])}}},Hl={class:"p-2 overflow-none"},Ul={class:"flex flex-row items-center justify-start gap-2 pt-1"},Gl={class:"inline-flex flex-row items-center h-[24px] rounded-md px-1.5 gap-1 shadow-[inset_0_0_0_1px_rgb(69,71,74)] bg-[#313337]"},Kl={class:"flex-[0_1_auto] min-w-0 overflow-hidden text-ellipsis whitespace-nowrap inline-flex line-clamp-1 items-center"},ql={key:0,class:"mt-4 space-y-2"},Wl={key:1,class:"mt-6 space-y-4"},Ql={class:"border-b"},Xl={class:"flex items-center justify-end mt-4 space-x-2"},Zl={__name:"DeviceConfigsViewPanelLatest",props:{deviceId:Number},emits:["toggle-view"],setup(e,{emit:n}){const i=n,l=e,t=Pe(),{openDialog:s,closeDialog:r,isDialogOpen:c}=t,u=O({}),d=O(!1),v=De("formatters"),p=Je(),h=p.currentRoute.value.name;ne(()=>{D()});function x(){Z.get("/api/configs/latest-by-deviceid/"+l.deviceId).then(C=>{u.value=C.data.data}).catch(C=>{console.log(C)})}function D(){d.value=!0,x(),setTimeout(()=>{d.value=!1},1e3)}function A(){i("toggle-view","all")}function y(C){p.push({name:"config-view",params:{id:parseInt(C)},query:{ref:h||"device-view",refId:l.deviceId}})}return(C,_)=>{const Y=T("RcIcon"),F=T("Button"),B=T("Skeleton"),R=T("RcBadge");return g(),w("div",null,[m("div",Hl,[m("div",Ul,[m("span",Gl,[m("span",Kl,[o(Y,{name:"status-green",class:"mr-2"}),_[0]||(_[0]=m("div",{class:"ml-2"},"Latest Configs",-1))])]),_[1]||(_[1]=m("span",{class:"flex-1 bg-[rgb(49,51,55)] flex-shrink-0 h-px w-full"},null,-1)),o(F,{type:"button",title:"Refresh",variant:"ghost",onClick:D,class:"p-2 h-7"},{default:f(()=>[o(a(gn),{size:16,class:Ze(d.value?"text-blue-500 animate-spin":"text-gray-600 hover:text-blue-500")},null,8,["class"])]),_:1})]),d.value?(g(),w("div",ql,[o(B,{class:"w-1/2 h-4"}),o(B,{class:"w-full h-4"}),o(B,{class:"w-full h-4"}),o(B,{class:"w-full h-4"}),o(B,{class:"w-full h-4"}),o(B,{class:"w-full h-4"}),o(B,{class:"w-full h-4"}),o(B,{class:"w-full h-4"}),o(B,{class:"w-full h-4"})])):k("",!0),d.value?k("",!0):(g(),w("div",Wl,[o(a(wi),null,{default:f(()=>[o(a(Rt),null,{default:f(()=>[o(a(On),null,{default:f(()=>[o(a(ce),{class:"w-[2%]"},{default:f(()=>[..._[2]||(_[2]=[L("ID",-1)])]),_:1}),o(a(ce),{class:"w-[10%]"},{default:f(()=>[..._[3]||(_[3]=[L("Command",-1)])]),_:1}),o(a(ce),{class:"w-[10%]"},{default:f(()=>[..._[4]||(_[4]=[L("Filename",-1)])]),_:1}),o(a(ce),{class:"w-[10%]"},{default:f(()=>[..._[5]||(_[5]=[L("File size",-1)])]),_:1}),o(a(ce),{class:"w-[10%]"},{default:f(()=>[..._[6]||(_[6]=[L("Version",-1)])]),_:1}),o(a(ce),{class:"w-[10%]"},{default:f(()=>[..._[7]||(_[7]=[L("Downloaded at",-1)])]),_:1}),o(a(ce),{class:"w-[10%]"},{default:f(()=>[..._[8]||(_[8]=[L("Status",-1)])]),_:1}),o(a(ce),{class:"w-[10%]"},{default:f(()=>[..._[9]||(_[9]=[L("Actions",-1)])]),_:1})]),_:1})]),_:1}),o(a(xi),null,{default:f(()=>[d.value?(g(),I(Mt,{key:0})):!d.value&&Object.keys(u.value).length?(g(!0),w(He,{key:1},Ue(u.value,E=>(g(),I(a(On),{key:E.id},{default:f(()=>[o(a(ue),null,{default:f(()=>[L(N(E.id),1)]),_:2},1024),o(a(ue),null,{default:f(()=>[L(N(E.command),1)]),_:2},1024),o(a(ue),null,{default:f(()=>[o(F,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:H=>y(E.id)},{default:f(()=>[m("span",Ql,N(E.config_filename),1)]),_:2},1032,["onClick"])]),_:2},1024),o(a(ue),null,{default:f(()=>[L(N(E.config_filesize?a(v).formatFileSize(E.config_filesize):""),1)]),_:2},1024),o(a(ue),null,{default:f(()=>[o(R,{variant:"info"},{default:f(()=>[L(N(E.config_version),1)]),_:2},1024)]),_:2},1024),o(a(ue),null,{default:f(()=>[L(N(a(v).formatTime(E.created_at)),1)]),_:2},1024),o(a(ue),null,{default:f(()=>[E.download_status===0?(g(),I(Y,{key:0,name:"status-red"})):k("",!0),E.download_status===1?(g(),I(Y,{key:1,name:"status-green"})):k("",!0),E.download_status===2?(g(),I(Y,{key:2,name:"status-yellow"})):k("",!0)]),_:2},1024),o(a(ue),{class:"flex items-center"},{default:f(()=>[o(a(sn),null,{default:f(()=>[o(a($n),null,{default:f(()=>[o(a(Tn),{"as-child":""},{default:f(()=>[o(F,{variant:"ghost",onClick:H=>a(s)("peek-config-dialog-"+E.id)},{default:f(()=>[o(a(si),{size:"16",class:"text-muted-foreground hover:text-blue-500"})]),_:1},8,["onClick"])]),_:2},1024),o(a(Nn),{class:"text-white bg-rcgray-800"},{default:f(()=>[..._[10]||(_[10]=[m("p",null,"Peek config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),o(a(sn),null,{default:f(()=>[o(a($n),null,{default:f(()=>[o(a(Tn),{"as-child":""},{default:f(()=>[o(F,{variant:"ghost",onClick:H=>y(E.id)},{default:f(()=>[o(a(Bt),{size:"16",class:"text-muted-foreground hover:text-blue-500"})]),_:1},8,["onClick"])]),_:2},1024),o(a(Nn),{class:"text-white bg-rcgray-800"},{default:f(()=>[..._[11]||(_[11]=[m("p",null,"Open config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),a(c)("peek-config-dialog-"+E.id)?(g(),I(Nt,{key:0,editId:E.id},null,8,["editId"])):k("",!0)]),_:2},1024)]),_:2},1024))),128)):(g(),I(yi,{key:2}))]),_:1})]),_:1})])),m("div",Xl,[o(F,{variant:"outline",onClick:A,class:"text-center"},{default:f(()=>[..._[12]||(_[12]=[L("View all",-1)])]),_:1})])])])}}},Jl={class:"p-2"},eo={key:0,class:"flex justify-center items-center h-32"},no={__name:"DeviceConfigsViewPanel",props:{deviceId:Number},setup(e){const n=O("latest"),i=O(!1),l=()=>{const s=localStorage.getItem("DeviceConfigsActiveView");s&&["latest","all"].includes(s)?n.value=s:n.value="latest",i.value=!0},t=s=>{const c=["latest","all"].includes(s)?s:"latest";n.value=c,localStorage.setItem("DeviceConfigsActiveView",c)};return ne(()=>{l()}),(s,r)=>(g(),w("div",Jl,[i.value?(g(),I(Ce,{key:1,name:"fade",mode:"out-in"},{default:f(()=>[(g(),I(vt(n.value==="latest"?Zl:Yl),{deviceId:e.deviceId,onToggleView:t},null,40,["deviceId"]))]),_:1})):(g(),w("div",eo,[...r[0]||(r[0]=[m("div",{class:"text-gray-500"},"Loading...",-1)])]))]))}},io={class:"flex justify-between space-x-4"},to={class:"space-y-1"},lo={class:"text-sm font-semibold"},oo={class:"text-sm"},ao={class:"text-sm"},ro={class:"javascript"},so={class:"flex pt-2 items-between"},co={class:"text-xs text-muted-foreground"},uo={__name:"DeviceNotificationHoverCard",props:{notification:{type:Object,required:!0}},setup(e){const{copyItem:n,activeCopyIcon:i}=Yt(),l=De("formatters");return(t,s)=>{const r=T("RcIcon"),c=T("Button"),u=gt("highlightjs");return g(),I(a(zt),null,{default:f(()=>[o(a(jt),{"as-child":""},{default:f(()=>[Fn(t.$slots,"default")]),_:3}),o(a(Vt),{class:"w-full",align:"start"},{default:f(()=>[m("div",io,[Fn(t.$slots,"leftIcon"),m("div",to,[m("h4",lo,N(e.notification.log_name.charAt(0).toUpperCase()+e.notification.log_name.slice(1)),1),m("p",oo,N(e.notification.description),1),s[1]||(s[1]=m("p",{class:"pt-4 text-sm"},"Raw Data",-1)),m("div",ao,[ht((g(),w("pre",null,[m("code",ro,N(e.notification),1)])),[[u]])]),m("div",so,[o(a(mi),{class:"w-4 h-4 mr-2 opacity-70"}),m("span",co,"Event Date: "+N(a(l).formatTime(e.notification.created_at)),1),o(c,{class:"h-6 p-1 ml-auto",variant:"ghost",title:t.t("actions.copyRawData"),onClick:s[0]||(s[0]=d=>a(n)(e.notification.id,e.notification))},{default:f(()=>[o(r,{name:"copy-transition",isActive:a(i)[e.notification.id],size:16},null,8,["isActive"])]),_:1},8,["title"])])])])]),_:3})]),_:3})}}},fo={class:"p-2"},po={class:"p-2 overflow-none"},mo={class:"flex flex-row items-center justify-start gap-2 pt-1"},vo={key:0,class:"mt-4 space-y-2"},go={key:1,class:"mt-6 space-y-4"},ho={key:0},_o={class:"w-full"},xo={class:"pl-6 border-l border-l-4 rounded-md border-l-rcgray-600"},yo={class:"flex justify-between"},wo={key:0,class:"py-0.5 flex w-fit bg-green-100 text-green-800 text-xs font-medium me-2 px-1.5 py-0.5 rounded-lg dark:bg-blue-900 dark:text-blue-100"},bo={class:"text-muted-foreground"},Co={class:"py-2 space-y-1 text-left"},ko={class:"text-sm text-white"},Ao={class:"flex items-center justify-between"},Do={class:"text-muted-foreground"},So={key:1},Io={class:"flex items-center justify-end mt-4 space-x-2"},Eo={__name:"LatestEventsPanel",props:{deviceId:Number},setup(e){const n=e,i=O([]),l=O(!1),t=De("formatters");ne(()=>{s()});function s(){l.value=!0,Z.get("/api/activitylogs/last5/"+parseInt(n.deviceId)).then(c=>{i.value=c.data,l.value=!1}).catch(c=>{console.log(c)})}function r(){l.value=!0,s(),setTimeout(()=>{l.value=!1},1e3)}return(c,u)=>{const d=T("Button"),v=T("Skeleton");return g(),w("div",fo,[m("div",po,[m("div",mo,[u[0]||(u[0]=m("span",{class:"inline-flex flex-row items-center h-[24px] rounded-md px-1.5 gap-1 shadow-[inset_0_0_0_1px_rgb(69,71,74)] bg-[#313337]"},[m("span",{class:"flex-[0_1_auto] min-w-0 overflow-hidden text-ellipsis whitespace-nowrap inline-flex line-clamp-1"},"Last Events")],-1)),u[1]||(u[1]=m("span",{class:"flex-1 bg-[rgb(49,51,55)] bg-[rgb(49,51,55)] flex-shrink-0 h-px w-full"},null,-1)),o(d,{type:"button",title:"Refresh",variant:"ghost",onClick:r,class:"p-2 h-7"},{default:f(()=>[o(a(gn),{size:"16",class:Ze(l.value?"text-blue-500 animate-spin":"text-gray-600 hover:text-blue-500")},null,8,["class"])]),_:1})]),l.value?(g(),w("div",vo,[o(v,{class:"w-1/2 h-4"}),o(v,{class:"w-full h-4"}),o(v,{class:"w-full h-4"}),o(v,{class:"w-full h-4"}),o(v,{class:"w-full h-4"}),o(v,{class:"w-full h-4"}),o(v,{class:"w-full h-4"}),o(v,{class:"w-full h-4"}),o(v,{class:"w-full h-4"})])):k("",!0),l.value?k("",!0):(g(),w("div",go,[Object.keys(i.value).length>0?(g(),w("div",ho,[(g(!0),w(He,null,Ue(i.value,(p,h)=>(g(),I(d,{class:"flex w-full h-full border bg-rcgray-800 cursor-default hover:bg-rcgray-600 items-left",key:h},{default:f(()=>[m("div",_o,[m("div",xo,[m("div",yo,[p.log_name==="info"?(g(),w("span",wo,N(p.log_name),1)):k("",!0),m("span",bo,"Type: "+N(p.event_type),1)]),m("div",Co,[m("p",ko,N(p.description),1),m("div",Ao,[m("p",Do,N(a(t).formatTime(p.created_at)),1),o(uo,{notification:p},{default:f(()=>[o(d,{title:c.t("actions.viewRawData"),alt:c.t("actions.viewRawData"),variant:"outline",class:"h-4 px-1 text-sm text-muted-foreground"},{default:f(()=>[o(a(si),{size:"16"})]),_:1},8,["title","alt"])]),_:1},8,["notification"])])])])])]),_:2},1024))),128))])):(g(),w("div",So,[o(a(wi),null,{default:f(()=>[o(a(xi),null,{default:f(()=>[o(yi)]),_:1})]),_:1})]))])),m("div",Io,[o(d,{variant:"outline",class:"text-center"},{default:f(()=>[...u[2]||(u[2]=[L(" View All ",-1)])]),_:1})])])])}}},$o={__name:"ViewPaneDropdown",props:{rowData:{type:Object,required:!0},type:{type:String,default:"device"},showEditBtn:{type:Boolean,default:!0}},emits:["openDeviceEdit","onDelete","onPurge","openDeviceClone","onDisable","onEnable"],setup(e,{emit:n}){const i=Je(),l=n,t=e;function s(){l("onDelete")}function r(){l("openDeviceEdit")}function c(){l("openDeviceClone")}function u(){l("onDisable")}function d(){l("onEnable")}function v(){i.push({name:"settings-data-purge"}),console.log("Purging failed configs for device:",t.rowData.id)}return(p,h)=>{const x=T("Button");return g(),w("div",null,[o(a(fi),null,{default:f(()=>[o(a(ci),{"as-child":""},{default:f(()=>[o(x,{variant:"ghost",class:"h-8 ml-2"},{default:f(()=>[o(a(_t),{size:"16"})]),_:1})]),_:1}),o(a(ui),{class:"w-56",align:"end",side:"bottom"},{default:f(()=>[e.showEditBtn?(g(),I(a(de),{key:0,class:"cursor-pointer hover:bg-rcgray-600 group",onClick:h[0]||(h[0]=D=>r())},{default:f(()=>[h[4]||(h[4]=m("span",null,"Edit Device",-1)),o(a(fe),{class:"group"},{default:f(()=>[o(a(Ht),{size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})]),_:1})]),_:1})):k("",!0),e.showEditBtn?(g(),I(a(de),{key:1,class:"cursor-pointer hover:bg-rcgray-600 group",onClick:h[1]||(h[1]=D=>c())},{default:f(()=>[h[5]||(h[5]=m("span",null,"Clone Device",-1)),o(a(fe),null,{default:f(()=>[o(a(Wt),{size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})]),_:1})]),_:1})):k("",!0),e.rowData.status===100?(g(),I(a(de),{key:2,class:"cursor-pointer hover:bg-rcgray-800",onClick:d},{default:f(()=>[h[6]||(h[6]=m("span",null,"Enable",-1)),o(a(fe),null,{default:f(()=>[o(a(Qt),{size:"16",class:"text-green-400"})]),_:1})]),_:1})):k("",!0),e.rowData.status!=100?(g(),I(a(de),{key:3,class:"cursor-pointer hover:bg-rcgray-800",onClick:u},{default:f(()=>[h[7]||(h[7]=m("span",null,"Disable",-1)),o(a(fe),null,{default:f(()=>[o(a(Xt),{size:"16",class:"text-red-300"})]),_:1})]),_:1})):k("",!0),e.showEditBtn?(g(),I(a(de),{key:4,class:"cursor-pointer hover:bg-rcgray-600 group",onClick:h[2]||(h[2]=D=>v())},{default:f(()=>[h[8]||(h[8]=m("span",{class:"text-amber-500 group-hover:text-amber-400"},"Purge Failed Configs",-1)),o(a(fe),null,{default:f(()=>[o(a(Ut),{size:"16",class:"text-amber-500 group-hover:text-amber-400"})]),_:1})]),_:1})):k("",!0),e.showEditBtn?(g(),I(a(di),{key:5})):k("",!0),o(a(de),{class:"cursor-pointer hover:bg-rcgray-600",onClick:h[3]||(h[3]=D=>s())},{default:f(()=>[h[9]||(h[9]=m("span",{class:"text-red-400"},"Delete",-1)),o(a(fe),null,{default:f(()=>[o(a(xt),{size:"16",class:"text-red-500"})]),_:1})]),_:1})]),_:1})]),_:1})])}}};function To(e,n){const i=De("appDirPath",null),l=O(null),t=O(null),s=yt(),r=O(!1),c=O("details"),u=O("notifications"),d=O(null),v=vn(),{copy:p}=pi(),{toastSuccess:h,toastError:x}=Be(),D=Pe(),{openDialog:A}=D,y=O({id:e.editId,label:"",icon:"network-device",isFavorite:!1,route:"/device/view/"+e.editId});ne(()=>{C(e.editId),v.panelRef2=d.value,window.addEventListener("keydown",M=>{M.key==="Escape"&&E()}),l&&[...s.favorites].forEach(M=>{M.id===e.editId&&(y.value.isFavorite=!0)}),B()}),Se(()=>{window.removeEventListener("keydown",M=>{M.key==="Escape"&&E()})});function C(M){r.value=!0,Z.get(`/api/devices/${M}`).then(te=>{l.value?Object.assign(l.value,te.data):l.value=te.data,r.value=!1})}function _(){l&&(y.value.id=l.value.id,y.value.label=l.value.device_name,y.value.route=`/device/view/${l.value.id}`,y.value.isFavorite=!y.value.isFavorite,s.toggleFavorite(y.value))}function Y(M){M==="details"?c.value="details":M==="comments"?c.value="comments":c.value="details"}function F(M){const X=["notifications","configs"].includes(M)?M:"notifications";u.value=X,localStorage.setItem("DeviceDetailsMainNav",X)}function B(){const M=localStorage.getItem("DeviceDetailsMainNav");M&&["notifications","configs"].includes(M)?u.value=M:u.value="notifications"}function R(){n("close")}function E(){R()}function H(M){try{p(M),h("Copied","Debug command copied to clipboard")}catch{x("Error","Failed to copy Debug command to clipboard")}}function ie(){t.value="Downloading...",h("Download Queued","Download started for device "+l.value.device_name),Z.post("/api/device/download-now",{device_id:l.value.id}).then(M=>{t.value="Queued...",h("Download Started","Download job for "+l.value.device_name+" was pushed to the queue."),oe()}).catch(M=>{t.value="Queued...",x("Error","Failed to start download job for "+l.value.device_name),console.error("Error starting download job:",M)})}function oe(){const M=setInterval(function(){Z.get("/api/tracked-jobs/"+l.value.id).then(te=>{t.value=te.data.data.status}),t.value==="finished"&&(h("Download Finished","Download finished for device "+l.value.device_name),clearInterval(M),setTimeout(()=>{t.value=null},3e3))},2e3)}function ee(){d!=null&&d.value.isCollapsed?d==null||d.value.expand():d==null||d.value.collapse()}function Ie(){Z.post("/api/eoc-recheck-device",{device_id:l.value.id,category_id:l.value.device_category_id}).then(M=>{M.data.success?(h("EOC Recheck","EOC validation rechecked successfully queued for device "+l.value.device_name),h("EOC Recheck","Refresh the configs table to see the updated EOC validation status in a few moments.")):x("EOC Recheck Failed","Failed to recheck EOC validation for device "+l.value.device_name)}).catch(M=>{console.error("Error rechecking EOC validation:",M),x("Error","Failed to recheck EOC validation: "+M.message)})}return{appDirPath:i,deviceData:l,downloadStatus:t,favoriteItem:y,isLoading:r,leftNavSelected:c,mainNavSelected:u,panelElement2:d,addToFavorites:_,closeNav:ee,copyDebug:H,downloadNow:ie,fetchDevice:C,openIntegrationUrl,recheckEocValidation:Ie,selectLeftNavView:Y,selectMainNavView:F}}const No={class:"flex flex-col flex-1 dark:bg-rcgray-900"},Fo={key:0,class:"flex flex-row items-center justify-between h-12 gap-3 pl-4 pr-2"},Lo={class:"flex items-center"},Oo={class:"text-lg font-semibold rc-text-heading-gradient font-inter ml-2"},Ro={class:"flex items-center"},Mo={class:"button-container flex flex-row items-center"},Po={key:2,class:"ml-2 text-muted-foreground transition-all duration-300 ease-in-out",style:{"word-wrap":"normal"}},Bo={key:3,class:"button-text"},jo={key:1},Vo={key:2},zo={key:0,class:"flex items-center justify-center",style:{height:"60vh"}},Yo={key:1},Ho={__name:"DeviceViewPane",props:{editId:Number},emits:["close"],setup(e,{emit:n}){const i=n,l=e,{deviceData:t,downloadStatus:s,favoriteItem:r,integrationIds:c,integrationNames:u,isLoading:d,leftNavSelected:v,mainNavSelected:p,panelElement2:h,appDirPath:x,addToFavorites:D,closeNav:A,copyDebug:y,downloadNow:C,fetchDevice:_,openIntegrationUrl:Y,selectLeftNavView:F,selectMainNavView:B,recheckEocValidation:R}=To(l,i),{handleSave:E,viewEditDialog:H,showConfirmDelete:ie,deleteDevice:oe,purgeDeviceConfigs:ee,newDeviceModalKey:Ie,disableDevice:M,enableDevice:te}=Lt();Je();const X=O(!1);function nn(){oe(l.editId),i("close")}function tn(){ee(l.editId)}function ln(){M(l.editId,!1),setTimeout(()=>{_(l.editId)},300)}function he(){te(l.editId,!1),setTimeout(()=>{_(l.editId)},300)}function je(){i("close")}return(Cn,$)=>{var $e,_e,Te,Ve,ze,U,kn;const se=T("Button"),j=T("RcIcon"),b=T("DeviceViewDetailsPanel"),q=T("ResizablePanel"),Ee=T("ResizableHandle"),ve=T("ResizablePanelGroup");return g(),w("main",No,[a(t)?(g(),w("div",Fo,[m("div",Lo,[o(se,{onClick:$[0]||($[0]=V=>je()),size:"sm",variant:"outline",class:"gap-1 border-none hover:bg-rcgray-600"},{default:f(()=>[o(a(bi),{size:"16",class:"hover:animate-pulse"})]),_:1}),m("span",Oo,N(a(t).device_name),1),($e=a(t))!=null&&$e.device_added_by&&((_e=a(t))==null?void 0:_e.device_added_by)==9e3?(g(),I(j,{key:0,name:"imported-device",class:"ml-2 mr-0",addedBy:(Te=a(t))==null?void 0:Te.device_added_by,source:"Zabbix"},null,8,["addedBy"])):k("",!0),(Ve=a(t))!=null&&Ve.device_added_by&&((ze=a(t))==null?void 0:ze.device_added_by)==9001?(g(),I(j,{key:1,name:"imported-device",class:"ml-2 mr-0",addedBy:(U=a(t))==null?void 0:U.device_added_by,source:"Netbox"},null,8,["addedBy"])):k("",!0),o(se,{variant:"ghost",class:"h-8 px-2 py-1.5 h-7 ml-2 animated-star",onClick:$[1]||($[1]=V=>a(D)())},{default:f(()=>[a(r).isFavorite?k("",!0):(g(),I(j,{key:0,name:"star-unselected",class:"text-muted-foreground animated-star"})),a(r).isFavorite?(g(),I(j,{key:1,name:"star-selected",class:"text-muted-foreground animated-star"})):k("",!0)]),_:1})]),m("div",Ro,[m("div",Mo,[o(ae,{delayDuration:50,content:"Copy debug command",side:"bottom"},{trigger:f(()=>[o(se,{class:"h-8 w-4 ml-2",onClick:$[2]||($[2]=V=>a(y)("cd "+a(x)+" && php artisan rconfig:download-device "+l.editId+" -d")),variant:"outline",title:"Copy debug command"},{default:f(()=>[o(a(el),{size:"16",class:"button-icon"}),$[16]||($[16]=m("span",{class:"button-text"},"Copy debug command",-1))]),_:1})]),_:1}),o(ae,{delayDuration:50,content:"Download now",side:"bottom"},{trigger:f(()=>[o(se,{class:Ze(a(s)?"h-8 ml-2 min-w-fit transition-all duration-300 ease-in-out":"h-8 ml-2 w-4"),onClick:$[3]||($[3]=V=>a(C)()),variant:"outline",title:"Download now"},{default:f(()=>[a(s)?(g(),I(Ci,{key:0,state:a(s)},null,8,["state"])):k("",!0),a(s)?k("",!0):(g(),I(j,{key:1,name:"folder-download-open",class:"button-icon"})),a(s)?(g(),w("span",Po,N(a(s)),1)):k("",!0),a(s)?k("",!0):(g(),w("span",Bo,"Download now"))]),_:1},8,["class"])]),_:1}),o(ae,{delayDuration:50,content:"Re-check CIC validation",side:"bottom"},{trigger:f(()=>[o(se,{class:"h-8 ml-2 w-4",onClick:$[4]||($[4]=V=>a(R)()),variant:"outline",title:"Re-check CIC validation"},{default:f(()=>[o(j,{name:"cic",size:"16",class:"button-icon"}),$[17]||($[17]=m("span",{class:"button-text"},"Re-check CIC validation",-1))]),_:1})]),_:1}),a(t)&&a(c).some(V=>V===parseInt(a(t).device_added_by,10))?(g(),I(ae,{key:0,delayDuration:50,content:"Open in "+(((kn=a(u).find(V=>V.id===parseInt(a(t).device_added_by,10)))==null?void 0:kn.name)||""),side:"bottom"},{trigger:f(()=>{var V;return[o(se,{class:"h-8 ml-2",onClick:$[5]||($[5]=Ne=>a(Y)()),variant:"outline",title:"Open in "+(((V=a(u).find(Ne=>Ne.id===parseInt(a(t).device_added_by,10)))==null?void 0:V.name)||"")},{default:f(()=>{var Ne,An,Dn,Sn,In,En;return[(Ne=a(t))!=null&&Ne.device_added_by&&((An=a(t))==null?void 0:An.device_added_by)==9e3?(g(),I(j,{key:0,name:"imported-device",class:"-ml-2 -mr-2",addedBy:(Dn=a(t))==null?void 0:Dn.device_added_by,source:"Zabbix"},null,8,["addedBy"])):k("",!0),(Sn=a(t))!=null&&Sn.device_added_by&&((In=a(t))==null?void 0:In.device_added_by)==9001?(g(),I(j,{key:1,name:"imported-device",class:"-ml-2 -mr-2",addedBy:(En=a(t))==null?void 0:En.device_added_by,source:"Netbox"},null,8,["addedBy"])):k("",!0)]}),_:1},8,["title"])]}),_:1},8,["content"])):k("",!0)]),a(t)?(g(),I($o,{key:0,rowData:a(t),onOnDisable:$[6]||($[6]=V=>ln()),onOnEnable:$[7]||($[7]=V=>he()),onOnPurge:$[8]||($[8]=V=>tn()),onOpenDeviceEdit:$[9]||($[9]=V=>(a(H)(e.editId),X.value=!1)),onOpenDeviceClone:$[10]||($[10]=V=>(a(H)(e.editId),X.value=!0)),onOnDelete:$[11]||($[11]=V=>ie.value=!0)},null,8,["rowData"])):k("",!0)])])):k("",!0),a(d)?(g(),w("div",jo,[$[18]||($[18]=m("div",{class:"flex items-center justify-center",style:{height:"60vh"}},null,-1)),o(cn,{class:"flex justify-center"})])):(g(),w("div",Vo,[o(ve,{direction:"horizontal"},{default:f(()=>[o(q,{"default-size":25,"max-size":30,"min-size":10,collapsible:"","collapsed-size":0,ref_key:"panelElement2",ref:h,class:"min-h-[100vh] h-full flex flex-col overflow-y-auto"},{default:f(()=>[o(a(Ge),{class:"max-h-[83vh] w-full rounded-md border smooth-scroll overflow-y-auto"},{default:f(()=>[o(Il,{onCloseNav:a(A),onSelectLeftNavView:a(F),selectedNav:a(v),deviceId:e.editId},null,8,["onCloseNav","onSelectLeftNavView","selectedNav","deviceId"]),a(v)==="details"?(g(),I(kl,{key:0,class:"p-2 mt-2",isLoading:a(d),data:a(t)},null,8,["isLoading","data"])):k("",!0),a(v)==="details"?(g(),I(b,{key:1,class:"p-2",isLoading:a(d),deviceData:a(t)},null,8,["isLoading","deviceData"])):k("",!0)]),_:1})]),_:1},512),o(Ee,{"with-handle":""}),o(q,{class:"min-h-[100vh]"},{default:f(()=>[o(a(Ge),{class:"h-[100vh] w-full rounded-md border"},{default:f(()=>[a(d)?(g(),w("div",zo,[o(cn,{class:"flex justify-center"})])):k("",!0),a(d)?k("",!0):(g(),w("div",Yo,[o(Ol,{class:"p-2",onSelectMainNavView:a(B),selectedNav:a(p)},null,8,["onSelectMainNavView","selectedNav"]),!a(d)&&a(p)==="notifications"?(g(),I(Eo,{key:0,class:"p-2",style:{height:"60vh"},deviceId:e.editId},null,8,["deviceId"])):k("",!0),!a(d)&&a(p)==="configs"?(g(),I(no,{key:1,class:"p-2",deviceId:e.editId,style:{height:"60vh"}},null,8,["deviceId"])):k("",!0)]))]),_:1})]),_:1})]),_:1}),(g(),I(Ot,{key:a(Ie),onClose:$[12]||($[12]=V=>X.value=!1),onSave:$[13]||($[13]=V=>{a(E)(),a(_)(e.editId)}),isClone:X.value,editId:e.editId},null,8,["isClone","editId"])),o(Pt,{ids:[e.editId],showConfirmDelete:a(ie),onClose:$[14]||($[14]=V=>ie.value=!1),onHandleDelete:$[15]||($[15]=V=>nn())},null,8,["ids","showConfirmDelete"])]))])}}},Uo=wt(Ho,[["__scopeId","data-v-d42340da"]]);function Go(e){const{toastError:n}=Be(),i=O([]),l=O("");function t(c){c.updateOptions({value:"Something went wrong - could not retrieve the configuration from the file system!"}),n("Error","Something went wrong - could not retrieve the configuration from the file system!")}function s(c,u){Z.get("/api/configs/view-config/"+c).then(d=>{l.value=d.data.data.config_location,u.getModel().setValue(d.data.data.content)}).catch(d=>{console.error(d),u.updateOptions({value:"Something went wrong - could not retrieve the configuration from the file system!"}),n("Error","Something went wrong - could not retrieve the configuration from the file system!")})}function r(c,u){c.ctrlKey&&c.key==="Enter"&&u()}return ne(()=>{window.addEventListener("keydown",c=>r(c,()=>saveDialog(e.configId,model,null,emit,()=>emit("close"))))}),Se(()=>{window.removeEventListener("keydown",r)}),{errors:i,config_location:l,getDefaultEditorCode:t,showConfiguration:s,handleKeyDown:r}}const Ko={class:"p-2 overflow-none"},qo={key:0,class:"mt-4 space-y-2"},Wo={key:1,class:"space-y-4"},Qo={class:"p-4 px-8"},Xo={class:"flex flex-col"},Zo={class:"flex items-center p-2"},Jo={class:"flex items-center gap-2 ml-auto"},ea={__name:"ConfigViewMainPanel",props:{configId:Number},setup(e){const n=e;let i=null;const{checkDarkModeIsSet:l,checkLineNumbersIsSet:t,checkMiniMapIsSet:s,checkStickyScrollIsSet:r,copyItem:c,copyPath:u,download:d,initEditor:v,toggleEditorDarkMode:p,toggleEditorLineNumbers:h,toggleEditorMinimap:x}=gi(hi),{getDefaultEditorCode:D,showConfiguration:A,config_location:y}=Go(n),C=O(!1),_=O([]);ne(()=>{Y(),F()});function Y(){l()&&_.value.push("dark"),t()&&_.value.push("lineNumbers"),s()&&_.value.push("minimap"),r()&&_.value.push("stickyscroll")}function F(){i=v("code-editor__code-pre","rconfig"),n.configId===0?D(i):A(n.configId,i)}return(B,R)=>{const E=T("Skeleton"),H=T("Icon"),ie=T("Button"),oe=T("Separator");return g(),w("div",null,[m("div",Ko,[C.value?(g(),w("div",qo,[o(E,{class:"w-1/2 h-4"}),o(E,{class:"w-full h-4"}),o(E,{class:"w-full h-4"}),o(E,{class:"w-full h-4"}),o(E,{class:"w-full h-4"}),o(E,{class:"w-full h-4"}),o(E,{class:"w-full h-4"}),o(E,{class:"w-full h-4"}),o(E,{class:"w-full h-4"})])):k("",!0),C.value?k("",!0):(g(),w("div",Wo,[m("div",Qo,[m("div",Xo,[m("div",Zo,[R[7]||(R[7]=m("div",{class:"flex items-center gap-2"},null,-1)),m("div",null,[o(ie,{variant:"ghost",onClick:R[0]||(R[0]=ee=>a(u)(a(y))),title:"copy path"},{default:f(()=>[o(H,{icon:"lucide-lab:copy-file-path"})]),_:1}),o(ie,{variant:"ghost",onClick:R[1]||(R[1]=ee=>a(c)()),title:"copy content"},{default:f(()=>[o(H,{icon:"mdi:content-copy"})]),_:1}),o(ie,{variant:"ghost",class:"ml-1",onClick:R[2]||(R[2]=ee=>a(d)(a(y))),title:"download"},{default:f(()=>[o(H,{icon:"mingcute:download-fill"})]),_:1})]),o(oe,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),m("div",Jo,[o(a(ki),{modelValue:_.value,"onUpdate:modelValue":R[6]||(R[6]=ee=>_.value=ee),type:"multiple"},{default:f(()=>[o(a(ke),{value:"dark",title:"Toggle bold",onClick:R[3]||(R[3]=ee=>a(p)())},{default:f(()=>[o(H,{icon:"mdi:theme-light-dark",class:"w-4 h-4"})]),_:1}),o(a(ke),{value:"lineNumbers",title:"Line Numbers",onClick:R[4]||(R[4]=ee=>a(h)())},{default:f(()=>[o(H,{icon:"mingcute:numbers-09-sort-ascending-line",class:"w-4 h-4"})]),_:1}),o(a(ke),{value:"minimap",title:"Minimap",onClick:R[5]||(R[5]=ee=>a(x)())},{default:f(()=>[o(H,{icon:"tabler:map-2",class:"w-4 h-4"})]),_:1})]),_:1},8,["modelValue"])]),o(oe,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),R[8]||(R[8]=m("span",null,"CONFIG",-1))]),o(oe,{class:"relative w-full h-px shrink-0 bg-border"})]),R[9]||(R[9]=m("div",{class:"code-editor__code-pre",id:"code-editor__code-pre",style:{height:"calc(100vh - 300px)"}},null,-1))])]))])])}}},na={class:"grid gap-0.5 w-full"},ia={class:"flex justify-between"},ta={key:0,class:"flex items-center gap-2 text-xs text-muted-foreground"},la={key:0,class:"space-y-2"},oa={key:0,class:"grid gap-3"},aa={class:"grid gap-3"},ra={class:"flex items-center justify-between"},sa={class:"flex items-center gap-2"},ca={class:"flex items-center justify-between"},ua={class:"flex items-center gap-2"},da={class:"flex items-center justify-between"},fa={class:"flex items-center gap-2"},pa={class:"flex items-center justify-between"},ma={class:"flex items-center gap-2"},va={class:"flex items-center justify-between"},ga={class:"flex items-center gap-2"},ha={class:"flex items-center justify-between"},_a={class:"flex items-center gap-2"},xa={class:"flex items-center justify-between"},ya={class:"flex items-center gap-2"},wa={class:"flex items-center justify-between"},ba={class:"flex items-center gap-2"},Ca={__name:"ConfigSummaryPanel",props:{isLoading:Boolean,configData:Object},setup(e){const n=De("formatters");return(i,l)=>{const t=T("StatusGreenIcon"),s=T("StatusRedIcon"),r=T("StatusYellowIcon"),c=T("Skeleton");return g(),w("div",null,[o(a(ai),{class:"overflow-hidden"},{default:f(()=>[o(a(ti),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:f(()=>[m("div",na,[o(a(li),{class:"gap-2 text-lg group"},{default:f(()=>[m("div",ia,[l[1]||(l[1]=m("div",null,"Config Details",-1)),!e.isLoading&&e.configData?(g(),w("div",ta,[l[0]||(l[0]=L(" Download status: ",-1)),e.configData.download_status===1?(g(),I(t,{key:0,class:"mr-2"})):e.configData.download_status===0?(g(),I(s,{key:1,class:"mr-2"})):e.configData.download_status===2?(g(),I(r,{key:2,class:"mr-2"})):k("",!0)])):k("",!0)])]),_:1})])]),_:1}),o(a(oi),{class:"p-4 pt-0 text-sm"},{default:f(()=>[e.isLoading?(g(),w("div",la,[o(c,{class:"w-1/2 h-4"}),o(c,{class:"w-full h-4"}),o(c,{class:"w-full h-4"}),o(c,{class:"w-full h-4"}),o(c,{class:"w-full h-4"}),o(c,{class:"w-full h-4"}),o(c,{class:"w-full h-4"}),o(c,{class:"w-full h-4"}),o(c,{class:"w-full h-4"})])):k("",!0),o(Ce,{name:"fade"},{default:f(()=>[!e.isLoading&&e.configData?(g(),w("div",oa,[m("dl",aa,[m("div",ra,[l[2]||(l[2]=m("dt",{class:"text-muted-foreground"},"Device ID",-1)),m("dd",sa,N(e.configData.id),1)]),m("div",ca,[l[3]||(l[3]=m("dt",{class:"text-muted-foreground"},"Device Name",-1)),m("dd",ua,N(e.configData.device_name),1)]),m("div",da,[l[4]||(l[4]=m("dt",{class:"text-muted-foreground"},"Command Group",-1)),m("dd",fa,N(e.configData.device_category),1)]),m("div",pa,[l[5]||(l[5]=m("dt",{class:"text-muted-foreground"},"Command",-1)),m("dd",ma,N(e.configData.command),1)]),m("div",va,[l[6]||(l[6]=m("dt",{class:"text-muted-foreground"},"Filename",-1)),m("dd",ga,N(e.configData.config_filename),1)]),m("div",ha,[l[7]||(l[7]=m("dt",{class:"text-muted-foreground"},"Filesize",-1)),m("dd",_a,N(a(n).formatFileSize(e.configData.config_filesize)),1)]),m("div",xa,[l[8]||(l[8]=m("dt",{class:"text-muted-foreground"},"Duration",-1)),m("dd",ya,N(a(n).formatDuration(e.configData.start_time,e.configData.end_time)),1)]),m("div",wa,[l[9]||(l[9]=m("dt",{class:"text-muted-foreground"},"Created",-1)),m("dd",ba,N(a(n).formatTime(e.configData.created_at)),1)])])])):k("",!0)]),_:1})]),_:1})]),_:1})])}}},ka={__name:"ConfigViewPaneDropdown",props:{editId:{type:Number,required:!0}},emits:["onDelete","onPurge"],setup(e,{emit:n}){const i=n,{copy:l}=pi(),{toastSuccess:t}=Be(),s=e;function r(){i("onDelete")}function c(){l(s.editId),t("Success","Copied to clipboard")}return(u,d)=>{const v=T("Icon"),p=T("Button");return g(),w("div",null,[o(a(fi),null,{default:f(()=>[o(a(ci),{"as-child":""},{default:f(()=>[o(p,{variant:"ghost",class:"h-8 ml-2"},{default:f(()=>[o(v,{icon:"radix-icons:dots-vertical",class:""})]),_:1})]),_:1}),o(a(ui),{class:"w-56",align:"end",side:"bottom"},{default:f(()=>[o(a(de),{class:"cursor-pointer hover:bg-rcgray-600",onClick:d[0]||(d[0]=h=>c())},{default:f(()=>[d[2]||(d[2]=m("span",null,"Copy ID",-1)),o(a(fe),null,{default:f(()=>[o(v,{icon:"icon-park-twotone:delete-five"})]),_:1})]),_:1}),o(a(di)),o(a(de),{class:"cursor-pointer hover:bg-rcgray-600",onClick:d[1]||(d[1]=h=>r())},{default:f(()=>[d[3]||(d[3]=m("span",{class:"text-red-400"},"Delete",-1)),o(a(fe),null,{default:f(()=>[o(v,{icon:"flat-color-icons:full-trash"})]),_:1})]),_:1})]),_:1})]),_:1})])}}};function Aa(e,n){const i=O(null),l=O(!1),t=O(null),s=vn(),{toastError:r}=Be();ne(()=>{c(),s.panelRef2=t.value,window.addEventListener("keydown",v=>{v.key==="Escape"&&d()})}),Se(()=>{window.removeEventListener("keydown",v=>{v.key==="Escape"&&d()})});function c(){Z.get(`/api/configs/${e.configId}`).then(v=>{i.value=v.data,l.value=!1}).catch(v=>{console.error(v),r("Error","Something went wrong - could not retrieve the configuration from the file system!")})}function u(){n("close")}function d(){u()}return{configData:i,isLoading:l,panelElement2:t}}const Da={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},Sa={class:"flex flex-row items-center justify-between h-12 gap-3 pl-4 pr-2 border-b"},Ia={key:0,class:"flex items-center"},Ea={class:"text-lg font-semibold text-blue-400 font-inter"},$a={class:"flex items-center"},Ta={class:""},Na={key:0,class:"flex items-center justify-center",style:{height:"60vh"}},Fa={__name:"ConfigViewPane",props:{configId:Number},emits:["close"],setup(e,{emit:n}){const i=n,l=e,{configData:t,isLoading:s,panelElement2:r}=Aa(l,i),{deleteConfig:c}=Ft(l);function u(){c(l.configId),i("close")}return(d,v)=>{const p=T("ResizablePanel"),h=T("ResizableHandle"),x=T("ResizablePanelGroup");return g(),w("main",Da,[m("div",Sa,[a(t)?(g(),w("div",Ia,[m("span",Ea,N(a(t).config_filename),1)])):k("",!0),m("div",$a,[o(ka,{editId:e.configId,onOnDelete:v[0]||(v[0]=D=>u())},null,8,["editId"])])]),m("div",Ta,[o(x,{direction:"horizontal",class:""},{default:f(()=>[o(p,{"default-size":25,"max-size":30,"min-size":10,collapsible:"","collapsed-size":0,ref_key:"panelElement2",ref:r,class:"min-h-[100vh]"},{default:f(()=>[o(Ca,{class:"p-2 mt-2",isLoading:a(s),configData:a(t)},null,8,["isLoading","configData"])]),_:1},512),o(h,{"with-handle":""}),o(p,{class:"min-h-[100vh]"},{default:f(()=>[o(a(Ge),{class:"h-full border border-none rounded-md"},{default:f(()=>[a(s)?(g(),w("div",Na,[o(cn,{class:"flex justify-center"})])):k("",!0),a(t)?(g(),I(ea,{key:1,class:"p-2",configId:e.configId,style:{height:"60vh"}},null,8,["configId"])):k("",!0)]),_:1})]),_:1})]),_:1})])])}}},La={class:"grid gap-2 py-4"},Oa={class:"grid items-center grid-cols-4 gap-4"},Ra={class:"grid items-center grid-cols-4 gap-4"},Ma={key:0,class:"flex flex-col w-full space-y-2 text-sm text-muted-foreground"},Pa={class:"pl-2 ml-auto"},Ba={class:"rc-kdb-class2"},ja={__name:"TemplateImportDialog",props:{editId:Number},emits:["setTemplateCode"],setup(e,{emit:n}){const{importingTemplates:i,getTemplateRepoFolders:l,vendorTemplateOptions:t,vendorOptionSelected:s,showFileOptions:r,listedFiles:c,fileOptionSelected:u,selectedTemplateCode:d}=_i(),v=Pe(),{closeDialog:p,isDialogOpen:h}=v,x=n;O([]),O({});function D(y){y.ctrlKey&&y.key==="Enter"&&A()}ne(()=>{l(),window.addEventListener("keydown",D)}),Se(()=>{window.removeEventListener("keydown",D)});function A(){x("setTemplateCode",d)}return(y,C)=>{const _=T("Button"),Y=T("RcIcon");return g(),I(a(It),{open:a(h)("DialogTemplateImport")},{default:f(()=>[o(a(bt),{"as-child":""}),o(a(Ct),{class:"w-full",onEscapeKeyDown:C[4]||(C[4]=F=>a(p)("DialogTemplateImport")),onPointerDownOutside:C[5]||(C[5]=F=>a(p)("DialogTemplateImport")),onCloseClicked:C[6]||(C[6]=F=>a(p)("DialogTemplateImport"))},{default:f(()=>[o(a(kt),null,{default:f(()=>[o(a(At),null,{default:f(()=>[...C[7]||(C[7]=[L("Import Template from GitHub",-1)])]),_:1}),o(a(Dt),null,{default:f(()=>[...C[8]||(C[8]=[L("Choose a vendor and template file to import",-1)])]),_:1})]),_:1}),m("div",La,[m("div",Oa,[o(a(Rn),{modelValue:a(s),"onUpdate:modelValue":C[0]||(C[0]=F=>Ln(s)?s.value=F:null)},{default:f(()=>[o(a(Mn),{className:"w-[280px] flex h-9 items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start w-[180px]"},{default:f(()=>[o(a(Pn),{placeholder:"Select a vendor"})]),_:1}),o(a(Bn),{position:"popper"},{default:f(()=>[o(a(Vn),null,{default:f(()=>[o(Ci,{state:a(i),class:"items-center"},null,8,["state"]),(g(!0),w(He,null,Ue(a(t).data,F=>(g(),I(a(jn),{key:F.name,value:F.path.toString()},{default:f(()=>[L(N(F.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),m("div",Ra,[a(r)?(g(),I(a(Rn),{key:0,modelValue:a(u),"onUpdate:modelValue":C[1]||(C[1]=F=>Ln(u)?u.value=F:null)},{default:f(()=>[o(a(Mn),{className:"w-[280px] flex h-9 items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start w-[180px]"},{default:f(()=>[o(a(Pn),{placeholder:"Select a template file"})]),_:1}),o(a(Bn),{position:"popper"},{default:f(()=>[o(a(Vn),null,{default:f(()=>[(g(!0),w(He,null,Ue(a(c).data,F=>(g(),I(a(jn),{key:F.name,value:F.path.toString()},{default:f(()=>[L(N(F.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])):k("",!0)])]),a(u)?(g(),w("div",Ma," Click Apply to load the template into the editor ")):k("",!0),o(a(St),null,{default:f(()=>[o(_,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:C[2]||(C[2]=F=>a(p)("DialogTemplateImport")),size:"sm"},{default:f(()=>[...C[9]||(C[9]=[L(" Close ",-1),m("div",{class:"pl-2 ml-auto"},[m("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),a(d)?(g(),I(_,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:C[3]||(C[3]=F=>A()),variant:"primary"},{default:f(()=>[C[11]||(C[11]=L(" Apply ",-1)),m("div",Pa,[m("kbd",Ba,[C[10]||(C[10]=L(" Ctrl  ",-1)),o(Y,{name:"enter",class:"ml-1"})])])]),_:1})):k("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function Ai(e){return typeof e>"u"||e===null}function Va(e){return typeof e=="object"&&e!==null}function za(e){return Array.isArray(e)?e:Ai(e)?[]:[e]}function Ya(e,n){var i,l,t,s;if(n)for(s=Object.keys(n),i=0,l=s.length;i<l;i+=1)t=s[i],e[t]=n[t];return e}function Ha(e,n){var i="",l;for(l=0;l<n;l+=1)i+=e;return i}function Ua(e){return e===0&&Number.NEGATIVE_INFINITY===1/e}var Ga=Ai,Ka=Va,qa=za,Wa=Ha,Qa=Ua,Xa=Ya,G={isNothing:Ga,isObject:Ka,toArray:qa,repeat:Wa,isNegativeZero:Qa,extend:Xa};function Di(e,n){var i="",l=e.reason||"(unknown reason)";return e.mark?(e.mark.name&&(i+='in "'+e.mark.name+'" '),i+="("+(e.mark.line+1)+":"+(e.mark.column+1)+")",!n&&e.mark.snippet&&(i+=`

`+e.mark.snippet),l+" "+i):l}function Le(e,n){Error.call(this),this.name="YAMLException",this.reason=e,this.mark=n,this.message=Di(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}Le.prototype=Object.create(Error.prototype);Le.prototype.constructor=Le;Le.prototype.toString=function(n){return this.name+": "+Di(this,n)};var Q=Le;function on(e,n,i,l,t){var s="",r="",c=Math.floor(t/2)-1;return l-n>c&&(s=" ... ",n=l-c+s.length),i-l>c&&(r=" ...",i=l+c-r.length),{str:s+e.slice(n,i).replace(/\t/g,"→")+r,pos:l-n+s.length}}function an(e,n){return G.repeat(" ",n-e.length)+e}function Za(e,n){if(n=Object.create(n||null),!e.buffer)return null;n.maxLength||(n.maxLength=79),typeof n.indent!="number"&&(n.indent=1),typeof n.linesBefore!="number"&&(n.linesBefore=3),typeof n.linesAfter!="number"&&(n.linesAfter=2);for(var i=/\r?\n|\r|\0/g,l=[0],t=[],s,r=-1;s=i.exec(e.buffer);)t.push(s.index),l.push(s.index+s[0].length),e.position<=s.index&&r<0&&(r=l.length-2);r<0&&(r=l.length-1);var c="",u,d,v=Math.min(e.line+n.linesAfter,t.length).toString().length,p=n.maxLength-(n.indent+v+3);for(u=1;u<=n.linesBefore&&!(r-u<0);u++)d=on(e.buffer,l[r-u],t[r-u],e.position-(l[r]-l[r-u]),p),c=G.repeat(" ",n.indent)+an((e.line-u+1).toString(),v)+" | "+d.str+`
`+c;for(d=on(e.buffer,l[r],t[r],e.position,p),c+=G.repeat(" ",n.indent)+an((e.line+1).toString(),v)+" | "+d.str+`
`,c+=G.repeat("-",n.indent+v+3+d.pos)+`^
`,u=1;u<=n.linesAfter&&!(r+u>=t.length);u++)d=on(e.buffer,l[r+u],t[r+u],e.position-(l[r]-l[r+u]),p),c+=G.repeat(" ",n.indent)+an((e.line+u+1).toString(),v)+" | "+d.str+`
`;return c.replace(/\n$/,"")}var Ja=Za,er=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],nr=["scalar","sequence","mapping"];function ir(e){var n={};return e!==null&&Object.keys(e).forEach(function(i){e[i].forEach(function(l){n[String(l)]=i})}),n}function tr(e,n){if(n=n||{},Object.keys(n).forEach(function(i){if(er.indexOf(i)===-1)throw new Q('Unknown option "'+i+'" is met in definition of "'+e+'" YAML type.')}),this.options=n,this.tag=e,this.kind=n.kind||null,this.resolve=n.resolve||function(){return!0},this.construct=n.construct||function(i){return i},this.instanceOf=n.instanceOf||null,this.predicate=n.predicate||null,this.represent=n.represent||null,this.representName=n.representName||null,this.defaultStyle=n.defaultStyle||null,this.multi=n.multi||!1,this.styleAliases=ir(n.styleAliases||null),nr.indexOf(this.kind)===-1)throw new Q('Unknown kind "'+this.kind+'" is specified for "'+e+'" YAML type.')}var K=tr;function zn(e,n){var i=[];return e[n].forEach(function(l){var t=i.length;i.forEach(function(s,r){s.tag===l.tag&&s.kind===l.kind&&s.multi===l.multi&&(t=r)}),i[t]=l}),i}function lr(){var e={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},n,i;function l(t){t.multi?(e.multi[t.kind].push(t),e.multi.fallback.push(t)):e[t.kind][t.tag]=e.fallback[t.tag]=t}for(n=0,i=arguments.length;n<i;n+=1)arguments[n].forEach(l);return e}function un(e){return this.extend(e)}un.prototype.extend=function(n){var i=[],l=[];if(n instanceof K)l.push(n);else if(Array.isArray(n))l=l.concat(n);else if(n&&(Array.isArray(n.implicit)||Array.isArray(n.explicit)))n.implicit&&(i=i.concat(n.implicit)),n.explicit&&(l=l.concat(n.explicit));else throw new Q("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");i.forEach(function(s){if(!(s instanceof K))throw new Q("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(s.loadKind&&s.loadKind!=="scalar")throw new Q("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(s.multi)throw new Q("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),l.forEach(function(s){if(!(s instanceof K))throw new Q("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var t=Object.create(un.prototype);return t.implicit=(this.implicit||[]).concat(i),t.explicit=(this.explicit||[]).concat(l),t.compiledImplicit=zn(t,"implicit"),t.compiledExplicit=zn(t,"explicit"),t.compiledTypeMap=lr(t.compiledImplicit,t.compiledExplicit),t};var Si=un,Ii=new K("tag:yaml.org,2002:str",{kind:"scalar",construct:function(e){return e!==null?e:""}}),Ei=new K("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(e){return e!==null?e:[]}}),$i=new K("tag:yaml.org,2002:map",{kind:"mapping",construct:function(e){return e!==null?e:{}}}),Ti=new Si({explicit:[Ii,Ei,$i]});function or(e){if(e===null)return!0;var n=e.length;return n===1&&e==="~"||n===4&&(e==="null"||e==="Null"||e==="NULL")}function ar(){return null}function rr(e){return e===null}var Ni=new K("tag:yaml.org,2002:null",{kind:"scalar",resolve:or,construct:ar,predicate:rr,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function sr(e){if(e===null)return!1;var n=e.length;return n===4&&(e==="true"||e==="True"||e==="TRUE")||n===5&&(e==="false"||e==="False"||e==="FALSE")}function cr(e){return e==="true"||e==="True"||e==="TRUE"}function ur(e){return Object.prototype.toString.call(e)==="[object Boolean]"}var Fi=new K("tag:yaml.org,2002:bool",{kind:"scalar",resolve:sr,construct:cr,predicate:ur,represent:{lowercase:function(e){return e?"true":"false"},uppercase:function(e){return e?"TRUE":"FALSE"},camelcase:function(e){return e?"True":"False"}},defaultStyle:"lowercase"});function dr(e){return 48<=e&&e<=57||65<=e&&e<=70||97<=e&&e<=102}function fr(e){return 48<=e&&e<=55}function pr(e){return 48<=e&&e<=57}function mr(e){if(e===null)return!1;var n=e.length,i=0,l=!1,t;if(!n)return!1;if(t=e[i],(t==="-"||t==="+")&&(t=e[++i]),t==="0"){if(i+1===n)return!0;if(t=e[++i],t==="b"){for(i++;i<n;i++)if(t=e[i],t!=="_"){if(t!=="0"&&t!=="1")return!1;l=!0}return l&&t!=="_"}if(t==="x"){for(i++;i<n;i++)if(t=e[i],t!=="_"){if(!dr(e.charCodeAt(i)))return!1;l=!0}return l&&t!=="_"}if(t==="o"){for(i++;i<n;i++)if(t=e[i],t!=="_"){if(!fr(e.charCodeAt(i)))return!1;l=!0}return l&&t!=="_"}}if(t==="_")return!1;for(;i<n;i++)if(t=e[i],t!=="_"){if(!pr(e.charCodeAt(i)))return!1;l=!0}return!(!l||t==="_")}function vr(e){var n=e,i=1,l;if(n.indexOf("_")!==-1&&(n=n.replace(/_/g,"")),l=n[0],(l==="-"||l==="+")&&(l==="-"&&(i=-1),n=n.slice(1),l=n[0]),n==="0")return 0;if(l==="0"){if(n[1]==="b")return i*parseInt(n.slice(2),2);if(n[1]==="x")return i*parseInt(n.slice(2),16);if(n[1]==="o")return i*parseInt(n.slice(2),8)}return i*parseInt(n,10)}function gr(e){return Object.prototype.toString.call(e)==="[object Number]"&&e%1===0&&!G.isNegativeZero(e)}var Li=new K("tag:yaml.org,2002:int",{kind:"scalar",resolve:mr,construct:vr,predicate:gr,represent:{binary:function(e){return e>=0?"0b"+e.toString(2):"-0b"+e.toString(2).slice(1)},octal:function(e){return e>=0?"0o"+e.toString(8):"-0o"+e.toString(8).slice(1)},decimal:function(e){return e.toString(10)},hexadecimal:function(e){return e>=0?"0x"+e.toString(16).toUpperCase():"-0x"+e.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),hr=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function _r(e){return!(e===null||!hr.test(e)||e[e.length-1]==="_")}function xr(e){var n,i;return n=e.replace(/_/g,"").toLowerCase(),i=n[0]==="-"?-1:1,"+-".indexOf(n[0])>=0&&(n=n.slice(1)),n===".inf"?i===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:n===".nan"?NaN:i*parseFloat(n,10)}var yr=/^[-+]?[0-9]+e/;function wr(e,n){var i;if(isNaN(e))switch(n){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===e)switch(n){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===e)switch(n){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(G.isNegativeZero(e))return"-0.0";return i=e.toString(10),yr.test(i)?i.replace("e",".e"):i}function br(e){return Object.prototype.toString.call(e)==="[object Number]"&&(e%1!==0||G.isNegativeZero(e))}var Oi=new K("tag:yaml.org,2002:float",{kind:"scalar",resolve:_r,construct:xr,predicate:br,represent:wr,defaultStyle:"lowercase"}),Ri=Ti.extend({implicit:[Ni,Fi,Li,Oi]}),Mi=Ri,Pi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Bi=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function Cr(e){return e===null?!1:Pi.exec(e)!==null||Bi.exec(e)!==null}function kr(e){var n,i,l,t,s,r,c,u=0,d=null,v,p,h;if(n=Pi.exec(e),n===null&&(n=Bi.exec(e)),n===null)throw new Error("Date resolve error");if(i=+n[1],l=+n[2]-1,t=+n[3],!n[4])return new Date(Date.UTC(i,l,t));if(s=+n[4],r=+n[5],c=+n[6],n[7]){for(u=n[7].slice(0,3);u.length<3;)u+="0";u=+u}return n[9]&&(v=+n[10],p=+(n[11]||0),d=(v*60+p)*6e4,n[9]==="-"&&(d=-d)),h=new Date(Date.UTC(i,l,t,s,r,c,u)),d&&h.setTime(h.getTime()-d),h}function Ar(e){return e.toISOString()}var ji=new K("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:Cr,construct:kr,instanceOf:Date,represent:Ar});function Dr(e){return e==="<<"||e===null}var Vi=new K("tag:yaml.org,2002:merge",{kind:"scalar",resolve:Dr}),hn=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function Sr(e){if(e===null)return!1;var n,i,l=0,t=e.length,s=hn;for(i=0;i<t;i++)if(n=s.indexOf(e.charAt(i)),!(n>64)){if(n<0)return!1;l+=6}return l%8===0}function Ir(e){var n,i,l=e.replace(/[\r\n=]/g,""),t=l.length,s=hn,r=0,c=[];for(n=0;n<t;n++)n%4===0&&n&&(c.push(r>>16&255),c.push(r>>8&255),c.push(r&255)),r=r<<6|s.indexOf(l.charAt(n));return i=t%4*6,i===0?(c.push(r>>16&255),c.push(r>>8&255),c.push(r&255)):i===18?(c.push(r>>10&255),c.push(r>>2&255)):i===12&&c.push(r>>4&255),new Uint8Array(c)}function Er(e){var n="",i=0,l,t,s=e.length,r=hn;for(l=0;l<s;l++)l%3===0&&l&&(n+=r[i>>18&63],n+=r[i>>12&63],n+=r[i>>6&63],n+=r[i&63]),i=(i<<8)+e[l];return t=s%3,t===0?(n+=r[i>>18&63],n+=r[i>>12&63],n+=r[i>>6&63],n+=r[i&63]):t===2?(n+=r[i>>10&63],n+=r[i>>4&63],n+=r[i<<2&63],n+=r[64]):t===1&&(n+=r[i>>2&63],n+=r[i<<4&63],n+=r[64],n+=r[64]),n}function $r(e){return Object.prototype.toString.call(e)==="[object Uint8Array]"}var zi=new K("tag:yaml.org,2002:binary",{kind:"scalar",resolve:Sr,construct:Ir,predicate:$r,represent:Er}),Tr=Object.prototype.hasOwnProperty,Nr=Object.prototype.toString;function Fr(e){if(e===null)return!0;var n=[],i,l,t,s,r,c=e;for(i=0,l=c.length;i<l;i+=1){if(t=c[i],r=!1,Nr.call(t)!=="[object Object]")return!1;for(s in t)if(Tr.call(t,s))if(!r)r=!0;else return!1;if(!r)return!1;if(n.indexOf(s)===-1)n.push(s);else return!1}return!0}function Lr(e){return e!==null?e:[]}var Yi=new K("tag:yaml.org,2002:omap",{kind:"sequence",resolve:Fr,construct:Lr}),Or=Object.prototype.toString;function Rr(e){if(e===null)return!0;var n,i,l,t,s,r=e;for(s=new Array(r.length),n=0,i=r.length;n<i;n+=1){if(l=r[n],Or.call(l)!=="[object Object]"||(t=Object.keys(l),t.length!==1))return!1;s[n]=[t[0],l[t[0]]]}return!0}function Mr(e){if(e===null)return[];var n,i,l,t,s,r=e;for(s=new Array(r.length),n=0,i=r.length;n<i;n+=1)l=r[n],t=Object.keys(l),s[n]=[t[0],l[t[0]]];return s}var Hi=new K("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:Rr,construct:Mr}),Pr=Object.prototype.hasOwnProperty;function Br(e){if(e===null)return!0;var n,i=e;for(n in i)if(Pr.call(i,n)&&i[n]!==null)return!1;return!0}function jr(e){return e!==null?e:{}}var Ui=new K("tag:yaml.org,2002:set",{kind:"mapping",resolve:Br,construct:jr}),_n=Mi.extend({implicit:[ji,Vi],explicit:[zi,Yi,Hi,Ui]}),me=Object.prototype.hasOwnProperty,Ke=1,Gi=2,Ki=3,qe=4,rn=1,Vr=2,Yn=3,zr=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,Yr=/[\x85\u2028\u2029]/,Hr=/[,\[\]\{\}]/,qi=/^(?:!|!!|![a-z\-]+!)$/i,Wi=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Hn(e){return Object.prototype.toString.call(e)}function le(e){return e===10||e===13}function ge(e){return e===9||e===32}function J(e){return e===9||e===32||e===10||e===13}function we(e){return e===44||e===91||e===93||e===123||e===125}function Ur(e){var n;return 48<=e&&e<=57?e-48:(n=e|32,97<=n&&n<=102?n-97+10:-1)}function Gr(e){return e===120?2:e===117?4:e===85?8:0}function Kr(e){return 48<=e&&e<=57?e-48:-1}function Un(e){return e===48?"\0":e===97?"\x07":e===98?"\b":e===116||e===9?"	":e===110?`
`:e===118?"\v":e===102?"\f":e===114?"\r":e===101?"\x1B":e===32?" ":e===34?'"':e===47?"/":e===92?"\\":e===78?"":e===95?" ":e===76?"\u2028":e===80?"\u2029":""}function qr(e){return e<=65535?String.fromCharCode(e):String.fromCharCode((e-65536>>10)+55296,(e-65536&1023)+56320)}var Qi=new Array(256),Xi=new Array(256);for(var xe=0;xe<256;xe++)Qi[xe]=Un(xe)?1:0,Xi[xe]=Un(xe);function Wr(e,n){this.input=e,this.filename=n.filename||null,this.schema=n.schema||_n,this.onWarning=n.onWarning||null,this.legacy=n.legacy||!1,this.json=n.json||!1,this.listener=n.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=e.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Zi(e,n){var i={name:e.filename,buffer:e.input.slice(0,-1),position:e.position,line:e.line,column:e.position-e.lineStart};return i.snippet=Ja(i),new Q(n,i)}function S(e,n){throw Zi(e,n)}function We(e,n){e.onWarning&&e.onWarning.call(null,Zi(e,n))}var Gn={YAML:function(n,i,l){var t,s,r;n.version!==null&&S(n,"duplication of %YAML directive"),l.length!==1&&S(n,"YAML directive accepts exactly one argument"),t=/^([0-9]+)\.([0-9]+)$/.exec(l[0]),t===null&&S(n,"ill-formed argument of the YAML directive"),s=parseInt(t[1],10),r=parseInt(t[2],10),s!==1&&S(n,"unacceptable YAML version of the document"),n.version=l[0],n.checkLineBreaks=r<2,r!==1&&r!==2&&We(n,"unsupported YAML version of the document")},TAG:function(n,i,l){var t,s;l.length!==2&&S(n,"TAG directive accepts exactly two arguments"),t=l[0],s=l[1],qi.test(t)||S(n,"ill-formed tag handle (first argument) of the TAG directive"),me.call(n.tagMap,t)&&S(n,'there is a previously declared suffix for "'+t+'" tag handle'),Wi.test(s)||S(n,"ill-formed tag prefix (second argument) of the TAG directive");try{s=decodeURIComponent(s)}catch{S(n,"tag prefix is malformed: "+s)}n.tagMap[t]=s}};function pe(e,n,i,l){var t,s,r,c;if(n<i){if(c=e.input.slice(n,i),l)for(t=0,s=c.length;t<s;t+=1)r=c.charCodeAt(t),r===9||32<=r&&r<=1114111||S(e,"expected valid JSON character");else zr.test(c)&&S(e,"the stream contains non-printable characters");e.result+=c}}function Kn(e,n,i,l){var t,s,r,c;for(G.isObject(i)||S(e,"cannot merge mappings; the provided source object is unacceptable"),t=Object.keys(i),r=0,c=t.length;r<c;r+=1)s=t[r],me.call(n,s)||(n[s]=i[s],l[s]=!0)}function be(e,n,i,l,t,s,r,c,u){var d,v;if(Array.isArray(t))for(t=Array.prototype.slice.call(t),d=0,v=t.length;d<v;d+=1)Array.isArray(t[d])&&S(e,"nested arrays are not supported inside keys"),typeof t=="object"&&Hn(t[d])==="[object Object]"&&(t[d]="[object Object]");if(typeof t=="object"&&Hn(t)==="[object Object]"&&(t="[object Object]"),t=String(t),n===null&&(n={}),l==="tag:yaml.org,2002:merge")if(Array.isArray(s))for(d=0,v=s.length;d<v;d+=1)Kn(e,n,s[d],i);else Kn(e,n,s,i);else!e.json&&!me.call(i,t)&&me.call(n,t)&&(e.line=r||e.line,e.lineStart=c||e.lineStart,e.position=u||e.position,S(e,"duplicated mapping key")),t==="__proto__"?Object.defineProperty(n,t,{configurable:!0,enumerable:!0,writable:!0,value:s}):n[t]=s,delete i[t];return n}function xn(e){var n;n=e.input.charCodeAt(e.position),n===10?e.position++:n===13?(e.position++,e.input.charCodeAt(e.position)===10&&e.position++):S(e,"a line break is expected"),e.line+=1,e.lineStart=e.position,e.firstTabInLine=-1}function z(e,n,i){for(var l=0,t=e.input.charCodeAt(e.position);t!==0;){for(;ge(t);)t===9&&e.firstTabInLine===-1&&(e.firstTabInLine=e.position),t=e.input.charCodeAt(++e.position);if(n&&t===35)do t=e.input.charCodeAt(++e.position);while(t!==10&&t!==13&&t!==0);if(le(t))for(xn(e),t=e.input.charCodeAt(e.position),l++,e.lineIndent=0;t===32;)e.lineIndent++,t=e.input.charCodeAt(++e.position);else break}return i!==-1&&l!==0&&e.lineIndent<i&&We(e,"deficient indentation"),l}function en(e){var n=e.position,i;return i=e.input.charCodeAt(n),!!((i===45||i===46)&&i===e.input.charCodeAt(n+1)&&i===e.input.charCodeAt(n+2)&&(n+=3,i=e.input.charCodeAt(n),i===0||J(i)))}function yn(e,n){n===1?e.result+=" ":n>1&&(e.result+=G.repeat(`
`,n-1))}function Qr(e,n,i){var l,t,s,r,c,u,d,v,p=e.kind,h=e.result,x;if(x=e.input.charCodeAt(e.position),J(x)||we(x)||x===35||x===38||x===42||x===33||x===124||x===62||x===39||x===34||x===37||x===64||x===96||(x===63||x===45)&&(t=e.input.charCodeAt(e.position+1),J(t)||i&&we(t)))return!1;for(e.kind="scalar",e.result="",s=r=e.position,c=!1;x!==0;){if(x===58){if(t=e.input.charCodeAt(e.position+1),J(t)||i&&we(t))break}else if(x===35){if(l=e.input.charCodeAt(e.position-1),J(l))break}else{if(e.position===e.lineStart&&en(e)||i&&we(x))break;if(le(x))if(u=e.line,d=e.lineStart,v=e.lineIndent,z(e,!1,-1),e.lineIndent>=n){c=!0,x=e.input.charCodeAt(e.position);continue}else{e.position=r,e.line=u,e.lineStart=d,e.lineIndent=v;break}}c&&(pe(e,s,r,!1),yn(e,e.line-u),s=r=e.position,c=!1),ge(x)||(r=e.position+1),x=e.input.charCodeAt(++e.position)}return pe(e,s,r,!1),e.result?!0:(e.kind=p,e.result=h,!1)}function Xr(e,n){var i,l,t;if(i=e.input.charCodeAt(e.position),i!==39)return!1;for(e.kind="scalar",e.result="",e.position++,l=t=e.position;(i=e.input.charCodeAt(e.position))!==0;)if(i===39)if(pe(e,l,e.position,!0),i=e.input.charCodeAt(++e.position),i===39)l=e.position,e.position++,t=e.position;else return!0;else le(i)?(pe(e,l,t,!0),yn(e,z(e,!1,n)),l=t=e.position):e.position===e.lineStart&&en(e)?S(e,"unexpected end of the document within a single quoted scalar"):(e.position++,t=e.position);S(e,"unexpected end of the stream within a single quoted scalar")}function Zr(e,n){var i,l,t,s,r,c;if(c=e.input.charCodeAt(e.position),c!==34)return!1;for(e.kind="scalar",e.result="",e.position++,i=l=e.position;(c=e.input.charCodeAt(e.position))!==0;){if(c===34)return pe(e,i,e.position,!0),e.position++,!0;if(c===92){if(pe(e,i,e.position,!0),c=e.input.charCodeAt(++e.position),le(c))z(e,!1,n);else if(c<256&&Qi[c])e.result+=Xi[c],e.position++;else if((r=Gr(c))>0){for(t=r,s=0;t>0;t--)c=e.input.charCodeAt(++e.position),(r=Ur(c))>=0?s=(s<<4)+r:S(e,"expected hexadecimal character");e.result+=qr(s),e.position++}else S(e,"unknown escape sequence");i=l=e.position}else le(c)?(pe(e,i,l,!0),yn(e,z(e,!1,n)),i=l=e.position):e.position===e.lineStart&&en(e)?S(e,"unexpected end of the document within a double quoted scalar"):(e.position++,l=e.position)}S(e,"unexpected end of the stream within a double quoted scalar")}function Jr(e,n){var i=!0,l,t,s,r=e.tag,c,u=e.anchor,d,v,p,h,x,D=Object.create(null),A,y,C,_;if(_=e.input.charCodeAt(e.position),_===91)v=93,x=!1,c=[];else if(_===123)v=125,x=!0,c={};else return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=c),_=e.input.charCodeAt(++e.position);_!==0;){if(z(e,!0,n),_=e.input.charCodeAt(e.position),_===v)return e.position++,e.tag=r,e.anchor=u,e.kind=x?"mapping":"sequence",e.result=c,!0;i?_===44&&S(e,"expected the node content, but found ','"):S(e,"missed comma between flow collection entries"),y=A=C=null,p=h=!1,_===63&&(d=e.input.charCodeAt(e.position+1),J(d)&&(p=h=!0,e.position++,z(e,!0,n))),l=e.line,t=e.lineStart,s=e.position,Ae(e,n,Ke,!1,!0),y=e.tag,A=e.result,z(e,!0,n),_=e.input.charCodeAt(e.position),(h||e.line===l)&&_===58&&(p=!0,_=e.input.charCodeAt(++e.position),z(e,!0,n),Ae(e,n,Ke,!1,!0),C=e.result),x?be(e,c,D,y,A,C,l,t,s):p?c.push(be(e,null,D,y,A,C,l,t,s)):c.push(A),z(e,!0,n),_=e.input.charCodeAt(e.position),_===44?(i=!0,_=e.input.charCodeAt(++e.position)):i=!1}S(e,"unexpected end of the stream within a flow collection")}function es(e,n){var i,l,t=rn,s=!1,r=!1,c=n,u=0,d=!1,v,p;if(p=e.input.charCodeAt(e.position),p===124)l=!1;else if(p===62)l=!0;else return!1;for(e.kind="scalar",e.result="";p!==0;)if(p=e.input.charCodeAt(++e.position),p===43||p===45)rn===t?t=p===43?Yn:Vr:S(e,"repeat of a chomping mode identifier");else if((v=Kr(p))>=0)v===0?S(e,"bad explicit indentation width of a block scalar; it cannot be less than one"):r?S(e,"repeat of an indentation width identifier"):(c=n+v-1,r=!0);else break;if(ge(p)){do p=e.input.charCodeAt(++e.position);while(ge(p));if(p===35)do p=e.input.charCodeAt(++e.position);while(!le(p)&&p!==0)}for(;p!==0;){for(xn(e),e.lineIndent=0,p=e.input.charCodeAt(e.position);(!r||e.lineIndent<c)&&p===32;)e.lineIndent++,p=e.input.charCodeAt(++e.position);if(!r&&e.lineIndent>c&&(c=e.lineIndent),le(p)){u++;continue}if(e.lineIndent<c){t===Yn?e.result+=G.repeat(`
`,s?1+u:u):t===rn&&s&&(e.result+=`
`);break}for(l?ge(p)?(d=!0,e.result+=G.repeat(`
`,s?1+u:u)):d?(d=!1,e.result+=G.repeat(`
`,u+1)):u===0?s&&(e.result+=" "):e.result+=G.repeat(`
`,u):e.result+=G.repeat(`
`,s?1+u:u),s=!0,r=!0,u=0,i=e.position;!le(p)&&p!==0;)p=e.input.charCodeAt(++e.position);pe(e,i,e.position,!1)}return!0}function qn(e,n){var i,l=e.tag,t=e.anchor,s=[],r,c=!1,u;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=s),u=e.input.charCodeAt(e.position);u!==0&&(e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),!(u!==45||(r=e.input.charCodeAt(e.position+1),!J(r))));){if(c=!0,e.position++,z(e,!0,-1)&&e.lineIndent<=n){s.push(null),u=e.input.charCodeAt(e.position);continue}if(i=e.line,Ae(e,n,Ki,!1,!0),s.push(e.result),z(e,!0,-1),u=e.input.charCodeAt(e.position),(e.line===i||e.lineIndent>n)&&u!==0)S(e,"bad indentation of a sequence entry");else if(e.lineIndent<n)break}return c?(e.tag=l,e.anchor=t,e.kind="sequence",e.result=s,!0):!1}function ns(e,n,i){var l,t,s,r,c,u,d=e.tag,v=e.anchor,p={},h=Object.create(null),x=null,D=null,A=null,y=!1,C=!1,_;if(e.firstTabInLine!==-1)return!1;for(e.anchor!==null&&(e.anchorMap[e.anchor]=p),_=e.input.charCodeAt(e.position);_!==0;){if(!y&&e.firstTabInLine!==-1&&(e.position=e.firstTabInLine,S(e,"tab characters must not be used in indentation")),l=e.input.charCodeAt(e.position+1),s=e.line,(_===63||_===58)&&J(l))_===63?(y&&(be(e,p,h,x,D,null,r,c,u),x=D=A=null),C=!0,y=!0,t=!0):y?(y=!1,t=!0):S(e,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),e.position+=1,_=l;else{if(r=e.line,c=e.lineStart,u=e.position,!Ae(e,i,Gi,!1,!0))break;if(e.line===s){for(_=e.input.charCodeAt(e.position);ge(_);)_=e.input.charCodeAt(++e.position);if(_===58)_=e.input.charCodeAt(++e.position),J(_)||S(e,"a whitespace character is expected after the key-value separator within a block mapping"),y&&(be(e,p,h,x,D,null,r,c,u),x=D=A=null),C=!0,y=!1,t=!1,x=e.tag,D=e.result;else if(C)S(e,"can not read an implicit mapping pair; a colon is missed");else return e.tag=d,e.anchor=v,!0}else if(C)S(e,"can not read a block mapping entry; a multiline key may not be an implicit key");else return e.tag=d,e.anchor=v,!0}if((e.line===s||e.lineIndent>n)&&(y&&(r=e.line,c=e.lineStart,u=e.position),Ae(e,n,qe,!0,t)&&(y?D=e.result:A=e.result),y||(be(e,p,h,x,D,A,r,c,u),x=D=A=null),z(e,!0,-1),_=e.input.charCodeAt(e.position)),(e.line===s||e.lineIndent>n)&&_!==0)S(e,"bad indentation of a mapping entry");else if(e.lineIndent<n)break}return y&&be(e,p,h,x,D,null,r,c,u),C&&(e.tag=d,e.anchor=v,e.kind="mapping",e.result=p),C}function is(e){var n,i=!1,l=!1,t,s,r;if(r=e.input.charCodeAt(e.position),r!==33)return!1;if(e.tag!==null&&S(e,"duplication of a tag property"),r=e.input.charCodeAt(++e.position),r===60?(i=!0,r=e.input.charCodeAt(++e.position)):r===33?(l=!0,t="!!",r=e.input.charCodeAt(++e.position)):t="!",n=e.position,i){do r=e.input.charCodeAt(++e.position);while(r!==0&&r!==62);e.position<e.length?(s=e.input.slice(n,e.position),r=e.input.charCodeAt(++e.position)):S(e,"unexpected end of the stream within a verbatim tag")}else{for(;r!==0&&!J(r);)r===33&&(l?S(e,"tag suffix cannot contain exclamation marks"):(t=e.input.slice(n-1,e.position+1),qi.test(t)||S(e,"named tag handle cannot contain such characters"),l=!0,n=e.position+1)),r=e.input.charCodeAt(++e.position);s=e.input.slice(n,e.position),Hr.test(s)&&S(e,"tag suffix cannot contain flow indicator characters")}s&&!Wi.test(s)&&S(e,"tag name cannot contain such characters: "+s);try{s=decodeURIComponent(s)}catch{S(e,"tag name is malformed: "+s)}return i?e.tag=s:me.call(e.tagMap,t)?e.tag=e.tagMap[t]+s:t==="!"?e.tag="!"+s:t==="!!"?e.tag="tag:yaml.org,2002:"+s:S(e,'undeclared tag handle "'+t+'"'),!0}function ts(e){var n,i;if(i=e.input.charCodeAt(e.position),i!==38)return!1;for(e.anchor!==null&&S(e,"duplication of an anchor property"),i=e.input.charCodeAt(++e.position),n=e.position;i!==0&&!J(i)&&!we(i);)i=e.input.charCodeAt(++e.position);return e.position===n&&S(e,"name of an anchor node must contain at least one character"),e.anchor=e.input.slice(n,e.position),!0}function ls(e){var n,i,l;if(l=e.input.charCodeAt(e.position),l!==42)return!1;for(l=e.input.charCodeAt(++e.position),n=e.position;l!==0&&!J(l)&&!we(l);)l=e.input.charCodeAt(++e.position);return e.position===n&&S(e,"name of an alias node must contain at least one character"),i=e.input.slice(n,e.position),me.call(e.anchorMap,i)||S(e,'unidentified alias "'+i+'"'),e.result=e.anchorMap[i],z(e,!0,-1),!0}function Ae(e,n,i,l,t){var s,r,c,u=1,d=!1,v=!1,p,h,x,D,A,y;if(e.listener!==null&&e.listener("open",e),e.tag=null,e.anchor=null,e.kind=null,e.result=null,s=r=c=qe===i||Ki===i,l&&z(e,!0,-1)&&(d=!0,e.lineIndent>n?u=1:e.lineIndent===n?u=0:e.lineIndent<n&&(u=-1)),u===1)for(;is(e)||ts(e);)z(e,!0,-1)?(d=!0,c=s,e.lineIndent>n?u=1:e.lineIndent===n?u=0:e.lineIndent<n&&(u=-1)):c=!1;if(c&&(c=d||t),(u===1||qe===i)&&(Ke===i||Gi===i?A=n:A=n+1,y=e.position-e.lineStart,u===1?c&&(qn(e,y)||ns(e,y,A))||Jr(e,A)?v=!0:(r&&es(e,A)||Xr(e,A)||Zr(e,A)?v=!0:ls(e)?(v=!0,(e.tag!==null||e.anchor!==null)&&S(e,"alias node should not have any properties")):Qr(e,A,Ke===i)&&(v=!0,e.tag===null&&(e.tag="?")),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):u===0&&(v=c&&qn(e,y))),e.tag===null)e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);else if(e.tag==="?"){for(e.result!==null&&e.kind!=="scalar"&&S(e,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+e.kind+'"'),p=0,h=e.implicitTypes.length;p<h;p+=1)if(D=e.implicitTypes[p],D.resolve(e.result)){e.result=D.construct(e.result),e.tag=D.tag,e.anchor!==null&&(e.anchorMap[e.anchor]=e.result);break}}else if(e.tag!=="!"){if(me.call(e.typeMap[e.kind||"fallback"],e.tag))D=e.typeMap[e.kind||"fallback"][e.tag];else for(D=null,x=e.typeMap.multi[e.kind||"fallback"],p=0,h=x.length;p<h;p+=1)if(e.tag.slice(0,x[p].tag.length)===x[p].tag){D=x[p];break}D||S(e,"unknown tag !<"+e.tag+">"),e.result!==null&&D.kind!==e.kind&&S(e,"unacceptable node kind for !<"+e.tag+'> tag; it should be "'+D.kind+'", not "'+e.kind+'"'),D.resolve(e.result,e.tag)?(e.result=D.construct(e.result,e.tag),e.anchor!==null&&(e.anchorMap[e.anchor]=e.result)):S(e,"cannot resolve a node with !<"+e.tag+"> explicit tag")}return e.listener!==null&&e.listener("close",e),e.tag!==null||e.anchor!==null||v}function os(e){var n=e.position,i,l,t,s=!1,r;for(e.version=null,e.checkLineBreaks=e.legacy,e.tagMap=Object.create(null),e.anchorMap=Object.create(null);(r=e.input.charCodeAt(e.position))!==0&&(z(e,!0,-1),r=e.input.charCodeAt(e.position),!(e.lineIndent>0||r!==37));){for(s=!0,r=e.input.charCodeAt(++e.position),i=e.position;r!==0&&!J(r);)r=e.input.charCodeAt(++e.position);for(l=e.input.slice(i,e.position),t=[],l.length<1&&S(e,"directive name must not be less than one character in length");r!==0;){for(;ge(r);)r=e.input.charCodeAt(++e.position);if(r===35){do r=e.input.charCodeAt(++e.position);while(r!==0&&!le(r));break}if(le(r))break;for(i=e.position;r!==0&&!J(r);)r=e.input.charCodeAt(++e.position);t.push(e.input.slice(i,e.position))}r!==0&&xn(e),me.call(Gn,l)?Gn[l](e,l,t):We(e,'unknown document directive "'+l+'"')}if(z(e,!0,-1),e.lineIndent===0&&e.input.charCodeAt(e.position)===45&&e.input.charCodeAt(e.position+1)===45&&e.input.charCodeAt(e.position+2)===45?(e.position+=3,z(e,!0,-1)):s&&S(e,"directives end mark is expected"),Ae(e,e.lineIndent-1,qe,!1,!0),z(e,!0,-1),e.checkLineBreaks&&Yr.test(e.input.slice(n,e.position))&&We(e,"non-ASCII line breaks are interpreted as content"),e.documents.push(e.result),e.position===e.lineStart&&en(e)){e.input.charCodeAt(e.position)===46&&(e.position+=3,z(e,!0,-1));return}if(e.position<e.length-1)S(e,"end of the stream or a document separator is expected");else return}function Ji(e,n){e=String(e),n=n||{},e.length!==0&&(e.charCodeAt(e.length-1)!==10&&e.charCodeAt(e.length-1)!==13&&(e+=`
`),e.charCodeAt(0)===65279&&(e=e.slice(1)));var i=new Wr(e,n),l=e.indexOf("\0");for(l!==-1&&(i.position=l,S(i,"null byte is not allowed in input")),i.input+="\0";i.input.charCodeAt(i.position)===32;)i.lineIndent+=1,i.position+=1;for(;i.position<i.length-1;)os(i);return i.documents}function as(e,n,i){n!==null&&typeof n=="object"&&typeof i>"u"&&(i=n,n=null);var l=Ji(e,i);if(typeof n!="function")return l;for(var t=0,s=l.length;t<s;t+=1)n(l[t])}function rs(e,n){var i=Ji(e,n);if(i.length!==0){if(i.length===1)return i[0];throw new Q("expected a single document in the stream, but found more")}}var ss=as,cs=rs,et={loadAll:ss,load:cs},nt=Object.prototype.toString,it=Object.prototype.hasOwnProperty,wn=65279,us=9,Oe=10,ds=13,fs=32,ps=33,ms=34,dn=35,vs=37,gs=38,hs=39,_s=42,tt=44,xs=45,Qe=58,ys=61,ws=62,bs=63,Cs=64,lt=91,ot=93,ks=96,at=123,As=124,rt=125,W={};W[0]="\\0";W[7]="\\a";W[8]="\\b";W[9]="\\t";W[10]="\\n";W[11]="\\v";W[12]="\\f";W[13]="\\r";W[27]="\\e";W[34]='\\"';W[92]="\\\\";W[133]="\\N";W[160]="\\_";W[8232]="\\L";W[8233]="\\P";var Ds=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],Ss=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function Is(e,n){var i,l,t,s,r,c,u;if(n===null)return{};for(i={},l=Object.keys(n),t=0,s=l.length;t<s;t+=1)r=l[t],c=String(n[r]),r.slice(0,2)==="!!"&&(r="tag:yaml.org,2002:"+r.slice(2)),u=e.compiledTypeMap.fallback[r],u&&it.call(u.styleAliases,c)&&(c=u.styleAliases[c]),i[r]=c;return i}function Es(e){var n,i,l;if(n=e.toString(16).toUpperCase(),e<=255)i="x",l=2;else if(e<=65535)i="u",l=4;else if(e<=4294967295)i="U",l=8;else throw new Q("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+i+G.repeat("0",l-n.length)+n}var $s=1,Re=2;function Ts(e){this.schema=e.schema||_n,this.indent=Math.max(1,e.indent||2),this.noArrayIndent=e.noArrayIndent||!1,this.skipInvalid=e.skipInvalid||!1,this.flowLevel=G.isNothing(e.flowLevel)?-1:e.flowLevel,this.styleMap=Is(this.schema,e.styles||null),this.sortKeys=e.sortKeys||!1,this.lineWidth=e.lineWidth||80,this.noRefs=e.noRefs||!1,this.noCompatMode=e.noCompatMode||!1,this.condenseFlow=e.condenseFlow||!1,this.quotingType=e.quotingType==='"'?Re:$s,this.forceQuotes=e.forceQuotes||!1,this.replacer=typeof e.replacer=="function"?e.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Wn(e,n){for(var i=G.repeat(" ",n),l=0,t=-1,s="",r,c=e.length;l<c;)t=e.indexOf(`
`,l),t===-1?(r=e.slice(l),l=c):(r=e.slice(l,t+1),l=t+1),r.length&&r!==`
`&&(s+=i),s+=r;return s}function fn(e,n){return`
`+G.repeat(" ",e.indent*n)}function Ns(e,n){var i,l,t;for(i=0,l=e.implicitTypes.length;i<l;i+=1)if(t=e.implicitTypes[i],t.resolve(n))return!0;return!1}function Xe(e){return e===fs||e===us}function Me(e){return 32<=e&&e<=126||161<=e&&e<=55295&&e!==8232&&e!==8233||57344<=e&&e<=65533&&e!==wn||65536<=e&&e<=1114111}function Qn(e){return Me(e)&&e!==wn&&e!==ds&&e!==Oe}function Xn(e,n,i){var l=Qn(e),t=l&&!Xe(e);return(i?l:l&&e!==tt&&e!==lt&&e!==ot&&e!==at&&e!==rt)&&e!==dn&&!(n===Qe&&!t)||Qn(n)&&!Xe(n)&&e===dn||n===Qe&&t}function Fs(e){return Me(e)&&e!==wn&&!Xe(e)&&e!==xs&&e!==bs&&e!==Qe&&e!==tt&&e!==lt&&e!==ot&&e!==at&&e!==rt&&e!==dn&&e!==gs&&e!==_s&&e!==ps&&e!==As&&e!==ys&&e!==ws&&e!==hs&&e!==ms&&e!==vs&&e!==Cs&&e!==ks}function Ls(e){return!Xe(e)&&e!==Qe}function Fe(e,n){var i=e.charCodeAt(n),l;return i>=55296&&i<=56319&&n+1<e.length&&(l=e.charCodeAt(n+1),l>=56320&&l<=57343)?(i-55296)*1024+l-56320+65536:i}function st(e){var n=/^\n* /;return n.test(e)}var ct=1,pn=2,ut=3,dt=4,ye=5;function Os(e,n,i,l,t,s,r,c){var u,d=0,v=null,p=!1,h=!1,x=l!==-1,D=-1,A=Fs(Fe(e,0))&&Ls(Fe(e,e.length-1));if(n||r)for(u=0;u<e.length;d>=65536?u+=2:u++){if(d=Fe(e,u),!Me(d))return ye;A=A&&Xn(d,v,c),v=d}else{for(u=0;u<e.length;d>=65536?u+=2:u++){if(d=Fe(e,u),d===Oe)p=!0,x&&(h=h||u-D-1>l&&e[D+1]!==" ",D=u);else if(!Me(d))return ye;A=A&&Xn(d,v,c),v=d}h=h||x&&u-D-1>l&&e[D+1]!==" "}return!p&&!h?A&&!r&&!t(e)?ct:s===Re?ye:pn:i>9&&st(e)?ye:r?s===Re?ye:pn:h?dt:ut}function Rs(e,n,i,l,t){e.dump=(function(){if(n.length===0)return e.quotingType===Re?'""':"''";if(!e.noCompatMode&&(Ds.indexOf(n)!==-1||Ss.test(n)))return e.quotingType===Re?'"'+n+'"':"'"+n+"'";var s=e.indent*Math.max(1,i),r=e.lineWidth===-1?-1:Math.max(Math.min(e.lineWidth,40),e.lineWidth-s),c=l||e.flowLevel>-1&&i>=e.flowLevel;function u(d){return Ns(e,d)}switch(Os(n,c,e.indent,r,u,e.quotingType,e.forceQuotes&&!l,t)){case ct:return n;case pn:return"'"+n.replace(/'/g,"''")+"'";case ut:return"|"+Zn(n,e.indent)+Jn(Wn(n,s));case dt:return">"+Zn(n,e.indent)+Jn(Wn(Ms(n,r),s));case ye:return'"'+Ps(n)+'"';default:throw new Q("impossible error: invalid scalar style")}})()}function Zn(e,n){var i=st(e)?String(n):"",l=e[e.length-1]===`
`,t=l&&(e[e.length-2]===`
`||e===`
`),s=t?"+":l?"":"-";return i+s+`
`}function Jn(e){return e[e.length-1]===`
`?e.slice(0,-1):e}function Ms(e,n){for(var i=/(\n+)([^\n]*)/g,l=(function(){var d=e.indexOf(`
`);return d=d!==-1?d:e.length,i.lastIndex=d,ei(e.slice(0,d),n)})(),t=e[0]===`
`||e[0]===" ",s,r;r=i.exec(e);){var c=r[1],u=r[2];s=u[0]===" ",l+=c+(!t&&!s&&u!==""?`
`:"")+ei(u,n),t=s}return l}function ei(e,n){if(e===""||e[0]===" ")return e;for(var i=/ [^ ]/g,l,t=0,s,r=0,c=0,u="";l=i.exec(e);)c=l.index,c-t>n&&(s=r>t?r:c,u+=`
`+e.slice(t,s),t=s+1),r=c;return u+=`
`,e.length-t>n&&r>t?u+=e.slice(t,r)+`
`+e.slice(r+1):u+=e.slice(t),u.slice(1)}function Ps(e){for(var n="",i=0,l,t=0;t<e.length;i>=65536?t+=2:t++)i=Fe(e,t),l=W[i],!l&&Me(i)?(n+=e[t],i>=65536&&(n+=e[t+1])):n+=l||Es(i);return n}function Bs(e,n,i){var l="",t=e.tag,s,r,c;for(s=0,r=i.length;s<r;s+=1)c=i[s],e.replacer&&(c=e.replacer.call(i,String(s),c)),(re(e,n,c,!1,!1)||typeof c>"u"&&re(e,n,null,!1,!1))&&(l!==""&&(l+=","+(e.condenseFlow?"":" ")),l+=e.dump);e.tag=t,e.dump="["+l+"]"}function ni(e,n,i,l){var t="",s=e.tag,r,c,u;for(r=0,c=i.length;r<c;r+=1)u=i[r],e.replacer&&(u=e.replacer.call(i,String(r),u)),(re(e,n+1,u,!0,!0,!1,!0)||typeof u>"u"&&re(e,n+1,null,!0,!0,!1,!0))&&((!l||t!=="")&&(t+=fn(e,n)),e.dump&&Oe===e.dump.charCodeAt(0)?t+="-":t+="- ",t+=e.dump);e.tag=s,e.dump=t||"[]"}function js(e,n,i){var l="",t=e.tag,s=Object.keys(i),r,c,u,d,v;for(r=0,c=s.length;r<c;r+=1)v="",l!==""&&(v+=", "),e.condenseFlow&&(v+='"'),u=s[r],d=i[u],e.replacer&&(d=e.replacer.call(i,u,d)),re(e,n,u,!1,!1)&&(e.dump.length>1024&&(v+="? "),v+=e.dump+(e.condenseFlow?'"':"")+":"+(e.condenseFlow?"":" "),re(e,n,d,!1,!1)&&(v+=e.dump,l+=v));e.tag=t,e.dump="{"+l+"}"}function Vs(e,n,i,l){var t="",s=e.tag,r=Object.keys(i),c,u,d,v,p,h;if(e.sortKeys===!0)r.sort();else if(typeof e.sortKeys=="function")r.sort(e.sortKeys);else if(e.sortKeys)throw new Q("sortKeys must be a boolean or a function");for(c=0,u=r.length;c<u;c+=1)h="",(!l||t!=="")&&(h+=fn(e,n)),d=r[c],v=i[d],e.replacer&&(v=e.replacer.call(i,d,v)),re(e,n+1,d,!0,!0,!0)&&(p=e.tag!==null&&e.tag!=="?"||e.dump&&e.dump.length>1024,p&&(e.dump&&Oe===e.dump.charCodeAt(0)?h+="?":h+="? "),h+=e.dump,p&&(h+=fn(e,n)),re(e,n+1,v,!0,p)&&(e.dump&&Oe===e.dump.charCodeAt(0)?h+=":":h+=": ",h+=e.dump,t+=h));e.tag=s,e.dump=t||"{}"}function ii(e,n,i){var l,t,s,r,c,u;for(t=i?e.explicitTypes:e.implicitTypes,s=0,r=t.length;s<r;s+=1)if(c=t[s],(c.instanceOf||c.predicate)&&(!c.instanceOf||typeof n=="object"&&n instanceof c.instanceOf)&&(!c.predicate||c.predicate(n))){if(i?c.multi&&c.representName?e.tag=c.representName(n):e.tag=c.tag:e.tag="?",c.represent){if(u=e.styleMap[c.tag]||c.defaultStyle,nt.call(c.represent)==="[object Function]")l=c.represent(n,u);else if(it.call(c.represent,u))l=c.represent[u](n,u);else throw new Q("!<"+c.tag+'> tag resolver accepts not "'+u+'" style');e.dump=l}return!0}return!1}function re(e,n,i,l,t,s,r){e.tag=null,e.dump=i,ii(e,i,!1)||ii(e,i,!0);var c=nt.call(e.dump),u=l,d;l&&(l=e.flowLevel<0||e.flowLevel>n);var v=c==="[object Object]"||c==="[object Array]",p,h;if(v&&(p=e.duplicates.indexOf(i),h=p!==-1),(e.tag!==null&&e.tag!=="?"||h||e.indent!==2&&n>0)&&(t=!1),h&&e.usedDuplicates[p])e.dump="*ref_"+p;else{if(v&&h&&!e.usedDuplicates[p]&&(e.usedDuplicates[p]=!0),c==="[object Object]")l&&Object.keys(e.dump).length!==0?(Vs(e,n,e.dump,t),h&&(e.dump="&ref_"+p+e.dump)):(js(e,n,e.dump),h&&(e.dump="&ref_"+p+" "+e.dump));else if(c==="[object Array]")l&&e.dump.length!==0?(e.noArrayIndent&&!r&&n>0?ni(e,n-1,e.dump,t):ni(e,n,e.dump,t),h&&(e.dump="&ref_"+p+e.dump)):(Bs(e,n,e.dump),h&&(e.dump="&ref_"+p+" "+e.dump));else if(c==="[object String]")e.tag!=="?"&&Rs(e,e.dump,n,s,u);else{if(c==="[object Undefined]")return!1;if(e.skipInvalid)return!1;throw new Q("unacceptable kind of an object to dump "+c)}e.tag!==null&&e.tag!=="?"&&(d=encodeURI(e.tag[0]==="!"?e.tag.slice(1):e.tag).replace(/!/g,"%21"),e.tag[0]==="!"?d="!"+d:d.slice(0,18)==="tag:yaml.org,2002:"?d="!!"+d.slice(18):d="!<"+d+">",e.dump=d+" "+e.dump)}return!0}function zs(e,n){var i=[],l=[],t,s;for(mn(e,i,l),t=0,s=l.length;t<s;t+=1)n.duplicates.push(i[l[t]]);n.usedDuplicates=new Array(s)}function mn(e,n,i){var l,t,s;if(e!==null&&typeof e=="object")if(t=n.indexOf(e),t!==-1)i.indexOf(t)===-1&&i.push(t);else if(n.push(e),Array.isArray(e))for(t=0,s=e.length;t<s;t+=1)mn(e[t],n,i);else for(l=Object.keys(e),t=0,s=l.length;t<s;t+=1)mn(e[l[t]],n,i)}function Ys(e,n){n=n||{};var i=new Ts(n);i.noRefs||zs(e,i);var l=e;return i.replacer&&(l=i.replacer.call({"":l},"",l)),re(i,0,l,!0,!0)?i.dump+`
`:""}var Hs=Ys,Us={dump:Hs};function bn(e,n){return function(){throw new Error("Function yaml."+e+" is removed in js-yaml 4. Use yaml."+n+" instead, which is now safe by default.")}}var Gs=K,Ks=Si,qs=Ti,Ws=Ri,Qs=Mi,Xs=_n,Zs=et.load,Js=et.loadAll,ec=Us.dump,nc=Q,ic={binary:zi,float:Oi,map:$i,null:Ni,pairs:Hi,set:Ui,timestamp:ji,bool:Fi,int:Li,merge:Vi,omap:Yi,seq:Ei,str:Ii},tc=bn("safeLoad","load"),lc=bn("safeLoadAll","loadAll"),oc=bn("safeDump","dump"),ac={Type:Gs,Schema:Ks,FAILSAFE_SCHEMA:qs,JSON_SCHEMA:Ws,CORE_SCHEMA:Qs,DEFAULT_SCHEMA:Xs,load:Zs,loadAll:Js,dump:ec,YAMLException:nc,types:ic,safeLoad:tc,safeLoadAll:lc,safeDump:oc};function rc(e,n){const{toastSuccess:i,toastError:l}=Be(),t=O([]),s=O(""),r=O(!1),c=O({cm_lock:!1,code:"",templateName:"",description:""});function u(A){Z.get("/api/get-default-template").then(y=>{var _,Y,F;s.value=y.data,A.setValue(y.data);const C=d(y.data);c.value.templateName=((_=C.main)==null?void 0:_.name)||"Default Template",c.value.description=((Y=C.main)==null?void 0:Y.desc)||((F=C.main)==null?void 0:F.description)||"This is the default template for inventory items."}).catch(y=>{A.updateOptions({value:"Something went wrong - could not retrieve the default template from the file system!"}),l("Error","Something went wrong - could not retrieve the default template from the file system!")})}function d(A){try{return ac.load(A)}catch(y){return console.error("Error parsing YAML:",y),{}}}function v(A){Z.post("/api/reformat-template",{fileName:c.fileName}).then(y=>{s.value=y.data,A.setValue(y.data)}).catch(y=>{var C,_;console.log(y),l("Error","Something went wrong - "+((_=(C=y.response)==null?void 0:C.data)==null?void 0:_.message)||"could not reformat the template code!")})}function p(A,y,C){r.value=!0,Z.get("/api/templates/"+A).then(_=>{C.fileName=_.data.fileName,s.value=_.data.code,y.getModel().setValue(_.data.code),r.value=!1}).catch(_=>{y.updateOptions({value:"Something went wrong - could not retrieve the template from the file system!"}),l("Error","Something went wrong - could not retrieve the template from the file system!")})}function h(A,y,C,_,Y){y.value.code=C.getValue();let F=A>0?`/${A}`:"",B=A>0?"patch":"post";Z[B]("/api/templates"+F,{templateName:y.value.templateName,description:y.value.description,code:y.value.code,fileName:y.value.fileName}).then(R=>{_("save",R.data),i("Template saved","The template has been saved successfully."),Y()}).catch(R=>{var E,H;t.value=R.response.data.errors,l("Error","There was an error saving the template. "+(((H=(E=R.response)==null?void 0:E.data)==null?void 0:H.message)||"")),console.error("Error saving template:",R)})}function x(A,y){A.ctrlKey&&A.key==="Enter"&&y()}function D(A){A>0&&Z.get(`/api/templates/${A}`).then(y=>{c.value=y.data})}return ne(()=>{D(e.editId),window.addEventListener("keydown",A=>x(A,()=>h(e.editId,c,null,n,()=>n("close"))))}),Se(()=>{window.removeEventListener("keydown",x)}),{code:s,errors:t,isLoading:r,fetchTemplateData:D,getDefaultTemplate:u,handleKeyDown:x,model:c,parseYaml:d,reformatTemplateCode:v,saveDialog:h,showTemplate:p}}const sc={class:"flex justify-between p-2 border-b"},cc={class:"items-center content-center text-muted-foreground"},uc={class:""},dc={key:0,class:"grid gap-4 px-4 py-4"},fc={class:"grid items-center grid-cols-4 gap-4"},pc={class:"grid items-center grid-cols-4 gap-4"},mc={class:"grid items-center grid-cols-4 gap-4 mb-2"},vc={class:"grid items-center grid-cols-4 gap-4"},gc={class:"flex justify-end pt-4 gap-2"},hc={key:1,class:"pb-4 px-4 mt-4"},_c={key:0},xc={class:"grid gap-4"},yc={key:0,class:"text-sm text-red-400 mt-1 block"},wc={key:0,class:"text-sm text-red-400 mt-1 block"},bc={key:0,class:"text-sm text-red-400"},Cc={class:"flex justify-end my-4 gap-2 hidden md:flex"},kc={class:"pl-2 ml-auto"},Ac={class:"rc-kdb-class2"},Dc={class:"pl-2 ml-auto"},Sc={class:"rc-kdb-class2"},Ic={class:"pt-2 hidden md:block"},Ec={class:"flex flex-col"},$c={class:"flex items-center p-2"},Tc={key:0,class:"gap-1 flex items-center"},Nc={key:1,class:"flex gap-1"},Fc={key:2,class:"flex items-center gap-2 ml-auto"},Lc={key:3,class:"flex items-center gap-2 ml-auto"},Oc={class:"flex gap-1"},Rc={key:4},Mc={class:"relative"},Pc={key:0,class:"absolute inset-0 z-10 w-full p-4",style:{height:"calc(100vh - 190px)"}},Bc={__name:"TemplateAddEditPane",props:{editId:Number},emits:["save","close"],setup(e,{emit:n}){const i=e;let l=null;const t=n,{activeCopyIcon:s,checkDarkModeIsSet:r,checkLineNumbersIsSet:c,checkMiniMapIsSet:u,checkStickyScrollIsSet:d,copyContent:v,download:p,initEditor:h,toggleEditorDarkMode:x,toggleEditorLineNumbers:D,toggleEditorMinimap:A}=gi(hi),{openImportDialog:y,getTemplateRepoFolders:C,hasVendorTemplateOptions:_}=_i(),{code:Y,errors:F,isLoading:B,getDefaultTemplate:R,model:E,parseYaml:H,reformatTemplateCode:ie,saveDialog:oe,showTemplate:ee}=rc(i,t),Ie=Pe(),{isDialogOpen:M,closeDialog:te}=Ie,X=O([]);ne(()=>{nn(),C(),tn(),window.addEventListener("keydown",j=>{j.key==="Escape"&&je()})}),Se(()=>{window.removeEventListener("keydown",j=>{j.key==="Escape"&&je()})});function nn(){r()&&X.value.push("dark"),c()&&X.value.push("lineNumbers"),u()&&X.value.push("minimap"),d()&&X.value.push("stickyscroll")}function tn(){try{l=h("code-editor__code-pre","yaml"),i.editId===0?R(l):ee(i.editId,l,E),l.onDidChangeModelContent(()=>{const j=l.getValue();Y.value=j,ln(j)})}catch(j){console.error("Error initializing editor:",j)}}const ln=Et(j=>{try{const b=H(j);if(b&&b.main){b.main.name&&b.main.name!==E.templateName&&(E.value.templateName=b.main.name);const q=b.main.desc||b.main.description;q&&q!==E.description&&(E.value.description=q)}}catch(b){console.log("Error parsing YAML while watching for changes:",b)}},500);function he(){t("close"),l&&(l.dispose(),l=null)}function je(){he()}function Cn(){ie(l)}function $(){oe(i.editId,E,l,t,he)}function se(j){l.getModel().setValue(j.value),te("DialogTemplateImport")}return(j,b)=>{const q=T("Button"),Ee=T("Label"),ve=T("Separator"),$e=T("Input"),_e=T("RcIcon"),Te=T("ResizablePanel"),Ve=T("ResizableHandle"),ze=T("ResizablePanelGroup");return g(),w("div",null,[m("div",sc,[o(q,{onClick:b[0]||(b[0]=U=>he()),size:"sm",variant:"outline",class:"gap-1 border-none hover:bg-rcgray-600"},{default:f(()=>[o(a(bi),{size:"16",class:"hover:animate-pulse"})]),_:1}),m("h2",cc,N(e.editId===0?"Add Template":"Edit Template")+" "+N(e.editId===0?"":"("+e.editId+")"),1),b[13]||(b[13]=m("div",{class:"flex justify-end"},null,-1))]),o(ze,{direction:"horizontal",class:""},{default:f(()=>[o(Te,{"default-size":25,"max-size":30,"min-size":10,collapsible:"","collapsed-size":0,ref:"panelElement44",class:"h-[90vh]"},{default:f(()=>[m("div",uc,[a(B)?(g(),w("div",dc,[m("div",fc,[o(a(P),{class:"h-4 w-24 justify-self-end"}),o(a(P),{class:"h-10 col-span-3"})]),m("div",pc,[o(a(P),{class:"h-4 w-20 justify-self-end"}),o(a(P),{class:"h-10 col-span-3"})]),m("div",mc,[b[14]||(b[14]=m("div",{class:"justify-self-end"},null,-1)),o(a(P),{class:"h-3 w-40"})]),m("div",vc,[o(a(P),{class:"h-4 w-32 justify-self-end"}),o(a(P),{class:"h-10 w-40"})]),m("div",gc,[o(a(P),{class:"h-8 w-16"}),o(a(P),{class:"h-8 w-16"})])])):(g(),w("div",hc,[a(_)?(g(),w("div",_c,[o(Ee,{for:"description",class:"block mb-2"},{default:f(()=>[...b[15]||(b[15]=[L("Imported Templates",-1)])]),_:1}),o(q,{type:"close",onClick:b[1]||(b[1]=U=>a(y)()),class:"px-2 py-1 text-sm hover:bg-gray-700",variant:"outline"},{default:f(()=>[o(a(Zt),{size:"16",class:"mr-2"}),b[16]||(b[16]=L(" Choose Template to Import ",-1))]),_:1})])):k("",!0),a(_)?(g(),I(ve,{key:1,class:"relative w-full h-px shrink-0 bg-border mb-4 my-4"})):k("",!0),m("div",xc,[m("div",null,[o(Ee,{for:"templateName",class:"block mb-2"},{default:f(()=>[...b[17]||(b[17]=[L(" Template Name ",-1),m("span",{class:"text-red-600"},"*",-1)])]),_:1}),o($e,{modelValue:a(E).templateName,"onUpdate:modelValue":b[2]||(b[2]=U=>a(E).templateName=U),id:"templateName",autocomplete:"off",class:"w-full",disabled:""},null,8,["modelValue"]),a(F).templateName?(g(),w("span",yc,N(a(F).templateName[0]),1)):k("",!0)]),m("div",null,[o(Ee,{for:"description",class:"block mb-2"},{default:f(()=>[...b[18]||(b[18]=[L("Description",-1)])]),_:1}),o($e,{modelValue:a(E).description,"onUpdate:modelValue":b[3]||(b[3]=U=>a(E).description=U),id:"description",autocomplete:"off",class:"w-full",disabled:""},null,8,["modelValue"]),a(F).description?(g(),w("span",wc,N(a(F).description[0]),1)):k("",!0)]),b[19]||(b[19]=m("div",{class:"mb-2"},[m("span",{class:"rc-text-xs-muted"},"Template name and description will be updated from YAML after editing")],-1)),a(F).code?(g(),w("span",bc,N(a(F).code[0]),1)):k("",!0)]),m("div",Cc,[o(q,{type:"close",variant:"outline",class:"px-2 py-1 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:b[4]||(b[4]=U=>he()),size:"sm"},{default:f(()=>[...b[20]||(b[20]=[L(" Cancel ",-1),m("div",{class:"pl-2 ml-auto"},[m("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),i.editId===0?(g(),I(q,{key:0,type:"submit",class:"px-2 py-1 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:$,variant:"primary"},{default:f(()=>[b[22]||(b[22]=L(" Save ",-1)),m("div",kc,[m("kbd",Ac,[b[21]||(b[21]=L(" Ctrl  ",-1)),o(_e,{name:"enter",class:"ml-1"})])])]),_:1})):(g(),I(q,{key:1,type:"submit",class:"px-2 py-1 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:$,variant:"primary"},{default:f(()=>[b[24]||(b[24]=L(" Update ",-1)),m("div",Dc,[m("kbd",Sc,[b[23]||(b[23]=L(" Ctrl  ",-1)),o(_e,{name:"enter",class:"ml-1"})])])]),_:1}))]),o(ve,{class:"relative w-full h-px shrink-0 bg-border mb-4 mt-2"}),m("div",Ic,[o(q,{type:"close",variant:"outline",class:"px-2 py-1 text-sm hover:bg-gray-700 hover:animate-pulse mr-2",onClick:b[5]||(b[5]=U=>Cn()),size:"sm"},{default:f(()=>[...b[25]||(b[25]=[L(" Reformat Code ",-1)])]),_:1}),o(nl,{title:"Updated Template Format",description:"From V8.0.0, templates use a cleaner layout. This format is backward-compatible with older versions. Use the Reformat button to update the template in the editor if it hasn’t been reformatted yet.",hasLink:!1,align:"start"},{trigger:f(()=>[o(q,{variant:"link",size:"sm",class:"text-blue-400 hover:text-blue-300 p-0"},{default:f(()=>[o(a(Jt),{class:"h-3.5 w-3.5"})]),_:1})]),_:1})])]))])]),_:1},512),o(Ve,{"with-handle":""}),o(Te,{class:"h-[90vh]"},{default:f(()=>[o(a(Ge),{class:"border border-none rounded-md"},{default:f(()=>[m("div",Ec,[m("div",$c,[b[26]||(b[26]=m("div",{class:"flex items-center gap-2"},null,-1)),a(B)?(g(),w("div",Nc,[o(a(P),{class:"h-8 w-8"}),o(a(P),{class:"h-8 w-8"})])):(g(),w("div",Tc,[o(ae,{delayDuration:100,content:"Copy Content",side:"bottom"},{trigger:f(()=>[o(q,{variant:"ghost",onClick:b[6]||(b[6]=U=>a(v)(a(l).getValue())),class:"px-2 py-1 rc-btn-shadow"},{default:f(()=>[o(_e,{name:"copy-transition",isActive:a(s).getValue,size:16},null,8,["isActive"])]),_:1})]),_:1}),o(ae,{delayDuration:100,content:"Download Template",side:"bottom"},{trigger:f(()=>[o(q,{variant:"ghost",onClick:b[7]||(b[7]=U=>a(p)(a(E).fileName)),class:"px-2 py-1 ml-1 rc-btn-shadow"},{default:f(()=>[o(a(il),{size:"16"})]),_:1})]),_:1})])),o(ve,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),a(B)?(g(),w("div",Lc,[m("div",Oc,[o(a(P),{class:"h-8 w-8"}),o(a(P),{class:"h-8 w-8"}),o(a(P),{class:"h-8 w-8"}),o(a(P),{class:"h-8 w-8"})])])):(g(),w("div",Fc,[o(a(sn),null,{default:f(()=>[o(a(ki),{modelValue:X.value,"onUpdate:modelValue":b[11]||(b[11]=U=>X.value=U),type:"multiple"},{default:f(()=>[o(a(ke),{value:"dark",onClick:b[8]||(b[8]=U=>a(x)()),class:"px-2 py-1 rc-btn-shadow"},{default:f(()=>[o(ae,{delayDuration:100,content:"Toggle Dark Mode",side:"bottom"},{trigger:f(()=>[o(a(Gt),{size:"16",class:"focus:outline-none"})]),_:1})]),_:1}),o(a(ke),{value:"lineNumbers",onClick:b[9]||(b[9]=U=>a(D)()),class:"px-2 py-1 rc-btn-shadow"},{default:f(()=>[o(ae,{delayDuration:100,content:"Toggle Line Numbers",side:"bottom"},{trigger:f(()=>[o(a(Kt),{size:"16",class:"focus:outline-none"})]),_:1})]),_:1}),o(a(ke),{value:"minimap",onClick:b[10]||(b[10]=U=>a(A)()),class:"px-2 py-1 rc-btn-shadow"},{default:f(()=>[o(ae,{delayDuration:100,content:"Toggle Map",side:"bottom"},{trigger:f(()=>[o(a(qt),{size:"16",class:"focus:outline-none"})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1})])),o(ve,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),a(B)?(g(),I(a(P),{key:5,class:"h-4 w-8"})):(g(),w("span",Rc,"YAML"))]),o(ve,{class:"relative w-full h-px shrink-0 bg-border"})]),m("div",Mc,[a(B)?(g(),w("div",Pc,[o(a(P),{class:"w-full h-full"})])):k("",!0),b[27]||(b[27]=m("div",{class:"code-editor__code-pre",id:"code-editor__code-pre",style:{height:"calc(100vh - 190px)"}},null,-1))])]),_:1})]),_:1})]),_:1}),a(M)("DialogTemplateImport")?(g(),I(ja,{key:0,onSetTemplateCode:b[12]||(b[12]=U=>se(U))})):k("",!0)])}}},jc={class:"w-screen h-[calc(100vh-72px)] border",style:{display:"flex","flex-direction":"column","background-color":"rgb(27, 29, 33)","border-radius":"16px",margin:"4px 8px 8px","max-width":"calc(100% - 16px)",overflow:"hidden"}},hu={__name:"ContentPanel",props:{},emits:["close"],setup(e,{emit:n}){const i=$t(),l=Je(),t=O(0),s=O(null),r=O(null);ne(()=>{t.value=parseInt(i.params.id,10),s.value=i.name,r.value=i.query.ref||null});function c(){s.value=null,l.push({name:"devices"})}function u(){s.value=null,l.push({name:"templates"})}function d(){l.back()}return(v,p)=>(g(),w("div",jc,[o(Ce,{name:"fade"},{default:f(()=>[s.value==="device-view"?(g(),I(Uo,{key:0,editId:t.value,onClose:p[0]||(p[0]=h=>c())},null,8,["editId"])):k("",!0)]),_:1}),o(Ce,{name:"fade"},{default:f(()=>[s.value==="template-view"?(g(),I(Bc,{key:0,editId:t.value,onClose:p[1]||(p[1]=h=>u())},null,8,["editId"])):k("",!0)]),_:1}),o(Ce,{name:"fade"},{default:f(()=>[s.value==="config-view"?(g(),I(Fa,{key:0,configId:t.value,onClose:p[2]||(p[2]=h=>d())},null,8,["configId"])):k("",!0)]),_:1})]))}};export{hu as default};
