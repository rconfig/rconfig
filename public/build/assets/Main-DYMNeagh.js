import{j as Be,aU as Bt,o as n,e as p,u as e,di as Ft,aR as Lt,aS as zt,w as l,m as kt,g as ue,ad as re,ar as W,ae as be,r as j,b as s,ag as bt,ah as Fe,ai as Le,a,t as F,d as g,c as U,E as V,an as ze,ao as Oe,K as P,aJ as _e,ak as ee,al as de,aq as Pe,X as ne,aK as tt,aL as se,aM as ae,cS as Ot,cT as jt,B as Kt,n as De,dj as ht,q as wt,k as $t,l as Ct,p as Dt,bM as qt,ap as St,bm as st,bn as lt,bo as ge,au as Gt,bI as Ht,i as Jt,bJ as pt,cC as Vt,cD as Pt,bK as Xt,bq as at,b9 as je,at as ie,bb as Ke,aA as We,df as et,aG as qe,bc as Ge,_ as nt,dk as Yt,bi as It,dl as Zt,cz as vt,C as Qt,aE as Wt,aj as es,aC as Qe,bf as ts,bg as ss,c6 as ls,cA as as,dm as ns,dn as xt,bG as os,dp as ds,ay as _t,aB as rs,dh as is,cR as us,dq as cs}from"./app-BI0-EO49.js";import{u as he,a as ot,i as dt,k as rt,j as ke,l as Ie,_ as Ee,b as pe,c as J,d as Me,e as Re,f as H,m as He,n as Te,g as Ue,h as Ne,o as $e,p as Ae,q as ye,r as ms}from"./useRowSelection-B8rAyxhJ.js";import{_ as Se}from"./BadgeList-CuSIVCbj.js";import{_ as ft,b as ps,c as vs,a as fs}from"./TagMultiSelect-BY7xEjQ8.js";import{S as Ye}from"./Spinner-BCXtUV0z.js";import{_ as Je,u as gs}from"./useCopy-BRBtZjcM.js";import{_ as Et}from"./RcToolTip.vue_vue_type_script_setup_true_lang-ka54OlK3.js";import{a as ys,b as xs,d as _s,e as ks,f as bs,g as hs,u as ws,_ as $s,c as Cs,h as Ds,i as Ss}from"./useTemplatesGithub-DufkEt6t.js";import{_ as Vs,a as Ps,b as Is,c as Es,d as Ms}from"./SelectScrollDownButton-DuhPHMUp.js";/* empty css               */import"./HoverCardTrigger-DmZHPGK-.js";import"./useCredentials-BT2ozYuP.js";import"./AlertInfo.vue_vue_type_style_index_0_scoped_c93aa73f_lang-B0UCky4z.js";const Rs=Be({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(k){const A=k,h=ue(()=>{const{class:D,...o}=A;return o}),$=Bt(h);return(D,o)=>(n(),p(e(Ft),Lt(e($),{class:e(zt)("px-2 py-1.5 text-sm font-semibold",k.inset&&"pl-8",A.class)}),{default:l(()=>[kt(D.$slots,"default")]),_:3},16,["class"]))}}),Ts={class:"flex items-center"},Us={class:"ml-2"},Ns={class:"grid gap-2 p-4"},As={class:"grid items-center grid-cols-4 gap-2"},Bs={key:0,class:"col-span-3"},Fs={key:2,class:"col-span-3 col-start-2 text-sm text-red-400"},Ls={class:"grid items-center grid-cols-4 gap-2"},zs={key:0,class:"col-span-3"},Os={class:"grid items-center grid-cols-4 gap-2"},js={key:0,class:"col-span-3"},Ks={key:2,class:"col-span-3 col-start-2 text-sm text-red-400"},qs={class:"pl-2 ml-auto"},Gs={class:"rc-kdb-class2"},Hs={__name:"CommandAddEditDialog",props:{editId:Number},emits:["save"],setup(k,{emit:A}){const{toastSuccess:h}=_e(),$=he(),{openDialog:D,closeDialog:o,isDialogOpen:R}=$,x=A,b=P([]),E=P(!1),w=P({command:"",description:"",category:[]}),T=k;function _(v){v.ctrlKey&&v.key==="Enter"&&f()}re(()=>{T.editId>0&&(E.value=!0,W.get(`/api/commands/${T.editId}`).then(v=>{w.value=v.data,w.value.categoryArray=v.data.category.map(m=>m.id)}).catch(v=>{console.error("Error loading command:",v)}).finally(()=>{E.value=!1})),window.addEventListener("keydown",_)}),be(()=>{window.removeEventListener("keydown",_)});function f(){const v=T.editId>0?`/${T.editId}`:"",m=T.editId>0?"patch":"post";W[m]("/api/commands"+v,w.value).then(C=>{x("save",C.data),h("Command saved","The command has been saved successfully."),o("DialogNewCommand")}).catch(C=>{var y,c;b.value=((c=(y=C.response)==null?void 0:y.data)==null?void 0:c.errors)||{}})}return(v,m)=>{const C=j("RcIcon"),y=j("Label"),c=j("Skeleton"),I=j("Input"),N=j("Button");return n(),p(e(Oe),{open:e(R)("DialogNewCommand")},{default:l(()=>[s(e(bt),{"as-child":""}),s(e(Fe),{class:"p-0 sm:max-w-fit",onEscapeKeyDown:m[4]||(m[4]=r=>e(o)("DialogNewCommand")),onPointerDownOutside:m[5]||(m[5]=r=>e(o)("DialogNewCommand")),onCloseClicked:m[6]||(m[6]=r=>e(o)("DialogNewCommand"))},{default:l(()=>[s(e(Je),{class:"rc-dialog-header"},{default:l(()=>[s(e(Le),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",Ts,[s(C,{name:"commands"}),a("span",Us,F(k.editId>0?"Edit":"Add")+" Command "+F(k.editId>0?"(ID: "+k.editId+")":""),1)])]),_:1})]),_:1}),a("div",Ns,[a("div",As,[s(y,{for:"command",class:"text-right"},{default:l(()=>[...m[7]||(m[7]=[g(" Command Name ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),E.value?(n(),U("div",Bs,[s(c,{class:"h-6 w-full"})])):(n(),p(I,{key:1,modelValue:w.value.command,"onUpdate:modelValue":m[0]||(m[0]=r=>w.value.command=r),id:"command",class:"col-span-3"},null,8,["modelValue"])),b.value.command&&!E.value?(n(),U("span",Fs,F(b.value.command[0]),1)):V("",!0)]),a("div",Ls,[s(y,{for:"description",class:"text-right"},{default:l(()=>[...m[8]||(m[8]=[g("Description",-1)])]),_:1}),E.value?(n(),U("div",zs,[s(c,{class:"h-6 w-full"})])):(n(),p(I,{key:1,modelValue:w.value.description,"onUpdate:modelValue":m[1]||(m[1]=r=>w.value.description=r),id:"description",class:"col-span-3"},null,8,["modelValue"]))]),a("div",Os,[s(y,{class:"text-right"},{default:l(()=>[...m[9]||(m[9]=[g(" Command Group ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),E.value?(n(),U("div",js,[s(c,{class:"h-6 w-full"})])):(n(),p(ft,{key:1,modelValue:w.value.category,"onUpdate:modelValue":m[2]||(m[2]=r=>w.value.category=r)},null,8,["modelValue"])),b.value.categoryArray&&!E.value?(n(),U("span",Ks,F(b.value.categoryArray[0]),1)):V("",!0)])]),s(e(ze),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[s(N,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:m[3]||(m[3]=r=>e(o)("DialogNewCommand")),size:"sm"},{default:l(()=>[...m[10]||(m[10]=[g(" Close ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),s(N,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:f,variant:"primary"},{default:l(()=>[g(F(T.editId===0?"Save":"Update")+" ",1),a("div",qs,[a("kbd",Gs,[m[11]||(m[11]=g(" Ctrl  ",-1)),s(C,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},Js={class:"flex items-center"},Xs={class:"grid gap-4 p-4"},Ys={class:"max-h-40 overflow-y-auto rounded-lg border border-border bg-background/80 backdrop-blur-sm p-2"},Zs={class:"space-y-1.5"},Qs={class:"text-foreground"},Ws={class:"grid gap-2"},el={key:0,class:"text-sm text-red-400 bg-red-900/20 border border-red-700 rounded p-2"},tl={key:1,class:"pl-2 ml-auto"},sl={class:"rc-kdb-class2"},ll={__name:"CommandsBulkUpdateModal",props:{data:{type:Array,required:!0},isOpen:{type:Boolean,default:!1}},emits:["close","updated"],setup(k,{emit:A}){const{toastSuccess:h,toastError:$}=_e(),D=he(),{closeDialog:o,isDialogOpen:R}=D,x=k,b=A,E=P(""),w=P([]),T=P(!1),_=P([]);async function f(y={}){T.value=!0;try{const c=await W.get("/api/categories?per_page=1000",{});_.value=c.data}catch(c){console.error("Error fetching categories:",c),$("Error","Failed to fetch categories.")}finally{T.value=!1}}function v(y){y.ctrlKey&&y.key==="Enter"&&C(),y.key==="Escape"&&o("DialogBulkUpdateCommands")}re(()=>{f(),window.addEventListener("keydown",v)}),be(()=>{window.removeEventListener("keydown",v)});function m(y){b(y==="updated"?"updated":"close")}async function C(){var y,c;if(w.value.length===0){E.value="You must select at least one command group.";return}T.value=!0,E.value="";try{await W.post("/api/commands/bulk-update-categories",{categories:w.value,commands:x.data}),h("Command groups updated",`Successfully updated ${x.data.length} command(s) with new command groups.`),m("updated")}catch(I){const N=((c=(y=I.response)==null?void 0:y.data)==null?void 0:c.message)||"Failed to update command groups";E.value=N,$("Update failed",N)}finally{T.value=!1}}return(y,c)=>{const I=j("RcIcon"),N=j("Label"),r=j("Button");return n(),p(e(Oe),{open:e(R)("DialogBulkUpdateCommands")},{default:l(()=>[s(e(Fe),{class:"p-0 sm:max-w-2xl",onEscapeKeyDown:m,onPointerDownOutside:m,onCloseClicked:m},{default:l(()=>[s(e(Je),{class:"rc-dialog-header"},{default:l(()=>[s(e(Le),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",Js,[s(I,{name:"commands"}),c[1]||(c[1]=a("span",{class:"ml-2"},"Update Command Groups",-1))])]),_:1})]),_:1}),a("div",Xs,[c[5]||(c[5]=a("p",{class:"text-sm text-rcgray-300"},"The commands below will be updated with the selected command groups.",-1)),a("div",Ys,[a("ul",Zs,[(n(!0),U(ee,null,de(k.data,z=>(n(),U("li",{key:z.id||z.command,class:"flex items-center text-xs font-mono text-muted-foreground bg-muted/60 hover:bg-muted px-3 py-1.5 rounded transition-colors"},[c[2]||(c[2]=a("span",{class:"text-green-400 mr-2"},"$",-1)),a("span",Qs,F(z.command),1)]))),128))])]),a("div",Ws,[s(N,{class:"text-sm font-medium text-rcgray-200"},{default:l(()=>[...c[3]||(c[3]=[g(" Command Groups ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),s(ft,{modelValue:w.value,"onUpdate:modelValue":c[0]||(c[0]=z=>w.value=z),id:"selectedCategoryObj"},null,8,["modelValue"]),c[4]||(c[4]=a("p",{class:"text-xs text-rcgray-400"},"You must associate one or multiple command groups to the chosen commands.",-1))]),E.value?(n(),U("div",el,F(E.value),1)):V("",!0)]),s(e(ze),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[s(r,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:m,size:"sm"},{default:l(()=>[...c[6]||(c[6]=[g(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),s(r,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:C,variant:"primary",disabled:T.value||w.value.length===0},{default:l(()=>[T.value?(n(),p(Ye,{key:0,class:"w-4 h-4 mr-2"})):V("",!0),c[8]||(c[8]=g(" Confirm ",-1)),T.value?V("",!0):(n(),U("div",tl,[a("kbd",sl,[c[7]||(c[7]=g(" Ctrl  ",-1)),s(I,{name:"enter",class:"ml-1"})])]))]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1},8,["open"])}}};function al(){const k=P(1),A=ot(),h=P(A.get("useCommands","perPage",10)),$=P("-id"),D=P(""),o=P({}),R=he(),x=P(0),b=P(!1),E=P(1),w=P(1),T=P(1),_=P([]),f=P(!1),{openDialog:v,closeDialog:m}=R,{toastSuccess:C,toastError:y}=_e(),{reload:c}=rt(N),{toggleSort:I}=dt($,N,"useCommands");Pe();async function N(O={}){b.value=!0;try{const te=await W.get("/api/commands",{params:{page:k.value,perPage:h.value,sort:$.value,...o.value}});_.value=te.data,E.value=te.data.last_page}catch(te){console.error("Error fetching commands:",te),y("Error","Failed to fetch commands.")}finally{b.value=!1}}const r=O=>{x.value=0,w.value=Math.random(),v("DialogNewCommand")};function z(O){x.value=O,w.value=Math.random(),v("DialogNewCommand")}const X=async O=>{try{await W.delete(`/api/commands/${O}`),N(),C("Command Deleted","The command has been deleted successfully."),f.value=!1}catch(te){te.status===422?y("Error",te.response.data.message):(console.error("Error deleting Command Group:",te),y("Error","Failed to delete Command Group."))}},M=async O=>{try{await W.post("/api/commands/delete-many",{ids:O}),N(),C("Commands Deleted","The commands have been deleted successfully."),f.value=!1,ke.emit("deleteManyCommandsSuccess")}catch(te){te.status===422?y("Error",te.response.data.message):(console.error("Error deleting Command Group:",te),y("Error","Failed to delete Command Group."))}},Q=O=>{x.value=O,w.value=Math.random(),v("DialogNewCommand")},d=()=>{T.value=Math.random(),v("DialogBulkUpdateCommands")},L=()=>{T.value=Math.random(),m("DialogBulkUpdateCommands")},i=()=>{N(),T.value=Math.random(),m("DialogBulkUpdateCommands"),C("Bulk Update","Commands updated successfully.")},q=()=>{N(),w.value=Math.random()};function K(O){O.altKey&&O.key==="n"&&(O.preventDefault(),v("DialogNewCommand"))}const u=tt(()=>{o.value["filter[q]"]=D.value,k.value=1,N()},500);ne(k,()=>{N()}),ne(D,()=>{u()}),ne(h,O=>{A.set("useCommands","perPage",h.value),N()});function oe(O,te,Z){const G=!Z;O.change_notification=G,W.post(`/api/commands/toggle-change-notification/${te}`,{change_notification:G}).then(()=>{C("Success","Change notification setting updated")}).catch(Ce=>{var xe,Ve;O.change_notification=Z,console.log(Ce),y("Error",((Ve=(xe=Ce.response)==null?void 0:xe.data)==null?void 0:Ve.message)||"Failed to update change notification")})}function Y(O,te,Z){const G=!Z;O.save_config=G,W.post(`/api/commands/set-save_config-state/${te}`,{state:G}).then(()=>{C("Success","Save config setting updated")}).catch(Ce=>{var xe,Ve;O.save_config=Z,console.log(Ce),y("Error",((Ve=(xe=Ce.response)==null?void 0:xe.data)==null?void 0:Ve.message)||"Failed to update save config")})}return{commands:_,currentPage:k,editId:x,isLoading:b,lastPage:E,newCommandModalKey:w,newBulkUpdateCommandsKey:T,perPage:h,searchTerm:D,showConfirmDelete:f,sortParam:$,createCommand:r,deleteCommand:X,deleteManyCommands:M,fetchCommands:N,handleKeyDown:K,handleSave:q,openDialog:v,reload:c,toggleSort:I,updateCommand:z,viewEditDialog:Q,openBulkUpdateDialog:d,handleCloseBulkUpdate:L,handleUpdateBulkCommands:i,updateChangeNotification:oe,updateSaveConfig:Y}}const nl={class:"flex flex-col h-full gap-1 text-center"},ol={class:"flex items-center justify-between p-4"},dl={class:"flex items-center"},rl={class:"flex items-center justify-end"},il={class:"px-6"},ul={key:0,class:"fixed bottom-5 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-4 bg-rcgray-900 text-white border border-rcgray-600 shadow-xl px-4 py-1.5 rounded-lg"},cl={class:"text-sm"},ml={class:"hidden md:inline-flex mr-1"},pl={__name:"Main",setup(k){const{commands:A,currentPage:h,editId:$,isLoading:D,lastPage:o,newCommandModalKey:R,newBulkUpdateCommandsKey:x,perPage:b,searchTerm:E,showConfirmDelete:w,sortParam:T,createCommand:_,deleteCommand:f,deleteManyCommands:v,fetchCommands:m,handleKeyDown:C,handleSave:y,reload:c,toggleSort:I,viewEditDialog:N,openBulkUpdateDialog:r,handleCloseBulkUpdate:z,handleUpdateBulkCommands:X,updateChangeNotification:M}=al(),{selectedRows:Q,selectAll:d,toggleSelectAll:L,toggleSelectRow:i}=Ae(A);re(()=>{m(),window.addEventListener("keydown",C),ke.on("deleteManyCommandsSuccess",()=>{Q.value=[],d.value=!1})}),be(()=>{window.removeEventListener("keydown",C)});const q=ue(()=>{var K;return(((K=A.value)==null?void 0:K.data)||[]).filter(u=>Q.value.includes(u.id))});return(K,u)=>{const oe=j("Input"),Y=j("Button"),O=j("RcIcon"),te=j("Checkbox"),Z=j("RcBadge");return n(),U("div",nl,[a("div",ol,[a("div",dl,[s(oe,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter commands...",modelValue:e(E),"onUpdate:modelValue":u[0]||(u[0]=G=>se(E)?E.value=G:null)},null,8,["modelValue"]),e(E)?(n(),p(Ie,{key:0,"onUpdate:modelValue":u[1]||(u[1]=G=>E.value="")})):V("",!0)]),a("div",rl,[s(Y,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ae(e(_),["prevent"]),variant:"primary"},{default:l(()=>[...u[13]||(u[13]=[g(" New Command ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(O,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:u[2]||(u[2]=G=>e(c)())})])]),a("div",il,[s(e(Ue),null,{default:l(()=>[s(e(Ee),null,{default:l(()=>[s(e(pe),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(te,{id:"selectAll",modelValue:e(d),"onUpdate:modelValue":u[3]||(u[3]=G=>se(d)?d.value=G:null),checked:e(d),onClick:u[4]||(u[4]=G=>e(L)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(Y,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:u[5]||(u[5]=G=>e(I)("id"))},{default:l(()=>[s(O,{name:"sort",sortParam:e(T),field:"id"},null,8,["sortParam"]),u[14]||(u[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[s(Y,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:u[6]||(u[6]=G=>e(I)("command"))},{default:l(()=>[s(O,{name:"sort",sortParam:e(T),field:"command"},null,8,["sortParam"]),u[15]||(u[15]=a("span",{class:"ml-2"},"Command",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...u[16]||(u[16]=[g("Description",-1)])]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...u[17]||(u[17]=[g("Command Groups",-1)])]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[u[18]||(u[18]=g(" Options ",-1)),s(Ot,{title:"Command Options",description:"Enable or Disable change notifications.",href:K.$rconfigDocsUrl+"/devices/commands/",linkText:"Command Docs",align:"end"},{trigger:l(()=>[s(Y,{variant:"link",size:"sm",class:"text-blue-400 hover:text-blue-300 p-0"},{default:l(()=>[s(e(jt),{class:"h-3.5 w-3.5 ml-1"})]),_:1})]),_:1},8,["href"])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...u[19]||(u[19]=[g("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Me),null,{default:l(()=>[e(D)?(n(),p(Re,{key:0})):e(D)?(n(),p(Te,{key:2})):(n(!0),U(ee,{key:1},de(e(A).data,(G,Ce)=>(n(),p(e(pe),{key:G.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(te,{class:"cursor-pointer",id:"select-"+G.id,checked:!!e(Q).includes(G.id),onClick:xe=>e(i)(G.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(G.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(G.command),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(G.description),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:G.category,displayField:"categoryName",linkField:"view_url",maxVisible:8,hoverCardFields:["id","categoryName"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(e(ys),{type:"multiple"},{default:l(()=>[s(e(xs),{value:"notify","data-state":G.change_notification?"on":"off",onClick:xe=>e(M)(G,G.id,G.change_notification),class:"rounded p-1 px-2 transition-colors rc-btn-shadow data-[state=on]:bg-amber-400 data-[state=off]:bg-gray-800 hover:data-[state=off]:bg-gray-700 hover:data-[state=on]:bg-amber-300"},{default:l(()=>[s(Et,{delayDuration:100,content:G.change_notification?"Change Notifications: On":"Change Notifications: Off",side:"bottom"},{trigger:l(()=>[s(e(Kt),{class:De(["h-4 w-4 focus:outline-none",G.change_notification?"text-black":"text-amber-300"])},null,8,["class"])]),_:2},1032,["content"])]),_:2},1032,["data-state","onClick"])]),_:2},1024)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(He,{rowData:G,onOnEdit:xe=>e(N)(G.id),onOnDelete:xe=>e(f)(G.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),e(Q).length?(n(),U("div",ul,[a("span",cl,[s(Z,{variant:"primary",class:"mr-1"},{default:l(()=>[g(F(e(Q).length),1)]),_:1}),u[20]||(u[20]=g(" command(s) selected ",-1))]),s(Y,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",variant:"outline",onClick:e(r)},{default:l(()=>[s(O,{name:"command-group",class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),u[21]||(u[21]=a("span",{class:"hidden md:inline-flex"},"Bulk assign command group",-1))]),_:1},8,["onClick"]),s(Y,{class:"text-sm px-1.5 py-0 bg-red-600 hover:bg-red-700 hover:animate-pulse h-8",onClick:u[7]||(u[7]=ae(G=>w.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[s(e(ht),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),a("span",ml,"Delete "+F(e(Q).length),1)]),_:1})])):V("",!0),s(Ne,{currentPage:e(h),lastPage:e(o),perPage:e(b),"onUpdate:currentPage":u[8]||(u[8]=G=>h.value=G),"onUpdate:perPage":u[9]||(u[9]=G=>b.value=G),totalRecords:e(A).total,isLoading:e(D)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(Hs,{onSave:u[10]||(u[10]=G=>e(y)()),key:e(R),editId:e($)},null,8,["editId"])),(n(),p(ll,{key:e(x),editId:e($),data:q.value,onClose:e(z),onUpdated:e(X)},null,8,["editId","data","onClose","onUpdated"])),s($e,{ids:e(Q),showConfirmDelete:e(w),onClose:u[11]||(u[11]=G=>w.value=!1),onHandleDelete:u[12]||(u[12]=G=>e(v)(e(Q)))},null,8,["ids","showConfirmDelete"])])])}}},vl={class:"text-xs text-gray-500 line-clamp-1 mt-1 ml-1"},fl={class:"max-w-xs"},gl={key:1,class:"text-xs text-gray-500"},yl={__name:"CategoryCell",props:{categoryName:{type:String,required:!0},categoryDescription:{type:String,required:!0},badgeColor:{type:String,default:""},defaultBadgeClass:{type:String,default:"bg-gray-600 text-gray-200 border-gray-500"},wordLimit:{type:Number,default:10},delayDuration:{type:Number,default:800},skipDelayDuration:{type:Number,default:500}},setup(k){const A=k,h=ue(()=>A.categoryDescription&&A.categoryDescription.split(" ").length>A.wordLimit);return($,D)=>(n(),p(e(H),{class:"text-start"},{default:l(()=>[a("span",{class:De([k.badgeColor||k.defaultBadgeClass,"w-fit flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},F(k.categoryName),3),h.value?(n(),p(e(wt),{key:0,"delay-duration":k.delayDuration,"skip-delay-duration":k.skipDelayDuration},{default:l(()=>[s(e($t),null,{default:l(()=>[s(e(Ct),{"as-child":""},{default:l(()=>[a("span",vl,F(k.categoryDescription),1)]),_:1}),s(e(Dt),{side:"bottom"},{default:l(()=>[a("p",fl,F(k.categoryDescription),1)]),_:1})]),_:1})]),_:1},8,["delay-duration","skip-delay-duration"])):(n(),U("span",gl,F(k.categoryDescription),1))]),_:1}))}},xl={class:"flex flex-col h-full gap-1 text-center"},_l={class:"flex items-center justify-between p-4"},kl={class:"flex items-center"},bl={class:"flex items-center justify-end"},hl={class:"px-6"},wl={__name:"Main",setup(k){const{reload:A,editId:h,categories:$,currentPage:D,perPage:o,searchTerm:R,lastPage:x,isLoading:b,fetchCommandGroups:E,viewEditDialog:w,createCommandGroup:T,deleteCommandGroup:_,deleteManyCommandGroups:f,handleSave:v,showConfirmDelete:m,handleKeyDown:C,newCommandGroupsModalKey:y,toggleSort:c,sortParam:I}=ps(),{selectedRows:N,selectAll:r,toggleSelectAll:z,toggleSelectRow:X}=Ae($),M=Pe();return re(()=>{var Q,d;E(),(d=(Q=M.currentRoute)==null?void 0:Q.value.params)!=null&&d.id&&(h.value=parseInt(M.currentRoute.value.params.id),w(h.value)),window.addEventListener("keydown",C),ke.on("deleteManyCommandGroupsSuccess",()=>{N.value=[],r.value=!1})}),be(()=>{window.removeEventListener("keydown",C)}),(Q,d)=>{const L=j("Input"),i=j("Button"),q=j("RcIcon"),K=j("Checkbox");return n(),U("div",xl,[d[20]||(d[20]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),a("div",_l,[a("div",kl,[s(L,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter Command Groups...",modelValue:e(R),"onUpdate:modelValue":d[0]||(d[0]=u=>se(R)?R.value=u:null)},null,8,["modelValue"]),e(R)?(n(),p(Ie,{key:0,"onUpdate:modelValue":d[1]||(d[1]=u=>R.value="")})):V("",!0)]),a("div",bl,[e(N).length?(n(),p(i,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:d[2]||(d[2]=ae(u=>m.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[g(" Delete Selected "+F(e(N).length)+" Command Group(s) ",1)]),_:1})):V("",!0),s(i,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ae(e(T),["prevent"]),variant:"primary"},{default:l(()=>[...d[13]||(d[13]=[g(" New Command Group ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(q,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:d[3]||(d[3]=u=>e(A)())})])]),a("div",hl,[s(e(Ue),null,{default:l(()=>[s(e(Ee),null,{default:l(()=>[s(e(pe),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(K,{id:"selectAll",modelValue:e(r),"onUpdate:modelValue":d[4]||(d[4]=u=>se(r)?r.value=u:null),checked:e(r),onClick:d[5]||(d[5]=u=>e(z)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[6]||(d[6]=u=>e(c)("id"))},{default:l(()=>[s(q,{name:"sort",sortParam:e(I),field:"id"},null,8,["sortParam"]),d[14]||(d[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[7]||(d[7]=u=>e(c)("categoryName"))},{default:l(()=>[s(q,{name:"sort",sortParam:e(I),field:"categoryName"},null,8,["sortParam"]),d[15]||(d[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...d[16]||(d[16]=[g("Commands",-1)])]),_:1}),s(e(J),{class:"w-[40%]"},{default:l(()=>[...d[17]||(d[17]=[g("Devices",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...d[18]||(d[18]=[g("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Me),null,{default:l(()=>[e(b)?(n(),p(Re,{key:0})):e(b)?(n(),p(Te,{key:2})):(n(!0),U(ee,{key:1},de(e($).data,u=>(n(),p(e(pe),{key:u.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(K,{class:"cursor-pointer",id:"select-"+u.id,checked:!!e(N).includes(u.id),onClick:oe=>e(X)(u.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(u.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(yl,{"category-name":u.categoryName,"category-description":u.categoryDescription,"badge-color":u.badgeColor,"word-limit":8},null,8,["category-name","category-description","badge-color"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[u.command.length==0?(n(),p(Et,{key:0,delayDuration:100,content:"No commands attached to this command group",side:"bottom"},{trigger:l(()=>[s(qt,{class:"ml-1 px-2",variant:"warning",size:"sm"},{default:l(()=>[...d[19]||(d[19]=[g("0 Commands",-1)])]),_:1})]),_:1})):V("",!0),s(Se,{items:u.command,displayField:"command",linkField:"view_url",maxVisible:8,hoverCardFields:["id","command"],showEmptyText:!1},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:u.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(He,{rowData:u,onOnEdit:oe=>e(w)(u.id),onOnDelete:oe=>e(_)(u.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Ne,{currentPage:e(D),lastPage:e(x),perPage:e(o),"onUpdate:currentPage":d[8]||(d[8]=u=>D.value=u),"onUpdate:perPage":d[9]||(d[9]=u=>o.value=u),totalRecords:e($).total,isLoading:e(b)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(vs,{onSave:d[10]||(d[10]=u=>e(v)()),key:e(y),editId:e(h)},null,8,["editId"])),s($e,{ids:e(N),showConfirmDelete:e(m),onClose:d[11]||(d[11]=u=>m.value=!1),onHandleDelete:d[12]||(d[12]=u=>e(f)(e(N)))},null,8,["ids","showConfirmDelete"])])])}}},$l={__name:"ActionsMenuDevices",props:{rowData:{type:Object,required:!0},showEditBtn:{type:Boolean,default:!0},showViewDetailsBtn:{type:Boolean,default:!1},canDelete:{type:Boolean,default:!0},isLocked:{type:Boolean,default:!1},showRolesBtn:{type:Boolean,default:!1},showCopyDownloadDebug:{type:Boolean,default:!1}},emits:["onEdit","onDelete","onDisable","onClone","onViewDetails","onEnable","onRoleAssignment"],setup(k,{emit:A}){const h=P(!1),$=P(!1),D=A,{toastSuccess:o,toastError:R}=_e(),{copyItem:x}=gs(),b=St("appDirPath",null),E=k;function w(){D("onEdit")}function T(){D("onClone")}function _(){h.value=!0}function f(){D("onDelete"),h.value=!1}function v(){$.value=!0}function m(){D("onDisable"),$.value=!1}function C(){D("onEnable")}function y(){D("onViewDetails")}function c(){D("onRoleAssignment")}function I(){if(!b){console.error("appDirPath not available");return}const N=`cd ${b} && php artisan rconfig:download-device ${E.rowData.id} -d`;try{x(E.rowData.id,N),o("Device Download {ID:"+E.rowData.id+"} debug command copied to clipboard")}catch(r){console.error("Failed to copy snippet:",r),R("Failed to copy Device Download debug command")}}return(N,r)=>{const z=j("Button"),X=j("RcIcon");return n(),U("div",null,[s(e(at),null,{default:l(()=>[s(e(st),{"as-child":""},{default:l(()=>[s(z,{variant:"ghost",class:"hover:animate-pulse"},{default:l(()=>[...r[2]||(r[2]=[g(" ... ",-1)])]),_:1})]),_:1}),s(e(lt),{class:"w-56",align:"end",side:"bottom"},{default:l(()=>[k.showCopyDownloadDebug?(n(),p(e(ge),{key:0,class:"cursor-pointer hover:bg-rcgray-800",onClick:I},{default:l(()=>[r[3]||(r[3]=a("span",{class:"text-gray-300 group-hover:text-gray-200"},"Debug Cmd",-1)),s(e(ye),null,{default:l(()=>[s(X,{name:"commands",size:"16",class:"text-blue-300"})]),_:1})]),_:1})):V("",!0),k.showRolesBtn?(n(),p(e(ge),{key:1,class:"cursor-pointer hover:bg-rcgray-800",onClick:c},{default:l(()=>[r[4]||(r[4]=a("span",null,"Roles",-1)),s(e(ye),null,{default:l(()=>[s(X,{name:"rbac",size:"16"})]),_:1})]),_:1})):V("",!0),k.showViewDetailsBtn?(n(),p(e(ge),{key:2,class:"cursor-pointer hover:bg-rcgray-800",onClick:y},{default:l(()=>[r[5]||(r[5]=a("span",null,"View Details",-1)),s(e(ye),null,{default:l(()=>[s(e(Gt),{size:"16"})]),_:1})]),_:1})):V("",!0),k.showEditBtn?(n(),p(e(ge),{key:3,class:"cursor-pointer hover:bg-rcgray-800",onClick:w},{default:l(()=>[r[6]||(r[6]=a("span",null,"Edit",-1)),s(e(ye),null,{default:l(()=>[s(e(Ht),{size:"16"})]),_:1})]),_:1})):V("",!0),k.showEditBtn?(n(),p(e(ge),{key:4,class:"cursor-pointer hover:bg-rcgray-800 group",onClick:T},{default:l(()=>[r[7]||(r[7]=a("span",{class:"text-blue-400 group-hover:text-blue-500"},"Clone",-1)),s(e(ye),null,{default:l(()=>[s(e(Jt),{size:"16",class:"text-blue-400 group-hover:text-blue-500"})]),_:1})]),_:1})):V("",!0),k.showEditBtn?(n(),p(e(pt),{key:5})):V("",!0),k.rowData.status===100?(n(),p(e(ge),{key:6,class:"cursor-pointer hover:bg-rcgray-800",onClick:C},{default:l(()=>[r[8]||(r[8]=a("span",null,"Enable",-1)),s(e(ye),null,{default:l(()=>[s(e(Vt),{size:"16",class:"text-green-400"})]),_:1})]),_:1})):V("",!0),k.rowData.status!=100?(n(),p(e(ge),{key:7,class:"cursor-pointer hover:bg-rcgray-800",onClick:v},{default:l(()=>[r[9]||(r[9]=a("span",null,"Disable",-1)),s(e(ye),null,{default:l(()=>[s(e(Pt),{size:"16",class:"text-red-300"})]),_:1})]),_:1})):V("",!0),k.canDelete&&!k.isLocked?(n(),p(e(ge),{key:8,class:"group cursor-pointer hover:bg-rcgray-800",onClick:_},{default:l(()=>[r[10]||(r[10]=a("span",{class:"text-red-500 group-hover:text-red-400"},"Delete",-1)),s(e(ye),null,{default:l(()=>[s(e(Xt),{size:"16",class:"text-red-500 group-hover:text-red-400"})]),_:1})]),_:1})):V("",!0),k.isLocked?(n(),p(e(ge),{key:9,disabled:"",class:"cursor-default opacity-70"},{default:l(()=>[r[11]||(r[11]=a("span",{class:"italic text-slate-500"},"Vector CM Locked",-1)),s(e(ye),null,{default:l(()=>[s(X,{name:"lock"})]),_:1})]),_:1})):V("",!0)]),_:1})]),_:1}),s($e,{ids:[k.rowData.id],showConfirmDisable:$.value,onClose:r[0]||(r[0]=M=>$.value=!1),onHandleDisable:m},null,8,["ids","showConfirmDisable"]),s($e,{ids:[k.rowData.id],showConfirmDelete:h.value,onClose:r[1]||(r[1]=M=>h.value=!1),onHandleDelete:f},null,8,["ids","showConfirmDelete"])])}}},Cl={class:"hidden lg:inline-flex"},Dl={key:0,class:"text-sm font-light"},Sl={class:"text-sm font-semibold"},Vl={class:"relative items-center w-full"},Pl={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Il={class:"py-1"},El=["onClick"],Ml=["checked"],Rl={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Tl={"data-size":"20"},Ul={class:"p-1 border-5"},Nl=Be({__name:"CategoryFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const h=A,$=P([]),D=P(!1),o=P([]),R=P(""),x=P(!1),b=k;re(()=>{w()}),ne(()=>b.modelValue,_=>{o.value=_,x.value=o.value.length===$.value.length});function E(_){if(_.id===9999999)x.value?(o.value=[],x.value=!1):(o.value=[...$.value],x.value=!0);else{const f=o.value.findIndex(v=>v.id===_.id);f!==-1?(o.value.splice(f,1),x.value=!1):(o.value.push(_),o.value.length===$.value.length&&(x.value=!0))}D.value=!1,h("update:modelValue",o.value)}function w(){W.get("/api/categories/?perPage=10000&sort=categoryName").then(_=>{$.value=_.data.data})}const T=ue(()=>$.value.filter(_=>_.categoryName.toLowerCase().includes(R.value.toLowerCase())));return(_,f)=>{const v=j("RcIcon");return n(),p(e(Ge),null,{default:l(()=>[s(e(je),null,{default:l(()=>[s(e(ie),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(v,{name:"command-group",class:"lg:mr-2"}),a("div",Cl,[o.value&&o.value.length===0?(n(),U(ee,{key:0},[g("Command Group")],64)):(n(),U(ee,{key:1},[o.value.length>0?(n(),U("span",Dl,[f[2]||(f[2]=g(" Command Group ",-1)),a("strong",Sl,F(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Ke),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",Vl,[s(e(We),{id:"search",type:"text",modelValue:R.value,"onUpdate:modelValue":f[0]||(f[0]=m=>R.value=m),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Pl,[s(v,{name:"search"})])]),s(e(et)),s(e(qe),{class:"h-44"},{default:l(()=>[a("div",Il,[(n(!0),U(ee,null,de(T.value,m=>(n(),U("div",{key:m.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:C=>E(m)},[a("input",{type:"checkbox",checked:o.value.some(C=>C.id===m.id),class:"mr-2"},null,8,Ml),a("span",Rl,[a("span",Tl,F(m.categoryName),1)])],8,El))),128))])]),_:1}),s(e(et)),a("div",Ul,[s(e(ie),{variant:"ghost",class:"justify-start w-full p-1",onClick:f[1]||(f[1]=m=>E({id:9999999}))},{default:l(()=>[s(v,{name:"select-all",isSelected:x.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,F(x.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Al={class:"p-2"},Bl={class:"flex justify-between mb-2"},Fl={class:"p-2"},Ll={class:"flex items-center space-x-2"},zl=["for"],Ol={key:0,class:"text-xs text-muted-foreground ml-1"},jl={key:0,class:"flex items-center space-x-1"},Kl={__name:"ColumnChooser",props:{columns:{type:Array,required:!0},modelValue:{type:Array,required:!0},storageKey:{type:String,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const h=k,$=A,D=P(!1),o=P([...h.modelValue]);ne(()=>h.modelValue,C=>{o.value=[...C]},{deep:!0});const R=ue(()=>[...h.columns].sort((C,y)=>{const c=o.value.indexOf(C.key),I=o.value.indexOf(y.key);if(c>=0&&I>=0)return c-I;if(c>=0)return-1;if(I>=0)return 1;const N=h.columns.findIndex(z=>z.key===C.key),r=h.columns.findIndex(z=>z.key===y.key);return N-r})),x=C=>o.value.includes(C);function b(){localStorage.setItem(h.storageKey,JSON.stringify(o.value))}function E(){const C=localStorage.getItem(h.storageKey);if(C)try{const c=JSON.parse(C).filter(I=>h.columns.some(N=>N.key===I));o.value=c,$("update:modelValue",c)}catch(y){console.error("Error loading column preferences:",y)}}function w(C){o.value.includes(C)?o.value=o.value.filter(y=>y!==C):(o.value.push(C),o.value.sort((y,c)=>{const I=h.columns.findIndex(r=>r.key===y),N=h.columns.findIndex(r=>r.key===c);return I-N})),$("update:modelValue",o.value),b()}function T(C){const y=o.value.indexOf(C);if(y>0){const c=[...o.value],I=c[y];c[y]=c[y-1],c[y-1]=I,o.value=c,$("update:modelValue",c),b()}}function _(C){const y=o.value.indexOf(C);if(y<o.value.length-1){const c=[...o.value],I=c[y];c[y]=c[y+1],c[y+1]=I,o.value=c,$("update:modelValue",c),b()}}function f(){o.value=h.columns.map(C=>C.key),$("update:modelValue",o.value),b()}function v(){const C=h.columns.filter(y=>y.mandatory).map(y=>y.key);o.value=C,$("update:modelValue",o.value),b()}function m(){const C=h.columns.filter(y=>y.default).map(y=>y.key);o.value=C,$("update:modelValue",o.value),b()}return re(()=>{E()}),(C,y)=>(n(),p(e(at),{open:D.value,"onUpdate:open":y[0]||(y[0]=c=>D.value=c)},{default:l(()=>[s(e(st),{"as-child":""},{default:l(()=>[s(e(ie),{variant:"ghost",size:"sm",class:"h-8 w-8 p-0 hidden xl:inline-flex",title:"Column Options"},{default:l(()=>[s(e(Yt),{class:"h-4 w-4"}),y[1]||(y[1]=a("span",{class:"sr-only"},"Column Options",-1))]),_:1})]),_:1}),s(e(lt),{align:"end",class:"w-60"},{default:l(()=>[s(e(Rs),null,{default:l(()=>[...y[2]||(y[2]=[g("Customize Columns",-1)])]),_:1}),s(e(pt)),a("div",Al,[a("div",Bl,[s(e(ie),{variant:"outline",size:"sm",class:"text-xs",onClick:f},{default:l(()=>[...y[3]||(y[3]=[g(" Show All ",-1)])]),_:1}),s(e(ie),{variant:"outline",size:"sm",class:"text-xs",onClick:v},{default:l(()=>[...y[4]||(y[4]=[g(" Hide All ",-1)])]),_:1}),s(e(ie),{variant:"outline",size:"sm",class:"text-xs",onClick:m},{default:l(()=>[...y[5]||(y[5]=[g(" Reset ",-1)])]),_:1})])]),s(e(pt)),s(e(qe),{class:"h-[300px]"},{default:l(()=>[a("div",Fl,[(n(!0),U(ee,null,de(R.value,c=>(n(),U("div",{key:c.key,class:"flex items-center justify-between py-1"},[a("div",Ll,[s(e(It),{id:`col-toggle-${c.key}`,checked:x(c.key),disabled:c.mandatory,"onUpdate:checked":I=>w(c.key)},null,8,["id","checked","disabled","onUpdate:checked"]),a("label",{for:`col-toggle-${c.key}`,class:De(["text-sm cursor-pointer",{"opacity-50":c.mandatory}])},[g(F(c.label)+" ",1),c.mandatory?(n(),U("span",Ol,"(Required)")):V("",!0)],10,zl)]),x(c.key)?(n(),U("div",jl,[s(e(ie),{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:I=>T(c.key),disabled:o.value.indexOf(c.key)===0},{default:l(()=>[s(e(Zt),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"]),s(e(ie),{variant:"ghost",size:"icon",class:"h-6 w-6",onClick:I=>_(c.key),disabled:o.value.indexOf(c.key)===o.value.length-1},{default:l(()=>[s(e(vt),{class:"h-3 w-3"})]),_:1},8,["onClick","disabled"])])):V("",!0)]))),128))])]),_:1})]),_:1})]),_:1},8,["open"]))}},ql=nt(Kl,[["__scopeId","data-v-89b28009"]]),Gl={class:"alert-success"},Hl={class:"alert-content"},Jl={class:"alert-icon"},Xl={key:0},Yl=["innerHTML"],Zl={class:"alert-slot"},Ql={__name:"AlertSuccess",props:{title:{type:String,default:"Success"},titleEnabled:{type:Boolean,default:!0},message:{type:String,required:!0},small:{type:Boolean,default:!1},showClose:{type:Boolean,default:!1}},emits:["closed"],setup(k,{emit:A}){const h=A;function $(){h("closed")}return(D,o)=>(n(),U("div",Gl,[a("div",Hl,[a("div",Jl,[s(e(Qt)),o[0]||(o[0]=a("span",{class:"alert-icon-pulse"},null,-1))]),a("div",{class:De(["alert-body",{"text-size-sm":k.small}])},[k.titleEnabled?(n(),U("h5",Xl,F(k.title),1)):V("",!0),a("div",{innerHTML:k.message,class:"alert-message"},null,8,Yl),a("div",Zl,[kt(D.$slots,"default",{},void 0,!0)])],2),k.showClose?(n(),U("button",{key:0,onClick:$,class:"alert-close-btn","aria-label":"Close",type:"button"},[s(e(Wt)),o[1]||(o[1]=a("span",{class:"alert-close-ripple"},null,-1))])):V("",!0)])]))}},Wl=nt(Ql,[["__scopeId","data-v-f0f980b3"]]);function ea(k,A){const h=he(),$=St("formatters"),{closeDialog:D,isDialogOpen:o}=h,{toastSuccess:R,toastError:x}=_e(),b=P(!1),E=P([]),w=P([]),T=P([]),_=P([]),f=P([]),v=P(""),m=P(""),C=P([]),y=P(!1),c=P(""),I=P(""),N=[{id:2,name:"command_group"},{id:1,name:"credentials"},{id:4,name:"device_enable_prompt"},{id:5,name:"device_main_prompt"},{id:6,name:"model"},{id:9,name:"tag"},{id:10,name:"template"},{id:11,name:"vendor"}],r=N,z=P(""),X=ue(()=>N.find(Z=>Z.name===z.value)||{});function M(){setTimeout(()=>{c.value="",I.value=""},4e3)}function Q(){D("DeviceBulkEditDialog"),d(),A("close")}function d(){b.value=!1,X.value={},E.value=0,w.value=0,_.value=0,f.value=0,v.value="",m.value="",C.value="",y.value=!1,c.value="",I.value=""}function L(){if(c.value="",k.checkedRows.length===0){x("Error","Please select at least one device to update."),c.value="Please select at least one device to update.";return}const Z={credentials:{value:f.value,errorMessage:"Please select Credentials",updateFunction:i},command_group:{value:w.value,errorMessage:"Please select a Command Group",updateFunction:q},vendor:{value:_.value,errorMessage:"Please select a Vendor",updateFunction:K},device_enable_prompt:{value:v.value,errorMessage:"Please enter a Device Enable Prompt",updateFunction:oe},device_main_prompt:{value:m.value,errorMessage:"Please enter a Device Main Prompt",updateFunction:u},model:{value:C.value,errorMessage:"Please enter a Model",updateFunction:Y},template:{value:E.value,errorMessage:"Please select a template",updateFunction:O},tag:{value:T.value,errorMessage:"Please select one or more tags",updateFunction:te},default:{value:0,errorMessage:"Please select a Property",updateFunction:()=>{}}},G=Z[X.value.name]||Z.default;if(G.value.length===0){x("Error",G.errorMessage),c.value=G.errorMessage;return}G.updateFunction()}function i(){b.value=!0,W.post("/api/device/bulk-update/credentials",{device_ids:k.checkedRows,cred_id:f.value.id}).then(Z=>{R("Success",Z.data.message),b.value=!1,I.value="Credentials updated successfully, you can now close this dialog or continue updating other properties.",M(),A("bulkUpdateSuccess")}).catch(Z=>{x("Error",Z.response.data.message||"An error occurred while updating vendors"),b.value=!1,A("bulkUpdateSuccess")})}function q(){b.value=!0,W.post("/api/device/bulk-update/category",{device_ids:k.checkedRows,category_id:w.value.id}).then(Z=>{R("Success",Z.data.message),b.value=!1,I.value="Categories updated successfully, you can now close this dialog or continue updating other properties.",M(),A("bulkUpdateSuccess")}).catch(Z=>{x("Error",Z.response.data.message||"An error occurred while updating categories"),b.value=!1,A("bulkUpdateSuccess")})}function K(){b.value=!0,W.post("/api/device/bulk-update/vendor",{device_ids:k.checkedRows,vendor_id:_.value.id}).then(Z=>{R("Success",Z.data.message),b.value=!1,I.value="Vendor updated successfully, you can now close this dialog or continue updating other properties.",M(),A("bulkUpdateSuccess")}).catch(Z=>{x("Error",Z.response.data.message||"An error occurred while updating vendors"),b.value=!1,A("bulkUpdateSuccess")})}function u(){b.value=!0,W.post("/api/device/bulk-update/device_main_prompt",{device_ids:k.checkedRows,device_main_prompt:m.value}).then(Z=>{R("Success",Z.data.message),b.value=!1,I.value="Device main prompt updated successfully, you can now close this dialog or continue updating other properties.",M(),A("bulkUpdateSuccess")}).catch(Z=>{x("Error",Z.response.data.message||"An error occurred while updating device main prompt"),b.value=!1,A("bulkUpdateSuccess")})}function oe(){b.value=!0,W.post("/api/device/bulk-update/device_enable_prompt",{device_ids:k.checkedRows,device_enable_prompt:v.value}).then(Z=>{R("Success",Z.data.message),b.value=!1,I.value="Device enable prompt updated successfully, you can now close this dialog or continue updating other properties.",M(),A("bulkUpdateSuccess")}).catch(Z=>{x("Error",Z.response.data.message||"An error occurred while updating device enable prompt"),b.value=!1,A("bulkUpdateSuccess")})}function Y(){b.value=!0,W.post("/api/device/bulk-update/model",{device_ids:k.checkedRows,device_model:C.value.name}).then(Z=>{R("Success",Z.data.message),b.value=!1,I.value="Model updated successfully, you can now close this dialog or continue updating other properties.",M(),A("bulkUpdateSuccess")}).catch(Z=>{x("Error",Z.response.data.message||"An error occurred while updating model"),b.value=!1,A("bulkUpdateSuccess")})}function O(){b.value=!0,W.post("/api/device/bulk-update/template",{device_ids:k.checkedRows,template_id:E.value.id}).then(Z=>{R("Success",Z.data.message),b.value=!1,I.value="Template updated successfully, you can now close this dialog or continue updating other properties.",M(),A("bulkUpdateSuccess")}).catch(Z=>{x("Error",Z.response.data.message||"An error occurred while updating template"),b.value=!1,A("bulkUpdateSuccess")})}function te(){const Z=T.value.map(G=>G.id);b.value=!0,W.post("/api/device/bulk-update/tags",{device_ids:k.checkedRows,tag_ids:Z,append:y.value?1:0}).then(G=>{R("Success",G.data.message),b.value=!1,I.value="Tags updated successfully, you can now close this dialog or continue updating other properties.",M(),A("bulkUpdateSuccess")}).catch(G=>{x("Error",G.response.data.message||"An error occurred while updating tags"),b.value=!1,A("bulkUpdateSuccess")})}return{append:y,deviceEnablePrompt:v,deviceMainPrompt:m,errorMessage:c,formatters:$,isUpdating:b,selectedModel:C,selectedCategory:w,selectedCredentials:f,selectedProperty:X,selectedPropertyName:z,selectedTemplate:E,selectedVendor:_,successMsg:I,selectedTags:T,finalPropertyOptions:r,clearMsgs:M,close:Q,closeDialog:D,confirm:L,isDialogOpen:o,resetData:d}}const ta={class:"py-4 space-y-4"},sa={key:0,class:"space-y-4"},la={class:"grid items-center grid-cols-4 gap-2"},aa={class:"col-span-3"},na={key:0,class:"grid items-start grid-cols-4 gap-2"},oa={key:3,class:"col-span-3"},da={key:4,class:"col-span-3"},ra={key:9,class:"col-span-3 col-start-2 text-red-400 text-sm"},ia={key:1,class:"grid items-center grid-cols-4 gap-2"},ua={class:"flex items-center gap-2 col-span-3"},ca={class:"col-span-3 col-start-2 text-xs text-muted-foreground"},ma={key:0},pa={key:1},va={key:1,class:"flex flex-col items-center justify-center gap-4"},fa={class:"pl-2 ml-auto"},ga={class:"rc-kdb-class2"},ya={__name:"DeviceBulkEditDialog",props:{checkedRows:{type:Array,required:!0,default:()=>[]}},emits:["close","bulkUpdateSuccess"],setup(k,{emit:A}){const h=k,$=A,{append:D,deviceEnablePrompt:o,deviceMainPrompt:R,errorMessage:x,formatters:b,isUpdating:E,selectedModel:w,selectedCategory:T,selectedCredentials:_,selectedProperty:f,selectedPropertyName:v,selectedTemplate:m,selectedVendor:C,successMsg:y,selectedTags:c,finalPropertyOptions:I,close:N,confirm:r,isDialogOpen:z}=ea(h,$);return(X,M)=>{const Q=j("RcIcon");return n(),p(e(Oe),{open:e(z)("DeviceBulkEditDialog")&&k.checkedRows.length>0},{default:l(()=>[s(e(Fe),{class:"max-w-2xl",onInteractOutside:M[12]||(M[12]=d=>e(N)()),onPointerDownOutside:M[13]||(M[13]=d=>e(N)()),onEscapeKeyDown:M[14]||(M[14]=d=>e(N)()),onCloseClicked:M[15]||(M[15]=d=>e(N)())},{default:l(()=>[s(e(Je),null,{default:l(()=>[s(e(Le),{class:"text-lg font-semibold"},{default:l(()=>[...M[16]||(M[16]=[g(" Bulk Edit Devices ",-1)])]),_:1}),s(e(es),null,{default:l(()=>[g(" Device IDs ("+F(e(b).arrayToPrettyString(k.checkedRows.slice(0,10)))+F(k.checkedRows.length>10?" and "+(k.checkedRows.length-10)+" more":"")+") ",1)]),_:1})]),_:1}),a("div",ta,[e(E)?(n(),U("div",va,[...M[23]||(M[23]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-gray-300"},null,-1),a("p",{class:"text-sm text-gray-200"},"Processing bulk update. This may take a few moments...",-1)])])):(n(),U("div",sa,[a("div",la,[s(e(Qe),{for:"property-select",class:"text-right"},{default:l(()=>[...M[17]||(M[17]=[g(" Select Property ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),a("div",aa,[s(e(Vs),{modelValue:e(v),"onUpdate:modelValue":M[0]||(M[0]=d=>se(v)?v.value=d:null)},{default:l(()=>[s(e(Ps),{id:"property-select",class:"w-full"},{default:l(()=>[s(e(Is),{placeholder:"Choose a property to update"})]),_:1}),s(e(Es),null,{default:l(()=>[(n(!0),U(ee,null,de(e(I),d=>(n(),p(e(Ms),{value:d.name,key:d.id},{default:l(()=>[g(F(e(b).capitalizeFirstLetter(d.name)),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"])])]),e(f)?(n(),U("div",na,[e(v)?(n(),p(e(Qe),{key:0,for:"property-field",class:"text-right pt-2"},{default:l(()=>[g(F(e(b).capitalizeFirstLetter(e(v)))+" ",1),M[18]||(M[18]=a("span",{class:"text-red-400"},"*",-1))]),_:1})):V("",!0),e(f).name==="credentials"?(n(),p(_s,{key:1,modelValue:e(_),"onUpdate:modelValue":M[1]||(M[1]=d=>se(_)?_.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):V("",!0),e(f).name==="command_group"?(n(),p(ft,{key:2,modelValue:e(T),"onUpdate:modelValue":M[2]||(M[2]=d=>se(T)?T.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):V("",!0),e(f).name==="device_enable_prompt"?(n(),U("div",oa,[s(e(We),{modelValue:e(o),"onUpdate:modelValue":M[3]||(M[3]=d=>se(o)?o.value=d:null),id:"device_enable_prompt",autocomplete:"new-name",name:"new-name"},null,8,["modelValue"])])):V("",!0),e(f).name==="device_main_prompt"?(n(),U("div",da,[s(e(We),{modelValue:e(R),"onUpdate:modelValue":M[4]||(M[4]=d=>se(R)?R.value=d:null),id:"device_main_prompt",autocomplete:"new-name",name:"new-name"},null,8,["modelValue"])])):V("",!0),e(f).name==="model"?(n(),p(ks,{key:5,modelValue:e(w),"onUpdate:modelValue":M[5]||(M[5]=d=>se(w)?w.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):V("",!0),e(f).name==="vendor"?(n(),p(bs,{key:6,modelValue:e(C),"onUpdate:modelValue":M[6]||(M[6]=d=>se(C)?C.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):V("",!0),e(f).name==="template"?(n(),p(hs,{key:7,modelValue:e(m),"onUpdate:modelValue":M[7]||(M[7]=d=>se(m)?m.value=d:null),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):V("",!0),e(f).name==="tag"?(n(),p(fs,{key:8,modelValue:e(c),"onUpdate:modelValue":M[8]||(M[8]=d=>se(c)?c.value=d:null),singleSelect:!1,class:"w-full"},null,8,["modelValue"])):V("",!0),e(x)?(n(),U("span",ra,F(e(x)),1)):V("",!0)])):V("",!0),e(v)==="tag"?(n(),U("div",ia,[s(e(Qe),{for:"append-toggle",class:"text-right"},{default:l(()=>[...M[19]||(M[19]=[g(" Append ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),a("div",ua,[s(e(It),{id:"append-toggle",checked:e(D),"onUpdate:checked":M[9]||(M[9]=d=>D.value=!e(D)),disabled:e(E)},null,8,["checked","disabled"]),M[20]||(M[20]=a("span",{class:"text-sm"},"Append to existing",-1))]),a("span",ca,[e(D)?(n(),U("span",ma,[...M[21]||(M[21]=[g("Selected items will be ",-1),a("strong",null,"added",-1),g(" to existing items for selected devices.",-1)])])):(n(),U("span",pa,[...M[22]||(M[22]=[g("Selected items will ",-1),a("strong",null,"replace",-1),g(" all existing items for selected devices.",-1)])]))])])):V("",!0),e(y)?(n(),p(Wl,{key:2,small:"",class:"mb-6",title:"Success",message:e(y),showClose:!0,onClosed:M[10]||(M[10]=d=>y.value="")},null,8,["message"])):V("",!0)]))]),s(e(ze),null,{default:l(()=>[s(e(ie),{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:e(N),size:"sm"},{default:l(()=>[...M[24]||(M[24]=[g(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1},8,["onClick"]),s(e(ie),{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:M[11]||(M[11]=d=>e(r)()),variant:"primary"},{default:l(()=>[s(Ye,{state:e(E),class:"items-center mr-2",color:"white",fillColor:"white"},null,8,["state"]),M[26]||(M[26]=g(" Confirm ",-1)),a("div",fa,[a("kbd",ga,[M[25]||(M[25]=g(" Ctrl  ",-1)),s(Q,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},xa={class:"hidden lg:inline-flex"},_a={key:0,class:"text-sm font-light"},ka={class:"text-sm font-semibold"},ba={class:"py-1"},ha=["onClick"],wa=["checked"],$a={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ca={"data-size":"20"},Da=Be({__name:"StatusFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const h=A,$=ue(()=>[{id:0,name:"Unreachable"},{id:1,name:"Reachable"},{id:2,name:"Unknown"},{id:100,name:"Disabled"},{id:200,name:"All"}]),D=P(!1),o=P([]),R=k;ne(()=>R.modelValue,b=>{o.value=b});function x(b){if(b.id===200)o.value.length===$.value.length?o.value=[]:o.value=[...$.value];else{const E=o.value.findIndex(w=>w.id===b.id);if(E!==-1){o.value.splice(E,1);const w=o.value.findIndex(T=>T.id===200);w!==-1&&o.value.splice(w,1)}else o.value.push(b)}D.value=!1,h("update:modelValue",o.value)}return(b,E)=>(n(),p(e(Ge),null,{default:l(()=>[s(e(je),null,{default:l(()=>[s(e(ie),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(e(ts),{class:"w-4 h-4 lg:mr-2 text-rcgray-400"}),a("div",xa,[o.value&&o.value.length===0?(n(),U(ee,{key:0},[g("Status")],64)):(n(),U(ee,{key:1},[o.value.length>0?(n(),U("span",_a,[E[0]||(E[0]=g(" Status ",-1)),a("strong",ka,F(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Ke),{side:"bottom",align:"start",class:"p-0 w-44"},{default:l(()=>[s(e(qe),{class:"h-44"},{default:l(()=>[a("div",ba,[(n(!0),U(ee,null,de($.value,w=>(n(),U("div",{key:w.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:T=>x(w)},[a("input",{type:"checkbox",checked:o.value.some(T=>T.id===w.id),class:"mr-2"},null,8,wa),a("span",$a,[a("span",Ca,F(w.name),1)])],8,ha))),128))])]),_:1})]),_:1})]),_:1}))}}),Sa={class:"hidden lg:inline-flex"},Va={key:0,class:"text-sm font-light"},Pa={class:"text-sm font-semibold"},Ia={class:"relative items-center w-full"},Ea={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Ma={class:"py-1"},Ra=["onClick"],Ta=["checked"],Ua={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Na={"data-size":"20"},Aa={class:"p-1 border-5"},Ba=Be({__name:"TagFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const h=A,$=P([]),D=P(!1),o=P([]),R=P(""),x=P(!1),b=k;re(()=>{w()}),ne(()=>b.modelValue,_=>{o.value=_,x.value=o.value.length===$.value.length});function E(_){if(_.id===9999999)x.value?(o.value=[],x.value=!1):(o.value=[...$.value],x.value=!0);else{const f=o.value.findIndex(v=>v.id===_.id);f!==-1?(o.value.splice(f,1),x.value=!1):(o.value.push(_),o.value.length===$.value.length&&(x.value=!0))}D.value=!1,h("update:modelValue",o.value)}function w(){W.get("/api/tags/?perPage=10000&sort=tagname").then(_=>{$.value=_.data.data})}const T=ue(()=>$.value.filter(_=>_.tagname.toLowerCase().includes(R.value.toLowerCase())));return(_,f)=>{const v=j("RcIcon");return n(),p(e(Ge),null,{default:l(()=>[s(e(je),null,{default:l(()=>[s(e(ie),{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(v,{name:"tag",class:"lg:mr-2"}),a("div",Sa,[o.value&&o.value.length===0?(n(),U(ee,{key:0},[g("Tag")],64)):(n(),U(ee,{key:1},[o.value.length>0?(n(),U("span",Va,[f[2]||(f[2]=g(" Tag ",-1)),a("strong",Pa,F(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Ke),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",Ia,[s(e(We),{id:"search",type:"text",modelValue:R.value,"onUpdate:modelValue":f[0]||(f[0]=m=>R.value=m),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Ea,[s(v,{name:"search"})])]),s(e(et)),s(e(qe),{class:"h-44"},{default:l(()=>[a("div",Ma,[(n(!0),U(ee,null,de(T.value,m=>(n(),U("div",{key:m.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:C=>E(m)},[a("input",{type:"checkbox",checked:o.value.some(C=>C.id===m.id),class:"mr-2"},null,8,Ta),a("span",Ua,[a("span",Na,F(m.tagname),1)])],8,Ra))),128))])]),_:1}),s(e(et)),a("div",Aa,[s(e(ie),{variant:"ghost",class:"justify-start w-full p-1",onClick:f[1]||(f[1]=m=>E({id:9999999}))},{default:l(()=>[s(v,{name:"select-all",isSelected:x.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,F(x.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Fa={class:"hidden lg:inline-flex"},La={key:0,class:"text-sm font-light"},za={class:"text-sm font-semibold"},Oa={class:"relative items-center w-full"},ja={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Ka={class:"py-1"},qa=["onClick"],Ga=["checked"],Ha={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ja={"data-size":"20"},Xa={class:"p-1 border-5"},Ya=Be({__name:"VendorFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const h=A,$=P([]),D=P(!1),o=P([]),R=P(""),x=P(!1),b=k;re(()=>{w()}),ne(()=>b.modelValue,_=>{o.value=_,x.value=o.value.length===$.value.length});function E(_){if(_.id===9999999)x.value?(o.value=[],x.value=!1):(o.value=[...$.value],x.value=!0);else{const f=o.value.findIndex(v=>v.id===_.id);f!==-1?(o.value.splice(f,1),x.value=!1):(o.value.push(_),o.value.length===$.value.length&&(x.value=!0))}D.value=!1,h("update:modelValue",o.value)}function w(){W.get("/api/vendors/?perPage=10000&sort=vendorName").then(_=>{$.value=_.data.data})}const T=ue(()=>$.value.filter(_=>_.vendorName.toLowerCase().includes(R.value.toLowerCase())));return(_,f)=>{const v=j("RcIcon"),m=j("Button"),C=j("Input"),y=j("Separator");return n(),p(e(Ge),null,{default:l(()=>[s(e(je),null,{default:l(()=>[s(m,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(v,{name:"vendor",class:"lg:mr-2"}),a("div",Fa,[o.value&&o.value.length===0?(n(),U(ee,{key:0},[g("Vendor")],64)):(n(),U(ee,{key:1},[o.value.length>0?(n(),U("span",La,[f[2]||(f[2]=g(" Vendor ",-1)),a("strong",za,F(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Ke),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",Oa,[s(C,{id:"search",type:"text",modelValue:R.value,"onUpdate:modelValue":f[0]||(f[0]=c=>R.value=c),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",ja,[s(v,{name:"search"})])]),s(y),s(e(qe),{class:"h-44"},{default:l(()=>[a("div",Ka,[(n(!0),U(ee,null,de(T.value,c=>(n(),U("div",{key:c.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:I=>E(c)},[a("input",{type:"checkbox",checked:o.value.some(I=>I.id===c.id),class:"mr-2"},null,8,Ga),a("span",Ha,[a("span",Ja,F(c.vendorName),1)])],8,qa))),128))])]),_:1}),s(y),a("div",Xa,[s(m,{variant:"ghost",class:"justify-start w-full p-1",onClick:f[1]||(f[1]=c=>E({id:9999999}))},{default:l(()=>[s(v,{name:"select-all",isSelected:x.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,F(x.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),Za={class:"hidden lg:inline-flex"},Qa={key:0,class:"text-sm font-light"},Wa={class:"text-sm font-semibold"},en={class:"relative items-center w-full"},tn={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},sn={class:"py-1"},ln=["onClick"],an=["checked"],nn={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},on={"data-size":"20"},dn={class:"p-1 border-5"},rn=Be({__name:"ModelFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(k,{emit:A}){const h=A,$=P([]),D=P(!1),o=P([]),R=P(""),x=P(!1),b=k;re(()=>{w()}),ne(()=>b.modelValue,_=>{o.value=_,x.value=o.value.length===$.value.length});function E(_){if(_.id===9999999)x.value?(o.value=[],x.value=!1):(o.value=[...$.value],x.value=!0);else{const f=o.value.findIndex(v=>v.id===_.id);f!==-1?(o.value.splice(f,1),x.value=!1):(o.value.push(_),o.value.length===$.value.length&&(x.value=!0))}D.value=!1,h("update:modelValue",o.value)}function w(){W.get("/api/device-models/?perPage=10000&sort=name").then(_=>{$.value=_.data.data})}const T=ue(()=>$.value.filter(_=>_.name.toLowerCase().includes(R.value.toLowerCase())));return(_,f)=>{const v=j("RcIcon"),m=j("Button"),C=j("Input"),y=j("Separator");return n(),p(e(Ge),null,{default:l(()=>[s(e(je),null,{default:l(()=>[s(m,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:l(()=>[s(v,{name:"model",class:"lg:mr-2"}),a("div",Za,[o.value&&o.value.length===0?(n(),U(ee,{key:0},[g("Device Model")],64)):(n(),U(ee,{key:1},[o.value.length>0?(n(),U("span",Qa,[f[2]||(f[2]=g(" Device Model ",-1)),a("strong",Wa,F(o.value.length)+" Selected",1)])):V("",!0)],64))])]),_:1})]),_:1}),s(e(Ke),{side:"bottom",align:"start",class:"w-64 p-0"},{default:l(()=>[a("div",en,[s(C,{id:"search",type:"text",modelValue:R.value,"onUpdate:modelValue":f[0]||(f[0]=c=>R.value=c),placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",tn,[s(v,{name:"search"})])]),s(y),s(e(qe),{class:"h-44"},{default:l(()=>[a("div",sn,[(n(!0),U(ee,null,de(T.value,c=>(n(),U("div",{key:c.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:I=>E(c)},[a("input",{type:"checkbox",checked:o.value.some(I=>I.id===c.id),class:"mr-2"},null,8,an),a("span",nn,[a("span",on,F(c.name),1)])],8,ln))),128))])]),_:1}),s(y),a("div",dn,[s(m,{variant:"ghost",class:"justify-start w-full p-1",onClick:f[1]||(f[1]=c=>E({id:9999999}))},{default:l(()=>[s(v,{name:"select-all",isSelected:x.value,size:"16",class:"mr-2"},null,8,["isSelected"]),a("span",null,F(x.value?"Deselect All":"Select All"),1)]),_:1})])]),_:1})]),_:1})}}}),un={class:"flex flex-col h-full gap-1 text-center"},cn={class:"flex items-center justify-between p-4"},mn={class:"flex items-center"},pn={class:"flex gap-2"},vn={class:"flex items-center justify-end"},fn={class:"px-6"},gn={class:"flex items-center"},yn=["title"],xn={class:"flex justify-between"},_n={class:"flex items-center"},kn={class:"border-b"},bn=["title"],hn=["title"],wn={key:1},$n=["title"],Cn={key:1},Dn=["title"],Sn=["title"],Vn={key:1},Pn={class:"badge-container-fixed"},In={class:"button-cell-fixed"},En={key:0,class:"fixed bottom-5 left-1/2 transform -translate-x-1/2 z-50 flex items-center gap-4 bg-rcgray-900 text-white border border-rcgray-600 shadow-xl px-4 py-1.5 rounded-lg"},Mn={class:"text-sm"},Rn={class:"flex flex-col items-start gap-1"},Tn={class:"hidden md:inline-flex mr-1"},Un={__name:"Main",props:{statusId:{type:Number,required:!1}},setup(k){const{devices:A,currentPage:h,perPage:$,lastPage:D,totalRecords:o,isLoading:R,isLoadingMore:x,hasMoreData:b,isLoadMoreMode:E,showConfirmDelete:w,editId:T,newDeviceModalKey:_,newBulkEditModalKey:f,searchTerm:v,filterStatus:m,filterCategories:C,filterTags:y,filterVendor:c,filterModel:I,sortParam:N,formatters:r,inventoryIsLoading:z,createDevice:X,deleteDevice:M,deleteManyDevices:Q,disableDevice:d,enableDevice:L,exportInventoryReport:i,handleKeyDown:q,handleSave:K,reload:u,viewDeviceDetailsPane:oe,viewEditDialog:Y,openBulkEditDialog:O,disableManyDevices:te,enableManyDevices:Z,downloadManyDevices:G,fetchDevices:Ce,loadMoreDevices:xe,clearFilters:Ve,toggleSort:it}=ws(),{selectedRows:ve,selectAll:Xe,toggleSelectAll:Mt,toggleSelectRow:Rt}=Ae(A),Ze=P(!1),ut=ss(),Tt=Pe(),gt=ue(()=>[{key:"checkbox",label:"Select",mandatory:!0,default:!0},{key:"id",label:"ID",default:!0},{key:"status",label:"Status",default:!0},{key:"device_name",label:"Name",mandatory:!0,default:!0},{key:"device_ip",label:"IP Address",default:!0},{key:"category",label:"Command Group",default:!0},{key:"vendor",label:"Vendor",default:!0},{key:"device_model",label:"Model",default:!0},{key:"config_good_count",label:"Config Count",default:!0},{key:"config_bad_count",label:"Config Failures",default:!0},{key:"last_config",label:"Last Config",default:!0},{key:"tags",label:"Tags",default:!0},{key:"actions",label:"Actions",mandatory:!0,default:!0}]),ct=P(gt.value.filter(we=>we.default).map(we=>we.key)),le=ue(()=>we=>ct.value.includes(we));return re(()=>{ut.query.statusId&&(m.value=[{id:parseInt(ut.query.statusId)}]),Ce(),window.addEventListener("keydown",q),ke.on("deleteManyDevicesSuccess",()=>{ve.value=[],Xe.value=!1})}),ne(()=>ut.query,async we=>{if(we.openDeviceDialog){X(),await ls();const{openDeviceDialog:S,...mt}=we;Tt.replace({query:mt},void 0,{replace:!0})}},{immediate:!0}),be(()=>{window.removeEventListener("keydown",q)}),(we,S)=>{const mt=j("Input"),Ut=j("Separator"),ce=j("Button"),fe=j("RcIcon"),yt=j("Checkbox"),Nt=j("RcBadge"),At=j("Toaster");return n(),U("div",un,[a("div",cn,[a("div",mn,[s(mt,{class:"ml-2 min-w-32 lg:min-w-60",autocomplete:"off",placeholder:"Filter [id, name, ip]...",modelValue:e(v),"onUpdate:modelValue":S[0]||(S[0]=B=>se(v)?v.value=B:null)},null,8,["modelValue"]),s(Ut,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),S[29]||(S[29]=a("span",{class:"mr-2 text-muted-foreground flex-grow min-w-max"},"Filters:",-1)),a("div",pn,[s(Nl,{modelValue:e(C),"onUpdate:modelValue":S[1]||(S[1]=B=>se(C)?C.value=B:null)},null,8,["modelValue"]),s(Ba,{modelValue:e(y),"onUpdate:modelValue":S[2]||(S[2]=B=>se(y)?y.value=B:null)},null,8,["modelValue"]),s(Ya,{modelValue:e(c),"onUpdate:modelValue":S[3]||(S[3]=B=>se(c)?c.value=B:null)},null,8,["modelValue"]),s(rn,{modelValue:e(I),"onUpdate:modelValue":S[4]||(S[4]=B=>se(I)?I.value=B:null)},null,8,["modelValue"]),s(Da,{modelValue:e(m),"onUpdate:modelValue":S[5]||(S[5]=B=>se(m)?m.value=B:null)},null,8,["modelValue"]),e(v)||e(C).length||e(y).length||e(c).length||e(I).length||e(m).length?(n(),p(Ie,{key:0,"onUpdate:modelValue":e(Ve)},null,8,["onUpdate:modelValue"])):V("",!0)])]),a("div",vn,[s(ql,{columns:gt.value,modelValue:ct.value,"onUpdate:modelValue":S[6]||(S[6]=B=>ct.value=B),storageKey:"rconfig.deviceTable.columns"},null,8,["columns","modelValue"]),s(e(at),null,{default:l(()=>[s(e(st),{"as-child":"",class:"inline-flex xl:hidden"},{default:l(()=>[s(ce,{variant:"ghost",class:"h-8 ml-2"},{default:l(()=>[s(e(as),{size:"16"})]),_:1})]),_:1}),s(e(lt),{class:"w-56",align:"end",side:"bottom"},{default:l(()=>[s(e(ge),{class:"cursor-pointer hover:bg-rcgray-600 group",onClick:S[7]||(S[7]=ae(B=>e(X)(),["prevent"]))},{default:l(()=>[S[30]||(S[30]=g(" New Device ",-1)),s(e(ye),{class:"group"},{default:l(()=>[s(e(ns),{size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})]),_:1})]),_:1}),s(e(ge),{class:"cursor-pointer hover:bg-rcgray-600 group",onClick:S[8]||(S[8]=ae(B=>e(i)(),["prevent"]))},{default:l(()=>[S[31]||(S[31]=g(" Inventory Report ",-1)),s(e(ye),{class:"group"},{default:l(()=>[e(z)?V("",!0):(n(),p(e(xt),{key:0,size:"16",class:"text-rcgray-400 group-hover:text-rcgray-300"})),s(Ye,{state:e(z),class:"mr-2"},null,8,["state"])]),_:1})]),_:1})]),_:1})]),_:1}),s(ce,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse hidden xl:inline-flex",size:"sm",onClick:S[9]||(S[9]=ae(B=>e(X)(),["prevent"])),variant:"primary"},{default:l(()=>[...S[32]||(S[32]=[g(" New Device ",-1),a("div",{class:"pl-2 py-1 px-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),s(ce,{type:"submit",class:"px-2 py-1 ml-2 text-sm hidden xl:inline-flex",size:"sm",onClick:S[10]||(S[10]=ae(B=>e(i)(),["prevent"])),variant:"outline"},{default:l(()=>[e(z)?V("",!0):(n(),p(e(xt),{key:0,size:"16",class:"text-muted-foreground mr-2"})),s(Ye,{state:e(z),class:"mr-2"},null,8,["state"]),S[33]||(S[33]=g(" Inventory Report ",-1))]),_:1}),s(fe,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:S[11]||(S[11]=B=>e(u)())})])]),a("div",fn,[s(e(Ue),null,{default:l(()=>[s(e(Ee),null,{default:l(()=>[s(e(pe),null,{default:l(()=>[le.value("checkbox")?(n(),p(e(J),{key:0,class:"w-[2%]"},{default:l(()=>[s(yt,{id:"selectAll",modelValue:e(Xe),"onUpdate:modelValue":S[12]||(S[12]=B=>se(Xe)?Xe.value=B:null),checked:e(Xe),onClick:S[13]||(S[13]=B=>e(Mt)())},null,8,["modelValue","checked"])]),_:1})):V("",!0),le.value("id")?(n(),p(e(J),{key:1,class:"w-[5%]"},{default:l(()=>[s(ce,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:S[14]||(S[14]=B=>e(it)("id"))},{default:l(()=>[s(fe,{name:"sort",sortParam:e(N),field:"id"},null,8,["sortParam"]),S[34]||(S[34]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1})):V("",!0),le.value("status")?(n(),p(e(J),{key:2,class:"w-[2%]"},{default:l(()=>[s(ce,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:S[15]||(S[15]=B=>e(it)("status"))},{default:l(()=>[s(fe,{name:"sort",sortParam:e(N),field:"status"},null,8,["sortParam"]),S[35]||(S[35]=a("span",{class:"ml-2"},"Status",-1))]),_:1})]),_:1})):V("",!0),le.value("device_name")?(n(),p(e(J),{key:3,class:"w-[20%]"},{default:l(()=>[s(ce,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:S[16]||(S[16]=B=>e(it)("device_name"))},{default:l(()=>[s(fe,{name:"sort",sortParam:e(N),field:"device_name"},null,8,["sortParam"]),S[36]||(S[36]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1})):V("",!0),le.value("device_ip")?(n(),p(e(J),{key:4,class:"w-[10%]"},{default:l(()=>[...S[37]||(S[37]=[g("IP Address",-1)])]),_:1})):V("",!0),le.value("category")?(n(),p(e(J),{key:5,class:"w-[10%]"},{default:l(()=>[...S[38]||(S[38]=[g("Command Group",-1)])]),_:1})):V("",!0),le.value("vendor")?(n(),p(e(J),{key:6,class:"w-[10%]"},{default:l(()=>[...S[39]||(S[39]=[g("Vendor",-1)])]),_:1})):V("",!0),le.value("device_model")?(n(),p(e(J),{key:7,class:"w-[10%]"},{default:l(()=>[...S[40]||(S[40]=[g("Model",-1)])]),_:1})):V("",!0),le.value("config_good_count")?(n(),p(e(J),{key:8,class:"w-[10%]"},{default:l(()=>[...S[41]||(S[41]=[g("Config Count",-1)])]),_:1})):V("",!0),le.value("config_bad_count")?(n(),p(e(J),{key:9,class:"w-[10%]"},{default:l(()=>[...S[42]||(S[42]=[g("Config Failures",-1)])]),_:1})):V("",!0),le.value("last_config")?(n(),p(e(J),{key:10,class:"w-[10%]"},{default:l(()=>[...S[43]||(S[43]=[g("Last Config",-1)])]),_:1})):V("",!0),le.value("tags")?(n(),p(e(J),{key:11,class:"w-[10%]"},{default:l(()=>[...S[44]||(S[44]=[g("Tags",-1)])]),_:1})):V("",!0),le.value("actions")?(n(),p(e(J),{key:12,class:"w-[10%]"},{default:l(()=>[...S[45]||(S[45]=[g("Actions",-1)])]),_:1})):V("",!0)]),_:1})]),_:1}),s(e(Me),null,{default:l(()=>[e(R)?(n(),p(Re,{key:0})):e(R)?(n(),p(Te,{key:2})):(n(!0),U(ee,{key:1},de(e(A),B=>(n(),p(e(pe),{key:B.id,class:"table-row-fixed"},{default:l(()=>[le.value("checkbox")?(n(),p(e(H),{key:0,class:"text-start table-cell-fixed"},{default:l(()=>[s(yt,{class:"cursor-pointer",id:"select-"+B.id,checked:!!e(ve).includes(B.id),onClick:me=>e(Rt)(B.id)},null,8,["id","checked","onClick"])]),_:2},1024)):V("",!0),le.value("id")?(n(),p(e(H),{key:1,class:"text-start table-cell-fixed"},{default:l(()=>[a("div",gn,[a("span",{class:De({"text-red-500":B.device_added_by==9e3,"text-blue-500":B.device_added_by==9001}),title:B.device_added_by==9e3?"Added by Zabbix":B.device_added_by==9001?"Added by Netbox":""},F(B.id),11,yn),B.device_added_by&&B.device_added_by>=9e3?(n(),p(fe,{key:0,name:"imported-device",addedBy:B.device_added_by,source:B.device_added_by===9001?"Netbox":B.device_added_by===9e3?"Zabbix":"Integration"},null,8,["addedBy","source"])):V("",!0)])]),_:2},1024)):V("",!0),le.value("status")?(n(),p(e(H),{key:2,class:"text-start table-cell-fixed"},{default:l(()=>[B.status===0?(n(),p(fe,{key:0,name:"status-red"})):V("",!0),B.status===1?(n(),p(fe,{key:1,name:"status-green"})):V("",!0),B.status===2?(n(),p(fe,{key:2,name:"status-yellow"})):V("",!0),B.status===100?(n(),p(fe,{key:3,name:"status-gray"})):V("",!0),B.status===300?(n(),p(fe,{key:4,name:"status-red-agent",size:"16"})):V("",!0),B.status===301?(n(),p(fe,{key:5,name:"status-gray-agent"})):V("",!0)]),_:2},1024)):V("",!0),le.value("device_name")?(n(),p(e(H),{key:3,class:"text-start"},{default:l(()=>[a("div",xn,[s(ce,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:me=>e(oe)(B.id)},{default:l(()=>[a("div",_n,[a("span",kn,F(B.device_name),1)])]),_:2},1032,["onClick"])])]),_:2},1024)):V("",!0),le.value("device_ip")?(n(),p(e(H),{key:4,class:"text-start table-cell-fixed"},{default:l(()=>[a("span",{class:"text-truncate",title:B.device_ip},F(B.device_ip),9,bn)]),_:2},1024)):V("",!0),le.value("category")?(n(),p(e(H),{key:5,class:"text-start table-cell-fixed"},{default:l(()=>[B.category.length>0?(n(),U("span",{key:0,class:"text-truncate",title:B.category[0].categoryName},F(B.category[0].categoryName),9,hn)):(n(),U("span",wn,"--"))]),_:2},1024)):V("",!0),le.value("vendor")?(n(),p(e(H),{key:6,class:"text-start table-cell-fixed"},{default:l(()=>[B.vendor.length>0?(n(),U("span",{key:0,class:"text-truncate",title:B.vendor[0].vendorName},F(B.vendor[0].vendorName),9,$n)):(n(),U("span",Cn,"--"))]),_:2},1024)):V("",!0),le.value("device_model")?(n(),p(e(H),{key:7,class:"text-start table-cell-fixed"},{default:l(()=>[a("span",{class:"text-truncate",title:B.device_model},F(B.device_model),9,Dn)]),_:2},1024)):V("",!0),le.value("config_good_count")?(n(),p(e(H),{key:8,class:"text-start table-cell-fixed"},{default:l(()=>{var me;return[g(F(((me=B.config_summary)==null?void 0:me.total_count)||"--"),1)]}),_:2},1024)):V("",!0),le.value("config_bad_count")?(n(),p(e(H),{key:9,class:"text-start table-cell-fixed"},{default:l(()=>{var me;return[g(F(((me=B.config_summary)==null?void 0:me.download_status_0_count)||"--"),1)]}),_:2},1024)):V("",!0),le.value("last_config")?(n(),p(e(H),{key:10,class:"text-start table-cell-fixed"},{default:l(()=>[B.last_config?(n(),U("span",{key:0,class:"text-truncate",title:e(r).formatTime(B.last_config.created_at)},F(e(r).formatTime(B.last_config.created_at)),9,Sn)):(n(),U("span",Vn,"--"))]),_:2},1024)):V("",!0),le.value("tags")?(n(),p(e(H),{key:11,class:"text-start table-cell-fixed"},{default:l(()=>[a("div",Pn,[s(Se,{items:B.tag,displayField:"tagname",linkField:"view_url",maxVisible:1,hoverCardFields:["id","tagname","description"]},null,8,["items"])])]),_:2},1024)):V("",!0),le.value("actions")?(n(),p(e(H),{key:12,class:"text-start table-cell-fixed"},{default:l(()=>[a("div",In,[s($l,{rowData:B,onOnEnable:me=>e(L)(B.id),onOnClone:me=>(e(Y)(B.id),Ze.value=!0),onOnDisable:me=>e(d)(B.id),onOnEdit:me=>(e(Y)(B.id),Ze.value=!1),onOnDelete:me=>e(M)(B.id),showCopyDownloadDebug:!0},null,8,["rowData","onOnEnable","onOnClone","onOnDisable","onOnEdit","onOnDelete"])])]),_:2},1024)):V("",!0)]),_:2},1024))),128))]),_:1})]),_:1}),e(ve).length?(n(),U("div",En,[a("span",Mn,[s(Nt,{variant:"primary",class:"mr-1"},{default:l(()=>[g(F(e(ve).length),1)]),_:1}),S[46]||(S[46]=g(" Devices Selected ",-1))]),s(e(Ge),null,{default:l(({open:B})=>[s(e(je),{class:"col-span-3"},{default:l(()=>[s(ce,{class:"text-sm px-1.5 py-0 h-8 flex items-center gap-1 group",variant:"outline"},{default:l(()=>[s(e(os),{class:"inline-block mr-1 ml-0",size:"14"}),S[47]||(S[47]=a("span",{class:"hidden md:inline-flex"},"Enable/Disable",-1)),s(e(vt),{class:De(["transition-transform duration-200 ease-in-out group-hover:rotate-180",{"rotate-180":B}]),size:"14"},null,8,["class"])]),_:2},1024)]),_:2},1024),s(e(Ke),{side:"bottom",align:"start",class:"col-span-3 p-1 text-left w-max"},{default:l(()=>[a("div",Rn,[s(ce,{class:"text-sm px-1.5 py-0 h-8 hover:animate-pulse w-full",onClick:S[17]||(S[17]=ae(me=>e(Z)(e(ve)),["prevent"])),variant:"ghost"},{default:l(()=>[s(e(Vt),{size:"16",class:"text-green-300 mr-1"}),S[48]||(S[48]=g(" Enable Selected ",-1))]),_:1}),s(ce,{class:"text-sm px-1.5 py-0 h-8 w-full",onClick:S[18]||(S[18]=ae(me=>e(te)(e(ve)),["prevent"])),variant:"ghost"},{default:l(()=>[s(e(Pt),{size:"16",class:"text-red-300 mr-1"}),S[49]||(S[49]=g(" Disable Selected ",-1))]),_:1})])]),_:1})]),_:1}),s(ce,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",onClick:S[19]||(S[19]=ae(B=>e(G)(e(ve)),["prevent"])),variant:"outline"},{default:l(()=>[s(fe,{name:"folder-download-open",class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),S[50]||(S[50]=a("span",{class:"hidden md:inline-flex"},"Download Now",-1))]),_:1}),s(ce,{class:"text-sm px-1.5 py-0 hover:animate-pulse h-8",onClick:S[20]||(S[20]=ae(B=>e(O)(),["prevent"])),variant:"outline"},{default:l(()=>[s(e(ds),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),S[51]||(S[51]=a("span",{class:"hidden md:inline-flex"},"Bulk Edit",-1))]),_:1}),s(ce,{class:"text-sm px-1.5 py-0 bg-red-600 hover:bg-red-700 hover:animate-pulse h-8",onClick:S[21]||(S[21]=ae(B=>w.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[s(e(ht),{class:"inline-block mr-0 md:mr-2 ml-0",size:"14"}),a("span",Tn,"Delete "+F(e(ve).length),1)]),_:1})])):V("",!0),e(E)&&e(b)?(n(),p(ce,{key:1,onClick:e(xe),disabled:e(x),class:"load-more-btn my-4",variant:"outline"},{default:l(()=>[S[52]||(S[52]=a("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[a("path",{d:"M12 8v8m0 0l4-4m-4 4l-4-4"}),a("path",{d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"})],-1)),g(" "+F(e(x)?"Loading...":"Load More Results"),1)]),_:1},8,["onClick","disabled"])):V("",!0),s(Ne,{currentPage:e(h),lastPage:e(D),perPage:e($),"onUpdate:currentPage":S[22]||(S[22]=B=>h.value=B),"onUpdate:perPage":S[23]||(S[23]=B=>$.value=B),totalRecords:e(o),isLoading:e(R)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p($s,{onSave:S[24]||(S[24]=B=>e(K)()),onClose:S[25]||(S[25]=B=>Ze.value=!1),key:e(_),editId:e(T),isClone:Ze.value},null,8,["editId","isClone"])),e(ve).length>0?(n(),p(ya,{checkedRows:e(ve),key:e(f),onBulkUpdateSuccess:S[26]||(S[26]=B=>e(u)())},null,8,["checkedRows"])):V("",!0),s($e,{ids:e(ve),showConfirmDelete:e(w),onClose:S[27]||(S[27]=B=>w.value=!1),onHandleDelete:S[28]||(S[28]=B=>e(Q)(e(ve)))},null,8,["ids","showConfirmDelete"]),s(At)])])}}};function Nn(k,A){const h=P(!1),$=P([]),D=P([]),o=P([]),{toastSuccess:R,toastError:x}=_e(),b=he(),{closeDialog:E,isDialogOpen:w}=b,T={1:"device",2:"tag",3:"snippet",4:"agent"};re(()=>{f()});const _=ue(()=>(console.log(T[k.type]),T[k.type]||"Item")),f=async()=>{switch(h.value=!0,await v(),k.type){case 1:await m();break;case 2:await C();break;case 3:await y();break;case 4:await c();break;default:D.value=[]}h.value=!1},v=async()=>{try{const L=await axios.get("/api/roles");$.value=L.data.data}catch(L){o.value=L.response.data.errors,x("Error","Failed to fetch roles",L.response.data.message),console.error("Error fetching roles:",L)}},m=async()=>{try{const L=await axios.get(`/api/devices/${k.itemId}`);L.data.roles.length>0&&(D.value=L.data.roles.map(i=>i.id))}catch(L){o.value=L.response.data.errors,x("Error","Failed to fetch device roles",L.response.data.message)}},C=async()=>{try{const L=await axios.get(`/api/tags/${k.itemId}`);L.data.roles.length>0&&(D.value=L.data.roles.map(i=>i.id))}catch(L){o.value=L.response.data.errors,x("Error","Failed to fetch tag roles",L.response.data.message)}},y=async()=>{try{const L=await axios.get(`/api/snippets/${k.itemId}`);L.data.roles.length>0&&(D.value=L.data.roles.map(i=>i.id))}catch(L){o.value=L.response.data.errors,x("Error","Failed to fetch snippet roles",L.response.data.message)}},c=async()=>{try{const L=await axios.get(`/api/agents/${k.itemId}`);L.data.roles.length>0&&(D.value=L.data.roles.map(i=>i.id))}catch(L){o.value=L.response.data.errors,x("Error","Failed to fetch agent roles",L.response.data.message)}};function I(){switch(k.type){case 1:N();break;case 2:r();break;case 3:z();break;case 4:X();break;default:D.value=[]}setTimeout(()=>{A("updateRoles",D.value)},300)}const N=async()=>{if(D.value.length===0)return x("Error","Please select at least one role"),!1;try{return await axios.post(`/api/device/update-roles/${k.itemId}`,{roles:D.value}),R("Success","Roles assigned successfully"),d(),!0}catch(L){return o.value=L.response.data.errors,x("Error","Failed to update roles",L.response.data.message),!1}},r=async()=>{if(D.value.length===0)return x("Error","Please select at least one role"),!1;try{return await axios.post(`/api/tags/update-roles/${k.itemId}`,{roles:D.value}),R("Success","Roles assigned successfully"),d(),!0}catch(L){return o.value=L.response.data.errors,x("Error","Failed to update roles",L.response.data.message),!1}},z=async()=>{if(D.value.length===0)return x("Error","Please select at least one role"),!1;try{return await axios.post(`/api/snippets/update-roles/${k.itemId}`,{roles:D.value}),R("Success","Roles assigned successfully"),d(),!0}catch(L){return o.value=L.response.data.errors,x("Error","Failed to update roles",L.response.data.message),!1}},X=async()=>{if(D.value.length===0)return x("Error","Please select at least one role"),!1;try{return await axios.post(`/api/agents/update-roles/${k.itemId}`,{roles:D.value}),R("Success","Roles assigned successfully"),d(),!0}catch(L){return o.value=L.response.data.errors,x("Error","Failed to update roles",L.response.data.message),!1}},M=L=>D.value.includes(L),Q=L=>{if(L===1)return;const i=D.value.indexOf(L);i>-1?D.value.splice(i,1):D.value.push(L)};function d(){E("DialogRoleAssignment")}return{displayName:_,isLoading:h,roles:$,updateRoles:I,isDialogOpen:w,isRoleSelected:M,toggleRole:Q,close:d}}const An={class:"grid gap-2 p-4"},Bn={key:0,class:"text-xs text-muted-foreground"},Fn={class:"rc-kdb-class2 ml-2"},Ln={__name:"RcRoleDialog",props:{itemId:{type:Number,required:!0},type:{type:Number,default:0,validator:k=>[k,1,2,3,4].includes(k)}},emits:["close","confirm","updateRoles"],setup(k,{emit:A}){const h=k,$=A,{displayName:D,isLoading:o,roles:R,updateRoles:x,isDialogOpen:b,isRoleSelected:E,toggleRole:w,close:T}=Nn(h,$);return(_,f)=>{const v=j("RcIcon");return n(),p(e(Oe),{open:e(b)("DialogRoleAssignment")},{default:l(()=>[s(e(Fe),{class:"w-full p-0 bg-background text-foreground border border-border",onInteractOutside:f[2]||(f[2]=m=>e(T)()),onPointerDownOutside:f[3]||(f[3]=m=>e(T)()),onEscapeKeyDown:f[4]||(f[4]=m=>e(T)()),onCloseClicked:f[5]||(f[5]=m=>e(T)())},{default:l(()=>[s(e(Je),{class:"rc-dialog-header"},{default:l(()=>[s(e(Le),{class:"text-sm text-muted-foreground flex items-center"},{default:l(()=>[s(v,{name:"rbac",class:"inline-block mr-2"}),a("span",null,"Assign roles to "+F(e(D))+" ID: "+F(k.itemId),1)]),_:1})]),_:1}),a("div",An,[e(o)?(n(),U(ee,{key:0},de(3,m=>a("div",{class:"flex items-center space-x-2",key:m},[s(e(_t),{class:"h-4 w-4"}),s(e(_t),{class:"h-4 w-[250px]"})])),64)):(n(!0),U(ee,{key:1},de(e(R),m=>(n(),U("div",{key:m.id,class:"flex items-center space-x-2"},[s(e(rs),{id:`role-${m.id}`,checked:e(E)(m.id),"onUpdate:checked":C=>e(w)(m.id),disabled:m.id===1},null,8,["id","checked","onUpdate:checked","disabled"]),s(e(Qe),{for:`role-${m.id}`,class:"text-sm font-medium leading-none cursor-pointer peer-disabled:cursor-not-allowed peer-disabled:opacity-70"},{default:l(()=>[g(F(m.name),1)]),_:2},1032,["for"]),m.id===1?(n(),U("div",Bn,"   - Primary admin role cannot be removed ")):V("",!0)]))),128))]),s(e(ze),{class:"rc-dialog-footer"},{default:l(()=>[s(e(ie),{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm",onClick:f[0]||(f[0]=m=>e(T)()),size:"sm"},{default:l(()=>[...f[6]||(f[6]=[g(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ESC")],-1)])]),_:1}),s(e(ie),{type:"submit",variant:"primary",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700",size:"sm",onClick:f[1]||(f[1]=m=>e(x)())},{default:l(()=>[f[8]||(f[8]=g(" Save ",-1)),a("kbd",Fn,[f[7]||(f[7]=g(" Ctrl  ",-1)),s(v,{name:"enter",class:"ml-1"})])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},zn={class:"flex items-center"},On={class:"ml-2"},jn={class:"grid gap-2 py-4"},Kn={class:"grid items-center grid-cols-4 gap-2"},qn={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Gn={class:"grid items-center grid-cols-4 gap-2"},Hn={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Jn={class:"pl-2 ml-auto"},Xn={class:"rc-kdb-class2"},Yn={class:"pl-2 ml-auto"},Zn={class:"rc-kdb-class2"},Qn={__name:"TagAddEditDialog",props:{editId:Number},emits:["save"],setup(k,{emit:A}){const{toastSuccess:h,toastError:$}=_e(),D=he(),{closeDialog:o,isDialogOpen:R}=D,x=A,b=P([]),E=P({tagname:"",tagDescription:""}),w=k;function T(f){f.ctrlKey&&f.key==="Enter"&&_()}re(()=>{w.editId>0&&W.get(`/api/tags/${w.editId}`).then(f=>{E.value=f.data}),window.addEventListener("keydown",T)}),be(()=>{window.removeEventListener("keydown",T)});function _(){let f=w.editId>0?`/${w.editId}`:"",v=w.editId>0?"patch":"post";W[v]("/api/tags"+f,E.value).then(m=>{x("save",m.data),h("Tag saved","The tag has been saved successfully."),o("DialogNewTag")}).catch(m=>{b.value=m.response.data.errors,$("Error","Failed to save tag.")})}return(f,v)=>{const m=j("RcIcon"),C=j("Label"),y=j("Input"),c=j("Button");return n(),p(e(Oe),{open:e(R)("DialogNewTag")},{default:l(()=>[s(e(bt),{"as-child":""}),s(e(Fe),{class:"w-full p-0",onEscapeKeyDown:v[3]||(v[3]=I=>e(o)("DialogNewTag")),onPointerDownOutside:v[4]||(v[4]=I=>e(o)("DialogNewTag")),onCloseClicked:v[5]||(v[5]=I=>e(o)("DialogNewTag"))},{default:l(()=>[s(e(Je),{class:"rc-dialog-header"},{default:l(()=>[s(e(Le),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",zn,[s(m,{name:"commands"}),a("span",On,F(k.editId>0?"Edit":"New")+" Tag "+F(k.editId>0?"(ID: "+k.editId+")":""),1)])]),_:1})]),_:1}),a("div",jn,[a("div",Kn,[s(C,{for:"tagname",class:"text-right"},{default:l(()=>[...v[6]||(v[6]=[g(" Tag Name ",-1),a("span",{class:"text-red-600"},"*",-1)])]),_:1}),s(y,{modelValue:E.value.tagname,"onUpdate:modelValue":v[0]||(v[0]=I=>E.value.tagname=I),id:"tagname",class:"col-span-3"},null,8,["modelValue"]),b.value.tagname?(n(),U("span",qn,F(b.value.tagname[0]),1)):V("",!0)]),a("div",Gn,[s(C,{for:"tagDescription",class:"text-right"},{default:l(()=>[...v[7]||(v[7]=[g("Description",-1)])]),_:1}),s(y,{modelValue:E.value.tagDescription,"onUpdate:modelValue":v[1]||(v[1]=I=>E.value.tagDescription=I),id:"tagDescription",class:"col-span-3"},null,8,["modelValue"]),b.value.tagDescription?(n(),U("span",Hn,F(b.value.tagDescription[0]),1)):V("",!0)])]),s(e(ze),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[s(c,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:v[2]||(v[2]=I=>e(o)("DialogNewTag")),size:"sm"},{default:l(()=>[...v[8]||(v[8]=[g(" Cancel ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),w.editId===0?(n(),p(c,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:_,variant:"primary"},{default:l(()=>[v[10]||(v[10]=g(" Save ",-1)),a("div",Jn,[a("kbd",Xn,[v[9]||(v[9]=g(" Ctrl  ",-1)),s(m,{name:"enter",class:"ml-1"})])])]),_:1})):(n(),p(c,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:_,variant:"primary"},{default:l(()=>[v[12]||(v[12]=g(" Update ",-1)),a("div",Yn,[a("kbd",Zn,[v[11]||(v[11]=g(" Ctrl  ",-1)),s(m,{name:"enter",class:"ml-1"})])])]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"])}}};function Wn(){const k=P(1),A=ot(),h=P(A.get("useTags","perPage",10)),$=P("-id"),D=P(""),o=P({}),R=P([]),x=P(!1),b=P(1),E=P(0),w=P(1),T=P(1),_=P(!1),f=he(),{openDialog:v}=f,{toastSuccess:m,toastError:C}=_e(),{reload:y}=rt(I),{toggleSort:c}=dt($,I,"useTags");async function I(q={}){x.value=!0;try{const K=await W.get("/api/tags",{params:{page:k.value,perPage:h.value,sort:$.value,...o.value}});R.value=K.data,b.value=K.data.last_page}catch(K){console.error("Error fetching tags:",K),C("Error","Failed to fetch tags.")}finally{x.value=!1}}const N=async()=>{E.value=0,w.value=Math.random(),v("DialogNewTag")};function r(q){E.value=q,w.value=Math.random(),v("DialogNewTag")}const z=q=>{E.value=q,T.value=Math.random(),v("DialogRoleAssignment")},X=async q=>{try{await W.delete(`/api/tags/${q}`),I(),m("Tag Deleted","The tag has been deleted successfully."),_.value=!1}catch(K){K.status===422?C("Error",K.response.data.message):(console.error("Error deleting Tag:",K),C("Error","Failed to delete Tag."))}},M=async q=>{try{await W.post("/api/tags/delete-many",{ids:q}),I(),m("Tags Deleted","The tags have been deleted successfully."),_.value=!1,ke.emit("deleteManyTagsSuccess")}catch(K){K.status===422?C("Error",K.response.data.message):(console.error("Error deleting Tags:",K),C("Error","Failed to delete Tags.")),_.value=!1}},Q=q=>{E.value=q,w.value=Math.random(),v("DialogNewTag")},d=()=>{I(),w.value=Math.random()};function L(q){q.altKey&&q.key==="n"&&(q.preventDefault(),v("DialogNewTag"))}const i=tt(()=>{o.value["filter[q]"]=D.value,k.value=1,I()},500);return ne(k,()=>{I()}),ne(D,()=>{i()}),ne(h,q=>{A.set("useTags","perPage",q),I()}),{reload:y,tags:R,isLoading:x,currentPage:k,perPage:h,lastPage:b,editId:E,newTagModalKey:w,newRoleModalKey:T,searchTerm:D,showConfirmDelete:_,openDialog:v,fetchTags:I,createTag:N,updateTag:r,deleteTag:X,deleteManyTags:M,handleSave:d,handleRoleAssignment:z,handleKeyDown:L,viewEditDialog:Q,toggleSort:c,sortParam:$}}const eo={class:"flex flex-col h-full gap-1 text-center"},to={class:"flex items-center justify-between p-4"},so={class:"flex items-center"},lo={class:"flex items-center justify-end"},ao={class:"px-6"},no={__name:"Main",setup(k){const{reload:A,tags:h,isLoading:$,currentPage:D,perPage:o,lastPage:R,editId:x,newTagModalKey:b,newRoleModalKey:E,searchTerm:w,showConfirmDelete:T,fetchTags:_,createTag:f,deleteTag:v,deleteManyTags:m,handleSave:C,handleKeyDown:y,handleRoleAssignment:c,viewEditDialog:I,toggleSort:N,sortParam:r}=Wn(),{selectedRows:z,selectAll:X,toggleSelectAll:M,toggleSelectRow:Q}=Ae(h),d=Pe();return re(()=>{var L,i;(i=(L=d.currentRoute)==null?void 0:L.value.params)!=null&&i.id&&(x.value=parseInt(d.currentRoute.value.params.id),I(x.value)),_(),window.addEventListener("keydown",y),ke.on("deleteManyTagsSuccess",()=>{z.value=[],X.value=!1})}),be(()=>{window.removeEventListener("keydown",y)}),(L,i)=>{const q=j("Input"),K=j("Button"),u=j("RcIcon"),oe=j("Checkbox");return n(),U("div",eo,[a("div",to,[a("div",so,[s(q,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter tags...",modelValue:e(w),"onUpdate:modelValue":i[0]||(i[0]=Y=>se(w)?w.value=Y:null)},null,8,["modelValue"]),e(w)?(n(),p(Ie,{key:0,"onUpdate:modelValue":i[1]||(i[1]=Y=>w.value="")})):V("",!0)]),a("div",lo,[e(z).length?(n(),p(K,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=ae(Y=>T.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[g("Delete Selected "+F(e(z).length)+" Tag(s) ",1)]),_:1})):V("",!0),s(K,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ae(e(f),["prevent"]),variant:"primary"},{default:l(()=>[...i[14]||(i[14]=[g(" New Tag ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(u,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:i[3]||(i[3]=Y=>e(A)())})])]),a("div",ao,[s(e(Ue),null,{default:l(()=>[s(e(Ee),null,{default:l(()=>[s(e(pe),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(oe,{id:"selectAll",modelValue:e(X),"onUpdate:modelValue":i[4]||(i[4]=Y=>se(X)?X.value=Y:null),checked:e(X),onClick:i[5]||(i[5]=Y=>e(M)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(K,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[6]||(i[6]=Y=>e(N)("id"))},{default:l(()=>[s(u,{name:"sort",sortParam:e(r),field:"id"},null,8,["sortParam"]),i[15]||(i[15]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[s(K,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[7]||(i[7]=Y=>e(N)("tagname"))},{default:l(()=>[s(u,{name:"sort",sortParam:e(r),field:"tagname"},null,8,["sortParam"]),i[16]||(i[16]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...i[17]||(i[17]=[g("Description",-1)])]),_:1}),s(e(J),{class:"w-[40%]"},{default:l(()=>[...i[18]||(i[18]=[g("Devices",-1)])]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...i[19]||(i[19]=[g("Roles",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...i[20]||(i[20]=[g("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Me),null,{default:l(()=>[e($)?(n(),p(Re,{key:0})):e($)?(n(),p(Te,{key:2})):(n(!0),U(ee,{key:1},de(e(h).data,Y=>(n(),p(e(pe),{key:Y.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(oe,{class:"cursor-pointer",id:"select-"+Y.id,checked:!!e(z).includes(Y.id),onClick:O=>e(Q)(Y.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(Y.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(Y.tagname),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(Y.tagDescription),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:Y.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:Y.roles,displayField:"name",linkString:"/settings/roles",maxVisible:3,hoverCardFields:["id","name","description"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(He,{rowData:Y,onOnEdit:O=>e(I)(Y.id),onOnDelete:O=>e(v)(Y.id),showRolesBtn:!0,onOnRoleAssignment:O=>e(c)(Y.id)},null,8,["rowData","onOnEdit","onOnDelete","onOnRoleAssignment"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Ne,{currentPage:e(D),lastPage:e(R),perPage:e(o),"onUpdate:currentPage":i[8]||(i[8]=Y=>D.value=Y),"onUpdate:perPage":i[9]||(i[9]=Y=>o.value=Y),totalRecords:e(h).total,isLoading:e($)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(Qn,{onSave:i[10]||(i[10]=Y=>e(C)()),key:e(b),editId:e(x)},null,8,["editId"])),s($e,{ids:e(z),showConfirmDelete:e(T),onClose:i[11]||(i[11]=Y=>T.value=!1),onHandleDelete:i[12]||(i[12]=Y=>e(m)(e(z)))},null,8,["ids","showConfirmDelete"]),e(x)>0?(n(),p(Ln,{itemId:e(x),key:e(E),type:2,onUpdateRoles:i[13]||(i[13]=Y=>e(_)())},null,8,["itemId"])):V("",!0)])])}}},oo={key:0,class:"flex justify-center py-8"},ro={class:"space-y-2"},io={key:0,class:"text-sm text-red-600"},uo={key:0,class:"space-y-2"},co={class:"max-h-32 overflow-y-auto border rounded-md p-3 bg-gray-50"},mo={class:"grid grid-cols-1 sm:grid-cols-2 gap-2"},po=["title"],vo={key:1,class:"bg-yellow-50 border-l-4 border-yellow-400 p-4"},fo={class:"pl-2 ml-auto"},go={class:"rc-kdb-class2"},yo={class:"pl-2 ml-auto"},xo={class:"rc-kdb-class2"},_o={__name:"DeviceModelAddEditDialog",props:{editModelName:{type:String,default:""},editId:{type:Number,default:0}},emits:["save"],setup(k,{emit:A}){const h=k,$=A,D=P({name:""}),o=P(!1),R=P({}),x=P([]),b=he(),{isDialogOpen:E,closeDialog:w}=b,{toastSuccess:T,toastError:_}=_e(),f=ue(()=>!!h.editModelName),v=ue(()=>h.editId!=0?"Edit Device Model":"New Device Model"),m=async()=>{o.value=!0;try{const r=(await W.get(`/api/device-models/${h.editId}`)).data;D.value.name=r.name,x.value=r.devices||[]}catch(N){console.error("Error fetching device model:",N),_("Error","Failed to fetch device model data."),w("DialogNewDeviceModel")}finally{o.value=!1}},C=()=>{var N;return R.value={},(N=D.value.name)!=null&&N.trim()?D.value.name.length>255?(R.value.name=t("validation.maxLength",{field:t("common.entities.deviceModel"),max:255}),!1):!0:(R.value.name=t("validation.required",{field:t("common.entities.deviceModel")}),!1)},y=async()=>{var N,r;if(C()){o.value=!0,R.value={};try{let z;h.editId!=0?(z=await W.patch("/api/device-models/"+h.editId,D.value),T("Success","The device model has been updated successfully. Devices associated with this model will take a few moments to reflect the changes.",{count:z.data.data.devices_updated||0})):(z=await W.post("/api/device-models",D.value),T("Success","The device model has been created successfully.")),$("save"),w("DialogNewDeviceModel"),c()}catch(z){((N=z.response)==null?void 0:N.status)===422?(R.value=z.response.data.data||{},_("Validation Error",z.response.data.message)):((r=z.response)==null?void 0:r.status)===409?(R.value.name=z.response.data.message,_("Error",z.response.data.message)):(console.error("Error saving device model:",z),_("Error","Failed to save device model."))}finally{o.value=!1}}},c=()=>{D.value={name:""},R.value={},x.value=[]},I=()=>{c(),w("DialogNewDeviceModel")};return ne(()=>h.editModelName,()=>{E("DialogNewDeviceModel")&&(f.value?m():c())}),re(()=>{h.editId!=0&&m()}),(N,r)=>{const z=j("Label"),X=j("Input"),M=j("Button"),Q=j("RcIcon");return n(),p(e(Oe),{open:e(E)("DialogNewDeviceModel"),"onUpdate:open":I},{default:l(()=>[s(e(Fe),{class:"sm:max-w-[600px]"},{default:l(()=>[s(e(Je),null,{default:l(()=>[s(e(Le),null,{default:l(()=>[g(F(v.value),1)]),_:1})]),_:1}),o.value?(n(),U("div",oo,[...r[3]||(r[3]=[a("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)])])):(n(),U("form",{key:1,onSubmit:ae(y,["prevent"]),class:"space-y-6"},[a("div",ro,[s(z,{for:"name",class:"text-sm font-medium"},{default:l(()=>[...r[4]||(r[4]=[g(" Device Model Name * ",-1)])]),_:1}),s(X,{id:"name",modelValue:D.value.name,"onUpdate:modelValue":r[0]||(r[0]=d=>D.value.name=d),type:"text",placeholder:"Enter device model name",class:De({"border-red-500":R.value.name}),maxlength:"255",required:""},null,8,["modelValue","class"]),R.value.name?(n(),U("p",io,F(R.value.name),1)):V("",!0)]),f.value&&x.value.length>0?(n(),U("div",uo,[s(z,{class:"text-sm font-medium"},{default:l(()=>[g(" Devices Using This Model ("+F(x.value.length)+") ",1)]),_:1}),a("div",co,[a("div",mo,[(n(!0),U(ee,null,de(x.value,d=>(n(),U("div",{key:d.id,class:"text-sm text-gray-700 truncate",title:d.name},"• "+F(d.name),9,po))),128))])]),r[5]||(r[5]=a("p",{class:"text-xs text-gray-600"}," Updating the device model name will affect all devices using this model. ",-1))])):V("",!0),f.value?(n(),U("div",vo,[...r[6]||(r[6]=[a("div",{class:"flex"},[a("div",{class:"flex-shrink-0"},[a("svg",{class:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor"},[a("path",{"fill-rule":"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z","clip-rule":"evenodd"})])]),a("div",{class:"ml-3"},[a("p",{class:"text-sm text-yellow-700"}," Editing the device model name will affect all devices using this model. ")])],-1)])])):V("",!0),s(e(ze),null,{default:l(()=>[s(M,{type:"button",variant:"outline",onClick:I,disabled:o.value},{default:l(()=>[...r[7]||(r[7]=[g(" Cancel ",-1)])]),_:1},8,["disabled"]),h.editId===0?(n(),p(M,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[1]||(r[1]=d=>y()),variant:"primary",disabled:o.value},{default:l(()=>[r[9]||(r[9]=g(" Save ",-1)),a("div",fo,[a("kbd",go,[r[8]||(r[8]=g(" Ctrl  ",-1)),s(Q,{name:"enter",class:"ml-1"})])])]),_:1},8,["disabled"])):(n(),p(M,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[2]||(r[2]=d=>y()),variant:"primary",disabled:o.value},{default:l(()=>[r[11]||(r[11]=g(" Update ",-1)),a("div",yo,[a("kbd",xo,[r[10]||(r[10]=g(" Ctrl  ",-1)),s(Q,{name:"enter",class:"ml-1"})])])]),_:1},8,["disabled"]))]),_:1})],32))]),_:1})]),_:1},8,["open"])}}};function ko(){const k=P(1),A=ot(),h=P(A.get("useDeviceModels","perPage",15)),$=P("name"),D=P(""),o=P({}),R=P([]),x=P(!1),b=P(1),E=P(""),w=P(1),T=P(!1),_=P(0),f=he(),{openDialog:v}=f,{toastSuccess:m,toastError:C}=_e(),{reload:y}=rt(I),{toggleSort:c}=dt($,I,"useDeviceModels");async function I(K={}){x.value=!0;try{const u=await W.get("/api/device-models",{params:{page:k.value,perPage:h.value,sort:$.value,...o.value}});R.value=u.data,b.value=u.data.last_page}catch(u){console.error("Error fetching device models:",u),C("Error",u.response.data.message||"Failed to fetch device models.")}finally{x.value=!1}}const N=async K=>{E.value="",_.value=K||0,w.value=Math.random(),v("DialogNewDeviceModel")};function r(K){E.value=K,w.value=Math.random(),v("DialogNewDeviceModel")}const z=async K=>{try{await W.delete(`/api/device-models/${encodeURIComponent(K)}`),I(),m("Device Model Deleted","The device model has been deleted successfully."),T.value=!1}catch(u){u.status===422||u.status===409?C("Error",u.response.data.message):(console.error("Error deleting Device Model:",u),C("Error","Failed to delete Device Model."))}},X=async K=>{try{await W.post("/api/device-models/delete-many",{ids:K}),I(),m("Device Models Deleted","The device models have been deleted successfully."),T.value=!1,ke.emit("deleteManyDeviceModelsSuccess")}catch(u){u.status===422?C("Error",u.response.data.message):(console.error("Error deleting Device Models:",u),C("Error","Failed to delete Device Models.")),T.value=!1}},M=K=>{_.value=K,w.value=Math.random(),v("DialogNewDeviceModel")},Q=K=>{window.open(`/devices?filter[device_model]=${encodeURIComponent(K)}`,"_blank")},d=async K=>{try{return(await W.get(`/api/device-models/${encodeURIComponent(K)}/devices`)).data.data}catch(u){return console.error("Error fetching devices for model:",u),C("Error","Failed to fetch devices for this model."),null}},L=()=>{I(),w.value=Math.random()};function i(K){K.altKey&&K.key==="n"&&(K.preventDefault(),v("DialogNewDeviceModel"))}const q=tt(()=>{o.value["filter[q]"]=D.value,k.value=1,I()},500);return ne(k,()=>{I()}),ne(D,()=>{q()}),ne(h,K=>{A.set("useDeviceModels","perPage",K),I()}),{reload:y,deviceModels:R,isLoading:x,currentPage:k,perPage:h,lastPage:b,editModelName:E,newModelModalKey:w,searchTerm:D,showConfirmDelete:T,editId:_,openDialog:v,fetchDeviceModels:I,createDeviceModel:N,updateDeviceModel:r,deleteDeviceModel:z,deleteManyDeviceModels:X,handleSave:L,handleKeyDown:i,viewEditDialog:M,viewDevicesDialog:Q,getDevicesForModel:d,toggleSort:c,sortParam:$}}const bo={class:"flex flex-col h-full gap-1 text-center"},ho={class:"flex items-center justify-between p-4"},wo={class:"flex items-center"},$o={class:"flex items-center justify-end"},Co={class:"px-6"},Do={class:"flex items-center space-x-2"},So={key:1,class:"text-muted-foreground text-sm"},Vo={__name:"Main",setup(k){const{reload:A,deviceModels:h,isLoading:$,currentPage:D,perPage:o,lastPage:R,editId:x,editModelName:b,newModelModalKey:E,searchTerm:w,showConfirmDelete:T,fetchDeviceModels:_,createDeviceModel:f,deleteDeviceModel:v,deleteManyDeviceModels:m,handleSave:C,handleKeyDown:y,viewEditDialog:c,viewDevicesDialog:I,toggleSort:N,sortParam:r}=ko(),{selectedRows:z,selectAll:X,toggleSelectAll:M,toggleSelectRow:Q}=Ae(h),d=Pe();return re(()=>{var L,i;(i=(L=d.currentRoute)==null?void 0:L.value.params)!=null&&i.modelName&&(b.value=decodeURIComponent(d.currentRoute.value.params.modelName),c(b.value)),_(),window.addEventListener("keydown",y),ke.on("deleteManyDeviceModelsSuccess",()=>{z.value=[],X.value=!1})}),be(()=>{window.removeEventListener("keydown",y)}),(L,i)=>{const q=j("Input"),K=j("Button"),u=j("RcIcon"),oe=j("Checkbox"),Y=j("RcBadge");return n(),U("div",bo,[a("div",ho,[a("div",wo,[s(q,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter Device Models...",modelValue:e(w),"onUpdate:modelValue":i[0]||(i[0]=O=>se(w)?w.value=O:null)},null,8,["modelValue"]),e(w)?(n(),p(Ie,{key:0,"onUpdate:modelValue":i[1]||(i[1]=O=>w.value="")})):V("",!0)]),a("div",$o,[e(z).length?(n(),p(K,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:i[2]||(i[2]=ae(O=>T.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[g(" Delete Selected "+F(e(z).length)+" Device(s) Model(s) ",1)]),_:1})):V("",!0),s(K,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:i[3]||(i[3]=ae(O=>e(f)(0),["prevent"])),variant:"primary"},{default:l(()=>[...i[15]||(i[15]=[g(" Add Model ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),s(u,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:i[4]||(i[4]=O=>e(A)())})])]),a("div",Co,[s(e(Ue),null,{default:l(()=>[s(e(Ee),null,{default:l(()=>[s(e(pe),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(oe,{id:"selectAll",modelValue:e(X),"onUpdate:modelValue":i[5]||(i[5]=O=>se(X)?X.value=O:null),checked:e(X),onClick:i[6]||(i[6]=O=>e(M)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(K,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[7]||(i[7]=O=>e(N)("id"))},{default:l(()=>[s(u,{name:"sort",sortParam:e(r),field:"id"},null,8,["sortParam"]),i[16]||(i[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[30%]"},{default:l(()=>[s(K,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[8]||(i[8]=O=>e(N)("name"))},{default:l(()=>[s(u,{name:"sort",sortParam:e(r),field:"name"},null,8,["sortParam"]),i[17]||(i[17]=a("span",{class:"ml-2"}," Name ",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[15%]"},{default:l(()=>[s(K,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:i[9]||(i[9]=O=>e(N)("devices_count"))},{default:l(()=>[s(u,{name:"sort",sortParam:e(r),field:"devices_count"},null,8,["sortParam"]),i[18]||(i[18]=a("span",{class:"ml-2"}," Device Count ",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[35%]"},{default:l(()=>[...i[19]||(i[19]=[g(" Devices ",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...i[20]||(i[20]=[g(" Actions ",-1)])]),_:1})]),_:1})]),_:1}),s(e(Me),null,{default:l(()=>[e($)?(n(),p(Re,{key:0})):!e($)&&e(h).data&&e(h).data.length?(n(!0),U(ee,{key:1},de(e(h).data,O=>(n(),p(e(pe),{key:O.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(oe,{class:"cursor-pointer",id:"select-"+O.id,checked:!!e(z).includes(O.id),onClick:te=>e(Q)(O.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(O.id),1)]),_:2},1024),s(e(H),{class:"text-start font-medium"},{default:l(()=>[g(F(O.name),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Y,{variant:"info",class:"px-3 py-1"},{default:l(()=>[g(F(O.devices_count),1)]),_:2},1024)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[a("div",Do,[O.devices_count>0?(n(),p(K,{key:0,variant:"outline",size:"sm",onClick:te=>e(I)(O.name)},{default:l(()=>[g(" View Devices ("+F(O.devices_count)+") ",1),s(e(is),{size:"12",class:"ml-2"})]),_:2},1032,["onClick"])):(n(),U("span",So," -- "))])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(He,{rowData:O,onOnEdit:te=>e(c)(O.id),onOnDelete:te=>e(v)(O.name),showRolesBtn:!1,showViewDevicesBtn:O.devices_count>0,onOnViewDevices:te=>e(I)(O.name)},null,8,["rowData","onOnEdit","onOnDelete","showViewDevicesBtn","onOnViewDevices"])]),_:2},1024)]),_:2},1024))),128)):(n(),p(Te,{key:2}))]),_:1})]),_:1}),s(Ne,{currentPage:e(D),lastPage:e(R),perPage:e(o),"onUpdate:currentPage":i[10]||(i[10]=O=>D.value=O),"onUpdate:perPage":i[11]||(i[11]=O=>o.value=O),totalRecords:e(h).total,isLoading:e($)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(_o,{onSave:i[12]||(i[12]=O=>e(C)()),key:e(E),editModelName:e(b),editId:e(x)},null,8,["editModelName","editId"])),s($e,{ids:e(z),showConfirmDelete:e(T),onClose:i[13]||(i[13]=O=>T.value=!1),onHandleDelete:i[14]||(i[14]=O=>e(m)(e(z)))},null,8,["ids","showConfirmDelete"])])])}}};function Po(k){const A=P(1),h=ot(),$=P(h.get("useTemplates","perPage",10)),D=P("-id"),o=P(""),R=P({}),x=he(),b=P(0),E=P(!1),w=P(1),T=P(1),_=P([]),f=P(!1),v=Pe(),{openDialog:m}=x,{toastSuccess:C,toastError:y}=_e(),{reload:c}=rt(N),{toggleSort:I}=dt(D,N,"useTemplates");re(()=>{var i,q;(q=(i=v.currentRoute)==null?void 0:i.value.params)!=null&&q.id?(b.value=v.currentRoute.value.params.id,r(b.value)):(b.value=0,N()),window.addEventListener("keydown",d)}),be(()=>{window.removeEventListener("keydown",d)});async function N(i={}){E.value=!0;try{const q=await W.get("/api/templates",{params:{page:A.value,perPage:$.value,sort:D.value,...R.value}});_.value=q.data,w.value=q.data.last_page}catch(q){console.error("Error fetching templates:",q),y("Error","Failed to fetch templates.")}finally{E.value=!1}}function r(i){v.push({name:"template-view",params:{id:i}})}const z=async i=>{try{await W.delete(`/api/templates/${i}`),N(),C("Template Deleted","The template has been deleted successfully.")}catch(q){q.status===422?y("Error",q.response.data.message):(console.error("Error deleting template:",q),y("Error","Failed to delete template."))}},X=async i=>{try{await W.post("/api/templates/delete-many",{ids:i}),N(),C("Templates Deleted","The templates have been deleted successfully."),f.value=!1,ke.emit("deleteManyTemplatesSuccess")}catch(q){q.status===422?y("Error",q.response.data.message):(console.error("Error deleting Templates:",q),y("Error","Failed to delete Templates.")),f.value=!1}},M=i=>{b.value=i,T.value=Math.random(),m("DialogNewTemplate")},Q=()=>{N(),T.value=Math.random()};function d(i){i.altKey&&i.key==="n"&&(i.preventDefault(),m("DialogNewTemplate"))}const L=tt(()=>{R.value["filter[q]"]=o.value,A.value=1,N()},500);return ne(A,()=>{N()}),ne(o,()=>{L()}),ne($,i=>{h.set("useTemplates","perPage",i),N()}),{reload:c,templates:_,isLoading:E,currentPage:A,perPage:$,lastPage:w,editId:b,newTemplateModalKey:T,searchTerm:o,openDialog:m,fetchTemplates:N,viewTemplateDetailsPane:r,deleteTemplate:z,deleteManyTemplates:X,handleSave:Q,handleKeyDown:d,viewEditDialog:M,toggleSort:I,sortParam:D,showConfirmDelete:f}}const Io={class:"flex flex-col h-full gap-1 text-center"},Eo={class:"flex items-center justify-between p-4"},Mo={class:"flex items-center"},Ro={class:"flex items-center justify-end"},To={class:"px-6"},Uo={class:"border-b"},No={__name:"Main",setup(k){const{reload:A,templates:h,isLoading:$,currentPage:D,perPage:o,lastPage:R,searchTerm:x,viewTemplateDetailsPane:b,deleteTemplate:E,deleteManyTemplates:w,toggleSort:T,sortParam:_,showConfirmDelete:f}=Po(),{importTemplates:v,importingTemplates:m}=Cs(),{selectedRows:C,selectAll:y,toggleSelectAll:c,toggleSelectRow:I}=Ae(h);return re(()=>{ke.on("deleteManyTemplatesSuccess",()=>{C.value=[],y.value=!1,document.getElementById("selectAll").checked=!1})}),(N,r)=>{const z=j("Input"),X=j("Button"),M=j("RcIcon"),Q=j("Checkbox");return n(),U("div",Io,[a("div",Eo,[a("div",Mo,[s(z,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter templates...",modelValue:e(x),"onUpdate:modelValue":r[0]||(r[0]=d=>se(x)?x.value=d:null)},null,8,["modelValue"]),e(x)?(n(),p(Ie,{key:0,"onUpdate:modelValue":r[1]||(r[1]=d=>x.value="")})):V("",!0)]),a("div",Ro,[e(C).length?(n(),p(X,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:r[2]||(r[2]=ae(d=>f.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[g("Delete Selected "+F(e(C).length)+" Template(s) ",1)]),_:1})):V("",!0),s(X,{type:"close",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700",onClick:r[3]||(r[3]=d=>e(v)()),variant:"outline"},{default:l(()=>[e(m)?V("",!0):(n(),p(e(us),{key:0,class:"w-4 h-4 mr-2 text-white github-shake"})),s(Ye,{state:e(m),class:"mr-2"},null,8,["state"]),r[14]||(r[14]=g(" Import Templates ",-1))]),_:1}),s(X,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:r[4]||(r[4]=ae(d=>e(b)(0),["prevent"])),variant:"primary"},{default:l(()=>[...r[15]||(r[15]=[g(" New Template ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1}),s(M,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:r[5]||(r[5]=d=>e(A)())})])]),a("div",To,[s(e(Ue),null,{default:l(()=>[s(e(Ee),null,{default:l(()=>[s(e(pe),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(Q,{id:"selectAll",modelValue:e(y),"onUpdate:modelValue":r[6]||(r[6]=d=>se(y)?y.value=d:null),checked:e(y),onClick:r[7]||(r[7]=d=>e(c)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(X,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[8]||(r[8]=d=>e(T)("id"))},{default:l(()=>[s(M,{name:"sort",sortParam:e(_),field:"id"},null,8,["sortParam"]),r[16]||(r[16]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[s(X,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:r[9]||(r[9]=d=>e(T)("templateName"))},{default:l(()=>[s(M,{name:"sort",sortParam:e(_),field:"templateName"},null,8,["sortParam"]),r[17]||(r[17]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[...r[18]||(r[18]=[g("Description",-1)])]),_:1}),s(e(J),{class:"w-[40%]"},{default:l(()=>[...r[19]||(r[19]=[g("Devices",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...r[20]||(r[20]=[g("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Me),null,{default:l(()=>[e($)?(n(),p(Re,{key:0})):e($)?(n(),p(Te,{key:2})):(n(!0),U(ee,{key:1},de(e(h).data,d=>(n(),p(e(pe),{key:d.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(Q,{class:"cursor-pointer",id:"select-"+d.id,checked:!!e(C).includes(d.id),onClick:L=>e(I)(d.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(d.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(X,{class:"px-2 py-0 text-sm hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:L=>e(b)(d.id)},{default:l(()=>[a("span",Uo,F(d.templateName),1)]),_:2},1032,["onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(d.description),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:d.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(He,{rowData:d,onOnEdit:L=>e(b)(d.id),onOnDelete:L=>e(E)(d.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Ne,{currentPage:e(D),lastPage:e(R),perPage:e(o),"onUpdate:currentPage":r[10]||(r[10]=d=>D.value=d),"onUpdate:perPage":r[11]||(r[11]=d=>o.value=d),totalRecords:e(h).total,isLoading:e($)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),s($e,{ids:e(C),showConfirmDelete:e(f),onClose:r[12]||(r[12]=d=>f.value=!1),onHandleDelete:r[13]||(r[13]=d=>e(w)(e(C)))},null,8,["ids","showConfirmDelete"])])])}}},Ao=nt(No,[["__scopeId","data-v-d820045f"]]),Bo={class:"flex flex-col h-full gap-1 text-center"},Fo={class:"flex items-center justify-between p-4"},Lo={class:"flex items-center"},zo={class:"flex items-center justify-end"},Oo={class:"px-6"},jo={__name:"Main",setup(k){const{reload:A,editId:h,vendors:$,currentPage:D,perPage:o,searchTerm:R,lastPage:x,isLoading:b,fetchVendors:E,viewEditDialog:w,createVendor:T,deleteVendor:_,deleteManyVendors:f,handleSave:v,handleKeyDown:m,newVendorModalKey:C,toggleSort:y,sortParam:c,showConfirmDelete:I}=Ds(),{selectedRows:N,selectAll:r,toggleSelectAll:z,toggleSelectRow:X}=Ae($),M=Pe();return re(()=>{var Q,d;E(),(d=(Q=M.currentRoute)==null?void 0:Q.value.params)!=null&&d.id&&(h.value=parseInt(M.currentRoute.value.params.id),w(h.value)),window.addEventListener("keydown",m),ke.on("deleteManyVendorsSuccess",()=>{N.value=[],r.value=!1,document.getElementById("selectAll").checked=!1})}),be(()=>{window.removeEventListener("keydown",m)}),(Q,d)=>{const L=j("Input"),i=j("Button"),q=j("RcIcon"),K=j("Checkbox");return n(),U("div",Bo,[a("div",Fo,[a("div",Lo,[s(L,{class:"max-w-sm ml-4 mr-2",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter vendors...",modelValue:e(R),"onUpdate:modelValue":d[0]||(d[0]=u=>se(R)?R.value=u:null)},null,8,["modelValue"]),e(R)?(n(),p(Ie,{key:0,"onUpdate:modelValue":d[1]||(d[1]=u=>R.value="")})):V("",!0)]),a("div",zo,[e(N).length?(n(),p(i,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:d[2]||(d[2]=ae(u=>I.value=!0,["prevent"])),variant:"primary"},{default:l(()=>[g("Delete Selected "+F(e(N).length)+" Vendor(s) ",1)]),_:1})):V("",!0),s(i,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:ae(e(T),["prevent"]),variant:"primary"},{default:l(()=>[...d[13]||(d[13]=[g(" New Vendor ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class2"},"ALT N")],-1)])]),_:1},8,["onClick"]),s(q,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:d[3]||(d[3]=u=>e(A)())})])]),a("div",Oo,[s(e(Ue),null,{default:l(()=>[s(e(Ee),null,{default:l(()=>[s(e(pe),null,{default:l(()=>[s(e(J),{class:"w-[2%]"},{default:l(()=>[s(K,{id:"selectAll",modelValue:e(r),"onUpdate:modelValue":d[4]||(d[4]=u=>se(r)?r.value=u:null),checked:e(r),onClick:d[5]||(d[5]=u=>e(z)())},null,8,["modelValue","checked"])]),_:1}),s(e(J),{class:"w-[5%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[6]||(d[6]=u=>e(y)("id"))},{default:l(()=>[s(q,{name:"sort",sortParam:e(c),field:"id"},null,8,["sortParam"]),d[14]||(d[14]=a("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[20%]"},{default:l(()=>[s(i,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[7]||(d[7]=u=>e(y)("vendorName"))},{default:l(()=>[s(q,{name:"sort",sortParam:e(c),field:"vendorName"},null,8,["sortParam"]),d[15]||(d[15]=a("span",{class:"ml-2"},"Name",-1))]),_:1})]),_:1}),s(e(J),{class:"w-[50%]"},{default:l(()=>[...d[16]||(d[16]=[g("Devices",-1)])]),_:1}),s(e(J),{class:"w-[10%]"},{default:l(()=>[...d[17]||(d[17]=[g("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(Me),null,{default:l(()=>[e(b)?(n(),p(Re,{key:0})):e(b)?(n(),p(Te,{key:2})):(n(!0),U(ee,{key:1},de(e($).data,u=>(n(),p(e(pe),{key:u.id},{default:l(()=>[s(e(H),{class:"text-start"},{default:l(()=>[s(K,{class:"cursor-pointer",id:"select-"+u.id,checked:!!e(N).includes(u.id),onClick:oe=>e(X)(u.id)},null,8,["id","checked","onClick"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(u.id),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[g(F(u.vendorName),1)]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(Se,{items:u.device,displayField:"device_name",linkField:"view_url",maxVisible:8,hoverCardFields:["id","device_name","device_ip"]},null,8,["items"])]),_:2},1024),s(e(H),{class:"text-start"},{default:l(()=>[s(He,{rowData:u,onOnEdit:oe=>e(w)(u.id),onOnDelete:oe=>e(_)(u.id)},null,8,["rowData","onOnEdit","onOnDelete"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1}),s(Ne,{currentPage:e(D),lastPage:e(x),perPage:e(o),"onUpdate:currentPage":d[8]||(d[8]=u=>D.value=u),"onUpdate:perPage":d[9]||(d[9]=u=>o.value=u),totalRecords:e($).total,isLoading:e(b)},null,8,["currentPage","lastPage","perPage","totalRecords","isLoading"]),(n(),p(Ss,{onSave:d[10]||(d[10]=u=>e(v)()),key:e(C),editId:e(h)},null,8,["editId"])),s($e,{ids:e(N),showConfirmDelete:e(I),onClose:d[11]||(d[11]=u=>I.value=!1),onHandleDelete:d[12]||(d[12]=u=>e(f)(e(N)))},null,8,["ids","showConfirmDelete"])])])}}},Ko={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},qo={class:"border-t border-b topRow"},Go={class:"flex items-center justify-between"},Ho={class:"flex items-center justify-start w-full gap-2"},Jo={class:"truncate"},Xo={class:"flex items-center gap-2 mr-4"},Yo={class:"flex items-center gap-2"},Zo={key:1,class:"flex flex-col h-full gap-1 text-center"},Qo={class:"flex items-center justify-between p-4"},Wo={class:"flex items-center"},ed={class:"text-lg text-red-500 font-semibold"},td={__name:"Main",setup(k){const A=P(!1),{currentView:h,viewItems:$,changeView:D,toggleFavorite:o}=cs(),R=ue(()=>["devices","commandgroups","commands","templates","vendors","tags","models"].includes(h.value));return(x,b)=>{const E=j("RcIcon");return n(),U("main",Ko,[a("div",qo,[s(e(at),{"onUpdate:open":b[0]||(b[0]=w=>A.value=w)},{default:l(()=>{var w,T;return[a("div",Go,[s(e(st),{"as-child":"",class:"p-4 ml-2"},{default:l(()=>[s(e(ie),{variant:"outline",class:"w-48"},{default:l(()=>{var _;return[a("div",Ho,[s(E,{name:"pin",class:"w-4 h-4 text-blue-400 shrink-0"}),a("span",Jo,F(((_=e($).find(f=>f.id===e(h)))==null?void 0:_.label)||"Select View"),1),s(e(vt),{class:De(["w-4 h-4 ml-auto transition-transform duration-300",{"rotate-180":A.value}])},null,8,["class"])])]}),_:1})]),_:1})]),a("div",Xo,[s(E,{name:((w=e($).find(_=>_.id===e(h)))==null?void 0:w.icon)||""},null,8,["name"]),g(" "+F(((T=e($).find(_=>_.id===e(h)))==null?void 0:T.label)||""),1)]),s(e(lt),{class:"w-56",align:"start"},{default:l(()=>[s(e(ms),null,{default:l(()=>[(n(!0),U(ee,null,de(e($),_=>(n(),p(e(ge),{key:_.id,onClick:f=>e(D)(_.id)},{default:l(()=>[a("span",Yo,[s(E,{name:_.icon},null,8,["name"]),g(" "+F(_.label),1)]),s(e(wt),null,{default:l(()=>[s(e($t),null,{default:l(()=>[s(e(Ct),{"as-child":""},{default:l(()=>[s(e(ye),{onClick:ae(f=>e(o)(_.id),["stop","prevent"])},{default:l(()=>[_.isFavorite?V("",!0):(n(),p(E,{key:0,name:"star-unselected",class:"animated-star"})),_.isFavorite?(n(),p(E,{key:1,name:"star-selected",class:"animated-star"})):V("",!0)]),_:2},1032,["onClick"])]),_:2},1024),s(e(Dt),null,{default:l(()=>[a("p",null,F(_.isFavorite?"Remove from favorites":"Add to favorites"),1)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"]))),128))]),_:1})]),_:1})]}),_:1})]),a("div",null,[R.value?(n(),U(ee,{key:0},[e(h)==="devices"?(n(),p(Un,{key:0})):V("",!0),e(h)==="commandgroups"?(n(),p(wl,{key:1})):V("",!0),e(h)==="commands"?(n(),p(pl,{key:2})):V("",!0),e(h)==="templates"?(n(),p(Ao,{key:3})):V("",!0),e(h)==="vendors"?(n(),p(jo,{key:4})):V("",!0),e(h)==="models"?(n(),p(Vo,{key:5})):V("",!0),e(h)==="tags"?(n(),p(no,{key:6})):V("",!0)],64)):(n(),U("div",Zo,[a("div",Qo,[a("div",Wo,[a("p",ed,F(e(h))+" view not found",1)])])]))])])}}},fd=nt(td,[["__scopeId","data-v-6b1ceb31"]]);export{fd as default};
