import{J as de,r as C,A as G,c as h,d as w,o as a,k as s,j as g,e,t as $,w as n,q as Z,h as I,ak as oe,b as Be,al as ye,f as t,F as fe,G as me,z as N,ag as be,ah as $e,ai as ke,aj as De,af as Je,a7 as X,T as Pe,ad as ve,am as ze,an as We,ao as ge,ap as Xe,aq as Ze,C as Ie,ar as et,_ as _e,g as we,i as xe,m as he,X as Re,Y as Me,Z as se,$ as Fe,ae as tt,p as Oe,u as ce,K as le,a as U,a2 as Ge,as as Ae,L as st,M as nt,N as ot,O as lt,at,V as Ce,R as it,S as dt,ac as ct}from"./app-xn2RtsP0.js";import{a as rt,_ as ut,b as ft,c as mt,d as qe}from"./useTemplatesGithub-DsmO9qv-.js";import{a as vt,b as Se,c as Q,d as pt,f as J,i as gt,t as ne,v as Ue,k as _t}from"./useRowSelection-Dw9uXHYU.js";import{_ as wt,a as xt,u as Ke,m as Ye,b as W,c as He,d as ht}from"./ToggleGroupItem-Dtx7DBT9.js";import{u as yt,_ as bt,a as $t,b as kt}from"./useCopy-CTmYiqgF.js";import{_ as Dt}from"./CardFooter.vue_vue_type_script_setup_true_lang-D0o_u8dC.js";import{_ as Qe}from"./useCredentials-BdI0W9p-.js";import{_ as Ne,a as Ee,b as Ve,c as Le,d as Te,e as je}from"./SelectScrollDownButton-CQ0m9uge.js";/* empty css               */import"./TagMultiSelect.vue_vue_type_script_setup_true_lang-AsgG5FDG.js";import"./eventBus-CGRXT3Tn.js";import"./Switch-DaVsQUtu.js";const It={class:"p-2 overflow-none"},Ct={class:"flex flex-row items-center justify-start gap-2 pt-1"},St={class:"inline-flex flex-row items-center h-[24px] rounded-md px-1.5 py-0.5 gap-1 shadow-[inset_0_0_0_1px_rgb(69,71,74)] bg-[#313337]"},Nt={class:"flex-[0_1_auto] min-w-0 overflow-hidden text-ellipsis whitespace-nowrap inline-flex line-clamp-1"},Et={key:0,class:"mt-4 space-y-2"},Vt={key:1,class:"mt-6 space-y-4"},Lt={class:"flex items-center justify-end mt-4 space-x-2"},Tt={__name:"DeviceConfigsViewPanelAll",props:{deviceId:Number},emits:["toggle-view"],setup(o,{emit:k}){const r=k,l=o,i=de(),{openDialog:d,closeDialog:p,isDialogOpen:_}=i,c=C({}),u=C(!1);G(()=>{x()});function b(){axios.get("/api/configs/latest-by-deviceid/"+l.deviceId).then(v=>{c.value=v.data.data}).catch(v=>{console.log(v)})}function x(){u.value=!0,b(),setTimeout(()=>{u.value=!1},1e3)}function f(){r("toggle-view","latest")}return(v,E)=>{const V=h("Icon"),D=h("Button"),m=h("Skeleton");return a(),w("div",null,[s("div",It,[s("div",Ct,[s("span",St,[s("span",Nt,"All Config Downloads for Device ID: "+$(l.deviceId),1)]),E[0]||(E[0]=s("span",{class:"flex-1 bg-[rgb(49,51,55)] bg-[rgb(49,51,55)] flex-shrink-0 h-px w-full"},null,-1)),e(D,{type:"button",title:"Refresh",variant:"ghost",onClick:x,class:"p-2 h-7"},{default:n(()=>[e(V,{icon:"charm:refresh",class:Z([u.value?"w-4 h-4 text-blue-500 animate-spin":"w-4 h-4 text-gray-600 hover:text-blue-500","w-4 h-4"])},null,8,["class"])]),_:1})]),u.value?(a(),w("div",Et,[e(m,{class:"w-1/2 h-4"}),e(m,{class:"w-full h-4"}),e(m,{class:"w-full h-4"}),e(m,{class:"w-full h-4"}),e(m,{class:"w-full h-4"}),e(m,{class:"w-full h-4"}),e(m,{class:"w-full h-4"}),e(m,{class:"w-full h-4"}),e(m,{class:"w-full h-4"})])):g("",!0),u.value?g("",!0):(a(),w("div",Vt,[e(wt,{configsId:o.deviceId},null,8,["configsId"])])),s("div",Lt,[e(D,{variant:"outline",onClick:f,class:"text-center"},{default:n(()=>[...E[1]||(E[1]=[I(" View Latest >> ",-1)])]),_:1})])])])}}},jt={class:"p-2 overflow-none"},Bt={class:"flex flex-row items-center justify-start gap-2 pt-1"},Pt={class:"inline-flex flex-row items-center h-[24px] rounded-md px-1.5 gap-1 shadow-[inset_0_0_0_1px_rgb(69,71,74)] bg-[#313337]"},zt={class:"flex-[0_1_auto] min-w-0 overflow-hidden text-ellipsis whitespace-nowrap inline-flex line-clamp-1 items-center"},Rt={key:0,class:"mt-4 space-y-2"},Mt={key:1,class:"mt-6 space-y-4"},Ft={class:"border-b"},Ot={class:"flex items-center justify-end mt-4 space-x-2"},Gt={__name:"DeviceConfigsViewPanelLatest",props:{deviceId:Number},emits:["toggle-view"],setup(o,{emit:k}){const r=k,l=o,i=de(),{openDialog:d,closeDialog:p,isDialogOpen:_}=i,c=C({}),u=C(!1),b=oe("formatters"),x=Be();G(()=>{v()});function f(){axios.get("/api/configs/latest-by-deviceid/"+l.deviceId).then(D=>{c.value=D.data.data}).catch(D=>{console.log(D)})}function v(){u.value=!0,f(),setTimeout(()=>{u.value=!1},1e3)}function E(){r("toggle-view","all")}function V(D){x.push({name:"configsview",params:{id:parseInt(D)},query:{ref:"devicesview",refId:l.deviceId}})}return(D,m)=>{const z=h("Icon"),B=h("Button"),S=h("Skeleton"),q=h("StatusRedIcon"),j=h("StatusYellowIcon");return a(),w("div",null,[s("div",jt,[s("div",Bt,[s("span",Pt,[s("span",zt,[e(ye,{class:"mr-2"}),m[0]||(m[0]=I(" Latest Good Config Downloads ",-1))])]),m[1]||(m[1]=s("span",{class:"flex-1 bg-[rgb(49,51,55)] bg-[rgb(49,51,55)] flex-shrink-0 h-px w-full"},null,-1)),e(B,{type:"button",title:"Refresh",variant:"ghost",onClick:v,class:"p-2 h-7"},{default:n(()=>[e(z,{icon:"charm:refresh",class:Z([u.value?"w-4 h-4 text-blue-500 animate-spin":"w-4 h-4 text-gray-600 hover:text-blue-500","w-4 h-4"])},null,8,["class"])]),_:1})]),u.value?(a(),w("div",Rt,[e(S,{class:"w-1/2 h-4"}),e(S,{class:"w-full h-4"}),e(S,{class:"w-full h-4"}),e(S,{class:"w-full h-4"}),e(S,{class:"w-full h-4"}),e(S,{class:"w-full h-4"}),e(S,{class:"w-full h-4"}),e(S,{class:"w-full h-4"}),e(S,{class:"w-full h-4"})])):g("",!0),u.value?g("",!0):(a(),w("div",Mt,[e(t(gt),null,{default:n(()=>[e(t(vt),null,{default:n(()=>[e(t(Se),null,{default:n(()=>[e(t(Q),{class:"w-[2%]"},{default:n(()=>[...m[2]||(m[2]=[I("ID",-1)])]),_:1}),e(t(Q),{class:"w-[10%]"},{default:n(()=>[...m[3]||(m[3]=[I("Command",-1)])]),_:1}),e(t(Q),{class:"w-[10%]"},{default:n(()=>[...m[4]||(m[4]=[I("Filename",-1)])]),_:1}),e(t(Q),{class:"w-[10%]"},{default:n(()=>[...m[5]||(m[5]=[I("Filesize",-1)])]),_:1}),e(t(Q),{class:"w-[10%]"},{default:n(()=>[...m[6]||(m[6]=[I("Downloaded At",-1)])]),_:1}),e(t(Q),{class:"w-[10%]"},{default:n(()=>[...m[7]||(m[7]=[I("Status",-1)])]),_:1}),e(t(Q),{class:"w-[10%]"},{default:n(()=>[...m[8]||(m[8]=[I("Actions",-1)])]),_:1})]),_:1})]),_:1}),e(t(pt),null,{default:n(()=>[(a(!0),w(fe,null,me(c.value,T=>(a(),N(t(Se),null,{default:n(()=>[e(t(J),null,{default:n(()=>[...m[9]||(m[9]=[I("1",-1)])]),_:1}),e(t(J),null,{default:n(()=>[I($(T.command),1)]),_:2},1024),e(t(J),null,{default:n(()=>[e(B,{class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl",variant:"ghost",onClick:F=>V(T.id)},{default:n(()=>[s("span",Ft,$(T.config_filename),1)]),_:2},1032,["onClick"])]),_:2},1024),e(t(J),null,{default:n(()=>[I($(T.config_filesize?t(b).formatFileSize(T.config_filesize):""),1)]),_:2},1024),e(t(J),null,{default:n(()=>[I($(t(b).formatTime(T.created_at)),1)]),_:2},1024),e(t(J),null,{default:n(()=>[T.download_status===0?(a(),N(q,{key:0})):g("",!0),T.download_status===1?(a(),N(ye,{key:1})):g("",!0),T.download_status===2?(a(),N(j,{key:2})):g("",!0)]),_:2},1024),e(t(J),{class:"flex items-center"},{default:n(()=>[e(t(be),null,{default:n(()=>[e(t($e),null,{default:n(()=>[e(t(ke),{"as-child":""},{default:n(()=>[e(B,{variant:"ghost",onClick:F=>t(d)("peek-config-dialog-"+T.id)},{default:n(()=>[e(z,{icon:"lets-icons:view-alt-fill",class:"size-6 text-muted-foreground hover:text-blue-500"})]),_:1},8,["onClick"])]),_:2},1024),e(t(De),{class:"text-white bg-rcgray-800"},{default:n(()=>[...m[10]||(m[10]=[s("p",null,"Peek Config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),e(t(be),null,{default:n(()=>[e(t($e),null,{default:n(()=>[e(t(ke),{"as-child":""},{default:n(()=>[e(B,{variant:"ghost",onClick:F=>V(T.id)},{default:n(()=>[e(z,{icon:"hugeicons:file-view",class:"size-5 text-muted-foreground hover:text-blue-500"})]),_:1},8,["onClick"])]),_:2},1024),e(t(De),{class:"text-white bg-rcgray-800"},{default:n(()=>[...m[11]||(m[11]=[s("p",null,"Open Config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),t(_)("peek-config-dialog-"+T.id)?(a(),N(xt,{key:0,editId:T.id},null,8,["editId"])):g("",!0)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1})])),s("div",Ot,[e(B,{variant:"outline",onClick:E,class:"text-center"},{default:n(()=>[...m[12]||(m[12]=[I(" View All >> ",-1)])]),_:1})])])])}}},At={__name:"DeviceConfigsViewPanel",props:{deviceId:Number},setup(o){const k=C("latest"),r=l=>{k.value=l};return(l,i)=>(a(),w("div",null,[e(X,{name:"fade",mode:"out-in"},{default:n(()=>[(a(),N(Je(k.value==="latest"?Gt:Tt),{deviceId:o.deviceId,onToggleView:r},null,40,["deviceId"]))]),_:1})]))}},qt={class:"relative flex items-center justify-between border-b"},Ut={class:"relative flex items-start p-2 pt-1 mb-1"},Kt={__name:"DeviceDetailsLeftNav",props:{selectedNav:String,deviceId:Number},emits:["selectLeftNavView","closeNav"],setup(o,{emit:k}){const r=o,l=C(null),i=C(null),d=C({}),p=rt(),_=C(p.commentCounters[r.deviceId]||0),c=k;Pe(()=>p.commentCounters[r.deviceId],(f,v)=>{_.value=f}),G(()=>{l.value=r.selectedNav,ve(()=>{const f=document.querySelector(`[data-nav='${r.selectedNav}']`);f&&(i.value=f,b())})});function u(f,v){l.value=f,i.value=v,b(),c("selectLeftNavView",f)}function b(){ve(()=>{if(i.value){const{offsetLeft:f,offsetWidth:v}=i.value;d.value={left:`${f}px`,width:`${v}px`}}})}function x(){c("closeNav")}return(f,v)=>{const E=h("Icon"),V=h("Button");return a(),w("div",qt,[s("div",Ut,[e(V,{class:Z(["h-8",l.value==="details"?"bg-rcgray-700 border":"","mr-2"]),variant:"ghost",onClick:v[0]||(v[0]=D=>u("details",D.target)),ref:"detailsButton","data-nav":"details"},{default:n(()=>[e(E,{icon:"ooui:view-details-ltr",class:"mr-2"}),v[3]||(v[3]=I(" Details ",-1))]),_:1},8,["class"]),e(V,{class:Z([[l.value==="comments"?"bg-rcgray-700 border":""],"h-8"]),variant:"ghost",onClick:v[1]||(v[1]=D=>u("comments",D.target)),"data-nav":"comments"},{default:n(()=>[e(E,{icon:"vaadin:comments-o",class:"mr-2"}),I(" Comments ("+$(_.value)+") ",1)]),_:1},8,["class"]),l.value?(a(),w("div",{key:0,class:"absolute bottom-0 h-0.5 bg-blue-500",style:ze(d.value)},null,4)):g("",!0)]),e(We,{class:"mr-2",onClose:v[2]||(v[2]=D=>x())})])}}},Yt={class:"relative flex items-center w-full border-b"},Ht={class:"flex justify-between w-full mb-0"},Qt={key:0,class:"gap-2 ml-auto mr-4 text-lg font-semibold tracking-tight group"},Jt={key:1,class:"gap-2 ml-auto mr-4 text-lg font-semibold tracking-tight group"},Wt={__name:"DeviceDetailsMainNav",props:{selectedNav:String},emits:["selectMainNavView","closeNav"],setup(o,{emit:k}){const r=C(null),l=C(null),i=C({}),d=ge(),p=o,_=k;G(()=>{const x=localStorage.getItem("DeviceDetailsMainNav");r.value=x||p.selectedNav,ve(()=>{const f=document.querySelector(`[data-nav='${r.value}']`);f&&(l.value=f,u())})});function c(x,f){r.value=x,l.value=f,u(),_("selectMainNavView",x),localStorage.setItem("DeviceDetailsMainNav",x)}function u(){ve(()=>{if(l.value){const{offsetLeft:x,offsetWidth:f}=l.value;i.value={left:`${x}px`,width:`${f}px`}}})}function b(){var x,f,v;(x=d.panelRef2)!=null&&x.isCollapsed?(f=d.panelRef2)==null||f.expand():(v=d.panelRef2)==null||v.collapse()}return Pe(()=>{var x;return(x=d.panelRef2)==null?void 0:x.isCollapsed},()=>{u()}),(x,f)=>{var V;const v=h("Icon"),E=h("Button");return a(),w("div",Yt,[e(Xe,{onOpenNav:f[0]||(f[0]=D=>b()),navPanelBtnState:(V=t(d).panelRef2)==null?void 0:V.isCollapsed},null,8,["navPanelBtnState"]),s("div",Ht,[s("div",null,[e(E,{class:Z(["h-8",r.value==="notifications"?"bg-rcgray-700 border":"","mr-2"]),variant:"ghost",onClick:f[1]||(f[1]=D=>c("notifications",D.target)),ref:"notificationsButton","data-nav":"notifications"},{default:n(()=>[e(v,{icon:"ooui:view-details-ltr",class:"mr-2"}),f[3]||(f[3]=I(" Notifications ",-1))]),_:1},8,["class"]),e(E,{class:Z([[r.value==="configs"?"bg-rcgray-700 border":""],"h-8"]),variant:"ghost",onClick:f[2]||(f[2]=D=>c("configs",D.target)),"data-nav":"configs"},{default:n(()=>[e(v,{icon:"vaadin:comments-o",class:"mr-2"}),f[4]||(f[4]=I(" Configs ",-1))]),_:1},8,["class"])]),s("div",null,[r.value==="notifications"?(a(),w("h3",Qt," Device Latest Events ")):g("",!0),r.value==="configs"?(a(),w("h3",Jt," Latest Configurations ")):g("",!0)]),r.value?(a(),w("div",{key:0,class:"absolute bottom-0 h-0.5 bg-blue-500",style:ze(i.value)},null,4)):g("",!0)])])}}},Xt={class:"flex justify-between space-x-4"},Zt={class:"space-y-1"},es={class:"text-sm font-semibold"},ts={class:"text-sm"},ss={class:"text-sm"},ns={class:"javascript"},os={class:"flex pt-2 items-between"},ls={class:"text-xs text-muted-foreground"},as={__name:"DeviceNotificationHoverCard",props:{notification:{type:Object,required:!0}},setup(o){const{copyItem:k,activeCopyIcon:r}=yt(),l=oe("formatters");return(i,d)=>{const p=h("Icon"),_=h("Button"),c=Ze("highlightjs");return a(),N(t(kt),null,{default:n(()=>[e(t(bt),{"as-child":""},{default:n(()=>[Ie(i.$slots,"default")]),_:3}),e(t($t),{class:"w-full",align:"start"},{default:n(()=>[s("div",Xt,[Ie(i.$slots,"leftIcon"),s("div",Zt,[s("h4",es,$(o.notification.log_name.charAt(0).toUpperCase()+o.notification.log_name.slice(1)),1),s("p",ts,$(o.notification.description),1),d[1]||(d[1]=s("p",{class:"pt-4 text-sm"},"Raw Data:",-1)),s("div",ss,[et((a(),w("pre",null,[s("code",ns,$(o.notification),1)])),[[c]])]),s("div",os,[e(p,{icon:"formkit:datetime",class:"w-4 h-4 mr-2 opacity-70"}),s("span",ls,"Event Date: "+$(t(l).formatTime(o.notification.created_at)),1),e(_,{class:"h-6 p-1 ml-auto",variant:"ghost",title:"copy raw data",onClick:d[0]||(d[0]=u=>t(k)(o.notification.id,o.notification))},{default:n(()=>[e(p,{icon:t(r)[o.notification.id]?"material-symbols:check-circle-outline":"material-symbols:content-copy-outline",class:Z(t(r)[o.notification.id]?"text-green-500":"")},null,8,["icon","class"])]),_:1})])])])]),_:3})]),_:3})}}},is={class:"p-2 overflow-none"},ds={key:0,class:"mt-4 space-y-2"},cs={key:1,class:"mt-6 space-y-4"},rs={class:"w-full"},us={class:"pl-6 border-l border-l-4 rounded-md border-l-rcgray-600"},fs={class:"flex justify-between"},ms={key:0,class:"py-0.5 flex w-fit bg-green-100 text-green-800 text-xs font-medium me-2 px-1.5 py-0.5 rounded-lg dark:bg-blue-900 dark:text-blue-100"},vs={class:"text-muted-foreground"},ps={class:"py-2 space-y-1 text-left"},gs={class:"text-sm text-white"},_s={class:"flex items-center justify-between"},ws={class:"text-muted-foreground"},xs={class:"flex items-center justify-end mt-4 space-x-2"},hs={__name:"DeviceLatestEventsPanel",props:{deviceId:Number},setup(o){const k=o,r=C([]),l=C(!1),i=oe("formatters");G(()=>{d()});function d(){l.value=!0,axios.get("/api/activitylogs/last5/"+parseInt(k.deviceId)).then(p=>{r.value=p.data,l.value=!1}).catch(p=>{console.log(p)})}return(p,_)=>{const c=h("Skeleton"),u=h("Icon"),b=h("Button");return a(),w("div",null,[s("div",is,[_[1]||(_[1]=s("div",{class:"flex flex-row items-center justify-start gap-2 pt-1"},[s("span",{class:"inline-flex flex-row items-center h-[24px] rounded-md px-1.5 gap-1 shadow-[inset_0_0_0_1px_rgb(69,71,74)] bg-[#313337]"},[s("span",{class:"flex-[0_1_auto] min-w-0 overflow-hidden text-ellipsis whitespace-nowrap inline-flex line-clamp-1"},"Last 5 Events")]),s("span",{class:"flex-[1_1_100%] bg-[#313337] flex flex-shrink-0 h-px w-full"})],-1)),l.value?(a(),w("div",ds,[e(c,{class:"w-1/2 h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"}),e(c,{class:"w-full h-4"})])):g("",!0),l.value?g("",!0):(a(),w("div",cs,[(a(!0),w(fe,null,me(r.value,(x,f)=>(a(),N(b,{class:"flex w-full h-full border bg-rcgray-800 items-left",key:f},{default:n(()=>[s("div",rs,[s("div",us,[s("div",fs,[x.log_name==="info"?(a(),w("span",ms,$(x.log_name),1)):g("",!0),s("span",vs,"Type: "+$(x.event_type),1)]),s("div",ps,[s("p",gs,$(x.description),1),s("div",_s,[s("p",ws,$(t(i).formatTime(x.created_at)),1),e(as,{notification:x},{default:n(()=>[e(b,{title:"View Raw Data",alt:"View Raw Data",variant:"outline",class:"h-4 px-1 text-sm text-muted-foreground"},{default:n(()=>[e(u,{icon:"lets-icons:view-duotone-line",class:"w-4 h-4"})]),_:1})]),_:1},8,["notification"])])])])])]),_:2},1024))),128))])),s("div",xs,[e(b,{variant:"outline",class:"text-center"},{default:n(()=>[..._[0]||(_[0]=[I(" View All >> ",-1)])]),_:1})])])])}}},ys={__name:"DeviceViewCommentsPanel",props:{deviceId:{type:Number,required:!0},deviceName:{type:String,required:!0}},setup(o){return(k,r)=>(a(),N(ut,{deviceId:o.deviceId,deviceName:o.deviceName,isDeviceCommentsPanelView:!0},null,8,["deviceId","deviceName"]))}},bs={class:"grid gap-0.5"},$s={key:0,class:"space-y-2"},ks={key:0,class:"grid gap-2 text-sm"},Ds={class:"grid gap-2"},Is={class:"flex items-center justify-between"},Cs={class:"flex items-center gap-1 text-muted-foreground"},Ss={class:"flex items-center gap-2"},Ns={class:"flex items-center justify-between"},Es={class:"flex items-center gap-1 text-muted-foreground"},Vs={class:"flex items-center gap-2"},Ls={class:"flex items-center justify-between"},Ts={class:"flex items-center gap-1 text-muted-foreground"},js={class:"flex items-center gap-2"},Bs={class:"flex items-center justify-between"},Ps={class:"flex items-center gap-1 text-muted-foreground"},zs={class:"flex items-center gap-2"},Rs={__name:"DeviceViewConfigStatusPanel",props:{isLoading:Boolean,deviceData:Object},emits:["refresh"],setup(o,{emit:k}){C({}),C({});const r=oe("formatters");return(l,i)=>{const d=h("Skeleton"),p=h("StatusGreenIcon"),_=h("StatusRedIcon"),c=h("StatusYellowIcon"),u=h("Icon");return a(),w("div",null,[e(t(he),{class:"overflow-hidden"},{default:n(()=>[e(t(_e),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:n(()=>[s("div",bs,[e(t(we),{class:"flex items-center gap-2 text-lg group"},{default:n(()=>[...i[0]||(i[0]=[I("Configuration Summary",-1)])]),_:1})])]),_:1}),e(t(xe),{class:"p-4 pt-0 text-sm"},{default:n(()=>[o.isLoading?(a(),w("div",$s,[e(d,{class:"w-1/2 h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"})])):g("",!0),e(X,{name:"fade"},{default:n(()=>[!o.isLoading&&o.deviceData?(a(),w("div",ks,[s("dl",Ds,[s("div",Is,[s("dt",Cs,[e(p),i[1]||(i[1]=I(" Good Configs ",-1))]),s("dd",Ss,$(o.deviceData.config_good_count),1)]),s("div",Ns,[s("dt",Es,[e(_),i[2]||(i[2]=I(" Failed Configs ",-1))]),s("dd",Vs,$(o.deviceData.config_bad_count),1)]),s("div",Ls,[s("dt",Ts,[e(c),i[3]||(i[3]=I(" Unknown Configs ",-1))]),s("dd",js,$(o.deviceData.config_unknown_count),1)]),s("div",Bs,[s("dt",Ps,[e(u,{icon:"formkit:datetime",class:"text-indigo-400"}),i[4]||(i[4]=I(" Last Download ",-1))]),s("dd",zs,$(t(r).formatTime(o.deviceData.last_config)),1)])])])):g("",!0)]),_:1})]),_:1})]),_:1})])}}},Ms={class:"grid gap-0.5"},Fs={key:0,class:"space-y-2"},Os={key:0,class:"grid gap-3"},Gs={class:"grid gap-3"},As={class:"flex items-center justify-between"},qs={class:"flex items-center gap-2"},Us={class:"flex items-center justify-between"},Ks={class:"flex items-center gap-2"},Ys={class:"flex items-center justify-between"},Hs={class:"flex items-center gap-2"},Qs={class:"flex items-center justify-between"},Js={class:"flex items-center gap-2"},Ws={class:"flex items-center justify-between"},Xs={class:"flex items-center gap-2"},Zs={class:"flex items-center justify-between"},en={class:"flex items-center gap-2"},tn={class:"flex items-center justify-between"},sn={class:"flex items-center gap-2"},nn={class:"flex items-center justify-between"},on={class:"flex items-center gap-2"},ln={class:"flex items-center justify-between"},an={class:"flex items-center gap-2"},dn={class:"flex items-center justify-between"},cn={class:"flex items-center gap-2"},rn={key:0,class:"flex items-center gap-2 text-xs text-muted-foreground"},un={__name:"DeviceViewDetailsPanel",props:{isLoading:Boolean,deviceData:Object},emits:["refresh"],setup(o,{emit:k}){C({}),C({});const r=oe("formatters");return(l,i)=>{const d=h("Skeleton"),p=h("Icon");return a(),w("div",null,[e(t(he),{class:"overflow-hidden"},{default:n(()=>[e(t(_e),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:n(()=>[s("div",Ms,[e(t(we),{class:"flex items-center gap-2 text-lg group"},{default:n(()=>[...i[0]||(i[0]=[I("Device Details",-1)])]),_:1})])]),_:1}),e(t(xe),{class:"p-4 pt-0 text-sm"},{default:n(()=>[o.isLoading?(a(),w("div",Fs,[e(d,{class:"w-1/2 h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"}),e(d,{class:"w-full h-4"})])):g("",!0),e(X,{name:"fade"},{default:n(()=>[!o.isLoading&&o.deviceData?(a(),w("div",Os,[s("dl",Gs,[s("div",As,[i[1]||(i[1]=s("dt",{class:"text-muted-foreground"},"Device ID",-1)),s("dd",qs,$(o.deviceData.id),1)]),s("div",Us,[i[2]||(i[2]=s("dt",{class:"text-muted-foreground"},"Name",-1)),s("dd",Ks,$(o.deviceData.device_name),1)]),s("div",Ys,[i[3]||(i[3]=s("dt",{class:"text-muted-foreground"},"IP Address",-1)),s("dd",Hs,$(o.deviceData.device_ip),1)]),s("div",Qs,[i[4]||(i[4]=s("dt",{class:"text-muted-foreground"},"Status",-1)),s("dd",Js,$(o.deviceData.status),1)]),s("div",Ws,[i[5]||(i[5]=s("dt",{class:"text-muted-foreground"},"Category",-1)),s("dd",Xs,$(o.deviceData.category[0].categoryName),1)]),s("div",Zs,[i[6]||(i[6]=s("dt",{class:"text-muted-foreground"},"Vendor",-1)),s("dd",en,$(o.deviceData.vendor[0].vendorName),1)]),s("div",tn,[i[7]||(i[7]=s("dt",{class:"text-muted-foreground"},"Model",-1)),s("dd",sn,$(o.deviceData.device_model),1)]),s("div",nn,[i[8]||(i[8]=s("dt",{class:"text-muted-foreground"},"Template",-1)),s("dd",on,$(o.deviceData.template[0].templateName),1)]),s("div",ln,[i[9]||(i[9]=s("dt",{class:"text-muted-foreground"},"Tags",-1)),s("dd",an,$(o.deviceData.tag[0].tagname),1)]),s("div",dn,[i[10]||(i[10]=s("dt",{class:"text-muted-foreground"},"Created",-1)),s("dd",cn,$(t(r).formatTime(o.deviceData.created_at)),1)])])])):g("",!0)]),_:1})]),_:1}),e(t(Dt),{class:"flex flex-row items-center px-4 py-3 border-t bg-muted/50"},{default:n(()=>[!o.isLoading&&o.deviceData?(a(),w("div",rn,[e(p,{icon:"formkit:datetime",class:"text-indigo-400"}),I(" Last Poll: "+$(o.deviceData.last_seen),1)])):g("",!0)]),_:1})]),_:1})])}}},fn={__name:"DeviceViewPaneDropdown",props:{showEditBtn:{type:Boolean,default:!0}},emits:["openDeviceEdit","onDelete","onPurge","openDeviceClone"],setup(o,{emit:k}){const r=k;function l(){r("onDelete")}function i(){r("openDeviceEdit")}function d(){r("openDeviceClone")}function p(){r("onPurge")}return(_,c)=>{const u=h("Icon"),b=h("Button");return a(),w("div",null,[e(t(Fe),null,{default:n(()=>[e(t(Re),{"as-child":""},{default:n(()=>[e(b,{variant:"ghost",class:"h-8 ml-2"},{default:n(()=>[e(u,{icon:"radix-icons:dots-vertical",class:""})]),_:1})]),_:1}),e(t(Me),{class:"w-56",align:"end",side:"bottom"},{default:n(()=>[o.showEditBtn?(a(),N(t(se),{key:0,class:"cursor-pointer hover:bg-rcgray-600",onClick:c[0]||(c[0]=x=>i())},{default:n(()=>[c[4]||(c[4]=s("span",null,"Edit Device",-1)),e(t(ne),null,{default:n(()=>[e(u,{icon:"fluent-color:text-edit-style-16"})]),_:1})]),_:1})):g("",!0),o.showEditBtn?(a(),N(t(se),{key:1,class:"cursor-pointer hover:bg-rcgray-600",onClick:c[1]||(c[1]=x=>d())},{default:n(()=>[c[5]||(c[5]=s("span",null,"Clone Device",-1)),e(t(ne),null,{default:n(()=>[e(u,{icon:"fa6-solid:clone"})]),_:1})]),_:1})):g("",!0),o.showEditBtn?(a(),N(t(se),{key:2,class:"cursor-pointer hover:bg-rcgray-600",onClick:c[2]||(c[2]=x=>p())},{default:n(()=>[c[6]||(c[6]=s("span",null,"Purge Failed Configs",-1)),e(t(ne),null,{default:n(()=>[e(u,{icon:"icon-park-twotone:delete-five"})]),_:1})]),_:1})):g("",!0),o.showEditBtn?(a(),N(t(Ue),{key:3})):g("",!0),e(t(se),{class:"cursor-pointer hover:bg-rcgray-600",onClick:c[3]||(c[3]=x=>l())},{default:n(()=>[c[7]||(c[7]=s("span",{class:"text-red-400"},"Delete",-1)),e(t(ne),null,{default:n(()=>[e(u,{icon:"flat-color-icons:full-trash"})]),_:1})]),_:1})]),_:1})]),_:1})])}}};function mn(o,k){const r=C(!1),l=C(null),i=C(null),d=tt(),p=C(!1),_=C("details"),c=C("notifications"),u=C(null),b=ge(),{copy:x}=Oe(),{toastSuccess:f,toastError:v}=ce(),E=de(),{openDialog:V}=E,D=C({id:o.editId,label:"",icon:"NetworkDeviceIcon",isFavorite:!1,route:"/device/view/"+o.editId});G(()=>{z(o.editId),m(),b.panelRef2=u.value,window.addEventListener("keydown",P=>{P.key==="Escape"&&T()}),l&&[...d.favorites].forEach(P=>{P.id===o.editId&&(D.value.isFavorite=!0)}),c.value=localStorage.getItem("DeviceDetailsMainNav")}),le(()=>{window.removeEventListener("keydown",P=>{P.key==="Escape"&&T()})});function m(){U.get("/api/app-dir-path").then(P=>{r.value=P.data})}function z(P){p.value=!0,U.get(`/api/devices/${P}`).then(L=>{l.value=L.data,p.value=!1})}function B(){l&&(D.value.id=l.value.id,D.value.label=l.value.device_name,D.value.route=`/device/view/${l.value.id}`,D.value.isFavorite=!D.value.isFavorite,d.toggleFavorite(D.value))}function S(P){P==="details"?_.value="details":P==="comments"?_.value="comments":_.value="details"}function q(P){P==="notifications"?c.value="notifications":P==="configs"?c.value="configs":c.value="notifications"}function j(){k("close")}function T(){j()}function F(P){try{x(P),f("Copied","Debug command copied to clipboard")}catch{v("Error","Failed to copy Debug command to clipboard")}}function A(){i.value="Downloading...",f("Download Queued","Download started for device "+l.value.device_name),U.post("/api/device/download-now",{device_id:l.value.id}).then(P=>{i.value="Queued...",f("Download Started","Download job for "+l.value.device_name+" was pushed to the queue."),K()}).catch(P=>{i.value="Queued...",v("Error","Failed to start download job for "+l.value.device_name),console.error("Error starting download job:",P)})}function K(){const P=setInterval(function(){U.get("/api/tracked-jobs/"+l.value.id).then(L=>{i.value=L.data.data.status}),i.value==="finished"&&(f("Download Finished","Download finished for device "+l.value.device_name),clearInterval(P),setTimeout(()=>{i.value=null},3e3))},2e3)}function R(){u!=null&&u.value.isCollapsed?u==null||u.value.expand():u==null||u.value.collapse()}return{addToFavorites:B,appDirPath:r,closeNav:R,copyDebug:F,deviceData:l,downloadNow:A,downloadStatus:i,favoriteItem:D,fetchDevice:z,isLoading:p,leftNavSelected:_,mainNavSelected:c,panelElement2:u,selectLeftNavView:S,selectMainNavView:q}}const vn={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},pn={class:"flex flex-row items-center justify-between h-12 gap-3 pl-4 pr-2 border-b"},gn={key:0,class:"flex items-center"},_n={class:"text-lg font-semibold text-blue-400 font-inter"},wn={class:"flex items-center"},xn={key:0,class:"text-muted-foreground",style:{"word-wrap":"normal"}},hn={key:2},yn={class:""},bn={key:0,class:"flex items-center justify-center",style:{height:"60vh"}},$n={__name:"DeviceViewPane",props:{editId:Number},emits:["close"],setup(o,{emit:k}){const r=k,l=o,{addToFavorites:i,appDirPath:d,closeNav:p,copyDebug:_,deviceData:c,downloadNow:u,downloadStatus:b,favoriteItem:x,fetchDevice:f,isLoading:v,leftNavSelected:E,mainNavSelected:V,panelElement2:D,selectLeftNavView:m,selectMainNavView:z}=mn(l,r),{handleSave:B,viewEditDialog:S,showConfirmDelete:q,deleteDevice:j,purgeDeviceConfigs:T,newDeviceModalKey:F}=ft(),A=C(!1);function K(){j(l.editId),r("close")}function R(){T(l.editId)}return(P,L)=>{const ae=h("StarUnselected"),re=h("StarSelected"),ee=h("Button"),ue=h("Icon"),Y=h("ResizablePanel"),y=h("ResizableHandle"),ie=h("ResizablePanelGroup");return a(),w("main",vn,[s("div",pn,[t(c)?(a(),w("div",gn,[s("span",_n,$(t(c).device_name),1),e(ee,{variant:"ghost",class:"h-8 px-2 py-1.5 h-7 ml-2",onClick:L[0]||(L[0]=O=>t(i)())},{default:n(()=>[t(x).isFavorite?g("",!0):(a(),N(ae,{key:0,class:"text-muted-foreground"})),t(x).isFavorite?(a(),N(re,{key:1,class:"text-muted-foreground"})):g("",!0)]),_:1})])):g("",!0),s("div",wn,[e(ee,{class:"h-8 ml-2",onClick:L[1]||(L[1]=O=>t(_)("cd "+t(d)+" && php artisan rconfig:download-device "+l.editId+" -d")),variant:"outline"},{default:n(()=>[e(ue,{icon:"lucide:code-xml",class:"mr-2"}),L[11]||(L[11]=I(" Copy Debug ",-1))]),_:1}),e(ee,{class:"h-8 ml-2",onClick:L[2]||(L[2]=O=>t(u)()),variant:"outline"},{default:n(()=>[e(Qe,{state:t(b)},null,8,["state"]),t(b)?(a(),w("span",xn,$(t(b)),1)):g("",!0),t(b)?g("",!0):(a(),N(ue,{key:1,icon:"catppuccin:folder-download-open",class:"mr-2"})),t(b)?g("",!0):(a(),w("span",hn,"Download Now"))]),_:1}),e(fn,{onOnPurge:L[3]||(L[3]=O=>R()),onOpenDeviceEdit:L[4]||(L[4]=O=>t(S)(o.editId)),onOpenDeviceClone:L[5]||(L[5]=O=>(t(S)(o.editId),A.value=!0)),onOnDelete:L[6]||(L[6]=O=>q.value=!0)})])]),s("div",yn,[e(ie,{direction:"horizontal",class:""},{default:n(()=>[e(Y,{"default-size":25,"max-size":30,"min-size":10,collapsible:"","collapsed-size":0,ref_key:"panelElement2",ref:D,class:"min-h-[100vh]"},{default:n(()=>[e(Kt,{onCloseNav:t(p),onSelectLeftNavView:t(m),selectedNav:t(E),deviceId:o.editId},null,8,["onCloseNav","onSelectLeftNavView","selectedNav","deviceId"]),t(E)==="details"?(a(),N(Rs,{key:0,class:"p-2 mt-2",isLoading:t(v),deviceData:t(c)},null,8,["isLoading","deviceData"])):g("",!0),t(E)==="details"?(a(),N(un,{key:1,class:"p-2",isLoading:t(v),deviceData:t(c)},null,8,["isLoading","deviceData"])):g("",!0),t(E)==="comments"?(a(),N(ys,{key:2,class:"p-2",deviceId:o.editId,deviceName:t(c).device_name},null,8,["deviceId","deviceName"])):g("",!0)]),_:1},512),e(y,{"with-handle":""}),e(Y,{class:"min-h-[100vh]"},{default:n(()=>[e(t(Ge),{class:"h-full border border-none rounded-md"},{default:n(()=>[t(v)?(a(),w("div",bn,[e(Ae,{class:"flex justify-center"})])):g("",!0),e(Wt,{class:"p-2",onSelectMainNavView:t(z),selectedNav:t(V)},null,8,["onSelectMainNavView","selectedNav"]),!t(v)&&t(V)==="notifications"?(a(),N(hs,{key:1,class:"p-2",style:{height:"60vh"},deviceId:o.editId},null,8,["deviceId"])):g("",!0),!t(v)&&t(V)==="configs"?(a(),N(At,{key:2,class:"p-2",deviceId:o.editId,style:{height:"60vh"}},null,8,["deviceId"])):g("",!0)]),_:1})]),_:1})]),_:1}),(a(),N(mt,{key:t(F),onClose:L[7]||(L[7]=O=>A.value=!1),onSave:L[8]||(L[8]=O=>{t(B)(),t(f)(o.editId)}),isClone:A.value,editId:o.editId},null,8,["isClone","editId"])),e(_t,{ids:[o.editId],showConfirmDelete:t(q),onClose:L[9]||(L[9]=O=>q.value=!1),onHandleDelete:L[10]||(L[10]=O=>K())},null,8,["ids","showConfirmDelete"])])])}}};function kn(o){const{toastError:k}=ce(),r=C([]),l=C("");function i(_){_.updateOptions({value:"Something went wrong - could not retrieve the configuration from the file system!"}),k("Error","Something went wrong - could not retrieve the configuration from the file system!")}function d(_,c){U.get("/api/configs/view-config/"+_).then(u=>{l.value=u.data.data.config_location,c.getModel().setValue(u.data.data.content)}).catch(u=>{console.error(u),c.updateOptions({value:"Something went wrong - could not retrieve the configuration from the file system!"}),k("Error","Something went wrong - could not retrieve the configuration from the file system!")})}function p(_,c){_.ctrlKey&&_.key==="Enter"&&c()}return G(()=>{window.addEventListener("keydown",_=>p(_,()=>saveDialog(o.configId,model,null,emit,()=>emit("close"))))}),le(()=>{window.removeEventListener("keydown",p)}),{errors:r,config_location:l,getDefaultEditorCode:i,showConfiguration:d,handleKeyDown:p}}const Dn={class:"p-2 overflow-none"},In={key:0,class:"mt-4 space-y-2"},Cn={key:1,class:"space-y-4"},Sn={class:"p-4 px-8"},Nn={class:"flex flex-col"},En={class:"flex items-center p-2"},Vn={class:"flex items-center gap-2 ml-auto"},Ln={__name:"ConfigViewMainPanel",props:{configId:Number},setup(o){const k=o;let r=null;const{checkDarkModeIsSet:l,checkLineNumbersIsSet:i,checkMiniMapIsSet:d,checkStickyScrollIsSet:p,copyItem:_,copyPath:c,download:u,initEditor:b,toggleEditorDarkMode:x,toggleEditorLineNumbers:f,toggleEditorMinimap:v}=Ke(Ye),{getDefaultEditorCode:E,showConfiguration:V,config_location:D}=kn(k),m=C(!1),z=C([]);G(()=>{B(),S()});function B(){l()&&z.value.push("dark"),i()&&z.value.push("lineNumbers"),d()&&z.value.push("minimap"),p()&&z.value.push("stickyscroll")}function S(){r=b("code-editor__code-pre","rconfig"),k.configId===0?E(r):V(k.configId,r)}return(q,j)=>{const T=h("Skeleton"),F=h("Icon"),A=h("Button"),K=h("Separator");return a(),w("div",null,[s("div",Dn,[m.value?(a(),w("div",In,[e(T,{class:"w-1/2 h-4"}),e(T,{class:"w-full h-4"}),e(T,{class:"w-full h-4"}),e(T,{class:"w-full h-4"}),e(T,{class:"w-full h-4"}),e(T,{class:"w-full h-4"}),e(T,{class:"w-full h-4"}),e(T,{class:"w-full h-4"}),e(T,{class:"w-full h-4"})])):g("",!0),m.value?g("",!0):(a(),w("div",Cn,[s("div",Sn,[s("div",Nn,[s("div",En,[j[7]||(j[7]=s("div",{class:"flex items-center gap-2"},null,-1)),s("div",null,[e(A,{variant:"ghost",onClick:j[0]||(j[0]=R=>t(c)(t(D))),title:"copy path"},{default:n(()=>[e(F,{icon:"lucide-lab:copy-file-path"})]),_:1}),e(A,{variant:"ghost",onClick:j[1]||(j[1]=R=>t(_)()),title:"copy content"},{default:n(()=>[e(F,{icon:"mdi:content-copy"})]),_:1}),e(A,{variant:"ghost",class:"ml-1",onClick:j[2]||(j[2]=R=>t(u)(t(D))),title:"download"},{default:n(()=>[e(F,{icon:"mingcute:download-fill"})]),_:1})]),e(K,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),s("div",Vn,[e(t(He),{modelValue:z.value,"onUpdate:modelValue":j[6]||(j[6]=R=>z.value=R),type:"multiple"},{default:n(()=>[e(t(W),{value:"dark",title:"Toggle bold",onClick:j[3]||(j[3]=R=>t(x)())},{default:n(()=>[e(F,{icon:"mdi:theme-light-dark",class:"w-4 h-4"})]),_:1}),e(t(W),{value:"lineNumbers",title:"Line Numbers",onClick:j[4]||(j[4]=R=>t(f)())},{default:n(()=>[e(F,{icon:"mingcute:numbers-09-sort-ascending-line",class:"w-4 h-4"})]),_:1}),e(t(W),{value:"minimap",title:"Minimap",onClick:j[5]||(j[5]=R=>t(v)())},{default:n(()=>[e(F,{icon:"tabler:map-2",class:"w-4 h-4"})]),_:1})]),_:1},8,["modelValue"])]),e(K,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),j[8]||(j[8]=s("span",null,"CONFIG",-1))]),e(K,{class:"relative w-full h-px shrink-0 bg-border"})]),j[9]||(j[9]=s("div",{class:"code-editor__code-pre",id:"code-editor__code-pre",style:{height:"calc(100vh - 300px)"}},null,-1))])]))])])}}},Tn={class:"grid gap-0.5 w-full"},jn={class:"flex justify-between"},Bn={key:0,class:"flex items-center gap-2 text-xs text-muted-foreground"},Pn={key:0,class:"space-y-2"},zn={key:0,class:"grid gap-3"},Rn={class:"grid gap-3"},Mn={class:"flex items-center justify-between"},Fn={class:"flex items-center gap-2"},On={class:"flex items-center justify-between"},Gn={class:"flex items-center gap-2"},An={class:"flex items-center justify-between"},qn={class:"flex items-center gap-2"},Un={class:"flex items-center justify-between"},Kn={class:"flex items-center gap-2"},Yn={class:"flex items-center justify-between"},Hn={class:"flex items-center gap-2"},Qn={class:"flex items-center justify-between"},Jn={class:"flex items-center gap-2"},Wn={class:"flex items-center justify-between"},Xn={class:"flex items-center gap-2"},Zn={class:"flex items-center justify-between"},eo={class:"flex items-center gap-2"},to={__name:"ConfigSummaryPanel",props:{isLoading:Boolean,configData:Object},setup(o){const k=oe("formatters");return(r,l)=>{const i=h("StatusGreenIcon"),d=h("StatusRedIcon"),p=h("StatusYellowIcon"),_=h("Skeleton");return a(),w("div",null,[e(t(he),{class:"overflow-hidden"},{default:n(()=>[e(t(_e),{class:"flex flex-row items-start p-4 bg-muted/50"},{default:n(()=>[s("div",Tn,[e(t(we),{class:"gap-2 text-lg group"},{default:n(()=>[s("div",jn,[l[1]||(l[1]=s("div",null,"Config Details",-1)),!o.isLoading&&o.configData?(a(),w("div",Bn,[l[0]||(l[0]=I(" Download status: ",-1)),o.configData.download_status===1?(a(),N(i,{key:0,class:"mr-2"})):o.configData.download_status===0?(a(),N(d,{key:1,class:"mr-2"})):o.configData.download_status===2?(a(),N(p,{key:2,class:"mr-2"})):g("",!0)])):g("",!0)])]),_:1})])]),_:1}),e(t(xe),{class:"p-4 pt-0 text-sm"},{default:n(()=>[o.isLoading?(a(),w("div",Pn,[e(_,{class:"w-1/2 h-4"}),e(_,{class:"w-full h-4"}),e(_,{class:"w-full h-4"}),e(_,{class:"w-full h-4"}),e(_,{class:"w-full h-4"}),e(_,{class:"w-full h-4"}),e(_,{class:"w-full h-4"}),e(_,{class:"w-full h-4"}),e(_,{class:"w-full h-4"})])):g("",!0),e(X,{name:"fade"},{default:n(()=>[!o.isLoading&&o.configData?(a(),w("div",zn,[s("dl",Rn,[s("div",Mn,[l[2]||(l[2]=s("dt",{class:"text-muted-foreground"},"Device ID",-1)),s("dd",Fn,$(o.configData.id),1)]),s("div",On,[l[3]||(l[3]=s("dt",{class:"text-muted-foreground"},"Device Name",-1)),s("dd",Gn,$(o.configData.device_name),1)]),s("div",An,[l[4]||(l[4]=s("dt",{class:"text-muted-foreground"},"Command Group",-1)),s("dd",qn,$(o.configData.device_category),1)]),s("div",Un,[l[5]||(l[5]=s("dt",{class:"text-muted-foreground"},"Command",-1)),s("dd",Kn,$(o.configData.command),1)]),s("div",Yn,[l[6]||(l[6]=s("dt",{class:"text-muted-foreground"},"Filename",-1)),s("dd",Hn,$(o.configData.config_filename),1)]),s("div",Qn,[l[7]||(l[7]=s("dt",{class:"text-muted-foreground"},"Filesize",-1)),s("dd",Jn,$(t(k).formatFileSize(o.configData.config_filesize)),1)]),s("div",Wn,[l[8]||(l[8]=s("dt",{class:"text-muted-foreground"},"Duration",-1)),s("dd",Xn,$(t(k).formatDuration(o.configData.start_time,o.configData.end_time)),1)]),s("div",Zn,[l[9]||(l[9]=s("dt",{class:"text-muted-foreground"},"Created",-1)),s("dd",eo,$(t(k).formatTime(o.configData.created_at)),1)])])])):g("",!0)]),_:1})]),_:1})]),_:1})])}}},so={__name:"ConfigViewPaneDropdown",props:{editId:{type:Number,required:!0}},emits:["onDelete","onPurge"],setup(o,{emit:k}){const r=k,{copy:l}=Oe(),{toastSuccess:i}=ce(),d=o;function p(){r("onDelete")}function _(){l(d.editId),i("Success","Copied to clipboard")}return(c,u)=>{const b=h("Icon"),x=h("Button");return a(),w("div",null,[e(t(Fe),null,{default:n(()=>[e(t(Re),{"as-child":""},{default:n(()=>[e(x,{variant:"ghost",class:"h-8 ml-2"},{default:n(()=>[e(b,{icon:"radix-icons:dots-vertical",class:""})]),_:1})]),_:1}),e(t(Me),{class:"w-56",align:"end",side:"bottom"},{default:n(()=>[e(t(se),{class:"cursor-pointer hover:bg-rcgray-600",onClick:u[0]||(u[0]=f=>_())},{default:n(()=>[u[2]||(u[2]=s("span",null,"Copy ID",-1)),e(t(ne),null,{default:n(()=>[e(b,{icon:"icon-park-twotone:delete-five"})]),_:1})]),_:1}),e(t(Ue)),e(t(se),{class:"cursor-pointer hover:bg-rcgray-600",onClick:u[1]||(u[1]=f=>p())},{default:n(()=>[u[3]||(u[3]=s("span",{class:"text-red-400"},"Delete",-1)),e(t(ne),null,{default:n(()=>[e(b,{icon:"flat-color-icons:full-trash"})]),_:1})]),_:1})]),_:1})]),_:1})])}}};function no(o,k){const r=C(null),l=C(!1),i=C(null),d=ge(),{toastError:p}=ce();G(()=>{_(),d.panelRef2=i.value,window.addEventListener("keydown",b=>{b.key==="Escape"&&u()})}),le(()=>{window.removeEventListener("keydown",b=>{b.key==="Escape"&&u()})});function _(){U.get(`/api/configs/${o.configId}`).then(b=>{r.value=b.data,l.value=!1}).catch(b=>{console.error(b),p("Error","Something went wrong - could not retrieve the configuration from the file system!")})}function c(){k("close")}function u(){c()}return{configData:r,isLoading:l,panelElement2:i}}const oo={class:"flex flex-col flex-1 gap-2 dark:bg-rcgray-900"},lo={class:"flex flex-row items-center justify-between h-12 gap-3 pl-4 pr-2 border-b"},ao={key:0,class:"flex items-center"},io={class:"text-lg font-semibold text-blue-400 font-inter"},co={class:"flex items-center"},ro={class:""},uo={key:0,class:"flex items-center justify-center",style:{height:"60vh"}},fo={__name:"ConfigViewPane",props:{configId:Number},emits:["close"],setup(o,{emit:k}){const r=k,l=o,{configData:i,isLoading:d,panelElement2:p}=no(l,r),{deleteConfig:_}=ht(l);function c(){_(l.configId),r("close")}return(u,b)=>{const x=h("ResizablePanel"),f=h("ResizableHandle"),v=h("ResizablePanelGroup");return a(),w("main",oo,[s("div",lo,[t(i)?(a(),w("div",ao,[s("span",io,$(t(i).config_filename),1)])):g("",!0),s("div",co,[e(so,{editId:o.configId,onOnDelete:b[0]||(b[0]=E=>c())},null,8,["editId"])])]),s("div",ro,[e(v,{direction:"horizontal",class:""},{default:n(()=>[e(x,{"default-size":25,"max-size":30,"min-size":10,collapsible:"","collapsed-size":0,ref_key:"panelElement2",ref:p,class:"min-h-[100vh]"},{default:n(()=>[e(to,{class:"p-2 mt-2",isLoading:t(d),configData:t(i)},null,8,["isLoading","configData"])]),_:1},512),e(f,{"with-handle":""}),e(x,{class:"min-h-[100vh]"},{default:n(()=>[e(t(Ge),{class:"h-full border border-none rounded-md"},{default:n(()=>[t(d)?(a(),w("div",uo,[e(Ae,{class:"flex justify-center"})])):g("",!0),t(i)?(a(),N(Ln,{key:1,class:"p-2",configId:o.configId,style:{height:"60vh"}},null,8,["configId"])):g("",!0)]),_:1})]),_:1})]),_:1})])])}}},mo={class:"grid gap-2 py-4"},vo={class:"grid items-center grid-cols-4 gap-4"},po={class:"grid items-center grid-cols-4 gap-4"},go={key:0,class:"flex flex-col w-full space-y-2 text-sm text-muted-foreground"},_o={class:"pl-2 ml-auto"},wo={class:"rc-kdb-class2"},xo={__name:"TemplateImportDialog",props:{editId:Number},emits:["setTemplateCode"],setup(o,{emit:k}){const{importingTemplates:r,getTemplateRepoFolders:l,vendorTemplateOptions:i,vendorOptionSelected:d,showFileOptions:p,listedFiles:_,fileOptionSelected:c,selectedTemplateCode:u}=qe(),b=de(),{closeDialog:x,isDialogOpen:f}=b,v=k;C([]),C({});function E(D){D.ctrlKey&&D.key==="Enter"&&V()}G(()=>{l(),window.addEventListener("keydown",E)}),le(()=>{window.removeEventListener("keydown",E)});function V(){v("setTemplateCode",u)}return(D,m)=>{const z=h("Button"),B=h("Icon");return a(),N(t(dt),{open:t(f)("DialogTemplateImport")},{default:n(()=>[e(t(st),{"as-child":""}),e(t(nt),{class:"w-full",onEscapeKeyDown:m[4]||(m[4]=S=>t(x)("DialogTemplateImport")),onPointerDownOutside:m[5]||(m[5]=S=>t(x)("DialogTemplateImport")),onCloseClicked:m[6]||(m[6]=S=>t(x)("DialogTemplateImport"))},{default:n(()=>[e(t(ot),null,{default:n(()=>[e(t(lt),null,{default:n(()=>[...m[7]||(m[7]=[I("Select from imported templates",-1)])]),_:1}),e(t(at),null,{default:n(()=>[...m[8]||(m[8]=[I("Choose a vendor and select a template to import. You may edit the template after importing.",-1)])]),_:1})]),_:1}),s("div",mo,[s("div",vo,[e(t(Ne),{modelValue:t(d),"onUpdate:modelValue":m[0]||(m[0]=S=>Ce(d)?d.value=S:null)},{default:n(()=>[e(t(Ee),{className:"w-[280px] flex h-9 items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start w-[180px]"},{default:n(()=>[e(t(Ve),{placeholder:"Select a template vendor"})]),_:1}),e(t(Le),{position:"popper"},{default:n(()=>[e(t(Te),null,{default:n(()=>[e(Qe,{state:t(r),class:"items-center"},null,8,["state"]),(a(!0),w(fe,null,me(t(i).data,S=>(a(),N(t(je),{key:S.name,value:S.path.toString()},{default:n(()=>[I($(S.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])]),s("div",po,[t(p)?(a(),N(t(Ne),{key:0,modelValue:t(c),"onUpdate:modelValue":m[1]||(m[1]=S=>Ce(c)?c.value=S:null)},{default:n(()=>[e(t(Ee),{className:"w-[280px] flex h-9 items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:truncate text-start w-[180px]"},{default:n(()=>[e(t(Ve),{placeholder:"Select a template file"})]),_:1}),e(t(Le),{position:"popper"},{default:n(()=>[e(t(Te),null,{default:n(()=>[(a(!0),w(fe,null,me(t(_).data,S=>(a(),N(t(je),{key:S.name,value:S.path.toString()},{default:n(()=>[I($(S.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1})]),_:1},8,["modelValue"])):g("",!0)])]),t(c)?(a(),w("div",go," CLick apply to load this template into the editor. ")):g("",!0),e(t(it),null,{default:n(()=>[e(z,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:m[2]||(m[2]=S=>t(x)("DialogTemplateImport")),size:"sm"},{default:n(()=>[...m[9]||(m[9]=[I(" Cancel ",-1),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),t(u)?(a(),N(z,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:m[3]||(m[3]=S=>V()),variant:"primary"},{default:n(()=>[m[11]||(m[11]=I(" Apply ",-1)),s("div",_o,[s("kbd",wo,[m[10]||(m[10]=I(" CtrlÂ  ",-1)),e(B,{icon:"uil:enter",class:""})])])]),_:1})):g("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function ho(o,k){const{toastSuccess:r,toastError:l}=ce(),i=C([]),d=C(""),p=C({code:"",templateName:"",description:""});function _(f){U.get("/api/get-default-template").then(v=>{d.value=v.data,f.setValue(v.data)}).catch(v=>{f.updateOptions({value:"Something went wrong - could not retrieve the default template from the file system!"}),l("Error","Something went wrong - could not retrieve the default template from the file system!")})}function c(f,v,E){U.get("/api/templates/"+f).then(V=>{E.fileName=V.data.fileName,d.value=V.data.code,v.getModel().setValue(V.data.code)}).catch(V=>{v.updateOptions({value:"Something went wrong - could not retrieve the template from the file system!"}),l("Error","Something went wrong - could not retrieve the template from the file system!")})}function u(f,v,E,V,D){v.value.code=E.getValue();let m=f>0?`/${f}`:"",z=f>0?"patch":"post";U[z]("/api/templates"+m,{templateName:v.value.templateName,description:v.value.description,code:v.value.code}).then(B=>{V("save",B.data),r("Template saved","The template has been saved successfully."),D()}).catch(B=>{i.value=B.response.data.errors})}function b(f,v){f.ctrlKey&&f.key==="Enter"&&v()}function x(f){f>0&&U.get(`/api/templates/${f}`).then(v=>{p.value=v.data})}return G(()=>{x(o.editId),window.addEventListener("keydown",f=>b(f,()=>u(o.editId,p,null,k,()=>k("close"))))}),le(()=>{window.removeEventListener("keydown",b)}),{errors:i,code:d,model:p,getDefaultTemplate:_,showTemplate:c,saveDialog:u,handleKeyDown:b,fetchTemplateData:x}}const yo={class:"p-4 px-8"},bo={class:"grid gap-2 py-4"},$o={class:"grid items-center grid-cols-4 gap-4"},ko={class:"grid items-center grid-cols-4 gap-4"},Do={key:0,class:"grid items-center grid-cols-4 gap-4"},Io={key:0,class:"grid items-center grid-cols-4 col-start-4 gap-1"},Co={key:0,class:"col-span-1 col-start-2 text-sm text-red-400"},So={key:1,class:"col-span-1 col-start-2 text-sm text-red-400"},No={key:2,class:"col-span-1 col-start-2 text-sm text-red-400"},Eo={class:"flex flex-col"},Vo={class:"flex items-center p-2"},Lo={class:"flex items-center gap-2 ml-auto"},To={class:"flex justify-end pt-4"},jo={class:"pl-2 ml-auto"},Bo={class:"rc-kdb-class2"},Po={class:"pl-2 ml-auto"},zo={class:"rc-kdb-class2"},Ro={__name:"TemplateAddEditPane",props:{editId:Number},emits:["save","close"],setup(o,{emit:k}){const r=o;let l=null;const i=k,{checkDarkModeIsSet:d,checkLineNumbersIsSet:p,checkMiniMapIsSet:_,checkStickyScrollIsSet:c,copyItem:u,download:b,initEditor:x,toggleEditorDarkMode:f,toggleEditorLineNumbers:v,toggleEditorMinimap:E,toggleStickyScroll:V}=Ke(Ye),{openImportDialog:D,getTemplateRepoFolders:m,hasVendorTemplateOptions:z}=qe(),{errors:B,model:S,getDefaultTemplate:q,showTemplate:j,saveDialog:T}=ho(r,i),F=de(),{isDialogOpen:A,closeDialog:K}=F,R=C([]);G(()=>{P(),m(),L(),window.addEventListener("keydown",Y=>{Y.key==="Escape"&&re()})}),le(()=>{window.removeEventListener("keydown",Y=>{Y.key==="Escape"&&re()})});function P(){d()&&R.value.push("dark"),p()&&R.value.push("lineNumbers"),_()&&R.value.push("minimap"),c()&&R.value.push("stickyscroll")}function L(){l=x("code-editor__code-pre","yaml"),r.editId===0?q(l):j(r.editId,l,S)}function ae(){i("close")}function re(){ae()}function ee(){T(r.editId,S,l,i,ae)}function ue(Y){l.getModel().setValue(Y.value),K("DialogTemplateImport")}return(Y,y)=>{const ie=h("Label"),O=h("Input"),H=h("Icon"),te=h("Button"),pe=h("Separator");return a(),w("div",yo,[s("div",bo,[s("div",$o,[e(ie,{for:"templateName",class:"text-right"},{default:n(()=>[...y[13]||(y[13]=[I(" Template Name ",-1),s("span",{class:"text-red-600"},"*",-1)])]),_:1}),e(O,{modelValue:t(S).templateName,"onUpdate:modelValue":y[0]||(y[0]=M=>t(S).templateName=M),id:"templateName",autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),s("div",ko,[e(ie,{for:"description",class:"text-right"},{default:n(()=>[...y[14]||(y[14]=[I(" Description ",-1)])]),_:1}),e(O,{modelValue:t(S).description,"onUpdate:modelValue":y[1]||(y[1]=M=>t(S).description=M),id:"description",autocomplete:"off",class:"col-span-3"},null,8,["modelValue"])]),t(z)?(a(),w("div",Do,[e(ie,{for:"description",class:"text-right"},{default:n(()=>[...y[15]||(y[15]=[I(" Imported Templates ",-1)])]),_:1}),e(te,{type:"close",onClick:y[2]||(y[2]=M=>t(D)()),class:"px-2 py-1 text-sm hover:bg-gray-700",variant:"outline"},{default:n(()=>[e(H,{icon:"mdi:github",class:"mr-2"}),y[16]||(y[16]=I(" Choose an Imported Templates ",-1))]),_:1})])):g("",!0)]),t(B)?(a(),w("div",Io,[t(B).templateName?(a(),w("span",Co,$(t(B).templateName[0]),1)):g("",!0),t(B).description?(a(),w("span",So,$(t(B).description[0]),1)):g("",!0),t(B).code?(a(),w("span",No,$(t(B).code[0]),1)):g("",!0)])):g("",!0),s("div",Eo,[s("div",Vo,[y[17]||(y[17]=s("div",{class:"flex items-center gap-2"},null,-1)),s("div",null,[e(te,{variant:"ghost",onClick:t(u),title:"copyItem"},{default:n(()=>[e(H,{icon:"mdi:content-copy"})]),_:1},8,["onClick"]),e(te,{variant:"ghost",class:"ml-1",onClick:y[3]||(y[3]=M=>t(b)(t(S).fileName)),title:"download"},{default:n(()=>[e(H,{icon:"mingcute:download-fill"})]),_:1})]),e(pe,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),s("div",Lo,[e(t(He),{modelValue:R.value,"onUpdate:modelValue":y[8]||(y[8]=M=>R.value=M),type:"multiple"},{default:n(()=>[e(t(W),{value:"dark",title:"Toggle bold",onClick:y[4]||(y[4]=M=>t(f)())},{default:n(()=>[e(H,{icon:"mdi:theme-light-dark",class:"w-4 h-4"})]),_:1}),e(t(W),{value:"lineNumbers",title:"Line Numbers",onClick:y[5]||(y[5]=M=>t(v)())},{default:n(()=>[e(H,{icon:"mingcute:numbers-09-sort-ascending-line",class:"w-4 h-4"})]),_:1}),e(t(W),{value:"minimap",title:"Minimap",onClick:y[6]||(y[6]=M=>t(E)())},{default:n(()=>[e(H,{icon:"tabler:map-2",class:"w-4 h-4"})]),_:1}),e(t(W),{value:"stickyscroll",title:"Sticky Scroll",onClick:y[7]||(y[7]=M=>t(V)())},{default:n(()=>[e(H,{icon:"clarity:scroll-outline-alerted",class:"w-4 h-4"})]),_:1})]),_:1},8,["modelValue"])]),e(pe,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),y[18]||(y[18]=s("span",null,"YAML",-1))]),e(pe,{class:"relative w-full h-px shrink-0 bg-border"})]),y[24]||(y[24]=s("div",{class:"code-editor__code-pre",id:"code-editor__code-pre",style:{height:"calc(100vh - 450px)"}},null,-1)),s("div",To,[e(te,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:y[9]||(y[9]=M=>ae()),size:"sm"},{default:n(()=>[...y[19]||(y[19]=[I(" Cancel ",-1),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),r.editId===0?(a(),N(te,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:y[10]||(y[10]=M=>ee()),variant:"primary"},{default:n(()=>[y[21]||(y[21]=I(" Save ",-1)),s("div",jo,[s("kbd",Bo,[y[20]||(y[20]=I(" CtrlÂ  ",-1)),e(H,{icon:"uil:enter",class:""})])])]),_:1})):g("",!0),r.editId>0?(a(),N(te,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:y[11]||(y[11]=M=>ee()),variant:"primary"},{default:n(()=>[y[23]||(y[23]=I(" Update ",-1)),s("div",Po,[s("kbd",zo,[y[22]||(y[22]=I(" CtrlÂ  ",-1)),e(H,{icon:"uil:enter",class:""})])])]),_:1})):g("",!0)]),t(A)("DialogTemplateImport")?(a(),N(xo,{key:1,onSetTemplateCode:y[12]||(y[12]=M=>ue(M))})):g("",!0)])}}},Mo={class:"w-screen h-[calc(100vh-72px)] border",style:{display:"flex","flex-direction":"column","background-color":"rgb(27, 29, 33)","border-radius":"16px",margin:"4px 8px 8px","max-width":"calc(100% - 16px)",overflow:"hidden"}},Fo={class:"flex justify-between p-2 border-b"},Oo={key:0,class:"items-center content-center text-muted-foreground"},Go={key:1,class:"items-center content-center text-muted-foreground"},Ao={key:2,class:"items-center content-center text-muted-foreground"},sl={__name:"ContentPanel",props:{},emits:["close"],setup(o,{emit:k}){const r=ct(),l=Be(),i=k,d=C(0),p=C(null),_=C(null);G(()=>{d.value=parseInt(r.params.id,10),p.value=r.name,_.value=r.query.ref||null});function c(){p.value=null,l.push({name:"devices"})}function u(){p.value=null,l.push({name:"templates"})}function b(){if(p.value=null,_.value){const f=r.query.refId?{name:r.query.ref,params:{id:r.query.refId}}:{name:r.query.ref};l.push(f)}else l.push({name:"configs"})}function x(){p.value==="devicesview"&&c(),p.value==="templatesview"&&u(),p.value==="configsview"&&b(),i("close")}return(f,v)=>{const E=h("Icon"),V=h("Button");return a(),w("div",Mo,[s("div",Fo,[e(V,{onClick:v[0]||(v[0]=D=>x()),size:"sm",variant:"outline",class:"gap-1 border-none hover:bg-rcgray-800"},{default:n(()=>[e(E,{icon:"mingcute:close-line",class:"hover:animate-pulse"})]),_:1}),p.value==="devicesview"?(a(),w("h2",Oo," Device ID: "+$(d.value===0?"":d.value),1)):g("",!0),p.value==="templatesview"?(a(),w("h2",Go,$(d.value===0?"Add Template":"Edit Template")+" "+$(d.value===0?"":"("+d.value+")"),1)):g("",!0),p.value==="configsview"?(a(),w("h2",Ao,$(d.value===0?"Add Config":"View Config")+" "+$(d.value===0?"":"("+d.value+")"),1)):g("",!0),v[4]||(v[4]=s("div",{class:"flex justify-end"},null,-1))]),e(X,{name:"fade"},{default:n(()=>[p.value==="templatesview"?(a(),N(Ro,{key:0,editId:d.value,onClose:v[1]||(v[1]=D=>u())},null,8,["editId"])):g("",!0)]),_:1}),e(X,{name:"fade"},{default:n(()=>[p.value==="devicesview"?(a(),N($n,{key:0,editId:d.value,onClose:v[2]||(v[2]=D=>c())},null,8,["editId"])):g("",!0)]),_:1}),e(X,{name:"fade"},{default:n(()=>[p.value==="configsview"?(a(),N(fo,{key:0,configId:d.value,onClose:v[3]||(v[3]=D=>b())},null,8,["configId"])):g("",!0)]),_:1})])}}};export{sl as default};
