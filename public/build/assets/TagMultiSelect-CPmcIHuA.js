import{i as Q,x as y,z as L,r as k,e as j,o as r,u as e,S as A,w as l,a,b as t,t as S,n as T,U as O,Q as q,c,K as P,J as z,V as Y,M as W,W as X,D as J,E as M,Y as le,$ as re,a0 as ne,a1 as de,a2 as ie,s as H,d as E,a5 as ue,a6 as ce,a9 as me,g as ge,y as Z,ab as K,aa as ee,p as pe,j as be,k as fe,m as ye}from"./app-Bm01Br6Y.js";import{i as ve,j as xe,k as _e,l as Ce}from"./pageSettings-C1c6wXqH.js";import{u as te}from"./useMultiSelect-D43vwZkT.js";import{X as U}from"./HoverCardTrigger-DU03WMyK.js";import{C as he}from"./cloud-alert-Bdv58UbD.js";const ke={class:"py-1"},we={class:"grid grid-cols-3 gap-2 mt-4 place-items-center"},$e=["onClick"],Se=Q({__name:"BadgeColorSelector",props:{modelValue:String},emits:["update:modelValue"],setup(C,{emit:B}){const D=B,w=C,p=y({}),v=[{label:"Lime",bgClass:"bg-lime-400 text-lime-900 border-lime-300"},{label:"Yellow",bgClass:"bg-yellow-400 text-yellow-900 border-yellow-300"},{label:"Teal",bgClass:"bg-teal-400 text-teal-900 border-teal-300"},{label:"Sky",bgClass:"bg-sky-400 text-sky-900 border-sky-300"},{label:"Pink",bgClass:"bg-pink-400 text-pink-900 border-pink-300"},{label:"Emerald",bgClass:"bg-emerald-400 text-emerald-900 border-emerald-300"},{label:"Orange",bgClass:"bg-orange-400 text-orange-900 border-orange-300"},{label:"Amber",bgClass:"bg-amber-400 text-amber-900 border-amber-300"},{label:"Fuchsia",bgClass:"bg-fuchsia-400 text-fuchsia-900 border-fuchsia-300"},{label:"Rose",bgClass:"bg-rose-400 text-rose-900 border-rose-300"},{label:"Violet",bgClass:"bg-violet-500 text-violet-100 border-violet-600"},{label:"Indigo",bgClass:"bg-indigo-500 text-indigo-100 border-indigo-600"},{label:"Blue",bgClass:"bg-blue-500 text-blue-100 border-blue-600"},{label:"Green",bgClass:"bg-green-500 text-green-100 border-green-600"},{label:"Purple",bgClass:"bg-purple-500 text-purple-100 border-purple-600"},{label:"Stone",bgClass:"bg-stone-600 text-stone-200 border-stone-700"},{label:"Red",bgClass:"bg-red-600 text-red-100 border-red-700"},{label:"Fuchsia Dark",bgClass:"bg-fuchsia-700 text-fuchsia-200 border-fuchsia-800"},{label:"Violet Dark",bgClass:"bg-violet-700 text-violet-200 border-violet-800"},{label:"Teal Dark",bgClass:"bg-teal-700 text-teal-200 border-teal-800"}];function x(m){p.value=m,D("update:modelValue",m.bgClass)}return L(()=>w.modelValue,m=>{const b=v.find(n=>n.bgClass===m);b?p.value=b:p.value={}},{immediate:!0}),(m,b)=>{const n=k("Button"),g=k("Separator");return r(),j(e(A),null,{default:l(()=>[b[0]||(b[0]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(e(O),{class:"col-span-3"},{default:l(()=>[t(n,{variant:"ghost",class:"flex flex-wrap items-start justify-start w-full p-1 pl-2 whitespace-normal border h-fit"},{default:l(()=>[a("div",{class:T(["h-6 px-2 border-2 border-transparent rounded-full cursor-pointer w-fit",Object.keys(p.value).length===0?"bg-gray-600 text-gray-200 border-gray-500":p.value.bgClass])},S(Object.keys(p.value).length===0?"Select color":p.value.label),3)]),_:1})]),_:1}),t(e(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[t(g),t(e(q),{class:"h-64"},{default:l(()=>[a("div",ke,[a("div",we,[(r(),c(z,null,P(v,($,_)=>a("div",{key:_,class:T(["cursor-pointer w-6 h-6 rounded-full border-2",$.bgClass,p.value.value===_?"ring-2 ring-offset-2 ring-black":"border-transparent"]),onClick:i=>x($)},null,10,$e)),64))])])]),_:1})]),_:1})]),_:1})}}}),De={class:"flex items-center"},Ie={class:"ml-2"},Ve={class:"grid gap-2 p-4"},Ne={class:"grid items-center grid-cols-4 gap-2"},Ge={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Ee={class:"grid items-center grid-cols-4 gap-2"},Be={class:"grid items-center grid-cols-4 gap-4"},ze={class:"pl-2 ml-auto"},Te={class:"rc-kdb-class2"},je={class:"pl-2 ml-auto"},Me={class:"rc-kdb-class2"},Fe={__name:"CommandGroupAddEditDialog",props:{editId:Number},emits:["save"],setup(C,{emit:B}){const{toastSuccess:D}=W(),w=X(),{openDialog:p,closeDialog:v,isDialogOpen:x}=w,m=B;y([]);const b=y([]),n=y({categoryName:"",categoryDescription:"",badgeColor:""}),g=C;function $(i){i.ctrlKey&&i.key==="Enter"&&_()}J(()=>{g.editId>0&&M.get(`/api/categories/${g.editId}`).then(i=>{n.value=i.data}),window.addEventListener("keydown",$)}),le(()=>{window.removeEventListener("keydown",$)});function _(){let i=g.editId>0?`/${g.editId}`:"",s=g.editId>0?"patch":"post";M[s]("/api/categories"+i,n.value).then(f=>{m("save",f.data),D("Command Group created","The tag has been created successfully."),v("DialogNewCommandGroups")}).catch(f=>{b.value=f.response.data.errors})}return(i,s)=>{const f=k("RcIcon"),I=k("Label"),d=k("Input"),o=k("Button");return r(),j(e(ce),{open:e(x)("DialogNewCommandGroups")},{default:l(()=>[t(e(re),{"as-child":""}),t(e(ne),{class:"p-0 sm:max-w-fit",onEscapeKeyDown:s[4]||(s[4]=V=>e(v)("DialogNewCommandGroups")),onPointerDownOutside:s[5]||(s[5]=V=>e(v)("DialogNewCommandGroups")),onCloseClicked:s[6]||(s[6]=V=>e(v)("DialogNewCommandGroups"))},{default:l(()=>{var V,F;return[t(e(de),{class:"rc-dialog-header"},{default:l(()=>[t(e(ie),{class:"text-sm text-rcgray-200"},{default:l(()=>[a("div",De,[t(f,{name:"command-group"}),a("span",Ie,S(C.editId>0?"Edit":"Add")+" Command Group "+S(C.editId>0?"(ID: "+C.editId+")":""),1)])]),_:1})]),_:1}),a("div",Ve,[a("div",Ne,[t(I,{for:"categoryName",class:"text-right"},{default:l(()=>[...s[7]||(s[7]=[E(" Name ",-1),a("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(d,{modelValue:n.value.categoryName,"onUpdate:modelValue":s[0]||(s[0]=N=>n.value.categoryName=N),id:"categoryName",class:"col-span-3"},null,8,["modelValue"]),(V=b.value)!=null&&V.categoryName?(r(),c("span",Ge,S((F=b.value)==null?void 0:F.categoryName[0]),1)):H("",!0)]),a("div",Ee,[t(I,{for:"categoryDescription",class:"text-right"},{default:l(()=>[...s[8]||(s[8]=[E(" Description ",-1)])]),_:1}),t(d,{modelValue:n.value.categoryDescription,"onUpdate:modelValue":s[1]||(s[1]=N=>n.value.categoryDescription=N),id:"categoryDescription",class:"col-span-3"},null,8,["modelValue"])]),a("div",Be,[t(I,{for:"badgeColor",class:"text-right"},{default:l(()=>[...s[9]||(s[9]=[E(" Badge Color ",-1)])]),_:1}),t(Se,{modelValue:n.value.badgeColor,"onUpdate:modelValue":s[2]||(s[2]=N=>n.value.badgeColor=N)},null,8,["modelValue"])])]),t(e(ue),{class:"rc-dialog-footer bg-rcgray-800"},{default:l(()=>[t(o,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[3]||(s[3]=N=>e(v)("DialogNewCommandGroups")),size:"sm"},{default:l(()=>[...s[10]||(s[10]=[E(" Close ",-1),a("div",{class:"pl-2 ml-auto"},[a("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),g.editId===0?(r(),j(o,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:_,variant:"primary"},{default:l(()=>[s[12]||(s[12]=E(" Save ",-1)),a("div",ze,[a("kbd",Te,[s[11]||(s[11]=E(" Ctrl  ",-1)),t(f,{name:"enter",class:"ml-1"})])])]),_:1})):(r(),j(o,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:_,variant:"primary"},{default:l(()=>[s[14]||(s[14]=E(" Update ",-1)),a("div",je,[a("kbd",Me,[s[13]||(s[13]=E(" Ctrl  ",-1)),t(f,{name:"enter",class:"ml-1"})])])]),_:1}))]),_:1})]}),_:1})]),_:1},8,["open"])}}};function Pe(){const C=y(1),B=ve(),D=y(B.get("useCommandGroups","perPage",10)),w=y("-id"),p=y(""),v=y({}),x=X(),m=y(0),b=y(!1),n=y(1),g=y(1),$=y([]),_=y(!1),{openDialog:i}=x,{toastSuccess:s,toastError:f}=W(),{reload:I}=_e(o),{toggleSort:d}=xe(w,o,"useCommandGroups");async function o(h={}){b.value=!0;try{const G=await M.get("/api/categories",{params:{page:C.value,perPage:D.value,sort:w.value,...v.value}});$.value=G.data,n.value=G.data.last_page}catch(G){console.error("Error fetching categories:",G),f("Error","Failed to fetch categories.")}finally{b.value=!1}}const V=h=>{m.value=0,g.value=Math.random(),i("DialogNewCommandGroups")};function F(h){m.value=h,g.value=Math.random(),i("DialogNewCommandGroups")}const N=async h=>{try{await M.delete(`/api/categories/${h}`),o(),s("CommandGroups Deleted","The Command Group has been deleted successfully.")}catch(G){G.status===422?f("Error",G.response.data.message):(console.error("Error deleting Command:",G),f("Error","Failed to delete Command."))}},u=async h=>{try{await M.post("/api/categories/delete-many",{ids:h}),o(),s("CommandGroups Deleted","The command groups have been deleted successfully."),_.value=!1,Ce.emit("deleteManyCommandGroupsSuccess")}catch(G){G.status===422?f("Error",G.response.data.message):(console.error("Error deleting Commands:",G),f("Error","Failed to delete Commands.")),_.value=!1}},R=h=>{m.value=h,g.value=Math.random(),i("DialogNewCommandGroups")},se=()=>{o(),g.value=Math.random()};function ae(h){h.altKey&&h.key==="n"&&(h.preventDefault(),i("DialogNewCommandGroups"))}const oe=me(()=>{v.value["filter[categoryName]"]=p.value,C.value=1,o()},500);return L(C,()=>{o()}),L(p,()=>{oe()}),L(D,h=>{B.set("useCommandGroups","perPage",D.value),o()}),{reload:I,categories:$,isLoading:b,currentPage:C,perPage:D,lastPage:n,editId:m,newCommandGroupsModalKey:g,searchTerm:p,openDialog:i,fetchCommandGroups:o,createCommandGroup:V,updateCommandGroup:F,deleteCommandGroup:N,deleteManyCommandGroups:u,handleSave:se,handleKeyDown:ae,viewEditDialog:R,toggleSort:d,sortParam:w,showConfirmDelete:_}}const Le={key:0},Re={key:0},Ke={class:"relative items-center w-full"},Ue={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Ae={class:"py-1"},Oe=["onClick"],qe={class:"flex items-center justify-between"},Ye={"data-size":"20"},Je=["onClick"],Qe={class:"flex items-center justify-between"},We={"data-size":"20"},Xe={class:"p-1 border-5"},gt=Q({__name:"CategoryMultiSelect",props:{modelValue:{type:[Array,Object],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select command groups"}},emits:["update:modelValue"],setup(C,{emit:B}){const D=B,{newCommandGroupsModalKey:w,handleSave:p,viewEditDialog:v}=Pe(),x=y([]),m=y(!0),b=C,{selectedItems:n,searchTerm:g,filteredItems:$,selectItem:_,deleteItem:i}=te({items:x,modelValue:b.modelValue,singleSelect:b.singleSelect,displayField:"categoryName",searchFields:["categoryName"],emit:D}),s=ge(()=>{const I=$.value.filter(o=>o.command.length>0),d=$.value.filter(o=>o.command.length===0);return{withCommands:I,withoutCommands:d}});J(()=>{f()}),L(w,()=>{f()});function f(){m.value=!0,M.get("/api/categories/list").then(I=>{x.value=I.data.data,m.value=!1})}return(I,d)=>{const o=k("RcIcon"),V=k("Button"),F=k("Input"),N=k("Separator");return r(),j(e(A),null,{default:l(()=>[d[7]||(d[7]=a("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(e(O),{class:"col-span-3"},{default:l(()=>[t(V,{variant:"ghost",class:T(["flex items-center justify-start w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700",e(n).length===0?" text-rcgray-400":""]),style:Z(e(n).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:l(()=>[m.value?(r(),c("span",Le,"Loading command groups...")):(r(),c(z,{key:1},[t(o,{name:"command-group",class:"mx-2"}),e(n).length===0?(r(),c("span",Re,S(b.placeholder),1)):b.singleSelect&&e(n).length>0?(r(),c("span",{key:1,class:T([e(n)[0].badgeColor?e(n)[0].badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium px-2.5 py-0.5 rounded-xl border bg-muted"])},[E(S(e(n)[0].categoryName)+" ",1),t(e(U),{size:"16",class:"ml-1 cursor-pointer hover:text-primary",onClick:d[0]||(d[0]=K(u=>e(i)(e(n)[0].id),["stop"]))})],2)):(r(!0),c(z,{key:2},P(e(n),u=>(r(),c("span",{key:u.id,class:"relative my-1 group"},[a("span",{class:T([u.badgeColor?u.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[E(S(u.categoryName)+" ",1),t(e(U),{size:"16",class:"ml-1 cursor-pointer hover:text-white",onClick:K(R=>e(i)(u.id),["stop"])},null,8,["onClick"])],2)]))),128))],64))]),_:1},8,["class","style"])]),_:1}),t(e(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[a("div",Ke,[t(F,{id:"search",type:"text",modelValue:e(g),"onUpdate:modelValue":d[1]||(d[1]=u=>ee(g)?g.value=u:null),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",Ue,[t(o,{name:"search"})])]),t(N),t(e(q),{class:"h-64"},{default:l(()=>[a("div",Ae,[m.value?(r(),j(o,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(r(),c(z,{key:1},[(r(!0),c(z,null,P(s.value.withCommands,u=>(r(),c("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:R=>e(_)(u)},[a("div",qe,[a("span",{"data-size":"20",class:T(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",u.badgeColor?u.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[a("span",Ye,S(u.categoryName),1)],2)])],8,Oe))),128)),s.value.withoutCommands.length>0?(r(),c(z,{key:0},[t(N,{class:"my-2"}),d[5]||(d[5]=a("div",{class:"px-2 py-1 text-xs text-muted-foreground font-medium"}," No commands assigned ",-1)),(r(!0),c(z,null,P(s.value.withoutCommands,u=>(r(),c("div",{key:u.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:R=>e(_)(u)},[a("div",Qe,[a("span",{"data-size":"20",class:T(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",u.badgeColor?u.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[a("span",We,S(u.categoryName),1)],2),t(e(pe),null,{default:l(()=>[t(e(be),null,{default:l(()=>[t(e(fe),{"as-child":""},{default:l(()=>[t(e(he),{size:"14",class:"mr-4 text-yellow-300 cursor-default"})]),_:1}),t(e(ye),{class:"text-white bg-rcgray-800 border border-blue-500/30"},{default:l(()=>[...d[4]||(d[4]=[a("p",null,"This command group does not have any commands assigned to it",-1)])]),_:1})]),_:1})]),_:1})])],8,Je))),128))],64)):H("",!0)],64))])]),_:1}),t(N),a("div",Xe,[t(V,{variant:"ghost",onClick:d[2]||(d[2]=u=>e(v)(0)),class:"flex items-center justify-start w-full p-1"},{default:l(()=>[t(o,{name:"plus",class:"w-8"}),d[6]||(d[6]=a("div",{class:"rc-text-xs-muted ml-1"},"Create new record",-1))]),_:1})])]),_:1}),(r(),j(Fe,{onSave:d[3]||(d[3]=u=>e(p)()),key:e(w),editId:0}))]),_:1})}}}),He={key:0},Ze={key:0},et={key:1,class:"flex items-center text-xs font-medium px-2.5 py-0.5 rounded-xl border bg-muted"},tt={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},st={class:"relative items-center w-full"},at={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ot={class:"py-1"},lt=["onClick"],rt={"data-size":"20"},nt={class:"p-1 border-5"},pt={__name:"TagMultiSelect",props:{modelValue:{type:[Array,String],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select tags"}},emits:["update:modelValue"],setup(C,{emit:B}){const D=B,w=y([]),p=y(!0),v=C,{selectedItems:x,searchTerm:m,filteredItems:b,selectItem:n,deleteItem:g}=te({items:w,modelValue:v.modelValue,singleSelect:v.singleSelect,displayField:"tagname",searchFields:["tagname"],emit:D});J(()=>{$()});function $(){p.value=!0,M.get("/api/tags/?perPage=10000").then(_=>{w.value=_.data.data,p.value=!1})}return(_,i)=>{const s=k("RcIcon"),f=k("Button"),I=k("Input"),d=k("Separator");return r(),j(e(A),null,{default:l(()=>[t(e(O),{class:"col-span-3"},{default:l(()=>[t(f,{variant:"ghost",class:T(["flex items-center justify-start w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700",e(x).length===0?" text-rcgray-400":""]),style:Z(e(x).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:l(()=>[p.value?(r(),c("span",He,"Loading tags...")):(r(),c(z,{key:1},[t(s,{name:"tag",class:"mx-2"}),e(x).length===0?(r(),c("span",Ze,S(v.placeholder),1)):v.singleSelect&&e(x).length>0?(r(),c("span",et,[E(S(e(x)[0].tagname)+" ",1),t(e(U),{size:"16",class:"ml-1 cursor-pointer hover:text-primary",onClick:i[0]||(i[0]=K(o=>e(g)(e(x).id),["stop"]))})])):(r(!0),c(z,{key:2},P(e(x),o=>(r(),c("span",{key:o.id,class:"relative my-1 group"},[a("span",tt,[E(S(o.tagname)+" ",1),t(e(U),{size:"16",class:"ml-1 cursor-pointer hover:text-white",onClick:K(V=>e(g)(o.id),["stop"])},null,8,["onClick"])])]))),128))],64))]),_:1},8,["class","style"])]),_:1}),t(e(Y),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:l(()=>[a("div",st,[t(I,{id:"search",type:"text",modelValue:e(m),"onUpdate:modelValue":i[1]||(i[1]=o=>ee(m)?m.value=o:null),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),a("span",at,[t(s,{name:"search"})])]),t(d),t(e(q),{class:"h-64"},{default:l(()=>[a("div",ot,[p.value?(r(),j(s,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(r(!0),c(z,{key:1},P(e(b),o=>(r(),c("div",{key:o.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:V=>e(n)(o)},[a("span",{"data-size":"20",class:T(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",o.badgeColor?o.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[a("span",rt,S(o.tagname),1)],2)],8,lt))),128))])]),_:1}),t(d),a("div",nt,[t(f,{variant:"ghost",class:"justify-start w-full p-1"},{default:l(()=>[t(s,{name:"plus",class:"w-8"}),i[2]||(i[2]=a("div",{class:"rc-text-xs-muted ml-1"},"Create new record",-1))]),_:1})])]),_:1})]),_:1})}}};export{gt as _,pt as a,Fe as b,Pe as u};
