import{au as Ae,a as j,ab as Me,r as u,b as de,ak as Z,A as H,s as ge,c as M,d as S,o as p,e as o,k as s,w as i,f as e,a6 as re,G as R,t as N,z as L,j as T,a7 as ye,F as O,W as Q,$ as Te,X as Pe,Y as je,Z as Le,as as xe,a2 as G,a0 as oe,B as le,T as B,v as ee,am as ae,q as Y,h as A,x as te,y as se,u as J,J as W,K as ne,L as ce,M as ue,N as me,O as ve,R as pe,S as fe,ag as ze,ah as Ue,ai as Be,aj as Fe,U as he}from"./app-xn2RtsP0.js";import{w as Ke}from"./useRowSelection-Dw9uXHYU.js";import{d as be,_ as Oe,e as qe}from"./TagMultiSelect.vue_vue_type_script_setup_true_lang-AsgG5FDG.js";import{u as Re,a as He,b as _e}from"./useCredentials-BdI0W9p-.js";import{e as we}from"./eventBus-CGRXT3Tn.js";const Xe=Ae("comments",{state:()=>({commentCounters:{},initializedDevices:{}}),actions:{async initializeCommentsForDevice(c){if(!this.initializedDevices[c])try{const _=(await j.get(`/api/device-comments/${c}`)).data;this.commentCounters[c]=_.length,this.initializedDevices[c]=!0}catch(D){console.error(`Failed to load comments for device ${c}:`,D)}},incrementCounter(c){this.commentCounters[c]||(this.commentCounters[c]=0),this.commentCounters[c]++},decrementCounter(c){this.commentCounters[c]&&this.commentCounters[c]--}},persist:{storage:localStorage,paths:["commentCounters","initializedDevices"]}});function Ye(c,D){const _=Me(),b=Xe(),{incrementCounter:V,decrementCounter:l}=b,{openSheet:n,closeSheet:f,isSheetOpen:$}=_,g=u([]),h=u(!1),m=de(),E=Z("formatters"),d=u(!0),a=u(!1),v=u(1);H(()=>{c.deviceId!=0&&b.initializeCommentsForDevice(c.deviceId),($("DeviceCommentSheet")||c.isDeviceCommentsPanelView)&&(d.value&&t(),a.value&&w())});function t(){g.value=[],h.value=!0,j.get(`/api/device-comments/${c.deviceId}`).then(z=>{g.value=z.data,h.value=!1}).catch(z=>{console.error(z),h.value=!1})}function w(){g.value=[],h.value=!0,j.get(`/api/device-closed-comments/${c.deviceId}`).then(z=>{g.value=z.data,h.value=!1}).catch(z=>{console.error(z),h.value=!1})}function r(z){f("DeviceCommentSheet"),m.push({name:"device",params:{id:z}})}function y(){g.value.unshift({user:{name:"New User"},created_at:new Date().toISOString(),comment:"",is_open:!0,isEditable:!0})}function x(z){v.value++,j.post("/api/device/comments",{comment:z,device_id:c.deviceId}).then(P=>{D("commentsaved"),t(),V(c.deviceId)}).catch(P=>{console.error(P)})}function C(z){j.get(`/api/device/comments/${z}/close`).then(P=>{D("commentsaved"),t(),l(c.deviceId)}).catch(P=>{console.error(P)})}function k(z){j.delete(`/api/device/comments/${z}`).then(P=>{D("commentsaved"),t(),l(c.deviceId)}).catch(P=>{console.error(P)})}function F(){d.value=!d.value,a.value=!a.value,d.value&&t(),a.value&&w()}return{changeView:F,addComment:y,closeSheet:f,comments:g,formatters:E,isLoading:h,isSheetOpen:$,saveComment:x,viewDevice:r,closeComment:C,deleteComment:k,activeCommentsView:d,closedCommentsView:a,newCommentKey:v}}const Ge={},Je={class:"flex flex-col items-center pt-48 text-sm text-center text-muted-foreground"};function We(c,D){const _=M("Icon");return p(),S("div",Je,[o(_,{icon:"fluent-color:chat-bubbles-question-20",class:"mb-2 text-4xl"}),D[0]||(D[0]=s("span",null,"No Comments, yet.",-1))])}const Ze=ge(Ge,[["render",We]]),Qe={"data-visible":"true",class:"opacity-100 absolute top-1.5 right-1.5"},et={class:"flex flex-row items-center p-0.5 bg-rcgray-900 rounded-lg shadow-inner border",style:{"box-shadow":"rgb(49, 51, 55) 0px 0px 0px 0px"}},tt={"data-is-small-ghost":"false",class:"inline-flex items-center justify-center"},st={__name:"CommentsListMenu",props:{},emits:["resolveComment","deleteComment"],setup(c,{emit:D}){const _=D;u(!1);function b(){_("resolveComment")}function V(){_("deleteComment")}return(l,n)=>{const f=M("Icon");return p(),S("div",Qe,[s("div",et,[o(e(re),{onClick:n[0]||(n[0]=$=>b()),variant:"ghost","aria-label":"Resolve comment",title:"Resolve comment","data-state":"closed",class:"flex items-center justify-center h-6 px-2 cursor-pointer"},{default:i(()=>[s("div",tt,[o(f,{icon:"teenyicons:tick-circle-outline",class:"text-gray-500 hover:text-green-500"})])]),_:1}),o(e(re),{onClick:n[1]||(n[1]=$=>V()),variant:"ghost","aria-label":"Delete",title:"Delete","data-state":"closed",class:"h-6 px-2 cursor-pointer"},{default:i(()=>[o(f,{icon:"iconamoon:trash",class:"text-red-500"})]),_:1})])])}}},ot={class:"relative p-3 transition-colors border border-gray-700 shadow-inner cursor-pointer rounded-xl bg-rcgray-800 hover:bg-rcgray-900 group",style:{"border-color":"rgb(49, 51, 55)"}},lt={class:"flex flex-col items-stretch justify-start gap-2 group"},at={class:"relative flex flex-col gap-1"},nt={class:"flex flex-row items-start justify-between gap-1.5 h-6 mb-[-1]"},it={class:"flex flex-row items-center gap-1.5"},rt={class:"relative inline-flex items-center justify-center w-4 h-4 overflow-hidden rounded-full"},dt={class:"flex items-center justify-center w-full h-full bg-blue-700 text-blue-100 font-semibold text-[10px] uppercase"},ct={class:"flex flex-row items-baseline justify-start min-w-0 gap-1"},ut={class:"text-sm font-semibold text-white truncate",style:{color:"rgb(238, 239, 241)"}},mt={class:"text-xs text-gray-400 truncate"},vt={"data-indent":"true",class:"flex pl-[22px]"},pt={class:"flex flex-1 flex-col items-stretch justify-start gap-1.5 min-w-0"},ft={class:"min-w-0"},_t={class:"flex flex-wrap text-sm font-medium text-white break-words truncate","data-expanded":"false",style:{color:"rgb(238, 239, 241)"}},gt={"aria-autocomplete":"none","aria-readonly":"true",contenteditable:"false",role:"textbox",spellcheck:"true",class:"break-words whitespace-pre-wrap select-text"},yt={dir:"ltr"},xt={class:"hidden group-hover:block"},ht={"data-visible":"true",class:"absolute opacity-100 top-3 right-3"},bt={__name:"CommentsList",props:{comments:{type:Array,required:!0}},emits:["resolveComment","deleteComment"],setup(c,{emit:D}){const _=D,b=Z("formatters");function V(n){_("resolveComment",n)}function l(n){_("deleteComment",n)}return(n,f)=>{const $=M("Icon");return p(!0),S(O,null,R(c.comments,g=>(p(),S("div",null,[s("div",ot,[s("div",lt,[s("div",at,[s("div",nt,[s("div",it,[s("span",rt,[s("span",dt,N(e(b).getFirstLetterCapitalized(g.user.name)),1)]),s("div",ct,[s("div",ut,N(g.user.name),1),s("div",mt,N(e(b).timeFrom(g.created_at)),1)])])]),s("div",vt,[s("div",pt,[s("div",ft,[s("div",_t,[s("div",null,[s("div",gt,[s("p",yt,[s("span",null,N(g.comment),1)])])])])]),f[0]||(f[0]=s("div",null,null,-1))])])])]),o(ye,{name:"fade"},{default:i(()=>[s("div",xt,[g.is_open?(p(),L(st,{key:0,onResolveComment:h=>V(g.id),onDeleteComment:h=>l(g.id)},null,8,["onResolveComment","onDeleteComment"])):T("",!0)])]),_:2},1024),s("div",ht,[g.is_open?T("",!0):(p(),L($,{key:0,icon:"teenyicons:tick-circle-outline",class:"text-green-500 opacity-50"}))])])]))),256)}}},wt={style:{transform:"translateY(0px)"}},Ct=["data-state"],$t={class:"max-h-[25vh] min-h-0 flex flex-col"},Dt={dir:"ltr",class:"relative flex flex-col w-full h-full overflow-hidden",style:{position:"relative","--radix-scroll-area-corner-width":"0px","--radix-scroll-area-corner-height":"0px"}},kt={"data-radix-scroll-area-viewport":"",class:"flex flex-col w-full h-full flex-auto min-h-0 max-h-[400px] p-[12px_12px_0_0]",style:{overflow:"hidden scroll"}},Vt={"data-radix-scroll-area-content":""},It={class:"flex flex-row items-start justify-start gap-2 pb-1 pl-[14px]"},St={class:"relative inline-flex items-center justify-center w-4 h-4 overflow-hidden rounded-full"},Et={class:"flex items-center justify-center w-full h-full bg-blue-700 text-blue-100 font-semibold text-[10px] uppercase"},Nt={class:"flex flex-col flex-1 min-w-0"},At={class:"relative font-sans tracking-tight font-medium leading-5 text-sm text-[#eef0f1] [font-feature-settings:'liga','calt']"},Mt={key:0,class:"absolute top-0 left-0 font-sans text-sm font-medium leading-5 tracking-tight text-gray-500 pointer-events-none select-none"},Tt={class:"flex flex-none flex-row items-center justify-between gap-2 p-[4px_8px_8px_12px]"},Pt={class:"flex flex-row items-center justify-start gap-2"},jt={type:"button","aria-label":"Mention",class:""},Lt={"data-is-small-ghost":"true",class:""},zt={key:0,type:"button",class:"relative flex shrink-0 grow-0 items-center justify-center opacity-40 cursor-default gap-1.5 bg-[#266df0] p-[6px_10px] rounded-[9px] shadow-[inset_0_0_0_1px_rgba(244,245,246,0.1)]"},Ut={__name:"NewCommentCard",props:{},emits:["submitComment"],setup(c,{emit:D}){const _=D,b=Z("formatters"),V=Z("username"),l=u("default"),n=u(!0),f=u("");function $(){l.value="focus-within"}function g(){l.value="default"}function h(E){const d=E.target.textContent.trim();f.value=d,n.value=d===""}function m(){f.value.trim()!==""&&_("submitComment",f.value.trim())}return(E,d)=>{const a=M("Icon");return p(),S("div",wt,[s("div",{tabindex:"0",onClick:$,onFocusout:g,class:"mt-4 new-comment-border","aria-disabled":"false","data-state":l.value},[s("div",$t,[s("div",Dt,[s("div",kt,[s("div",Vt,[d[3]||(d[3]=s("div",{"aria-hidden":"true",class:"w-full"},null,-1)),s("div",It,[s("span",St,[s("span",Et,N(e(b).getFirstLetterCapitalized(e(V))),1)]),s("div",Nt,[s("div",At,[s("div",{class:"outline-none",contenteditable:"true",role:"textbox",spellcheck:"false",style:{"user-select":"text","white-space":"pre-wrap","word-break":"break-word"},"data-lexical-editor":"true",onInput:h,"data-ms-editor":"true"},[...d[2]||(d[2]=[s("p",null,[s("br")],-1)])],32),n.value?(p(),S("div",Mt," Add comment... ")):T("",!0)])])]),d[4]||(d[4]=s("div",{"aria-hidden":"true",class:"w-full"},null,-1))])])]),d[7]||(d[7]=s("div",{"data-visible":"false","data-position":"bottom","aria-hidden":"true",class:"w-full h-px flex-none bg-[rgba(244,245,246,0.04)] transition-opacity duration-[140ms] opacity-1 data-[visible='false']:opacity-0"},null,-1)),s("div",Tt,[s("div",Pt,[s("button",jt,[s("div",Lt,[o(a,{icon:"meteor-icons:at",class:"text-sm text-muted-foreground hover:text-white"})])])]),l.value==="default"?(p(),S("button",zt,[...d[5]||(d[5]=[s("div",{class:"inline-block overflow-hidden text-sm font-medium leading-5 tracking-tight align-bottom text-ellipsis whitespace-nowrap text-gray-50"},"Comment",-1)])])):T("",!0),l.value==="focus-within"?(p(),S("button",{key:1,onMousedown:d[0]||(d[0]=Q(()=>{},["prevent"])),type:"button",onClick:d[1]||(d[1]=v=>m()),class:"relative flex shrink-0 grow-0 items-center justify-center opacity-100 cursor-pointer gap-1.5 bg-[#266df0] p-[6px_10px] rounded-[9px] shadow-[inset_0_0_0_1px_rgba(244,245,246,0.1)] transition-colors transition-shadow"},[...d[6]||(d[6]=[s("div",{class:"inline-block overflow-hidden text-sm font-medium leading-5 tracking-tight align-bottom text-ellipsis whitespace-nowrap text-gray-50"},"Comment",-1)])],32)):T("",!0)])])],40,Ct)])}}},Bt=ge(Ut,[["__scopeId","data-v-e3b60231"]]),Ft={class:"mt-4 mr-3 space-y-4"},Kt={class:"flex items-center justify-between ml-1 text-sm"},Ot={class:"cursor-pointer"},qt={key:1,class:"space-y-4"},To={__name:"CommentsMainPanel",props:{deviceId:{type:Number,required:!0},deviceName:{type:String,required:!0},isDeviceCommentsPanelView:{type:Boolean,required:!1,default:!1}},emits:["commentsaved"],setup(c,{emit:D}){const _=D,b=c,{changeView:V,comments:l,isLoading:n,saveComment:f,closeComment:$,deleteComment:g,activeCommentsView:h,newCommentKey:m}=Ye(b,_);return(E,d)=>{const a=M("Icon"),v=M("Button"),t=M("Separator");return p(),L(e(G),{class:"h-[90vh]"},{default:i(()=>[s("div",Ft,[s("div",Kt,[s("span",null,"All "+N(e(h)?"Open":"Closed")+" Comments",1),o(e(Te),null,{default:i(()=>[o(e(Pe),{"as-child":""},{default:i(()=>[o(v,{variant:"ghost"},{default:i(()=>[o(a,{icon:"mage:filter"})]),_:1})]),_:1}),o(e(je),{side:"bottom",align:"end"},{default:i(()=>[o(e(Ke),null,{default:i(()=>[o(e(Le),{onClick:d[0]||(d[0]=w=>e(V)())},{default:i(()=>[s("span",Ot,"Show "+N(e(h)?"resolved":"open")+" comments",1)]),_:1})]),_:1})]),_:1})]),_:1})]),(p(),L(Bt,{key:e(m),class:"mt-2",onSubmitComment:d[1]||(d[1]=w=>e(f)(w))})),o(t),e(n)?(p(),L(xe,{key:0,class:"mt-4"})):T("",!0),e(n)?T("",!0):(p(),S("div",qt,[e(l).length>0?(p(),L(bt,{key:0,onResolveComment:d[2]||(d[2]=w=>e($)(w)),onDeleteComment:d[3]||(d[3]=w=>e(g)(w)),comments:e(l)},null,8,["comments"])):T("",!0),e(l).length===0?(p(),L(Ze,{key:1})):T("",!0)]))])]),_:1})}}},Rt={class:"relative items-center w-full"},Ht={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Xt={class:"py-1"},Yt=["onClick"],Gt={"data-size":"20"},Jt={class:"p-1 border-5"},Wt=oe({__name:"CredentialsMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c,{emit:D}){const _=D,b=u([]);u([]);const V=u(!1),l=u(""),n=u([]),{createCred:f,newCredModalKey:$,handleSave:g}=Re(),h=c,m=le(()=>b.value.filter(v=>v.cred_name.toLowerCase().includes(l.value.toLowerCase())&&!n.value.some(t=>t.id===v.id)));H(()=>{a(),h.modelValue[0]!=null?n.value=h.modelValue:n.value=[]}),B(()=>h.modelValue,v=>{n.value=v}),B($,()=>{a()});function E(v){h.singleSelect?n.value=[v]:n.value.push(v),V.value=!1,l.value="",_("update:modelValue",n.value)}function d(v){const t=n.value.findIndex(w=>w.cred_name===v);t!==-1&&n.value.splice(t,1),_("update:modelValue",n.value)}function a(){j.get("/api/device-credentials/?perPage=10000").then(v=>{b.value=v.data.data})}return(v,t)=>{const w=M("Icon"),r=M("Button"),y=M("Input"),x=M("Separator");return p(),L(e(se),null,{default:i(()=>[t[3]||(t[3]=s("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),o(e(ee),{class:"col-span-3"},{default:i(()=>[o(r,{variant:"ghost",class:Y(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",n.value.length===0?"text-muted-foreground":" "]),style:ae(n.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:i(()=>[A(N(n.value&&n.value.length===0?"Select credentials":"")+" ",1),(p(!0),S(O,null,R(n.value,C=>(p(),S("span",{key:C.id,class:"relative my-1 group"},[s("span",{class:Y([C.badgeColor?C.badgeColor:"bg-gray-600 text-gray-200 border-gray-500","flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"])},[A(N(C.cred_name)+" ",1),o(w,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:Q(k=>d(C.cred_name),["stop"])},null,8,["onClick"])],2)]))),128))]),_:1},8,["class","style"])]),_:1}),o(e(te),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:i(()=>[s("div",Rt,[o(y,{id:"search",type:"text",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=C=>l.value=C),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),s("span",Ht,[o(w,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),o(x),o(e(G),{class:"h-64"},{default:i(()=>[s("div",Xt,[(p(!0),S(O,null,R(m.value,C=>(p(),S("div",{key:C.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:k=>E(C)},[s("span",{"data-size":"20",class:Y(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",C.badgeColor?C.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[s("span",Gt,N(C.cred_name),1)],2)],8,Yt))),128))])]),_:1}),o(x),s("div",Jt,[o(r,{variant:"ghost",onClick:e(f),class:"justify-start w-full p-1"},{default:i(()=>[o(w,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),t[2]||(t[2]=s("span",null,"Create new record",-1))]),_:1},8,["onClick"])])]),_:1}),(p(),L(He,{onSave:t[1]||(t[1]=C=>e(g)()),key:e($),editId:0}))]),_:1})}}}),Zt={class:"flex items-center"},Qt={class:"ml-2"},es={class:"grid gap-2 p-4"},ts={class:"grid items-center grid-cols-1 gap-4"},ss={key:0,class:"col-start-2 -mt-4 text-sm text-red-400"},os={class:"pl-2 ml-auto"},ls={class:"rc-kdb-class2"},as={class:"pl-2 ml-auto"},ns={class:"rc-kdb-class2"},is={__name:"DeviceModelAddDialog",props:{editId:{type:Number,default:0}},emits:["save"],setup(c,{emit:D}){const{toastSuccess:_}=J(),b=W(),{openDialog:V,closeDialog:l,isDialogOpen:n}=b,f=D;u([]);const $=u([]),g=u({name:""});u("");const h=c;function m(d){d.ctrlKey&&d.key==="Enter"&&E()}H(()=>{window.addEventListener("keydown",m)}),ne(()=>{window.removeEventListener("keydown",m)});function E(){let d=h.editId>0?`/${h.editId}`:"",a=h.editId>0?"patch":"post";j[a]("/api/device-models"+d,g.value).then(v=>{f("save"),_("Device Model created","The device model has been created successfully."),l("DialogDeviceModelAdd"),g.value={name:""}}).catch(v=>{$.value=v.response.data.errors})}return(d,a)=>{const v=M("Icon"),t=M("Button"),w=M("UserIcon"),r=M("Label"),y=M("Input");return p(),L(e(fe),{open:e(n)("DialogDeviceModelAdd")},{default:i(()=>[o(e(ce),{"as-child":""},{default:i(()=>[o(t,{variant:"ghost",onClick:a[0]||(a[0]=x=>e(V)("DialogDeviceModelAdd")),class:"justify-start w-full p-1"},{default:i(()=>[o(v,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),a[8]||(a[8]=s("span",null,"Create new record",-1))]),_:1})]),_:1}),o(e(ue),{class:"p-0 sm:max-w-1/3",onEscapeKeyDown:a[5]||(a[5]=x=>e(l)("DialogDeviceModelAdd")),onPointerDownOutside:a[6]||(a[6]=x=>e(l)("DialogDeviceModelAdd")),onCloseClicked:a[7]||(a[7]=x=>e(l)("DialogDeviceModelAdd"))},{default:i(()=>[o(e(me),{class:"rc-dialog-header"},{default:i(()=>[o(e(ve),{class:"text-sm text-rcgray-200"},{default:i(()=>[s("div",Zt,[o(w),s("span",Qt,N(c.editId>0?"Edit":"Add")+" Device Model "+N(c.editId>0?"(ID: "+c.editId+")":""),1)])]),_:1})]),_:1}),s("div",es,[s("div",ts,[o(r,{for:"name",class:"text-left"},{default:i(()=>[...a[9]||(a[9]=[A(" Device Model Name ",-1),s("span",{class:"text-red-400"},"*",-1)])]),_:1}),o(y,{modelValue:g.value.name,"onUpdate:modelValue":a[1]||(a[1]=x=>g.value.name=x),id:"name",class:"col-span-3",autocomplete:"off"},null,8,["modelValue"]),$.value.name?(p(),S("span",ss,N($.value.name[0]),1)):T("",!0)])]),o(e(pe),{class:"rc-dialog-footer bg-rcgray-800"},{default:i(()=>[o(t,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:a[2]||(a[2]=x=>e(l)("DialogDeviceModelAdd")),size:"sm"},{default:i(()=>[...a[10]||(a[10]=[A(" Cancel ",-1),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),h.editId===0?(p(),L(t,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:a[3]||(a[3]=x=>E()),variant:"primary"},{default:i(()=>[a[12]||(a[12]=A(" Save ",-1)),s("div",os,[s("kbd",ls,[a[11]||(a[11]=A(" Ctrl  ",-1)),o(v,{icon:"uil:enter",class:""})])])]),_:1})):T("",!0),h.editId>0?(p(),L(t,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:a[4]||(a[4]=x=>E()),variant:"primary"},{default:i(()=>[a[14]||(a[14]=A(" Update ",-1)),s("div",as,[s("kbd",ns,[a[13]||(a[13]=A(" Ctrl  ",-1)),o(v,{icon:"uil:enter",class:""})])])]),_:1})):T("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}},rs={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},ds={class:"relative items-center w-full"},cs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},us={class:"py-1"},ms=["onClick"],vs={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},ps={"data-size":"20"},fs={class:"p-1 border-5"},_s={__name:"DeviceModelMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c,{emit:D}){const _=D,b=u([]),V=u(!1),l=u(""),n=u([]),f=c,$=le(()=>b.value.filter(d=>d.name.toLowerCase().includes(l.value.toLowerCase())&&!n.value.some(a=>a.id===d.id)));B(()=>f.modelValue,d=>{n.value=d}),H(()=>{m(),f.modelValue&&f.modelValue.length>0&&(n.value=f.modelValue)});function g(d){f.singleSelect?n.value=[d]:n.value.push(d),V.value=!1,l.value="",_("update:modelValue",n.value)}function h(d){const a=n.value.findIndex(v=>v.name===d);a!==-1&&n.value.splice(a,1),_("update:modelValue",n.value)}function m(){j.get("/api/device-models/?perPage=10000").then(d=>{b.value=d.data.data})}function E(){m()}return(d,a)=>{const v=M("Icon"),t=M("Button"),w=M("Input"),r=M("Separator");return p(),L(e(se),null,{default:i(()=>[o(e(ee),{class:"col-span-3"},{default:i(()=>[o(t,{variant:"ghost",class:Y(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",n.value.length===0?"text-muted-foreground":" "]),style:ae(n.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:i(()=>[A(N(n.value&&n.value.length===0?"Select device model":"")+" ",1),(p(!0),S(O,null,R(n.value,y=>(p(),S("span",{key:y.id,class:"relative my-1 group"},[s("span",rs,[A(N(y.name)+" ",1),o(v,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:Q(x=>h(y.name),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),o(e(te),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:i(()=>[s("div",ds,[o(w,{id:"search",type:"text",modelValue:l.value,"onUpdate:modelValue":a[0]||(a[0]=y=>l.value=y),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),s("span",cs,[o(v,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),o(r),o(e(G),{class:"h-64"},{default:i(()=>[s("div",us,[(p(!0),S(O,null,R($.value,y=>(p(),S("div",{key:y.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:x=>g(y)},[s("span",vs,[s("span",ps,N(y.name),1)])],8,ms))),128))])]),_:1}),o(r),s("div",fs,[o(is,{onSave:a[1]||(a[1]=y=>E())})])]),_:1})]),_:1})}}},gs={class:"grid gap-4"},ys={class:"space-y-2"},xs={class:"flex items-center space-x-2"},hs={class:"font-medium leading-none"},bs={class:"text-sm text-muted-foreground"},ie=oe({__name:"HelpPopover",props:{title:{type:String,required:!0},content:{type:String,required:!0}},setup(c){return(D,_)=>{const b=M("Icon");return p(),L(e(se),null,{default:i(()=>[o(e(ee),{"as-child":""},{default:i(()=>[o(e(re),{tabindex:"-1",variant:"ghost",class:"h-0 p-0 m-0 ml-1"},{default:i(()=>[o(b,{icon:"formkit:help"})]),_:1})]),_:1}),o(e(te),{class:"w-80",side:"top",align:"start"},{default:i(()=>[s("div",gs,[s("div",ys,[s("div",xs,[o(b,{icon:"formkit:help"}),s("h4",hs,N(c.title),1)]),s("p",bs,N(c.content),1)])])]),_:1})]),_:1})}}});function ws(c,D,_){const b=u(!1);H(()=>{window.addEventListener("keydown",V)}),ne(()=>{window.removeEventListener("keydown",V)});function V($){$.ctrlKey&&$.key==="Enter"&&(b.value=!1)}function l(){b.value=!0}function n(){b.value=!1}function f(){b.value=!1}return{showConfirmCloseAlert:b,showConfirmCloseDialog:l,cancelCloseDialog:n,confirmCloseDialog:f}}const Cs={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},$s={class:"relative items-center w-full"},Ds={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ks={class:"py-1"},Vs=["onClick"],Is={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ss={"data-size":"20"},Es={class:"p-1 border-5"},Ns=oe({__name:"TemplateMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c,{emit:D}){const _=D,b=u([]);u([]);const V=u(!1),l=u(""),n=u([]),f=de(),{showConfirmCloseAlert:$,showConfirmCloseDialog:g,cancelCloseDialog:h}=ws(),m=c,E=le(()=>b.value.filter(w=>w.templateName.toLowerCase().includes(l.value.toLowerCase())&&!n.value.some(r=>r.id===w.id)));B(()=>m.modelValue,w=>{n.value=w}),H(()=>{v(),m.modelValue[0]&&m.modelValue[0].length>0&&(console.log("props.modelValue",m.modelValue),n.value=m.modelValue)});function d(w){m.singleSelect?n.value=[w]:n.value.push(w),V.value=!1,l.value="",_("update:modelValue",n.value)}function a(w){const r=n.value.findIndex(y=>y.templateName===w);r!==-1&&n.value.splice(r,1),_("update:modelValue",n.value)}function v(){j.get("/api/templates/?perPage=10000").then(w=>{b.value=w.data.data})}function t(){f.push({path:"/templates/view/0"})}return(w,r)=>{const y=M("Icon"),x=M("Button"),C=M("Input"),k=M("Separator");return p(),L(e(se),null,{default:i(()=>[o(e(ee),{class:"col-span-3"},{default:i(()=>[o(x,{variant:"ghost",class:Y(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",n.value.length===0?"text-muted-foreground":" "]),style:ae(n.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:i(()=>[A(N(n.value&&n.value.length===0?"Select templates":"")+" ",1),(p(!0),S(O,null,R(n.value,F=>(p(),S("span",{key:F.id,class:"relative my-1 group"},[s("span",Cs,[A(N(F.templateName)+" ",1),o(y,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:Q(z=>a(F.templateName),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),o(e(te),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:i(()=>[s("div",$s,[o(C,{id:"search",type:"text",modelValue:l.value,"onUpdate:modelValue":r[0]||(r[0]=F=>l.value=F),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),s("span",Ds,[o(y,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),o(k),o(e(G),{class:"h-64"},{default:i(()=>[s("div",ks,[(p(!0),S(O,null,R(E.value,F=>(p(),S("div",{key:F.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:z=>d(F)},[s("span",Is,[s("span",Ss,N(F.templateName),1)])],8,Vs))),128))])]),_:1}),o(k),s("div",Es,[o(x,{variant:"ghost",onClick:r[1]||(r[1]=F=>e(g)()),class:"justify-start w-full p-1"},{default:i(()=>[o(y,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),r[4]||(r[4]=s("span",null,"Create new record",-1)),o(e(ze),null,{default:i(()=>[o(e(Ue),null,{default:i(()=>[o(e(Be),{"as-child":""},{default:i(()=>[o(y,{icon:"pajamas:issue-new",class:"w-3 h-3 mt-1 ml-auto text-muted-foreground"})]),_:1}),o(e(Fe),{class:"text-white bg-rcgray-800"},{default:i(()=>[...r[3]||(r[3]=[s("p",null,"Navigate to new template page",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),o(be,{showConfirmCloseAlert:e($),onHandleClose:e(h),onHandleConfirm:r[2]||(r[2]=F=>t())},null,8,["showConfirmCloseAlert","onHandleClose"])]),_:1})}}}),As={class:"flex items-center"},Ms={class:"ml-2"},Ts={class:"grid gap-2 py-4"},Ps={class:"grid items-center grid-cols-4 gap-2"},js={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},Ls={class:"pl-2 ml-auto"},zs={class:"rc-kdb-class2"},Us={class:"pl-2 ml-auto"},Bs={class:"rc-kdb-class2"},Fs={__name:"VendorAddEditDialog",props:{editId:Number},emits:["save"],setup(c,{emit:D}){const{toastSuccess:_}=J(),b=W(),{openDialog:V,closeDialog:l,isDialogOpen:n}=b,f=D;u([]);const $=u([]),g=u({vendorName:""}),h=c;function m(d){d.ctrlKey&&d.key==="Enter"&&E()}H(()=>{h.editId>0&&j.get(`/api/vendors/${h.editId}`).then(d=>{g.value=d.data}),window.addEventListener("keydown",m)}),ne(()=>{window.removeEventListener("keydown",m)});function E(){let d=h.editId>0?`/${h.editId}`:"",a=h.editId>0?"patch":"post";j[a]("/api/vendors"+d,g.value).then(v=>{f("save",v.data),_("Vendor created","The vendor has been created successfully."),l("DialogNewVendor")}).catch(v=>{$.value=v.response.data.errors})}return(d,a)=>{const v=M("CommandsIcon"),t=M("Label"),w=M("Input"),r=M("Button"),y=M("Icon");return p(),L(e(fe),{open:e(n)("DialogNewVendor")},{default:i(()=>[o(e(ce),{"as-child":""}),o(e(ue),{class:"w-full p-0",onEscapeKeyDown:a[4]||(a[4]=x=>e(l)("DialogNewVendor")),onPointerDownOutside:a[5]||(a[5]=x=>e(l)("DialogNewVendor")),onCloseClicked:a[6]||(a[6]=x=>e(l)("DialogNewVendor"))},{default:i(()=>[o(e(me),{class:"rc-dialog-header"},{default:i(()=>[o(e(ve),{class:"text-sm text-rcgray-200"},{default:i(()=>[s("div",As,[o(v),s("span",Ms,N(c.editId>0?"Edit":"Add")+" Vendor "+N(c.editId>0?"(ID: "+c.editId+")":""),1)])]),_:1})]),_:1}),s("div",Ts,[s("div",Ps,[o(t,{for:"vendorName",class:"text-right"},{default:i(()=>[...a[7]||(a[7]=[A(" Vendor Name ",-1)])]),_:1}),o(w,{modelValue:g.value.vendorName,"onUpdate:modelValue":a[0]||(a[0]=x=>g.value.vendorName=x),id:"vendorName",class:"col-span-3"},null,8,["modelValue"]),$.value.vendorName?(p(),S("span",js,N($.value.vendorName[0]),1)):T("",!0)])]),o(e(pe),{class:"rc-dialog-footer bg-rcgray-800"},{default:i(()=>[o(r,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:a[1]||(a[1]=x=>e(l)("DialogNewVendor")),size:"sm"},{default:i(()=>[...a[8]||(a[8]=[A(" Cancel ",-1),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),h.editId===0?(p(),L(r,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:a[2]||(a[2]=x=>E()),variant:"primary"},{default:i(()=>[a[10]||(a[10]=A(" Save ",-1)),s("div",Ls,[s("kbd",zs,[a[9]||(a[9]=A(" Ctrl  ",-1)),o(y,{icon:"uil:enter",class:""})])])]),_:1})):T("",!0),h.editId>0?(p(),L(r,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:a[3]||(a[3]=x=>E()),variant:"primary"},{default:i(()=>[a[12]||(a[12]=A(" Update ",-1)),s("div",Us,[s("kbd",Bs,[a[11]||(a[11]=A(" Ctrl  ",-1)),o(y,{icon:"uil:enter",class:""})])])]),_:1})):T("",!0)]),_:1})]),_:1})]),_:1},8,["open"])}}};function Ks(){const c=u(1),D=u(parseInt(localStorage.getItem("perPage")||"10")),_=u("-id"),b=u(""),V=u({}),l=W(),n=u(0),f=u(!1),$=u(1),g=u(1),h=u([]),m=u(!1),{openDialog:E}=l,{toastSuccess:d,toastError:a}=J();async function v(P={}){f.value=!0;try{const K=await j.get("/api/vendors",{params:{page:c.value,perPage:D.value,sort:_.value,...V.value}});h.value=K.data,$.value=K.data.last_page}catch(K){console.error("Error fetching vendors:",K),a("Error","Failed to fetch vendors.")}finally{f.value=!1}}const t=P=>{n.value=0,g.value=Math.random(),E("DialogNewVendor")};function w(P){n.value=P,g.value=Math.random(),E("DialogNewVendor")}const r=async P=>{try{await j.delete(`/api/vendors/${P}`),v(),d("Vendor Deleted","The vendor has been deleted successfully.")}catch(K){K.status===422?a("Error",K.response.data.message):(console.error("Error deleting Command:",K),a("Error","Failed to delete Command."))}},y=async P=>{try{await j.post("/api/vendors/delete-many",{ids:P}),v(),d("Vendors Deleted","The vendors have been deleted successfully."),m.value=!1,we.emit("deleteManyVendorsSuccess")}catch(K){K.status===422?a("Error",K.response.data.message):(console.error("Error deleting Commands:",K),a("Error","Failed to delete Commands.")),m.value=!1}},x=P=>{n.value=P,g.value=Math.random(),E("DialogNewVendor")},C=()=>{v(),g.value=Math.random()};function k(P){P.altKey&&P.key==="n"&&(P.preventDefault(),E("DialogNewVendor"))}const F=he(()=>{V.value["filter[vendorName]"]=b.value,c.value=1,v()},500);B([c,D],()=>{v()}),B(b,()=>{F()}),B(D,P=>{localStorage.setItem("perPage",P.toString())});function z(P){_.value===P?_.value=`-${P}`:_.value=P,v()}return{vendors:h,isLoading:f,currentPage:c,perPage:D,lastPage:$,editId:n,newVendorModalKey:g,searchTerm:b,openDialog:E,fetchVendors:v,createVendor:t,updateVendor:w,deleteVendor:r,deleteManyVendors:y,handleSave:C,handleKeyDown:k,viewEditDialog:x,toggleSort:z,sortParam:_,showConfirmDelete:m}}const Os={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},qs={class:"relative items-center w-full"},Rs={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Hs={class:"py-1"},Xs=["onClick"],Ys={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Gs={"data-size":"20"},Js={class:"p-1 border-5"},Ws=oe({__name:"VendorMultiSelect",props:{modelValue:{type:Array,required:!0},singleSelect:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(c,{emit:D}){const _=D,b=u([]);u([]);const V=u(!1),l=u(""),n=u([]),{createVendor:f,newVendorModalKey:$,handleSave:g}=Ks(),h=c,m=le(()=>b.value.filter(v=>v.vendorName.toLowerCase().includes(l.value.toLowerCase())&&!n.value.some(t=>t.id===v.id)));H(()=>{a(),h.modelValue&&h.modelValue.length>0&&n.value.push(...h.modelValue)}),B(()=>h.modelValue,v=>{n.value=v}),B($,()=>{a()});function E(v){h.singleSelect?n.value=[v]:n.value.push(v),V.value=!1,l.value="",_("update:modelValue",n.value)}function d(v){const t=n.value.findIndex(w=>w.vendorName===v);t!==-1&&n.value.splice(t,1),_("update:modelValue",n.value)}function a(){j.get("/api/vendors/?perPage=10000").then(v=>{b.value=v.data.data})}return(v,t)=>{const w=M("Icon"),r=M("Button"),y=M("Input"),x=M("Separator");return p(),L(e(se),null,{default:i(()=>[o(e(ee),{class:"col-span-3"},{default:i(()=>[o(r,{variant:"ghost",class:Y(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",n.value.length===0?"text-muted-foreground":" "]),style:ae(n.value.length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:i(()=>[A(N(n.value&&n.value.length===0?"Select vendors":"")+" ",1),(p(!0),S(O,null,R(n.value,C=>(p(),S("span",{key:C.id,class:"relative my-1 group"},[s("span",Os,[A(N(C.vendorName)+" ",1),o(w,{icon:"si:close-line",class:"ml-1 cursor-pointer hover:text-white",onClick:Q(k=>d(C.vendorName),["stop"])},null,8,["onClick"])])]))),128))]),_:1},8,["class","style"])]),_:1}),o(e(te),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:i(()=>[s("div",qs,[o(y,{id:"search",type:"text",modelValue:l.value,"onUpdate:modelValue":t[0]||(t[0]=C=>l.value=C),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),s("span",Rs,[o(w,{icon:"weui:search-outlined",class:"size-6 text-muted-foreground"})])]),o(x),o(e(G),{class:"h-64"},{default:i(()=>[s("div",Hs,[(p(!0),S(O,null,R(m.value,C=>(p(),S("div",{key:C.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:k=>E(C)},[s("span",Ys,[s("span",Gs,N(C.vendorName),1)])],8,Xs))),128))])]),_:1}),o(x),s("div",Js,[o(r,{variant:"ghost",onClick:t[1]||(t[1]=C=>e(f)()),class:"justify-start w-full p-1"},{default:i(()=>[o(w,{icon:"octicon:plus-16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),t[3]||(t[3]=s("span",null,"Create new record",-1))]),_:1})])]),_:1}),(p(),L(Fs,{onSave:t[2]||(t[2]=C=>e(g)()),key:e($),editId:0}))]),_:1})}}});function Zs(c,D,_){const{toastSuccess:b,toastError:V}=J(),l=W(),{closeDialog:n,isDialogOpen:f}=l,$=u(!1),g=u(!1),h=u([]),m=u({device_name:"",device_ip:"",device_port_override:"",device_cred_id:0,device_cred:[],device_vendor:[],device_model:"",selectedCategoryArray:[],selectedModelArray:[],device_category_id:0,device_tags:[],device_username:"",device_password:"",device_enable_password:"",device_template:[],device_main_prompt:"",device_enable_prompt:""});H(()=>{c>0&&(g.value=!0,j.get(`/api/devices/${c}`).then(r=>{m.value.device_name=r.data.device_name,m.value.device_ip=r.data.device_ip,_===!0&&(m.value.device_name=r.data.device_name+"-Clone",m.value.device_ip=r.data.device_ip+"-Clone"),m.value.device_port_override=r.data.device_port_override,m.value.device_cred_id=r.data.device_cred_id,m.value.device_cred.push(r.data.device_cred),m.value.device_vendor.push(r.data.vendor[0]),m.value.device_model=r.data.device_model,m.value.selectedCategoryArray.push(r.data.category[0]),m.value.selectedModelArray=[{name:r.data.device_model}],m.value.device_category_id=r.data.device_category_id,r.data.tag.forEach(y=>{m.value.device_tags.push(y)}),m.value.device_username=r.data.device_username,m.value.device_password=r.data.device_password,m.value.device_enable_password=r.data.device_enable_password,m.value.device_template.push(r.data.template[0]),m.value.device_main_prompt=r.data.device_main_prompt,m.value.device_enable_prompt=r.data.device_enable_prompt,g.value=!1})),window.addEventListener("keydown",E)}),ne(()=>{window.removeEventListener("keydown",E)});function E(r){r.ctrlKey&&r.key==="Enter"&&d()}function d(){m.value.selectedModelArray.length>0&&(m.value.device_model=m.value.selectedModelArray[0].name),m.value.selectedCategoryArray.length>0&&(m.value.device_category_id=m.value.selectedCategoryArray[0].id);let r=c>0?`/${c}`:"",y=c>0?"patch":"post";_===!0&&(r="",y="post",console.log("id",r)),j[y]("/api/devices"+r,m.value).then(x=>{D("save",x.data),b("Device created","The device has been created successfully."),n("DialogNewDevice")}).catch(x=>{V("Error","There was an error saving the device."),console.log(x),x.response&&x.response.data&&x.response.data.errors&&(h.value=x.response.data.errors)})}function a(){m.value.device_main_prompt=m.value.device_name+"#",m.value.device_enable_prompt=m.value.device_name+">"}function v(){$.value=!0}function t(){$.value=!1}function w(){$.value=!1,D("close"),n("DialogNewDevice")}return{isLoading:g,model:m,saveDialog:d,errors:h,isDialogOpen:f,generatePrompts:a,showConfirmCloseAlert:$,showConfirmCloseDialog:v,cancelCloseDialog:t,confirmCloseDialog:w}}const Qs={class:"flex items-center"},eo={class:"ml-2"},to={key:0},so={key:0},oo={class:"text-muted-foreground"},lo={key:0,class:"grid grid-cols-1 gap-6 px-4 lg:grid-cols-2"},ao={class:"flex flex-col col-span-1"},no={key:0,class:"text-red-400"},io={class:"flex flex-row space-x-4"},ro={class:"flex flex-col w-1/2"},co={key:0,class:"text-red-400"},uo={class:"flex flex-col w-1/2"},mo={key:1,class:"text-red-400"},vo={key:2,class:"text-red-400"},po={key:3,class:"text-red-400"},fo={key:4,class:"text-red-400"},_o={class:"flex flex-col col-span-1"},go={key:0,class:"text-sm text-muted-foreground"},yo={class:"flex w-full max-w-full items-center gap-1.5"},xo={key:0,class:"text-red-400"},ho={key:3,class:"text-red-400"},bo={key:6,class:"text-red-400"},wo={key:7,class:"text-red-400"},Co={key:8,class:"text-red-400"},$o={key:9,class:"text-red-400"},Do={class:"pl-2 ml-auto"},ko={class:"rc-kdb-class2"},Vo={class:"pl-2 ml-auto"},Io={class:"rc-kdb-class2"},Po={__name:"DeviceAddEditDialog",props:{editId:Number,isClone:{type:Boolean,default:!1}},emits:["save","close"],setup(c,{emit:D}){const _=c,b=D,{isLoading:V,model:l,saveDialog:n,errors:f,isDialogOpen:$,generatePrompts:g,showConfirmCloseAlert:h,showConfirmCloseDialog:m,cancelCloseDialog:E,confirmCloseDialog:d}=Zs(_.editId,b,_.isClone);function a(v){if(v.length===0){l.value.device_cred=[],l.value.device_cred_id=0;return}l.value.device_cred=v,l.value.device_cred_id=v[0].id,l.value.device_username=v[0].cred_username,l.value.device_password="",l.value.device_enable_password=""}return(v,t)=>{const w=M("DeviceIcon"),r=M("Label"),y=M("Input"),x=M("Icon"),C=M("Button");return p(),S(O,null,[o(e(fe),{open:e($)("DialogNewDevice")},{default:i(()=>[o(e(ce),{"as-child":""}),o(e(ue),{onInteractOutside:t[18]||(t[18]=k=>e(m)()),onPointerDownOutside:t[19]||(t[19]=k=>e(m)()),class:"p-0 sm:max-w-7xl",onEscapeKeyDown:t[20]||(t[20]=k=>e(m)()),onCloseClicked:t[21]||(t[21]=k=>e(m)())},{default:i(()=>[o(e(me),{class:"rc-dialog-header"},{default:i(()=>[o(e(ve),{class:"text-sm text-rcgray-200"},{default:i(()=>[s("div",Qs,[o(w),s("span",eo,[A(N(c.editId===0?c.isClone?"":"Add":c.isClone?"Clone":"Edit")+" Device ",1),c.editId>0&&!c.isClone?(p(),S("span",to,"(ID: "+N(c.editId)+")",1)):T("",!0)]),e(l).device_name?(p(),S("span",so,[t[22]||(t[22]=A(" :   ",-1)),s("span",oo,N(e(l).device_name),1)])):T("",!0)])]),_:1})]),_:1}),o(e(G),{class:"min-h-96 xl:h-auto"},{default:i(()=>[e(V)?(p(),L(xe,{key:0})):T("",!0),o(ye,{name:"fade"},{default:i(()=>[e(V)?T("",!0):(p(),S("div",lo,[s("div",ao,[t[30]||(t[30]=s("h3",{class:"text-lg font-semibold border-b"},"Device Information",-1)),o(r,{for:"device_name",class:"mt-4 mb-1 font-light"},{default:i(()=>[...t[23]||(t[23]=[A(" Device Name ",-1),s("span",{class:"text-red-400"},"*",-1)])]),_:1}),o(y,{modelValue:e(l).device_name,"onUpdate:modelValue":t[0]||(t[0]=k=>e(l).device_name=k),id:"device_name",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(f).device_name?(p(),S("span",no,N(e(f).device_name[0]),1)):T("",!0),s("div",io,[s("div",ro,[o(r,{for:"device_ip",class:"mt-4 mb-1 font-light"},{default:i(()=>[...t[24]||(t[24]=[A(" Device IP ",-1),s("span",{class:"text-red-400"},"*",-1)])]),_:1}),o(y,{modelValue:e(l).device_ip,"onUpdate:modelValue":t[1]||(t[1]=k=>e(l).device_ip=k),id:"device_ip",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(f).device_ip?(p(),S("span",co,N(e(f).device_ip[0]),1)):T("",!0)]),s("div",uo,[o(r,{for:"device_port_override",class:"mt-4 mb-1 font-light"},{default:i(()=>[t[25]||(t[25]=A(" Device Port ",-1)),o(ie,{title:"Device Port",content:"Set the connection port specific to this device. it overrides the value set in the connection template. Leave empty otherwise."})]),_:1}),o(y,{modelValue:e(l).device_port_override,"onUpdate:modelValue":t[2]||(t[2]=k=>e(l).device_port_override=k),id:"device_port_override",type:"number",autocomplete:"off",class:"w-full"},null,8,["modelValue"])])]),o(r,{for:"vector",class:"mt-4 mb-1 font-light"},{default:i(()=>[...t[26]||(t[26]=[A(" Vendor ",-1),s("span",{class:"text-red-400"},"*",-1)])]),_:1}),o(Ws,{singleSelect:!0,modelValue:e(l).device_vendor,"onUpdate:modelValue":t[3]||(t[3]=k=>e(l).device_vendor=k),id:"device_vendor",class:"w-full"},null,8,["modelValue"]),e(f).device_vendor?(p(),S("span",mo,N(e(f).device_vendor[0]),1)):T("",!0),o(r,{for:"device_category_id",class:"mt-4 mb-1 font-light"},{default:i(()=>[...t[27]||(t[27]=[A(" Category ",-1),s("span",{class:"text-red-400"},"*",-1)])]),_:1}),o(Oe,{modelValue:e(l).selectedCategoryArray,"onUpdate:modelValue":t[4]||(t[4]=k=>e(l).selectedCategoryArray=k),id:"selectedCategoryArray",singleSelect:!0,class:"w-full"},null,8,["modelValue"]),e(f).device_category_id?(p(),S("span",vo,N(e(f).device_category_id[0]),1)):T("",!0),o(r,{for:"device_model",class:"mt-4 mb-1 font-light"},{default:i(()=>[...t[28]||(t[28]=[A(" Model ",-1),s("span",{class:"text-red-400"},"*",-1)])]),_:1}),o(_s,{singleSelect:!0,modelValue:e(l).selectedModelArray,"onUpdate:modelValue":t[5]||(t[5]=k=>e(l).selectedModelArray=k),id:"selectedModelArray",class:"w-full"},null,8,["modelValue"]),e(f).device_model?(p(),S("span",po,N(e(f).device_model[0]),1)):T("",!0),o(r,{for:"device_tags",class:"mt-4 mb-1 font-light"},{default:i(()=>[...t[29]||(t[29]=[A(" Tags ",-1),s("span",{class:"text-red-400"},"*",-1)])]),_:1}),o(qe,{modelValue:e(l).device_tags,"onUpdate:modelValue":t[6]||(t[6]=k=>e(l).device_tags=k),id:"device_tags",class:"w-full"},null,8,["modelValue"]),e(f).device_tags?(p(),S("span",fo,N(e(f).device_tags[0]),1)):T("",!0)]),s("div",_o,[t[39]||(t[39]=s("h3",{class:"text-lg font-semibold border-b"},"Connection Information",-1)),o(r,{for:"device_username",class:"mt-4 mb-1 font-light"},{default:i(()=>[t[31]||(t[31]=A(" Username ",-1)),t[32]||(t[32]=s("span",{class:"text-red-400"},"*",-1)),e(l).device_cred_id!=0?(p(),S("span",go," - Credential set selected ")):T("",!0)]),_:1}),s("div",yo,[o(y,{disabled:e(l).device_cred_id!=0,modelValue:e(l).device_username,"onUpdate:modelValue":t[7]||(t[7]=k=>e(l).device_username=k),id:"device_username",autocomplete:"current-password",class:"flex-grow w-2/3"},null,8,["disabled","modelValue"]),o(Wt,{modelValue:e(l).device_cred,"onUpdate:modelValue":t[8]||(t[8]=k=>a(k)),singleSelect:!0,class:"w-full"},null,8,["modelValue"])]),e(f).device_username?(p(),S("span",xo,N(e(f).device_username[0]),1)):T("",!0),e(l).device_cred_id===0?(p(),L(r,{key:1,for:"device_password",class:"mt-4 mb-1 font-light"},{default:i(()=>[...t[33]||(t[33]=[A(" Device Password ",-1),s("span",{class:"text-red-400"},"*",-1)])]),_:1})):T("",!0),e(l).device_cred_id===0?(p(),L(e(_e),{key:2,modelValue:e(l).device_password,"onUpdate:modelValue":t[9]||(t[9]=k=>e(l).device_password=k),id:"device_password",class:"w-full"},null,8,["modelValue"])):T("",!0),e(f).device_password?(p(),S("span",ho,N(e(f).device_password[0]),1)):T("",!0),e(l).device_cred_id===0?(p(),L(r,{key:4,for:"device_enable_password",class:"mt-4 mb-1 font-light"},{default:i(()=>[...t[34]||(t[34]=[A(" Device Enable Password ",-1)])]),_:1})):T("",!0),e(l).device_cred_id===0?(p(),L(e(_e),{key:5,modelValue:e(l).device_enable_password,"onUpdate:modelValue":t[10]||(t[10]=k=>e(l).device_enable_password=k),id:"device_enable_password",class:"w-full"},null,8,["modelValue"])):T("",!0),e(f).device_enable_password?(p(),S("span",bo,N(e(f).device_enable_password[0]),1)):T("",!0),o(r,{for:"device_template",class:"mt-4 mb-1 font-light"},{default:i(()=>[...t[35]||(t[35]=[A(" Template ",-1),s("span",{class:"text-red-400"},"*",-1)])]),_:1}),o(Ns,{singleSelect:!0,modelValue:e(l).device_template,"onUpdate:modelValue":t[11]||(t[11]=k=>e(l).device_template=k),id:"device_template",class:"w-full"},null,8,["modelValue"]),e(f).device_template?(p(),S("span",wo,N(e(f).device_template[0]),1)):T("",!0),o(r,{for:"main_prompt",class:"mt-4 mb-1 font-light"},{default:i(()=>[t[36]||(t[36]=A(" Main Prompt ",-1)),o(ie,{title:"Device Main Prompt",content:"This is the 'Privileged EXEC' prompt. You will run show commands from this prompt and you can access configure mode. Usually 'router1#'"})]),_:1}),o(y,{modelValue:e(l).device_main_prompt,"onUpdate:modelValue":t[12]||(t[12]=k=>e(l).device_main_prompt=k),id:"device_main_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(f).device_main_prompt?(p(),S("span",Co,N(e(f).device_main_prompt[0]),1)):T("",!0),o(r,{for:"enable_prompt",class:"mt-4 mb-1 font-light"},{default:i(()=>[t[37]||(t[37]=A(" Enable Prompt ",-1)),o(ie,{title:"Device Main Prompt",content:" This is the 'User EXEC' prompt. The first level of access prompt. Usually 'router1>'"})]),_:1}),o(y,{modelValue:e(l).device_enable_prompt,"onUpdate:modelValue":t[13]||(t[13]=k=>e(l).device_enable_prompt=k),id:"device_enable_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),s("button",{class:"flex items-center p-2 text-sm text-left rounded-lg pf-c-button pf-m-link pf-m-inline hover:bg-rcgray-800 max-w-fit text-muted-foreground hover:text-gray-200",type:"button",onClick:t[14]||(t[14]=k=>e(g)())},[o(x,{icon:"material-symbols:flash-auto",class:"w-4 h-4 mr-1"}),t[38]||(t[38]=A(" Auto generate prompts from device name ",-1))]),e(f).device_enable_prompt?(p(),S("span",$o,N(e(f).device_enable_prompt[0]),1)):T("",!0)])]))]),_:1})]),_:1}),o(e(pe),{class:"rc-dialog-footer bg-rcgray-800"},{default:i(()=>[o(C,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:t[15]||(t[15]=k=>e(m)()),size:"sm"},{default:i(()=>[...t[40]||(t[40]=[A(" Cancel ",-1),s("div",{class:"pl-2 ml-auto"},[s("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),_.editId===0||_.isClone?(p(),L(C,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:t[16]||(t[16]=k=>e(n)()),variant:"primary"},{default:i(()=>[t[42]||(t[42]=A(" Save ",-1)),s("div",Do,[s("kbd",ko,[t[41]||(t[41]=A(" Ctrl  ",-1)),o(x,{icon:"uil:enter",class:""})])])]),_:1})):T("",!0),_.editId>0&&!_.isClone?(p(),L(C,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:t[17]||(t[17]=k=>e(n)()),variant:"primary"},{default:i(()=>[t[44]||(t[44]=A(" Update ",-1)),s("div",Vo,[s("kbd",Io,[t[43]||(t[43]=A(" Ctrl  ",-1)),o(x,{icon:"uil:enter",class:""})])])]),_:1})):T("",!0)]),_:1})]),_:1})]),_:1},8,["open"]),o(be,{showConfirmCloseAlert:e(h),onHandleClose:e(E),onHandleConfirm:e(d)},null,8,["showConfirmCloseAlert","onHandleClose","onHandleConfirm"])],64)}}};function jo(){const c=u(1),D=u(parseInt(localStorage.getItem("perPage")||"10")),_=u("-id"),b=u(""),V=u({}),l=W(),n=u(0),f=u(!1),$=u(1),g=u(1),h=u([]),m=u(!1),E=u([]),d=u([]),a=u([]),v=u([]),t=de(),w=Z("formatters"),{openDialog:r}=l,{toastSuccess:y,toastError:x}=J();async function C(I={}){if(f.value=!0,E.value.length>0){const U=E.value.map(q=>q.id);V.value["filter[status]"]=U.join(",")}try{const U=await j.get("/api/devices",{params:{page:c.value,perPage:D.value,sort:_.value,...V.value}});h.value=U.data,$.value=U.data.last_page}catch(U){console.error("Error fetching devices:",U),x("Error","Failed to fetch devices.")}finally{f.value=!1}}const k=I=>{n.value=0,g.value=Math.random(),r("DialogNewDevice")};function F(I){n.value=I,g.value=Math.random(),r("DialogNewDevice")}function z(I){console.log("Purge device configs:",I),j.post("/api/device/purge-failed-configs",{device_id:I}).then(U=>{y("Device Configurations Purged","The device failed configurations purge jobs has been successfully sent to the queue.")}).catch(U=>{console.error("Error Purge device configs:",U),x("Error","Failed to purge device configurations.")})}const P=async I=>{try{await j.delete(`/api/devices/${I}`),C(),y("Device Deleted","The device has been deleted successfully.")}catch(U){console.error("Error deleting device:",U),x("Error","Failed to delete device.")}},K=async I=>{try{await j.post("/api/devices/delete-many",{ids:I}),C(),y("Devices Deleted","The tags have been deleted successfully."),m.value=!1,we.emit("deleteManyDevicesSuccess")}catch(U){console.error("Error deleting tags:",U),x("Error","Failed to delete devices."),m.value=!1}},Ce=async I=>{try{await j.get(`/api/device/disable/${I}`),C(),y("Device Disabled","The device has been disabled successfully.")}catch(U){console.error("Error disabling device:",U),x("Error","Failed to disable device.")}},$e=async I=>{try{await j.get(`/api/device/enable/${I}`),C(),y("Device Enabled","The device has been disabled successfully.")}catch(U){console.error("Error enabling device:",U),x("Error","Failed to enabled device.")}},De=I=>{n.value=I,g.value=Math.random(),r("DialogNewDevice")},ke=()=>{C(),g.value=Math.random()};function Ve(I){I.altKey&&I.key==="n"&&(I.preventDefault(),r("DialogNewDevice"))}const Ie=he(()=>{V.value["filter[q]"]=b.value,c.value=1,C()},500);B([c,D],()=>{C()}),B(b,()=>{Ie()}),B(D,I=>{localStorage.setItem("perPage",I.toString())}),B(E,(I,U)=>{if(console.log("Filter status:",I),I&&I.length>0){const q=I.map(X=>X.id);V.value["filter[status]"]=q.join(",")}else delete V.value["filter[status]"];C()},{deep:!0}),B(d,(I,U)=>{if(I&&I.length>0){const q=I.map(X=>X.id);V.value["filter[category]"]=q.join(",")}else delete V.value["filter[category]"];C()},{deep:!0}),B(a,(I,U)=>{if(I&&I.length>0){const q=I.map(X=>X.id);V.value["filter[tag]"]=q.join(",")}else delete V.value["filter[tag]"];C()},{deep:!0}),B(v,(I,U)=>{if(I&&I.length>0){const q=I.map(X=>X.id);V.value["filter[vendor]"]=q.join(",")}else delete V.value["filter[vendor]"];C()},{deep:!0});function Se(I){_.value===I?_.value=`-${I}`:_.value=I,C()}function Ee(){V.value={},E.value=[],d.value=[],a.value=[],v.value=[],b.value="",C()}function Ne(I){t.push({name:"devicesview",params:{id:parseInt(I)}})}return{clearFilters:Ee,createDevice:k,currentPage:c,deleteDevice:P,deleteManyDevices:K,devices:h,disableDevice:Ce,editId:n,enableDevice:$e,fetchDevices:C,filterCategories:d,filterStatus:E,filterTags:a,filterVendor:v,formatters:w,handleKeyDown:Ve,handleSave:ke,isLoading:f,lastPage:$,newDeviceModalKey:g,perPage:D,purgeDeviceConfigs:z,searchTerm:b,showConfirmDelete:m,sortParam:_,toggleSort:Se,updateDevice:F,viewDeviceDetailsPane:Ne,viewEditDialog:De}}function Lo(c){const{toastSuccess:D,toastError:_}=J(),b=W(),{openDialog:V}=b,l=u(!1),n=u(!1),f=u([]),$=u("");u(null);const g=u(!1),h=u([]),m=u(!1),E=u(""),d=u("");function a(){l.value=!0,j.get("/api/import-github-templates",{fileName:this.fileName,code:this.code}).then(y=>{D("Templates imported from github successfully")}).catch(y=>{_("Error importing templates from github")}),setTimeout(()=>{l.value=!1},1e3)}B($,()=>{$.value!==""&&w($.value)}),B(E,()=>{E.value!==null&&r(E.value)});function v(){V("DialogTemplateImport")}function t(){l.value=!0,j.get("/api/list-template-repo-folders").then(y=>{f.value=y.data.data,n.value=!0,l.value=!1}).catch(y=>{console.log(y),y.response.data.message.msg==='rConfig-templates is empty, or does not exist. Clone from "https://github.com/rconfig/rconfig-templates" may have failed! Try importing the templates again.!'?n.value=!1:_("Error getting vendor templates"),l.value=!1})}function w(y){g.value=!1,m.value=!1,j.post("/api/list-repo-folders-contents",{directory:y}).then(x=>{h.value=x.data.data,g.value=!0,typeof x.data.data.readme<"u"&&(m.value=!0)}).catch(x=>{console.log(x),_("Error getting file list")})}function r(y){j.post("/api/get-template-file-contents",{filepath:y}).then(x=>{d.value=x.data.data.data.code}).catch(x=>{_("Error getting file contents")})}return{fileOptionSelected:E,getTemplateFileContents:r,getTemplateRepoFolders:t,getTemplatesList:w,hasReadmeFile:m,hasVendorTemplateOptions:n,importTemplates:a,importingTemplates:l,listedFiles:h,openImportDialog:v,selectedTemplateCode:d,showFileOptions:g,vendorOptionSelected:$,vendorTemplateOptions:f}}export{To as _,Xe as a,jo as b,Po as c,Lo as d,Ks as e,Fs as f,Ye as u};
