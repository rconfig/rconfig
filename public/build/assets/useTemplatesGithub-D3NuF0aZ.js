import{i as ue,x as c,D as W,z as K,E as B,r as O,e as L,o as n,w as o,a as l,b as t,u as e,V as de,y as me,n as ne,c as g,J as H,t as S,d as D,ab as Z,K as G,W as ie,aa as ve,R as re,U as ce,M as ee,X as te,Z as pe,a0 as ye,a1 as be,a2 as he,a3 as xe,s as P,a5 as we,a6 as ke,l as Ve,bV as nt,P as Me,p as Te,j as je,k as Oe,m as Pe,a9 as Ne,O as dt,T as Se,bW as Ie,F as it}from"./app-Cr5ZxVyh.js";import{_ as rt,a as ct}from"./TagMultiSelect-CmqQst57.js";import{u as ut,_ as mt,S as vt}from"./useCredentials-BYK5jtF6.js";import{u as fe}from"./useMultiSelect-D1kHzzCM.js";import{X as Y}from"./HoverCardTrigger-CtkCXr9J.js";import{S as pt}from"./search-kG425soW.js";import{P as ft}from"./plus-ByIXU4cC.js";import{o as Le,i as Be,j as Fe,k as ze,l as Ae}from"./pageSettings-BJW2cXfb.js";import{I as gt}from"./info-CjoC7kp4.js";import{C as Ee}from"./corner-down-left-D450JXrT.js";const _t={key:0},yt={key:0},bt={key:1,class:"flex items-center text-xs font-medium px-2.5 py-0.5 rounded-xl border bg-muted"},ht={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},xt={class:"relative items-center w-full"},wt={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},kt={class:"py-1"},Dt=["onClick"],Ct={"data-size":"20"},$t={class:"p-1 border-5"},Vt=ue({__name:"CredentialsMultiSelect",props:{modelValue:{type:[Array,Object],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select credentials"},align:{type:String,default:"end"}},emits:["update:modelValue"],setup(_,{emit:M}){const I=M,V=c([]),u=c(!0),{createCred:f,newCredModalKey:a,handleSave:E}=ut({autoMount:!1}),w=_,{selectedItems:k,searchTerm:C,filteredItems:d,selectItem:T,deleteItem:x}=fe({items:V,modelValue:w.modelValue,singleSelect:w.singleSelect,displayField:"cred_name",searchFields:["cred_name"],emit:I});W(()=>{m()}),K(a,()=>{m()});function m(){u.value=!0,B.get("/api/settings/credentials/?perPage=10000").then(v=>{V.value=v.data.data,u.value=!1})}return(v,y)=>{const s=O("RcIcon"),i=O("Button"),r=O("Input"),h=O("Separator");return n(),L(e(ce),null,{default:o(()=>[y[4]||(y[4]=l("div",{class:"hidden text-yellow-200 text-teal-100 bg-yellow-700 bg-teal-700 border-yellow-500 border-teal-500 bg-stone-700 text-stone-200 border-stone-500 bg-lime-700 text-lime-200 border-lime-500 bg-sky-700 text-sky-100 border-sky-500 bg-violet-700 text-violet-200 border-violet-500 bg-fuchsia-700 text-fuchsia-200 border-fuchsia-500"},null,-1)),t(e(de),{class:"col-span-3"},{default:o(()=>[t(i,{variant:"ghost",class:ne(["flex items-center justify-start w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700",e(k).length===0?" text-rcgray-400":""]),style:me(e(k).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:o(()=>[u.value?(n(),g("span",_t,"Loading credentials...")):(n(),g(H,{key:1},[t(s,{name:"credentials",class:"mx-2"}),e(k).length===0?(n(),g("span",yt,S(w.placeholder),1)):w.singleSelect&&e(k).length>0?(n(),g("span",bt,[D(S(e(k)[0].cred_name)+" ",1),t(e(Y),{size:"16",class:"ml-1 cursor-pointer hover:text-primary",onClick:y[0]||(y[0]=Z($=>e(x)(e(k)[0].id),["stop"]))})])):(n(!0),g(H,{key:2},G(e(k),$=>(n(),g("span",{key:$.id,class:"relative my-1 group"},[l("span",ht,[D(S($.cred_name)+" ",1),t(e(Y),{size:"16",class:"ml-1 cursor-pointer hover:text-white",onClick:Z(b=>e(x)($.id),["stop"])},null,8,["onClick"])])]))),128))],64))]),_:1},8,["class","style"])]),_:1}),t(e(ie),{side:"bottom",align:_.align,class:"col-span-3 p-0"},{default:o(()=>[l("div",xt,[t(r,{id:"search",type:"text",modelValue:e(C),"onUpdate:modelValue":y[1]||(y[1]=$=>ve(C)?C.value=$:null),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),l("span",wt,[t(e(pt),{class:"size-6 text-muted-foreground"})])]),t(h),t(e(re),{class:"h-64"},{default:o(()=>[l("div",kt,[u.value?(n(),L(s,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(n(!0),g(H,{key:1},G(e(d),$=>(n(),g("div",{key:$.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:b=>e(T)($)},[l("span",{"data-size":"20",class:ne(["cursor-default text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border",$.badgeColor?$.badgeColor:"bg-gray-600 text-gray-200 border-gray-500"])},[l("span",Ct,S($.cred_name),1)],2)],8,Dt))),128))])]),_:1}),t(h),l("div",$t,[t(i,{variant:"ghost",onClick:e(f),class:"justify-start w-full p-1"},{default:o(()=>[t(s,{name:"plus",class:"w-8"}),y[3]||(y[3]=l("div",{class:"rc-text-xs-muted ml-1"},"Create new record",-1))]),_:1},8,["onClick"])])]),_:1},8,["align"]),(n(),L(mt,{onSave:y[2]||(y[2]=$=>e(E)()),key:e(a),editId:0}))]),_:1})}}}),St={class:"flex items-center"},It={class:"ml-2"},Et={class:"grid gap-2 p-4"},Mt={class:"grid items-center grid-cols-1 gap-4"},Tt={key:0,class:"col-start-2 -mt-4 text-sm text-red-400"},jt={class:"pl-2 ml-auto"},Ot={class:"rc-kdb-class2"},Pt={__name:"DeviceModelAddDialog",props:{editId:{type:Number,default:0}},emits:["save"],setup(_,{emit:M}){const{toastSuccess:I}=ee(),V=te(),{openDialog:u,closeDialog:f,isDialogOpen:a}=V,E=M,w=c([]),k=c({name:""}),C=_;function d(x){x.ctrlKey&&x.key==="Enter"&&T()}W(()=>{window.addEventListener("keydown",d)}),pe(()=>{window.removeEventListener("keydown",d)});function T(){B.post("/api/add-device-model",{name:k.value.name}).then(()=>{E("save"),I("Device model created","The device model has been created successfully."),f("DialogDeviceModelAdd"),k.value={name:""},w.value=[]}).catch(x=>{var m,v;w.value=((v=(m=x.response)==null?void 0:m.data)==null?void 0:v.errors)||{}})}return(x,m)=>{const v=O("Button"),y=O("RcIcon"),s=O("Label"),i=O("Input");return n(),L(e(ke),{open:e(a)("DialogDeviceModelAdd")},{default:o(()=>[t(e(ye),{"as-child":""},{default:o(()=>[t(v,{variant:"ghost",onClick:m[0]||(m[0]=r=>e(u)("DialogDeviceModelAdd")),class:"justify-start w-full p-1"},{default:o(()=>[t(e(ft),{size:"16",class:"w-3 h-3 mt-1 mr-2 text-muted-foreground"}),m[7]||(m[7]=l("span",null,"Add new device model",-1))]),_:1})]),_:1}),t(e(be),{class:"p-0 sm:max-w-1/3",onEscapeKeyDown:m[4]||(m[4]=r=>e(f)("DialogDeviceModelAdd")),onPointerDownOutside:m[5]||(m[5]=r=>e(f)("DialogDeviceModelAdd")),onCloseClicked:m[6]||(m[6]=r=>e(f)("DialogDeviceModelAdd"))},{default:o(()=>[t(e(he),{class:"rc-dialog-header"},{default:o(()=>[t(e(xe),{class:"text-sm text-rcgray-200"},{default:o(()=>[l("div",St,[t(y,{name:"user",class:"w-5 h-5"}),l("span",It,S(_.editId>0?"Edit":"Add")+" Device Model "+S(_.editId>0?"(ID: "+_.editId+")":""),1)])]),_:1})]),_:1}),l("div",Et,[l("div",Mt,[t(s,{for:"name",class:"text-left"},{default:o(()=>[...m[8]||(m[8]=[D(" Device model name ",-1),l("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(i,{modelValue:k.value.name,"onUpdate:modelValue":m[1]||(m[1]=r=>k.value.name=r),id:"name",class:"col-span-3",autocomplete:"off"},null,8,["modelValue"]),w.value.name?(n(),g("span",Tt,S(w.value.name[0]),1)):P("",!0)])]),t(e(we),{class:"rc-dialog-footer bg-rcgray-800"},{default:o(()=>[t(v,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:m[2]||(m[2]=r=>e(f)("DialogDeviceModelAdd")),size:"sm"},{default:o(()=>[...m[9]||(m[9]=[D(" Cancel ",-1),l("div",{class:"pl-2 ml-auto"},[l("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),t(v,{type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:m[3]||(m[3]=r=>T()),variant:"primary"},{default:o(()=>[D(S(C.editId===0?"Save":"Update")+" ",1),l("div",jt,[l("kbd",Ot,[m[10]||(m[10]=D(" Ctrl  ",-1)),t(y,{name:"enter",class:"ml-1"})])])]),_:1})]),_:1})]),_:1})]),_:1},8,["open"])}}},Nt={key:0},Lt={key:0},Bt={key:1,class:"flex items-center text-xs font-medium px-2.5 py-0.5 rounded-xl border bg-muted"},Ft={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},zt={class:"relative items-center w-full"},At={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Ut={class:"py-1"},Rt=["onClick"],Kt={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ht={"data-size":"20"},qt={key:2,class:"flex flex-col items-center justify-center text-rcgray-400 text-sm py-4"},Qt={class:"p-1 border-5"},Xt={__name:"DeviceModelMultiSelect",props:{modelValue:{type:[Array,Object],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select device model"}},emits:["update:modelValue"],setup(_,{emit:M}){const I=M,V=c([]),u=c(!0),f=_,{selectedItems:a,searchTerm:E,filteredItems:w,selectItem:k,deleteItem:C}=fe({items:V,modelValue:f.modelValue,singleSelect:f.singleSelect,displayField:"name",searchFields:["name"],emit:I});W(()=>{d()});function d(){u.value=!0,B.get("/api/get-device-models/?perPage=10000").then(x=>{V.value=x.data.data}).finally(()=>{u.value=!1})}function T(){d()}return(x,m)=>{const v=O("RcIcon"),y=O("Button"),s=O("Input"),i=O("Separator");return n(),L(e(ce),null,{default:o(()=>[t(e(de),{class:"col-span-3"},{default:o(()=>[t(y,{variant:"ghost",class:ne(["flex items-center justify-start w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700",e(a).length===0?" text-rcgray-400":""]),style:me(e(a).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:o(()=>[u.value?(n(),g("span",Nt,"Loading device models...")):(n(),g(H,{key:1},[t(v,{name:"model",class:"mx-2"}),e(a).length===0?(n(),g("span",Lt,S(f.placeholder),1)):f.singleSelect&&e(a).length>0?(n(),g("span",Bt,[D(S(e(a)[0].name)+" ",1),t(e(Y),{size:"16",class:"ml-1 cursor-pointer hover:text-primary",onClick:m[0]||(m[0]=Z(r=>e(C)(e(a)[0].id),["stop"]))})])):(n(),g(H,{key:2},[e(a).length>0?(n(!0),g(H,{key:0},G(e(a),r=>(n(),g("span",{key:r.id,class:"relative my-1 group"},[l("span",Ft,[D(S(r.name)+" ",1),t(e(Y),{size:"16",class:"ml-1 cursor-pointer hover:text-white",onClick:Z(h=>e(C)(r.id),["stop"])},null,8,["onClick"])])]))),128)):P("",!0)],64))],64))]),_:1},8,["class","style"])]),_:1}),t(e(ie),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:o(()=>[l("div",zt,[t(s,{id:"search",type:"text",modelValue:e(E),"onUpdate:modelValue":m[1]||(m[1]=r=>ve(E)?E.value=r:null),autocomplete:"off",placeholder:"Search",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),l("span",At,[t(v,{name:"search"})])]),t(i),t(e(re),{class:"h-48 max-h-48"},{default:o(()=>[l("div",Ut,[u.value?(n(),L(v,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(n(!0),g(H,{key:1},G(e(w),r=>(n(),g("div",{key:r.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:h=>e(k)(r)},[l("span",Kt,[l("span",Ht,S(r.name),1)])],8,Rt))),128)),V.value.length===0?(n(),g("div",qt,[...m[3]||(m[3]=[l("span",{class:"font-semibold"},"No Results",-1),l("span",{class:"mt-1"},"No device models found. You can add a new model below.",-1)])])):P("",!0)])]),_:1}),t(i),l("div",Qt,[t(Pt,{onSave:m[2]||(m[2]=r=>T())})])]),_:1})]),_:1})}}},Gt={class:"grid gap-4"},Wt={class:"space-y-2"},Yt={class:"flex items-center space-x-2"},Jt={class:"font-medium leading-none"},Zt=["innerHTML"],_e=ue({__name:"HelpPopover",props:{title:{type:String,required:!0},content:{type:String,required:!1},hasIcon:{type:Boolean,default:!0},side:{type:String,default:"top"}},setup(_){const M=c(!1),I=()=>{M.value=!0},V=()=>{M.value=!1};return(u,f)=>{const a=O("Button");return n(),g("div",{onMouseenter:I,onMouseleave:V,class:"inline-flex"},[t(e(ce),{open:M.value},{default:o(()=>[t(e(de),{"as-child":""},{default:o(()=>[t(a,{tabindex:"-1",variant:"ghost",class:"h-0 p-0 m-0 ml-1"},{default:o(()=>[_.hasIcon?(n(),L(e(nt),{key:0,size:"12"})):Ve(u.$slots,"default",{key:1})]),_:3})]),_:3}),t(e(ie),{class:"w-80",side:_.side,align:"start"},{default:o(()=>[l("div",Gt,[l("div",Wt,[l("div",Yt,[l("h4",Jt,S(_.title),1)]),_.content?(n(),g("span",{key:0,class:"text-sm text-muted-foreground mt-2",innerHTML:_.content},null,8,Zt)):Ve(u.$slots,"default",{key:1})])])]),_:3},8,["side"])]),_:3},8,["open"])],32)}}});function es(_,M,I){const V=c(!1);W(()=>{window.addEventListener("keydown",u)}),pe(()=>{window.removeEventListener("keydown",u)});function u(w){w.ctrlKey&&w.key==="Enter"&&(V.value=!1)}function f(){V.value=!0}function a(){V.value=!1}function E(){V.value=!1}return{showConfirmCloseAlert:V,showConfirmCloseDialog:f,cancelCloseDialog:a,confirmCloseDialog:E}}const ts={key:0},ss={key:1,class:"flex items-center justify-start w-full"},ls={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},as={class:"relative items-center w-full"},os={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},ns={class:"py-1"},ds=["onClick"],is={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},rs={"data-size":"20"},cs={class:"p-1 border-5"},us={class:"ml-auto"},ms=ue({__name:"TemplateMultiSelect",props:{modelValue:{type:[Array,Object],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select a template"}},emits:["update:modelValue"],setup(_,{emit:M}){const I=M,V=c([]),u=Me(),{showConfirmCloseAlert:f,showConfirmCloseDialog:a,cancelCloseDialog:E}=es(),w=c(!0),k=_,{selectedItems:C,searchTerm:d,filteredItems:T,selectItem:x,deleteItem:m}=fe({items:V,modelValue:k.modelValue,singleSelect:k.singleSelect,displayField:"templateName",searchFields:["templateName"],emit:I});W(()=>{v()});function v(){w.value=!0,B.get("/api/templates/?perPage=10000").then(s=>{V.value=s.data.data,w.value=!1})}function y(){u.push({path:"/templates/view/0"})}return(s,i)=>{const r=O("RcIcon"),h=O("Button"),$=O("Input"),b=O("Separator");return n(),L(e(ce),null,{default:o(()=>[t(e(de),{class:"col-span-3"},{default:o(()=>[t(h,{variant:"ghost",class:ne(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",e(C).length===0?"text-muted-foreground":" "]),style:me(e(C).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:o(()=>[w.value?(n(),g("span",ts,"Loading device models...")):(n(),g("div",ss,[t(r,{name:"template",class:"mx-2"}),D(" "+S(e(C).length===0?"Selected templates: ":"")+" ",1),(n(!0),g(H,null,G(e(C),R=>(n(),g("span",{key:R.id,class:"relative my-1 group"},[l("span",ls,[D(S(R.templateName)+" ",1),t(e(Y),{size:"10",class:"ml-1 cursor-pointer text-rcgray-300 hover:text-white",onClick:Z(se=>e(m)(R.id),["stop"])},null,8,["onClick"])])]))),128))]))]),_:1},8,["class","style"])]),_:1}),t(e(ie),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:o(()=>[l("div",as,[t($,{id:"search",type:"text",modelValue:e(d),"onUpdate:modelValue":i[0]||(i[0]=R=>ve(d)?d.value=R:null),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),l("span",os,[t(r,{name:"search"})])]),t(b),t(e(re),{class:"h-64"},{default:o(()=>[l("div",ns,[w.value?(n(),L(r,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(n(!0),g(H,{key:1},G(e(T),R=>(n(),g("div",{key:R.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:se=>e(x)(R)},[l("span",is,[l("span",rs,S(R.templateName),1)])],8,ds))),128))])]),_:1}),t(b),l("div",cs,[t(h,{variant:"ghost",onClick:i[1]||(i[1]=R=>e(a)()),class:"justify-start w-full p-1"},{default:o(()=>[t(r,{name:"plus",class:"w-8"}),i[4]||(i[4]=l("div",{class:"rc-text-xs-muted ml-1"},"Create new record",-1)),t(e(Te),null,{default:o(()=>[t(e(je),null,{default:o(()=>[t(e(Oe),{"as-child":""},{default:o(()=>[l("span",us,[t(e(gt),{class:"w-3 h-3 text-muted-foreground"})])]),_:1}),t(e(Pe),{class:"text-white bg-rcgray-800"},{default:o(()=>[...i[3]||(i[3]=[l("p",null,"Navigate to new template page",-1)])]),_:1})]),_:1})]),_:1})]),_:1})])]),_:1}),t(Le,{showConfirmCloseAlert:e(f),onHandleClose:e(E),onHandleConfirm:i[2]||(i[2]=R=>y())},null,8,["showConfirmCloseAlert","onHandleClose"])]),_:1})}}}),vs={class:"flex items-center"},ps={class:"ml-2"},fs={class:"grid gap-2 py-4"},gs={class:"grid items-center grid-cols-4 gap-2"},_s={key:0,class:"col-span-3 col-start-2 text-sm text-red-400"},ys={class:"pl-2 ml-auto"},bs={class:"rc-kdb-class2"},hs={class:"pl-2 ml-auto"},xs={class:"rc-kdb-class2"},ws={__name:"VendorAddEditDialog",props:{editId:Number},emits:["save"],setup(_,{emit:M}){const{toastSuccess:I,toastError:V}=ee(),u=te(),{openDialog:f,closeDialog:a,isDialogOpen:E}=u,w=M,k=c([]),C=c({vendorName:""}),d=_;function T(m){m.ctrlKey&&m.key==="Enter"&&x()}W(()=>{d.editId>0&&B.get(`/api/vendors/${d.editId}`).then(m=>{C.value=m.data}),window.addEventListener("keydown",T)}),pe(()=>{window.removeEventListener("keydown",T)});function x(){let m=d.editId>0?`/${d.editId}`:"",v=d.editId>0?"patch":"post";B[v]("/api/vendors"+m,C.value).then(y=>{w("save",y.data),I("Vendor saved","The vendor has been saved successfully."),a("DialogNewVendor")}).catch(y=>{k.value=y.response.data.errors,V("Error","Failed to save vendor.")})}return(m,v)=>{const y=O("RcIcon"),s=O("Label"),i=O("Input"),r=O("Button");return n(),L(e(ke),{open:e(E)("DialogNewVendor")},{default:o(()=>[t(e(ye),{"as-child":""}),t(e(be),{class:"w-full p-0",onEscapeKeyDown:v[2]||(v[2]=h=>e(a)("DialogNewVendor")),onPointerDownOutside:v[3]||(v[3]=h=>e(a)("DialogNewVendor")),onCloseClicked:v[4]||(v[4]=h=>e(a)("DialogNewVendor"))},{default:o(()=>[t(e(he),{class:"rc-dialog-header"},{default:o(()=>[t(e(xe),{class:"text-sm text-rcgray-200"},{default:o(()=>[l("div",vs,[t(y,{name:"commands"}),l("span",ps,S(_.editId>0?"Edit":"New")+" Vendor "+S(_.editId>0?"(ID: "+_.editId+")":""),1)])]),_:1})]),_:1}),l("div",fs,[l("div",gs,[t(s,{for:"vendorName",class:"text-right"},{default:o(()=>[...v[5]||(v[5]=[D("Vendor Name",-1)])]),_:1}),t(i,{modelValue:C.value.vendorName,"onUpdate:modelValue":v[0]||(v[0]=h=>C.value.vendorName=h),id:"vendorName",class:"col-span-3"},null,8,["modelValue"]),k.value.vendorName?(n(),g("span",_s,S(k.value.vendorName[0]),1)):P("",!0)])]),t(e(we),{class:"rc-dialog-footer bg-rcgray-800"},{default:o(()=>[t(r,{type:"close",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:v[1]||(v[1]=h=>e(a)("DialogNewVendor")),size:"sm"},{default:o(()=>[...v[6]||(v[6]=[D(" Cancel ",-1),l("div",{class:"pl-2 ml-auto"},[l("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),d.editId===0?(n(),L(r,{key:0,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:x,variant:"primary"},{default:o(()=>[v[8]||(v[8]=D(" Save ",-1)),l("div",ys,[l("kbd",bs,[v[7]||(v[7]=D(" Ctrl  ",-1)),t(y,{name:"enter",class:"ml-1"})])])]),_:1})):(n(),L(r,{key:1,type:"submit",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:x,variant:"primary"},{default:o(()=>[v[10]||(v[10]=D(" Update ",-1)),l("div",hs,[l("kbd",xs,[v[9]||(v[9]=D(" Ctrl  ",-1)),t(y,{name:"enter",class:"ml-1"})])])]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"])}}};function ks(){const _=c(1),M=Be(),I=c(M.get("useVendors","perPage",10)),V=c("-id"),u=c(""),f=c({}),a=te(),E=c(0),w=c(!1),k=c(1),C=c(1),d=c([]),T=c(!1),{openDialog:x}=a,{toastSuccess:m,toastError:v}=ee(),{reload:y}=ze(i),{toggleSort:s}=Fe(V,i,"useVendors");async function i(F={}){w.value=!0;try{const U=await B.get("/api/vendors",{params:{page:_.value,perPage:I.value,sort:V.value,...f.value}});d.value=U.data,k.value=U.data.last_page}catch(U){console.error("Error fetching vendors:",U),v("Error","Failed to fetch vendors.")}finally{w.value=!1}}const r=F=>{E.value=0,C.value=Math.random(),x("DialogNewVendor")};function h(F){E.value=F,C.value=Math.random(),x("DialogNewVendor")}const $=async F=>{try{await B.delete(`/api/vendors/${F}`),i(),m("Vendor Deleted","The vendor has been deleted successfully.")}catch(U){U.status===422?v("Error",U.response.data.message):(console.error("Error deleting Command:",U),v("Error","Failed to delete Command."))}},b=async F=>{try{await B.post("/api/vendors/delete-many",{ids:F}),i(),m("Vendors Deleted","The vendors have been deleted successfully."),T.value=!1,Ae.emit("deleteManyVendorsSuccess")}catch(U){U.status===422?v("Error",U.response.data.message):(console.error("Error deleting Commands:",U),v("Error","Failed to delete Commands.")),T.value=!1}},R=F=>{E.value=F,C.value=Math.random(),x("DialogNewVendor")},se=()=>{i(),C.value=Math.random()};function ge(F){F.altKey&&F.key==="n"&&(F.preventDefault(),x("DialogNewVendor"))}const J=Ne(()=>{f.value["filter[q]"]=u.value,_.value=1,i()},500);return K(_,()=>{i()}),K(u,()=>{J()}),K(I,F=>{M.set("useVendors","perPage",F),i()}),{reload:y,vendors:d,isLoading:w,currentPage:_,perPage:I,lastPage:k,editId:E,newVendorModalKey:C,searchTerm:u,openDialog:x,fetchVendors:i,createVendor:r,updateVendor:h,deleteVendor:$,deleteManyVendors:b,handleSave:se,handleKeyDown:ge,viewEditDialog:R,toggleSort:s,sortParam:V,showConfirmDelete:T}}const Ds={key:0},Cs={key:1,class:"flex items-center justify-start w-full"},$s={class:"flex items-center text-xs font-medium me-2 px-2.5 py-0.5 rounded-xl border"},Vs={class:"relative items-center w-full"},Ss={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},Is={class:"py-1"},Es=["onClick"],Ms={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Ts={"data-size":"20"},js={class:"p-1 border-5"},Os=ue({__name:"VendorMultiSelect",props:{modelValue:{type:[Array,Object],required:!0},singleSelect:{type:Boolean,default:!1},placeholder:{type:String,default:"Select a vendor"}},emits:["update:modelValue"],setup(_,{emit:M}){const I=M,V=c([]),{createVendor:u,newVendorModalKey:f,handleSave:a}=ks(),E=c(!0),w=_,{selectedItems:k,searchTerm:C,filteredItems:d,selectItem:T,deleteItem:x}=fe({items:V,modelValue:w.modelValue,singleSelect:w.singleSelect,displayField:"vendorName",searchFields:["vendorName"],emit:I});W(()=>{m()}),K(f,()=>{m()});function m(){E.value=!0,B.get("/api/vendors/?perPage=10000&sort=vendorName").then(v=>{V.value=v.data.data,E.value=!1})}return(v,y)=>{const s=O("RcIcon"),i=O("Button"),r=O("Input"),h=O("Separator");return n(),L(e(ce),null,{default:o(()=>[t(e(de),{class:"col-span-3"},{default:o(()=>[t(i,{variant:"ghost",class:ne(["flex flex-wrap items-start justify-start w-full pl-2 whitespace-normal border h-fit",e(k).length===0?"text-muted-foreground":" "]),style:me(e(k).length===0?"padding: 0.45rem":"padding: 0.2rem")},{default:o(()=>[E.value?(n(),g("span",Ds,"Loading vendors...")):(n(),g("div",Cs,[t(s,{name:"vendor",class:"mx-2"}),D(" "+S(e(k).length===0?"Selected a vendor":"")+" ",1),(n(!0),g(H,null,G(e(k),$=>(n(),g("span",{key:$.id,class:"relative my-1 group"},[l("span",$s,[D(S($.vendorName)+" ",1),t(e(Y),{size:"10",class:"ml-1 cursor-pointer text-rcgray-300 hover:text-white",onClick:Z(b=>e(x)($.id),["stop"])},null,8,["onClick"])])]))),128))]))]),_:1},8,["class","style"])]),_:1}),t(e(ie),{side:"bottom",align:"start",class:"col-span-3 p-0"},{default:o(()=>[l("div",Vs,[t(r,{id:"search",type:"text",modelValue:e(C),"onUpdate:modelValue":y[0]||(y[0]=$=>ve(C)?C.value=$:null),autocomplete:"off",placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),l("span",Ss,[t(s,{name:"search"})])]),t(h),t(e(re),{class:"h-64"},{default:o(()=>[l("div",Is,[E.value?(n(),L(s,{key:0,name:"three-dots-loading",class:"w-8 h-8 mx-auto my-4 text-muted-foreground"})):(n(!0),g(H,{key:1},G(e(d),$=>(n(),g("div",{key:$.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:b=>e(T)($)},[l("span",Ms,[l("span",Ts,S($.vendorName),1)])],8,Es))),128))])]),_:1}),t(h),l("div",js,[t(i,{variant:"ghost",onClick:y[1]||(y[1]=$=>e(u)()),class:"justify-start w-full p-1"},{default:o(()=>[t(s,{name:"plus",class:"w-8"}),y[3]||(y[3]=l("div",{class:"rc-text-xs-muted ml-1"},"Create new record",-1))]),_:1})])]),_:1}),(n(),L(ws,{onSave:y[2]||(y[2]=$=>e(a)()),key:e(f),editId:0}))]),_:1})}}});function Ps(_,M,I){const V=te(),u=c(!1),f=c(!1),{closeDialog:a,isDialogOpen:E}=V,{toastSuccess:w,toastError:k}=ee(),C=c([]),d=c({device_name:"",device_ip:"",device_port_override:"",device_cred_id:0,device_cred:[],device_vendor:[],device_model:"",selectedVendorObj:[],selectedCategoryObj:[],selectedModelObj:[],selectedTemplateObj:[],device_category_id:0,selectedTagObj:[],device_username:"",device_password:"",device_enable_password:"",device_template:[],device_main_prompt:"",device_enable_prompt:""});W(()=>{_>0&&(u.value=!0,B.get(`/api/devices/${_}`).then(i=>{d.value.device_name=I?`${i.data.device_name}-Clone`:i.data.device_name,d.value.device_ip=I?`${i.data.device_ip}-Clone`:i.data.device_ip,d.value.device_port_override=i.data.device_port_override,d.value.device_model=i.data.device_model,d.value.device_category_id=i.data.device_category_id,d.value.device_username=i.data.device_username,d.value.device_password=i.data.device_password,d.value.device_enable_password=i.data.device_enable_password,d.value.device_main_prompt=i.data.device_main_prompt,d.value.device_enable_prompt=i.data.device_enable_prompt,d.value.device_cred_id=i.data.device_cred_id,d.value.device_cred=i.data.device_cred_name||[],d.value.selectedVendorObj=i.data.vendor[0],d.value.selectedTemplateObj=i.data.template[0],d.value.selectedCategoryObj=i.data.category[0],d.value.selectedModelObj={id:1,name:i.data.device_model},i.data.tag.forEach(r=>d.value.selectedTagObj.push(r)),u.value=!1})),window.addEventListener("keydown",T)}),pe(()=>{window.removeEventListener("keydown",T)});function T(i){i.ctrlKey&&i.key==="Enter"&&x()}function x(){Object.keys(d.value.selectedVendorObj).length>0&&(d.value.device_vendor=d.value.selectedVendorObj.id),Object.keys(d.value.selectedCategoryObj).length>0&&(d.value.device_category_id=d.value.selectedCategoryObj.id),Object.keys(d.value.selectedModelObj).length>0&&(d.value.device_model=d.value.selectedModelObj.name),Object.keys(d.value.selectedTemplateObj).length>0&&(d.value.device_template=d.value.selectedTemplateObj.id),Object.keys(d.value.selectedTagObj).length>0&&(d.value.device_tags=d.value.selectedTagObj.map(h=>h.id));let i=_>0?`/${_}`:"",r=_>0?"patch":"post";I===!0&&(i="",r="post"),B[r]("/api/devices"+i,d.value).then(h=>{M("save",h.data),w("Device saved","The device has been saved successfully."),a("DialogNewDevice")}).catch(h=>{var $,b;h.response&&h.response.data&&k("Error","There was an error saving the device."),h.response&&h.response.status===500&&k("Server Error",h.response.data.message),C.value=((b=($=h.response)==null?void 0:$.data)==null?void 0:b.errors)||[]})}function m(){d.value.device_main_prompt=d.value.device_name+"#",d.value.device_enable_prompt=d.value.device_name+">"}function v(){f.value=!0}function y(){f.value=!1}function s(){f.value=!1,M("close"),a("DialogNewDevice")}return{errors:C,isLoading:u,model:d,showConfirmCloseAlert:f,cancelCloseDialog:y,confirmCloseDialog:s,generatePrompts:m,isDialogOpen:E,saveDialog:x,showConfirmCloseDialog:v}}const Ns={class:"flex items-center"},Ls={class:"ml-2"},Bs={key:0},Fs={key:0},zs={class:"text-muted-foreground"},As={key:0,class:"grid gap-6 px-4"},Us={class:"grid grid-cols-1 lg:grid-cols-2 gap-6"},Rs={class:"flex flex-col"},Ks={key:0,class:"text-red-400 text-sm"},Hs={class:"flex flex-row space-x-4"},qs={class:"flex flex-col w-1/2"},Qs={key:0,class:"text-red-400 text-sm"},Xs={class:"flex flex-col w-1/2"},Gs={key:1,class:"text-red-400 text-sm"},Ws={key:2,class:"text-red-400 text-sm"},Ys={key:3,class:"text-red-400 text-sm"},Js={key:4,class:"text-red-400 text-sm"},Zs={class:"flex flex-col"},el={key:0,class:"text-sm text-muted-foreground"},tl={class:"flex w-full max-w-full items-center gap-1.5"},sl={key:0,class:"text-red-400 text-sm"},ll={key:3,class:"text-red-400 text-sm"},al={key:6,class:"text-red-400 text-sm"},ol={key:7,class:"text-red-400 text-sm"},nl={key:8,class:"text-red-400 text-sm"},dl={key:9,class:"text-red-400 text-sm"},il={class:"pl-2 ml-auto"},rl={class:"rc-kdb-class2"},cl={class:"pl-2 ml-auto"},ul={class:"rc-kdb-class2"},wl={__name:"DeviceAddEditDialog",props:{editId:Number,isClone:{type:Boolean,default:!1}},emits:["save","close"],setup(_,{emit:M}){const I=_,V=M,{errors:u,isLoading:f,model:a,showConfirmCloseAlert:E,cancelCloseDialog:w,confirmCloseDialog:k,generatePrompts:C,isDialogOpen:d,saveDialog:T,showConfirmCloseDialog:x}=Ps(I.editId,V,I.isClone);function m(y){if(y.length===0){a.value.device_cred=[],a.value.device_cred_id=0;return}a.value.device_cred=y,a.value.device_cred_id=y.id,a.value.device_username=y.cred_username,a.value.device_password="",a.value.device_enable_password=""}function v(){a.value.device_cred=null,a.value.device_cred_id=0,a.value.device_username="",a.value.device_password="",a.value.device_enable_password=""}return(y,s)=>{const i=O("RcIcon"),r=O("Label"),h=O("Input"),$=O("Button");return n(),g(H,null,[t(e(ke),{open:e(d)("DialogNewDevice")},{default:o(()=>[t(e(ye),{"as-child":""}),t(e(be),{onInteractOutside:s[16]||(s[16]=b=>e(x)()),onPointerDownOutside:s[17]||(s[17]=b=>e(x)()),class:"p-0 sm:max-w-7xl",onEscapeKeyDown:s[18]||(s[18]=b=>e(x)()),onCloseClicked:s[19]||(s[19]=b=>e(x)())},{default:o(()=>[t(e(he),{class:"rc-dialog-header"},{default:o(()=>[t(e(xe),{class:"text-sm text-rcgray-200"},{default:o(()=>[l("div",Ns,[t(i,{name:"device"}),l("span",Ls,[D(S(_.editId===0?_.isClone?"":"Add":_.isClone?"Clone":"Edit")+" Device ",1),_.editId>0&&!_.isClone?(n(),g("span",Bs,"(ID: "+S(_.editId)+")",1)):P("",!0)]),e(a).device_name?(n(),g("span",Fs,[s[20]||(s[20]=D(" :   ",-1)),l("span",zs,S(e(a).device_name),1)])):P("",!0)])]),_:1})]),_:1}),t(e(re),{class:"min-h-96 xl:h-auto"},{default:o(()=>[e(f)?(n(),L(dt,{key:0})):P("",!0),t(Se,{name:"fade"},{default:o(()=>[e(f)?P("",!0):(n(),g("div",As,[l("div",null,[l("div",Us,[l("div",Rs,[s[28]||(s[28]=l("h3",{class:"text-lg font-semibold border-b"},"Device Information",-1)),t(r,{for:"device_name",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[21]||(s[21]=[D(" Device Name ",-1),l("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(h,{modelValue:e(a).device_name,"onUpdate:modelValue":s[0]||(s[0]=b=>e(a).device_name=b),id:"device_name",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(u).device_name?(n(),g("span",Ks,S(e(u).device_name[0]),1)):P("",!0),l("div",Hs,[l("div",qs,[t(r,{for:"device_ip",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[22]||(s[22]=[D(" IP Address ",-1),l("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(h,{modelValue:e(a).device_ip,"onUpdate:modelValue":s[1]||(s[1]=b=>e(a).device_ip=b),id:"device_ip",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(u).device_ip?(n(),g("span",Qs,S(e(u).device_ip[0]),1)):P("",!0)]),l("div",Xs,[t(r,{for:"device_port_override",class:"mt-4 mb-1 font-light"},{default:o(()=>[s[23]||(s[23]=D(" Port ",-1)),t(_e,{title:"Device Port",content:"Set the connection port specific to this device. It overrides the value set in the connection template. Leave empty otherwise."})]),_:1}),t(h,{modelValue:e(a).device_port_override,"onUpdate:modelValue":s[2]||(s[2]=b=>e(a).device_port_override=b),id:"device_port_override",type:"number",autocomplete:"off",class:"w-full"},null,8,["modelValue"])])]),t(r,{for:"vector",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[24]||(s[24]=[D(" Vendor ",-1),l("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(Os,{singleSelect:!0,modelValue:e(a).selectedVendorObj,"onUpdate:modelValue":s[3]||(s[3]=b=>e(a).selectedVendorObj=b),id:"selectedVendorObj",class:"w-full"},null,8,["modelValue"]),e(u).device_vendor?(n(),g("span",Gs,S(e(u).device_vendor[0]),1)):P("",!0),t(r,{for:"device_category_id",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[25]||(s[25]=[D(" Command Group ",-1),l("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(rt,{modelValue:e(a).selectedCategoryObj,"onUpdate:modelValue":s[4]||(s[4]=b=>e(a).selectedCategoryObj=b),id:"selectedCategoryObj",singleSelect:!0,class:"w-full"},null,8,["modelValue"]),e(u).device_category_id?(n(),g("span",Ws,S(e(u).device_category_id[0]),1)):P("",!0),t(r,{for:"device_model",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[26]||(s[26]=[D(" Model ",-1),l("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(Xt,{singleSelect:!0,modelValue:e(a).selectedModelObj,"onUpdate:modelValue":s[5]||(s[5]=b=>e(a).selectedModelObj=b),id:"selectedModelObj",class:"w-full"},null,8,["modelValue"]),e(u).device_model?(n(),g("span",Ys,S(e(u).device_model[0]),1)):P("",!0),t(r,{for:"selectedTagObj",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[27]||(s[27]=[D(" Tags ",-1),l("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(ct,{modelValue:e(a).selectedTagObj,"onUpdate:modelValue":s[6]||(s[6]=b=>e(a).selectedTagObj=b),id:"selectedTagObj",class:"w-full"},null,8,["modelValue"]),e(u).device_tags?(n(),g("span",Js,S(e(u).device_tags[0]),1)):P("",!0)]),l("div",Zs,[s[38]||(s[38]=l("h3",{class:"text-lg font-semibold border-b"},"Connection Information",-1)),t(r,{for:"device_username",class:"mt-4 mb-1 font-light"},{default:o(()=>[s[29]||(s[29]=D(" Username ",-1)),s[30]||(s[30]=l("span",{class:"text-red-400"},"*",-1)),e(a).device_cred_id!=0?(n(),g("span",el,"- Credential set selected")):P("",!0)]),_:1}),l("div",tl,[t(h,{disabled:e(a).device_cred_id!=0,modelValue:e(a).device_username,"onUpdate:modelValue":s[7]||(s[7]=b=>e(a).device_username=b),id:"device_username",class:"flex-grow w-2/3"},null,8,["disabled","modelValue"]),e(a).device_cred?(n(),L(Vt,{key:0,modelValue:e(a).device_cred,"onUpdate:modelValue":s[8]||(s[8]=b=>m(b)),singleSelect:!0,class:"w-full"},null,8,["modelValue"])):P("",!0),t(e(Te),null,{default:o(()=>[t(e(je),null,{default:o(()=>[t(e(Oe),{"as-child":""},{default:o(()=>[t($,{type:"button",variant:"ghost",onClick:v,class:"p-1.5 ml-1",disabled:e(a).device_cred_id===0},{default:o(()=>[t(e(Y),{class:"text-muted-foreground",size:"12"})]),_:1},8,["disabled"])]),_:1}),t(e(Pe),null,{default:o(()=>[...s[31]||(s[31]=[D("Remove Device Credentials",-1)])]),_:1})]),_:1})]),_:1})]),e(u).device_username?(n(),g("span",sl,S(e(u).device_username[0]),1)):P("",!0),e(a).device_cred_id===0?(n(),L(r,{key:1,for:"device_password",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[32]||(s[32]=[D(" Password ",-1),l("span",{class:"text-red-400"},"*",-1)])]),_:1})):P("",!0),e(a).device_cred_id===0?(n(),L(e(Ie),{key:2,modelValue:e(a).device_password,"onUpdate:modelValue":s[9]||(s[9]=b=>e(a).device_password=b),id:"device_password",class:"w-full"},null,8,["modelValue"])):P("",!0),e(u).device_password?(n(),g("span",ll,S(e(u).device_password[0]),1)):P("",!0),e(a).device_cred_id===0?(n(),L(r,{key:4,for:"device_enable_password",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[33]||(s[33]=[D("Enable Password",-1)])]),_:1})):P("",!0),e(a).device_cred_id===0?(n(),L(e(Ie),{key:5,modelValue:e(a).device_enable_password,"onUpdate:modelValue":s[10]||(s[10]=b=>e(a).device_enable_password=b),id:"device_enable_password",class:"w-full"},null,8,["modelValue"])):P("",!0),e(u).device_enable_password?(n(),g("span",al,S(e(u).device_enable_password[0]),1)):P("",!0),t(r,{for:"device_template",class:"mt-4 mb-1 font-light"},{default:o(()=>[...s[34]||(s[34]=[D(" Template ",-1),l("span",{class:"text-red-400"},"*",-1)])]),_:1}),t(ms,{singleSelect:!0,modelValue:e(a).selectedTemplateObj,"onUpdate:modelValue":s[11]||(s[11]=b=>e(a).selectedTemplateObj=b),id:"selectedTemplateObj",class:"w-full"},null,8,["modelValue"]),e(u).device_template?(n(),g("span",ol,S(e(u).device_template[0]),1)):P("",!0),t(r,{for:"main_prompt",class:"mt-4 mb-1 font-light"},{default:o(()=>[s[35]||(s[35]=D(" Main Prompt ",-1)),t(_e,{title:"Device Main Prompt",content:"This is the 'Privileged EXEC' prompt. You will run show commands from this prompt and you can access configure mode. Usually 'router1#'"})]),_:1}),t(h,{modelValue:e(a).device_main_prompt,"onUpdate:modelValue":s[12]||(s[12]=b=>e(a).device_main_prompt=b),id:"device_main_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),e(u).device_main_prompt?(n(),g("span",nl,S(e(u).device_main_prompt[0]),1)):P("",!0),t(r,{for:"enable_prompt",class:"mt-4 mb-1 font-light"},{default:o(()=>[s[36]||(s[36]=D(" Enable Prompt ",-1)),t(_e,{title:"Device Main Prompt",content:"This is the 'User EXEC' prompt. The first level of access prompt. Usually 'router1>'"})]),_:1}),t(h,{modelValue:e(a).device_enable_prompt,"onUpdate:modelValue":s[13]||(s[13]=b=>e(a).device_enable_prompt=b),id:"device_enable_prompt",autocomplete:"off",class:"w-full"},null,8,["modelValue"]),l("button",{class:"flex items-center p-2 text-sm text-left rounded-lg pf-c-button pf-m-link pf-m-inline hover:bg-rcgray-800 max-w-fit text-muted-foreground hover:text-gray-200",type:"button",onClick:s[14]||(s[14]=b=>e(C)())},[t(e(vt),{class:"w-4 h-4 mr-1 text-gray-500",size:"16"}),s[37]||(s[37]=D(" Auto-generate prompts ",-1))]),e(u).device_enable_prompt?(n(),g("span",dl,S(e(u).device_enable_prompt[0]),1)):P("",!0)])])])]))]),_:1})]),_:1}),t(Se,{name:"fade"},{default:o(()=>[e(f)?P("",!0):(n(),L(e(we),{key:0,class:"rc-dialog-footer bg-rcgray-800"},{default:o(()=>[t($,{type:"button",variant:"outline",class:"px-2 py-1 ml-2 text-sm hover:bg-gray-700 hover:animate-pulse",onClick:s[15]||(s[15]=b=>e(x)()),size:"sm"},{default:o(()=>[...s[39]||(s[39]=[D(" Cancel ",-1),l("div",{class:"pl-2 ml-auto"},[l("kbd",{class:"rc-kdb-class"},"ESC")],-1)])]),_:1}),I.editId===0||I.isClone?(n(),L($,{key:0,type:"button",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e(T),variant:"primary"},{default:o(()=>[s[41]||(s[41]=D(" Save ",-1)),l("div",il,[l("kbd",rl,[s[40]||(s[40]=D(" Ctrl  ",-1)),t(e(Ee),{class:"ml-1",size:"16"})])])]),_:1},8,["onClick"])):(n(),L($,{key:1,type:"button",class:"px-2 py-1 ml-2 text-sm bg-blue-600 hover:bg-blue-700 hover:animate-pulse",size:"sm",onClick:e(T),variant:"primary"},{default:o(()=>[s[43]||(s[43]=D(" Update ",-1)),l("div",cl,[l("kbd",ul,[s[42]||(s[42]=D(" Ctrl  ",-1)),t(e(Ee),{class:"ml-1",size:"16"})])])]),_:1},8,["onClick"]))]),_:1}))]),_:1})]),_:1})]),_:1},8,["open"]),t(Le,{showConfirmCloseAlert:e(E),onHandleClose:e(w),onHandleConfirm:e(k)},null,8,["showConfirmCloseAlert","onHandleClose","onHandleConfirm"])],64)}}};function kl(){const _=c(1),M=Be(),I=c(M.get("useDevices","perPage",10)),V=c("-id"),u=c(""),f=c({}),a=te(),E=c(0),w=c(!1),k=c(1),C=c(0),d=c(1),T=c(1),x=c([]),m=c(!1),v=c([]),y=c([]),s=c([]),i=c([]),r=c([]),h=Me(),$=it("formatters"),b=c(!1),R=c(null),{reload:se}=ze(A),{toggleSort:ge}=Fe(V,A,"useDevices"),J=c(!1),F=c(!0),U=c(1),q=c(!1),le=c(null),{openDialog:ae}=a,{toastSuccess:Q,toastError:X}=ee(),Ue=p=>{p>=1e7?(q.value=!0,le.value=p,U.value=1,F.value=!0):(q.value=!1,le.value=null)};async function A(p={},j=!1){if(j?J.value=!0:(w.value=!0,U.value=1,F.value=!0),v.value.length>0){const N=v.value.map(z=>z.id);f.value["filter[status]"]=N.join(",")}try{const N=j?U.value:_.value,z=await B.get("/api/devices",{params:{page:N,perPage:I.value,sort:V.value,loadMore:q.value,...f.value}});j?(x.value=[...x.value,...z.data.data],U.value++):x.value=z.data.data,k.value=z.data.last_page,F.value=N<z.data.last_page,C.value=z.data.total}catch(N){console.error("Error fetching devices:",N),X("Error","Failed to fetch devices.")}finally{w.value=!1,J.value=!1}}function Re(){b.value=!0,B.get("/api/device/inventory/export/").then(p=>{const j=p.data.data.downloadLink,N=document.createElement("div");N.innerHTML=j;const z=N.querySelector("a");if(!z||!z.href)throw new Error("Download link not found in response.");const ot=z.href,oe=document.createElement("a");oe.href=ot,oe.setAttribute("download","inventory_report.csv"),document.body.appendChild(oe),oe.click(),oe.remove(),b.value=!1,Q("Export Successful","The inventory report has been successfully exported.")}).catch(p=>{b.value=!1,X("Error","Failed to export inventory report."),console.error("Error exporting inventory report:",p)})}const Ke=async()=>{!F.value||J.value||await A({},!0)},He=p=>{E.value=0,d.value=Math.random(),ae("DialogNewDevice")};function qe(){T.value=Math.random(),ae("DeviceBulkEditDialog")}const Qe=async p=>{try{await B.delete(`/api/devices/${p}`),A(),Q("Device Deleted","The device has been deleted successfully.")}catch(j){console.error("Error deleting device:",j),X("Error","Failed to delete device.")}},Xe=async p=>{try{await B.post("/api/devices/delete-many",{ids:p}),A(),Q("Devices Deleted","The devices have been deleted successfully."),m.value=!1,Ae.emit("deleteManyDevicesSuccess")}catch(j){console.error("Error deleting devices:",j),X("Error","Failed to delete devices."),m.value=!1}},De=async(p,j=!0)=>{try{await B.get(`/api/device/disable/${p}`),j&&A(),Q("Device Disabled","The device has been disabled successfully.")}catch(N){console.error("Error disabling device:",N),X("Error","Failed to disable device.")}},Ce=async(p,j=!0)=>{try{await B.get(`/api/device/enable/${p}`),j&&A(),Q("Device Enabled","The device has been enabled successfully.")}catch(N){console.error("Error enabling device:",N),X("Error","Failed to enable device.")}},Ge=async p=>{try{p.forEach(async j=>{De(j,!1)}),setTimeout(()=>{A()},1e3),Q("Devices Disabled","The devices have been disabled successfully.")}catch(j){console.error("Error disabling devices:",j),X("Error","Failed to disable devices.")}},We=async p=>{try{p.forEach(async j=>{Ce(j,!1)}),setTimeout(()=>{A()},1e3),Q("Devices Enabled","The devices have been enabled successfully.")}catch(j){console.error("Error enabling devices:",j),X("Error","Failed to enable devices.")}},Ye=async p=>{try{const j=await B.post("/api/device/download-many",{device_ids:p});Q("Download Queued","The download job for the selected devices has been queued successfully."),Q("Download Queued","Check the download status in the Queue Manager.")}catch(j){console.error("Error downloading devices:",j),X("Error","Failed to download devices.")}},Je=p=>{E.value=p,d.value=Math.random(),ae("DialogNewDevice")},Ze=()=>{A(),d.value=Math.random()};function et(p){p.altKey&&p.key==="n"&&(p.preventDefault(),ae("DialogNewDevice"))}const tt=Ne(()=>{f.value["filter[q]"]=u.value,_.value=1,A()},500);K([_],()=>{q.value||A()}),K(I,(p,j)=>{if(p>=1e7&&!q.value){q.value=!0,le.value=p,M.set("useDevices","perPage",1e7),(()=>{M.set("useDevices","perPage",50),localStorage.setItem("DevicePerPage","50")})();return}p<1e7&&q.value&&le.value!==null&&(p!==50||j<1e7)&&(q.value=!1,le.value=null,M.set("useDevices","perPage",p)),(!q.value||p<1e7&&p!==50)&&M.set("useDevices","perPage",p),p>=1e7&&!q.value||A()}),K(u,()=>{tt()}),K(v,(p,j)=>{if(p&&p.length>0){const N=p.map(z=>z.id);f.value["filter[status]"]=N.join(",")}else delete f.value["filter[status]"];A()},{deep:!0}),K(y,(p,j)=>{if(p&&p.length>0){const N=p.map(z=>z.id);f.value["filter[category]"]=N.join(",")}else delete f.value["filter[category]"];A()},{deep:!0}),K(s,(p,j)=>{if(p&&p.length>0){const N=p.map(z=>z.id);f.value["filter[tag]"]=N.join(",")}else delete f.value["filter[tag]"];A()},{deep:!0}),K(i,(p,j)=>{if(p&&p.length>0){const N=p.map(z=>z.id);f.value["filter[vendor]"]=N.join(",")}else delete f.value["filter[vendor]"];A()},{deep:!0}),K(r,(p,j)=>{if(p&&p.length>0){const N=p.map(z=>z.name);f.value["filter[device_model]"]=N.join(",")}else delete f.value["filter[device_model]"];A()},{deep:!0});function st(){f.value={},v.value=[],y.value=[],s.value=[],i.value=[],r.value=[],u.value="",A()}function lt(p){h.push({name:"device-view",params:{id:parseInt(p)}})}const $e=parseInt(localStorage.getItem("DevicePerPage")||"10");$e>=1e7&&Ue($e);function at(){ae("SendSnippetModal")}return{devices:x,currentPage:_,perPage:I,lastPage:k,totalRecords:C,isLoading:w,isLoadingMore:J,hasMoreData:F,isLoadMoreMode:q,showConfirmDelete:m,editId:E,newDeviceModalKey:d,newBulkEditModalKey:T,searchTerm:u,filterStatus:v,filterCategories:y,filterTags:s,filterVendor:i,filterModel:r,sortParam:V,formatters:$,inventoryIsLoading:b,downloadLink:R,createDevice:He,deleteDevice:Qe,deleteManyDevices:Xe,disableDevice:De,enableDevice:Ce,exportInventoryReport:Re,handleKeyDown:et,handleSave:Ze,reload:se,viewDeviceDetailsPane:lt,viewEditDialog:Je,openBulkEditDialog:qe,disableManyDevices:Ge,enableManyDevices:We,downloadManyDevices:Ye,openSendSnippetModal:at,fetchDevices:A,loadMoreDevices:Ke,clearFilters:st,toggleSort:ge}}function Dl(_){const{toastSuccess:M,toastError:I}=ee(),V=te(),{openDialog:u}=V,f=c(!1),a=c(!1),E=c([]),w=c("");c(null);const k=c(!1),C=c([]),d=c(!1),T=c(""),x=c("");function m(){f.value=!0,B.get("/api/import-github-templates").then(r=>{M("Templates imported from github successfully")}).catch(r=>{I("Error importing templates from github")}),setTimeout(()=>{f.value=!1},1e3)}K(w,()=>{w.value!==""&&s(w.value)}),K(T,()=>{T.value!==null&&i(T.value)});function v(){u("DialogTemplateImport")}function y(){f.value=!0,B.get("/api/list-template-repo-folders").then(r=>{E.value=r.data.data,a.value=!0,f.value=!1}).catch(r=>{console.log(r),r.response.data.message.msg==='rConfig-templates is empty, or does not exist. Clone from "https://github.com/rconfig/rconfig-templates" may have failed! Try importing the templates again.!'?a.value=!1:I("Error getting vendor templates"),f.value=!1})}function s(r){k.value=!1,d.value=!1,B.post("/api/list-repo-folders-contents",{directory:r}).then(h=>{C.value=h.data.data,k.value=!0,typeof h.data.data.readme<"u"&&(d.value=!0)}).catch(h=>{console.log(h),I("Error getting file list")})}function i(r){B.post("/api/get-template-file-contents",{filepath:r}).then(h=>{x.value=h.data.data.data.code}).catch(h=>{I("Error getting file contents")})}return{fileOptionSelected:T,getTemplateFileContents:i,getTemplateRepoFolders:y,getTemplatesList:s,hasReadmeFile:d,hasVendorTemplateOptions:a,importTemplates:m,importingTemplates:f,listedFiles:C,openImportDialog:v,selectedTemplateCode:x,showFileOptions:k,vendorOptionSelected:w,vendorTemplateOptions:E}}export{wl as _,Dl as a,Xt as b,Os as c,ms as d,ks as e,ws as f,kl as u};
