import{o as n,c as S,a as p,j as fe,K as b,ac as Ue,ad as pe,ar as re,ae as Ve,r as z,af as Oe,e as _,w as a,b as t,u as e,ag as Ae,m as O,ah as Ke,ai as Ge,d as q,t as B,aj as He,ak as N,al as ee,E,am as Qe,a6 as We,U as Ye,n as me,an as Ze,ao as Je,aJ as Re,aQ as Xe,aR as Y,aS as Q,aT as et,g as A,aU as te,aV as tt,aW as xe,aX as at,aY as lt,aZ as Fe,a_ as ze,a$ as st,b0 as nt,b1 as ot,b2 as rt,b3 as it,b4 as dt,b5 as ut,b6 as ct,b7 as ft,b8 as pt,X,b9 as be,ba as mt,bb as $e,bc as Ce,bd as we,be as he,aK as Le,h as gt,S as vt,aG as Te,Z as _t,$ as yt,bf as ht,aq as Me,bg as je,ap as xt,_ as bt,aL as ce,bh as $t,bi as Ct,aM as kt,q as Se,k as Pe,l as qe,p as De,bj as wt}from"./app-DAFnjW-c.js";import{u as Ee,a as St,i as Pt,k as qt,j as Ne,l as Dt,_ as It,b as Ie,c as Z,d as Bt,g as Vt,h as Rt,o as Ft,p as zt,e as Lt,f as J,m as Tt,n as Mt}from"./useRowSelection-wo6GfvXF.js";import{_ as jt}from"./useCopy-g5vtGpyi.js";import{_ as Et,a as Nt,b as Ut,c as Ot,d as At}from"./SelectScrollDownButton-Bm1jbt4l.js";import{_ as Kt}from"./SelectGroup-C03tzJ_2.js";import{_ as Gt}from"./RcToolTip.vue_vue_type_script_setup_true_lang-D6QtO011.js";import{_ as Ht}from"./BadgeList-HtLJIvWJ.js";function Qt(c,i){return n(),S("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[p("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor"})])}const Wt={class:"flex justify-between items-center"},Yt={class:"flex items-center gap-2"},Zt={class:"flex items-center gap-2"},Jt={class:"flex items-center gap-4"},Xt={key:0,size:"sm",class:"text-sm text-blue-400 font-medium flex justify-between items-center"},ea={class:"overflow-y-auto px-6 py-4"},ta={class:"rounded bg-muted overflow-auto whitespace-pre"},aa=fe({__name:"PeekConfigDialog",props:{editId:Number},setup(c){const i=Ee(),u=b(""),r=b(!0),o=b(""),l=b(0),g=b(localStorage.getItem("selectedPeekLanguage")||"language-plaintext"),h=b(parseInt(localStorage.getItem("peekFontSize")||"14",10)),{closeDialog:$,isDialogOpen:x}=i,{toastError:k}=Re(),{copy:m,copied:C}=Ue(),y=c,L=["bash","c","cpp","css","html","java","javascript","language-plaintext","php","python","typescript"];pe(()=>{K(),window.addEventListener("keydown",D)});function K(){o.value="",r.value=!0,re.get("/api/configs/view-config/"+y.editId).then(R=>{o.value=R.data.data.content,u.value=R.data.data.config_location,l.value=R.data.data.is_hardlink,g.value=localStorage.getItem("selectedPeekLanguage")||"language-plaintext",r.value=!1}).catch(R=>{console.log(R),o.value="Something went wrong - could not retrieve the template from the file system!",k("Error","Could not retrieve the template from the file system!"),r.value=!1})}function D(R){R.key==="Escape"&&V()}Ve(()=>{window.removeEventListener("keydown",D)});function V(){$("peek-config-dialog-"+y.editId)}function W(){h.value=Math.min(h.value+2,32),localStorage.setItem("peekFontSize",h.value.toString())}function F(){h.value=Math.max(h.value-2,10),localStorage.setItem("peekFontSize",h.value.toString())}function G(){h.value=14,localStorage.setItem("peekFontSize",h.value.toString())}return(R,v)=>{const M=z("Button"),le=z("RcIcon"),ie=Oe("highlightjs");return n(),_(e(Je),{open:e(x)("peek-config-dialog-"+c.editId)},{default:a(()=>[t(e(Ae),{"as-child":""},{default:a(()=>[O(R.$slots,"default")]),_:3}),t(e(Ke),{class:"sm:max-w-[70dvw] max-h-[90dvh] grid grid-rows-[auto_minmax(0,1fr)_auto] p-0",onEscapeKeyDown:v[3]||(v[3]=T=>e($)("peek-config-dialog-"+c.editId)),onPointerDownOutside:v[4]||(v[4]=T=>e($)("peek-config-dialog-"+c.editId)),onCloseClicked:v[5]||(v[5]=T=>e($)("peek-config-dialog-"+c.editId))},{default:a(()=>[t(e(jt),{class:"p-6 pb-0"},{default:a(()=>[t(e(Ge),null,{default:a(()=>[q("Configuration Quick Peek (Config ID: "+B(c.editId)+")",1)]),_:1}),t(e(He),null,{default:a(()=>[p("div",Wt,[p("div",Yt,[v[9]||(v[9]=p("div",null,"Language:",-1)),t(e(Et),{modelValue:g.value,"onUpdate:modelValue":v[0]||(v[0]=T=>g.value=T)},{default:a(()=>[t(e(Nt),{class:"w-[180px] focus:ring-0 focus:outline-none"},{default:a(()=>[t(e(Ut),{placeholder:"Select a language"})]),_:1}),t(e(Ot),null,{default:a(()=>[t(e(Kt),null,{default:a(()=>[(n(),S(N,null,ee(L,T=>t(e(At),{value:T,key:T},{default:a(()=>[q(B(T),1)]),_:2},1032,["value"])),64))]),_:1})]),_:1})]),_:1},8,["modelValue"]),p("div",Zt,[t(M,{variant:"outline",size:"sm",onClick:F},{default:a(()=>[...v[6]||(v[6]=[q("A-",-1)])]),_:1}),t(M,{variant:"outline",size:"sm",onClick:G},{default:a(()=>[...v[7]||(v[7]=[q("A",-1)])]),_:1}),t(M,{variant:"outline",size:"sm",onClick:W},{default:a(()=>[...v[8]||(v[8]=[q("A+",-1)])]),_:1})])]),p("div",Jt,[l.value===1?(n(),S("div",Xt," ðŸ”— HardLink ")):E("",!0),t(M,{variant:"outline",size:"sm",onClick:v[1]||(v[1]=T=>e(m)(u.value)),class:"flex items-center gap-2"},{default:a(()=>[t(le,{name:"copy-transition",isActive:e(C)},null,8,["isActive"]),q(" "+B(e(C)?"Copied":"Copy path"),1)]),_:1})])])]),_:1})]),_:1}),p("div",ea,[r.value?(n(),_(Qe,{key:0})):E("",!0),We((n(),S("pre",ta,[p("code",{class:me(["pf-v5-c-code-block__code",g.value]),style:Ye([{background:"none !important"},{background:"none",fontSize:h.value+"px"}])},B(o.value)+`
            `,7),v[10]||(v[10]=q(` 
         `,-1))])),[[ie]])]),t(e(Ze),{class:"p-6 pt-0"},{default:a(()=>[t(M,{onClick:v[2]||(v[2]=T=>V()),variant:"outline"},{default:a(()=>[...v[11]||(v[11]=[q("Close",-1)])]),_:1})]),_:1})]),_:1})]),_:3},8,["open"])}}}),la={class:"flex flex-col gap-y-4 mt-4 sm:flex-row sm:gap-x-4 sm:gap-y-0"},sa={__name:"RangeCalendar",props:{defaultPlaceholder:{type:null,required:!1},defaultValue:{type:Object,required:!1},modelValue:{type:Object,required:!1},placeholder:{type:null,required:!1},pagedNavigation:{type:Boolean,required:!1},preventDeselect:{type:Boolean,required:!1},weekStartsOn:{type:Number,required:!1},weekdayFormat:{type:String,required:!1},calendarLabel:{type:String,required:!1},fixedWeeks:{type:Boolean,required:!1},maxValue:{type:null,required:!1},minValue:{type:null,required:!1},locale:{type:String,required:!1},numberOfMonths:{type:Number,required:!1},disabled:{type:Boolean,required:!1},readonly:{type:Boolean,required:!1},initialFocus:{type:Boolean,required:!1},isDateDisabled:{type:Function,required:!1},isDateUnavailable:{type:Function,required:!1},dir:{type:String,required:!1},nextPage:{type:Function,required:!1},prevPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},emits:["update:modelValue","update:placeholder","update:startValue"],setup(c,{emit:i}){const u=c,r=i,o=A(()=>{const{class:g,...h}=u;return h}),l=Xe(o,r);return(g,h)=>(n(),_(e(et),Y({class:e(Q)("p-3",u.class)},e(l)),{default:a(({grid:$,weekDays:x})=>[t(e(ca),null,{default:a(()=>[t(e(ma)),t(e(fa)),t(e(pa))]),_:1}),p("div",la,[(n(!0),S(N,null,ee($,k=>(n(),_(e(ra),{key:k.value.toString()},{default:a(()=>[t(e(da),null,{default:a(()=>[t(e(Be),null,{default:a(()=>[(n(!0),S(N,null,ee(x,m=>(n(),_(e(ua),{key:m},{default:a(()=>[q(B(m),1)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024),t(e(ia),null,{default:a(()=>[(n(!0),S(N,null,ee(k.rows,(m,C)=>(n(),_(e(Be),{key:`weekDate-${C}`,class:"mt-2 w-full"},{default:a(()=>[(n(!0),S(N,null,ee(m,y=>(n(),_(e(na),{key:y.toString(),date:y},{default:a(()=>[t(e(oa),{day:y,month:k.value},null,8,["day","month"])]),_:2},1032,["date"]))),128))]),_:2},1024))),128))]),_:2},1024)]),_:2},1024))),128))])]),_:1},16,["class"]))}},na={__name:"RangeCalendarCell",props:{date:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const i=c,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(tt),Y({class:e(Q)("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([data-selected])]:bg-accent first:[&:has([data-selected])]:rounded-l-md last:[&:has([data-selected])]:rounded-r-md [&:has([data-selected][data-outside-view])]:bg-accent/50 [&:has([data-selected][data-selection-end])]:rounded-r-md [&:has([data-selected][data-selection-start])]:rounded-l-md",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},oa={__name:"RangeCalendarCellTrigger",props:{day:{type:null,required:!0},month:{type:null,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const i=c,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(at),Y({class:e(Q)(e(xe)({variant:"ghost"}),"h-8 w-8 p-0 font-normal data-[selected]:opacity-100","[&[data-today]:not([data-selected])]:bg-accent [&[data-today]:not([data-selected])]:text-accent-foreground","data-[selection-start]:bg-primary data-[selection-start]:text-primary-foreground data-[selection-start]:hover:bg-primary data-[selection-start]:hover:text-primary-foreground data-[selection-start]:focus:bg-primary data-[selection-start]:focus:text-primary-foreground","data-[selection-end]:bg-primary data-[selection-end]:text-primary-foreground data-[selection-end]:hover:bg-primary data-[selection-end]:hover:text-primary-foreground data-[selection-end]:focus:bg-primary data-[selection-end]:focus:text-primary-foreground","data-[outside-view]:text-muted-foreground data-[outside-view]:opacity-50 [&[data-outside-view][data-selected]]:text-muted-foreground [&[data-outside-view][data-selected]]:opacity-30","data-[disabled]:text-muted-foreground data-[disabled]:opacity-50","data-[unavailable]:text-destructive-foreground data-[unavailable]:line-through",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},ra={__name:"RangeCalendarGrid",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const i=c,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(lt),Y({class:e(Q)("w-full border-collapse space-y-1",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},ia={__name:"RangeCalendarGridBody",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(c){const i=c;return(u,r)=>(n(),_(e(st),Fe(ze(i)),{default:a(()=>[O(u.$slots,"default")]),_:3},16))}},da={__name:"RangeCalendarGridHead",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(c){const i=c;return(u,r)=>(n(),_(e(nt),Fe(ze(i)),{default:a(()=>[O(u.$slots,"default")]),_:3},16))}},Be={__name:"RangeCalendarGridRow",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const i=c,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(ot),Y({class:e(Q)("flex",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},ua={__name:"RangeCalendarHeadCell",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const i=c,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(rt),Y({class:e(Q)("w-8 rounded-md text-[0.8rem] font-normal text-muted-foreground",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},ca={__name:"RangeCalendarHeader",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const i=c,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(it),Y({class:e(Q)("relative flex w-full items-center justify-between pt-1",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default")]),_:3},16,["class"]))}},fa={__name:"RangeCalendarHeading",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const i=c,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(dt),Y({class:e(Q)("text-sm font-medium",i.class)},e(r)),{default:a(({headingValue:g})=>[O(o.$slots,"default",{headingValue:g},()=>[q(B(g),1)])]),_:3},16,["class"]))}},pa={__name:"RangeCalendarNextButton",props:{step:{type:String,required:!1},nextPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const i=c,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(ct),Y({class:e(Q)(e(xe)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default",{},()=>[t(e(ut),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},ma={__name:"RangeCalendarPrevButton",props:{step:{type:String,required:!1},prevPage:{type:Function,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1},class:{type:null,required:!1}},setup(c){const i=c,u=A(()=>{const{class:o,...l}=i;return l}),r=te(u);return(o,l)=>(n(),_(e(ft),Y({class:e(Q)(e(xe)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100",i.class)},e(r)),{default:a(()=>[O(o.$slots,"default",{},()=>[t(e(Qt),{class:"h-4 w-4"})])]),_:3},16,["class"]))}},ga={class:"hidden lg:inline-flex ml-2"},va=fe({__name:"ConfigSearchFilterCardDateRangePicker",props:{useDefaultRange:{type:Boolean,default:!0},placeholder:{default:"Pick a date range"},width:{default:"w-[40px] lg:w-[280px]"},initialRange:{default:void 0}},emits:["dateChange"],setup(c,{expose:i,emit:u}){const r=c,o=u,l=new pt("en-US",{dateStyle:"medium"}),g=new Date().getFullYear(),h=new Date().getMonth()+1,$=new Date().getDate(),x=()=>({start:new we(g,h,$).subtract({days:7}),end:new we(g,h,$)}),m=b((()=>{if(r.initialRange)return r.initialRange;if(r.useDefaultRange)return x()})()),C=Le(D=>{o("dateChange",D)},500);X(m,D=>{C(D)}),pe(()=>{m.value&&o("dateChange",m.value)});const y=A(()=>{var D;return(D=m.value)!=null&&D.start?m.value.end?`${l.format(m.value.start.toDate(he()))} - ${l.format(m.value.end.toDate(he()))}`:l.format(m.value.start.toDate(he())):r.placeholder});return i({clearSelection:()=>{m.value=void 0},setDefaultRange:()=>{m.value=x(),o("dateChange",m.value)}}),(D,V)=>{const W=z("Button");return n(),_(e(Ce),null,{default:a(()=>[t(e(be),{"as-child":""},{default:a(()=>{var F;return[t(W,{variant:"outline",class:me(e(Q)(r.width,"justify-start text-left font-normal rounded-xl px-2 py-1 h-fit",!((F=m.value)!=null&&F.start)&&"text-muted-foreground"))},{default:a(()=>[t(e(mt),{class:"w-4 h-4",size:"16"}),p("div",ga,B(y.value),1)]),_:1},8,["class"])]}),_:1}),t(e($e),{class:"w-auto p-0"},{default:a(()=>[t(e(sa),{modelValue:m.value,"onUpdate:modelValue":V[0]||(V[0]=F=>m.value=F),"initial-focus":"","number-of-months":2,"onUpdate:startValue":V[1]||(V[1]=F=>{m.value?m.value.start=F:m.value={start:F,end:void 0}})},null,8,["modelValue"])]),_:1})]),_:1})}}}),_a={class:"hidden lg:inline-flex ml-2"},ya={key:0,class:"text-sm font-light"},ha={class:"text-sm font-semibold"},xa={class:"relative items-center w-full"},ba={class:"absolute inset-y-0 flex items-center justify-center px-2 start-0"},$a={class:"py-1"},Ca=["onClick"],ka=["checked"],wa={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},Sa={"data-size":"20"},Pa={class:"p-1 border-5"},qa=fe({__name:"CommandFilter",props:{modelValue:{type:Array,required:!0},deviceId:{type:Number,default:0}},emits:["update:modelValue"],setup(c,{emit:i}){const u=i,r=b([]),o=b(!1),l=b([]),g=b(""),h=b(!1),$=c;pe(()=>{k()}),X(()=>$.modelValue,C=>{l.value=C,h.value=l.value.length===r.value.length});function x(C){if(C.id===9999999)h.value?(l.value=[],h.value=!1):(l.value=[...r.value],h.value=!0);else{const y=l.value.findIndex(L=>L.command===C.command);y!==-1?(l.value.splice(y,1),h.value=!1):(l.value.push(C),l.value.length===r.value.length&&(h.value=!0))}o.value=!1,u("update:modelValue",l.value)}function k(){re.get(`/api/configs/distinct-commands/${$.deviceId}/?perPage=10000`).then(C=>{r.value=C.data.data})}const m=A(()=>r.value.filter(C=>C.command.toLowerCase().includes(g.value.toLowerCase())));return(C,y)=>{const L=z("Button"),K=z("Input"),D=z("Separator");return n(),_(e(Ce),null,{default:a(()=>[t(e(be),null,{default:a(()=>[t(L,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:a(()=>[t(e(gt),{class:"",size:"16"}),p("div",_a,[l.value&&l.value.length===0?(n(),S(N,{key:0},[q("Command")],64)):(n(),S(N,{key:1},[l.value.length>0?(n(),S("span",ya,[y[2]||(y[2]=q(" Command ",-1)),p("strong",ha,B(l.value.length)+" selected",1)])):E("",!0)],64))])]),_:1})]),_:1}),t(e($e),{side:"bottom",align:"start",class:"w-64 p-0"},{default:a(()=>[p("div",xa,[t(K,{id:"search",type:"text",modelValue:g.value,"onUpdate:modelValue":y[0]||(y[0]=V=>g.value=V),placeholder:"Search...",class:"pl-10 border-none focus:outline-none focus-visible:ring-0 text-muted-foreground font-inter"},null,8,["modelValue"]),p("span",ba,[t(e(vt),{size:"16"})])]),t(D),t(e(Te),{class:"h-44"},{default:a(()=>[p("div",$a,[(n(!0),S(N,null,ee(m.value,V=>(n(),S("div",{key:V.command,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:W=>x(V)},[p("input",{type:"checkbox",checked:l.value.some(W=>W.command===V.command),class:"mr-2"},null,8,ka),p("span",wa,[p("span",Sa,B(V.command),1)])],8,Ca))),128))])]),_:1}),t(D),p("div",Pa,[t(L,{variant:"ghost",class:"justify-start w-full p-1",onClick:y[1]||(y[1]=V=>x({id:9999999}))},{default:a(()=>[h.value?(n(),_(e(_t),{key:0,class:"mr-2",size:"16"})):(n(),_(e(yt),{key:1,class:"mr-2",size:"16"})),p("span",null,B(h.value?"Deselect all":"Select all"),1)]),_:1})])]),_:1})]),_:1})}}}),Da={class:"hidden lg:inline-flex ml-2"},Ia={key:0,class:"text-sm font-light"},Ba={class:"text-sm font-semibold"},Va={class:"py-1"},Ra=["onClick"],Fa=["checked"],za={"data-size":"20",class:"cursor-default text-xs font-medium me-2 px-2.5 py-0.5"},La={"data-size":"20"},Ta=fe({__name:"StatusFilter",props:{modelValue:{type:Array,required:!0}},emits:["update:modelValue"],setup(c,{emit:i}){const u=i,r=b([{id:0,name:"Error"},{id:1,name:"Good"},{id:2,name:"Unknown"},{id:200,name:"All"}]),o=b(!1),l=b([]),g=c;X(()=>g.modelValue,$=>{l.value=$});function h($){if($.id===200)l.value.length===r.value.length?l.value=[]:l.value=[...r.value];else{const x=l.value.findIndex(k=>k.id===$.id);if(x!==-1){l.value.splice(x,1);const k=l.value.findIndex(m=>m.id===200);k!==-1&&l.value.splice(k,1)}else l.value.push($)}o.value=!1,u("update:modelValue",l.value)}return($,x)=>{const k=z("Button");return n(),_(e(Ce),null,{default:a(()=>[t(e(be),null,{default:a(()=>[t(k,{variant:"ghost",class:"flex items-center justify-center w-full px-2 py-1 border rounded-xl whitespace-nowrap h-fit bg-rcgray-700 text-rcgray-400"},{default:a(()=>[t(e(ht),{class:"",size:"16"}),p("div",Da,[l.value&&l.value.length===0?(n(),S(N,{key:0},[q("Status")],64)):(n(),S(N,{key:1},[l.value.length>0?(n(),S("span",Ia,[x[0]||(x[0]=q(" Status ",-1)),p("strong",Ba,B(l.value.length)+" selected",1)])):E("",!0)],64))])]),_:1})]),_:1}),t(e($e),{side:"bottom",align:"start",class:"p-0 w-44"},{default:a(()=>[t(e(Te),{class:"h-44"},{default:a(()=>[p("div",Va,[(n(!0),S(N,null,ee(r.value,m=>(n(),S("div",{key:m.id,class:"w-full p-1 pl-2 my-1 text-sm rounded-lg hover:bg-rcgray-600",onClick:C=>h(m)},[p("input",{type:"checkbox",checked:l.value.some(C=>C.id===m.id),class:"mr-2"},null,8,Fa),p("span",za,[p("span",La,B(m.name),1)])],8,Ra))),128))])]),_:1})]),_:1})]),_:1})}}});function Ma(c){const i=b(1),u=St(),r=b(u.get("useConfigsTable","perPage",10)),o=b("-id"),l=b(""),g=b({}),h=Ee(),$=b(!1),x=b(1),k=b([]),m=b(!1),C=b([]),y=b([]),L=Me(),K=je().name,D=b(!1),{reload:V}=qt(P),{toggleSort:W}=Pt(o,P,"useConfigsTable"),F=b(!1),G=b(!0),R=b(1),v=b(!1),M=b(null),{openDialog:le,isDialogOpen:ie}=h,{toastSuccess:T,toastError:se}=Re(),ne=xt("formatters"),oe=parseInt(localStorage.getItem("ConfigPerPage")||"10");oe>=1e7&&ve(oe);function P(f=!1){if(C.value.length>0){const w=C.value.map(I=>I.id);g.value["filter[download_status]"]=w.join(",")}c.configsId===0?ae({},f):ge({},f)}async function ae(f={},w=!1){w?F.value=!0:($.value=!0,R.value=1,G.value=!0);try{const I=w?R.value:i.value,j=await re.get("/api/configs/",{params:{page:I,perPage:r.value,sort:o.value,loadMore:v.value,...g.value}});w?(k.value=[...k.value,...j.data.data],R.value++):k.value=j.data.data,x.value=j.data.last_page,G.value=I<j.data.last_page}catch(I){console.error("Error fetching configs:",I),se("Error","Failed to fetch configs.")}finally{$.value=!1,F.value=!1}}async function ge(f={},w=!1){w?F.value=!0:($.value=!0,R.value=1,G.value=!0),g.value["filter[device_id]"]=c.configsId;try{const I=w?R.value:i.value,j=await re.get(`/api/configs/all-by-deviceid/${c.configsId}`,{params:{page:I,perPage:r.value,sort:o.value,loadMore:v.value,...g.value}});w?(k.value=[...k.value,...j.data.data],R.value++):k.value=j.data.data,x.value=j.data.last_page,G.value=I<j.data.last_page}catch(I){console.error("Error fetching configs:",I),se("Error","Failed to fetch configs.")}finally{$.value=!1,F.value=!1}}const ve=f=>{f>=1e7?(v.value=!0,M.value=f,R.value=1,G.value=!0):(v.value=!1,M.value=null)};function ke(f){let w="",I="";console.log(f.start),console.log(f.end),f.start&&f.end&&(w=f.start.toString(),I=f.end.toString()),w&&I&&(g.value["filter[created_at_between]"]=`${w},${I}`),P()}const d=async()=>{!G.value||F.value||P(!0)},_e=async f=>{try{await re.delete(`/api/configs/${f}`),P(),T("Config Deleted","The config has been deleted successfully."),m.value=!1}catch(w){console.error("Error deleting config:",w),se("Error","Failed to delete config."),m.value=!1}},de=async f=>{try{await re.post("/api/configs/delete-many",{ids:f}),P(),T("Configs Deleted","The configs have been deleted successfully."),m.value=!1,Ne.emit("deleteManyConfigsSuccess")}catch(w){console.error("Error deleting configs:",w),se("Error","Failed to delete configs."),m.value=!1}};function H(f){f.altKey&&f.key==="n"&&(f.preventDefault(),le("DialogNewConfig"))}function U(f){f?g.value["filter[latest_version]"]=1:delete g.value["filter[latest_version]"],P()}function ue(){g.value={},C.value=[],y.value=[],l.value="",P()}function ye(f){let w="configs";K==="device-view"&&(w="device-view"),L.push({name:"config-view",params:{id:parseInt(f)},query:{ref:w}})}const s=Le(()=>{g.value["filter[q]"]=l.value,i.value=1,P()},500);return X(i,()=>{v.value||P()}),X(r,(f,w)=>{if(u.set("useConfigsTable","perPage",r.value),f>=1e7&&!v.value){v.value=!0,M.value=f,(()=>{r.value=50,u.set("useConfigsTable","perPage",50)})();return}f<1e7&&v.value&&M.value!==null&&(f!==50||w<1e7)&&(v.value=!1,M.value=null),(!v.value||f<1e7&&f!==50)&&u.set("useConfigsTable","perPage",f),f>=1e7&&!v.value||P()}),X(l,()=>{s()}),X(C,(f,w)=>{if(f&&f.length>0){const I=f.map(j=>j.id);g.value["filter[download_status]"]=I.join(",")}else delete g.value["filter[download_status]"];P()},{deep:!0}),X(y,(f,w)=>{if(f&&f.length>0){const I=f.map(j=>j.command);g.value["filter[command]"]=I.join(",")}else delete g.value["filter[command]"];P()},{deep:!0}),{configs:k,currentPage:i,perPage:r,lastPage:x,isLoading:$,isLoadingMore:F,hasMoreData:G,isLoadMoreMode:v,showConfirmDelete:m,searchTerm:l,filters:g,filterStatus:C,filterCommand:y,sortParam:o,showDownloadedConfigs:D,formatters:ne,isDialogOpen:ie,clearFilters:ue,openDialog:le,deleteConfig:_e,deleteManyConfigs:de,getTabledata:P,handleKeyDown:H,loadMoreConfigs:d,reload:V,setDates:ke,toggleLatestVersion:U,toggleSort:W,viewDetailsPane:ye}}const ja={__name:"DataPurgeButton",props:{srcName:{type:String,required:!0,default:""}},setup(c){const i=Me();function u(r){i.push({name:"settings-data-purge",query:{src:r}})}return(r,o)=>{const l=z("RcIcon"),g=z("Button");return n(),_(g,{variant:"outline",size:"sm",class:"group ml-2 hidden lg:inline-flex",onClick:o[0]||(o[0]=h=>u(c.srcName)),title:"Purge & Retention",alt:"Purge & Retention"},{default:a(()=>[t(l,{name:"purge",class:"2xl:mr-2 h-4 w-4"}),o[1]||(o[1]=p("span",{class:"hidden 2xl:inline-flex"},"Purge and Retention",-1))]),_:1})}}},Ea={class:"flex flex-col h-full gap-1 text-center"},Na={class:"flex items-center justify-between p-4"},Ua={class:"flex items-center mr-2"},Oa={class:"flex gap-2"},Aa={class:"flex items-center"},Ka={class:"flex items-center justify-end"},Ga={class:"px-6"},Ha=["title"],Qa={key:1,class:"text-truncate"},Wa=["title"],Ya=["title"],Za=["title"],Ja=["title"],Xa={class:"flex items-center button-cell-fixed"},el={__name:"ConfigsTable",props:{configsId:{type:[String,Number],default:0},statusId:{type:[String,Number],default:0}},setup(c){const i=c;je();const{configs:u,currentPage:r,perPage:o,lastPage:l,isLoading:g,isLoadingMore:h,hasMoreData:$,isLoadMoreMode:x,showConfirmDelete:k,searchTerm:m,filters:C,filterStatus:y,filterCommand:L,sortParam:K,formatters:D,isDialogOpen:V,clearFilters:W,openDialog:F,deleteConfig:G,deleteManyConfigs:R,getTabledata:v,handleKeyDown:M,loadMoreConfigs:le,reload:ie,setDates:T,toggleLatestVersion:se,toggleSort:ne,viewDetailsPane:oe}=Ma(i),{selectedRows:P,selectAll:ae,toggleSelectAll:ge,toggleSelectRow:ve}=zt(u);return pe(()=>{i.statusId&&(y.value=[{id:i.statusId}]),v(),window.addEventListener("keydown",M),Ne.on("deleteManyConfigsSuccess",()=>{P.value=[],ae.value=!1})}),Ve(()=>{window.removeEventListener("keydown",M)}),(ke,d)=>{const _e=z("Input"),de=z("Separator"),H=z("Button"),U=z("RcIcon"),ue=z("Checkbox"),ye=z("Toaster");return n(),S("div",Ea,[p("div",Na,[p("div",Ua,[t(_e,{class:"max-w-sm ml-4 hidden xl:inline-flex",autocomplete:"off","data-1p-ignore":"","data-lpignore":"true",placeholder:"Filter [id, device_name]",modelValue:e(m),"onUpdate:modelValue":d[0]||(d[0]=s=>ce(m)?m.value=s:null)},null,8,["modelValue"]),t(de,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border hidden xl:inline-flex"}),p("div",Oa,[t(va,{"use-default-range":!1,placeholder:"Select date range",onDateChange:d[1]||(d[1]=s=>e(T)(s)),width:"200px"}),t(qa,{modelValue:e(L),"onUpdate:modelValue":d[2]||(d[2]=s=>ce(L)?L.value=s:null),deviceId:c.configsId},null,8,["modelValue","deviceId"]),t(Ta,{modelValue:e(y),"onUpdate:modelValue":d[3]||(d[3]=s=>ce(y)?y.value=s:null)},null,8,["modelValue"]),Object.keys(e(C)).length>0||e(m)||e(y).length||e(L).length?(n(),_(Dt,{key:0,"onUpdate:modelValue":e(W)},null,8,["onUpdate:modelValue"])):E("",!0),t(de,{orientation:"vertical",class:"relative w-px h-6 mx-4 shrink-0 bg-border"}),p("div",Aa,[t(Gt,{delayDuration:100,content:"Latest configs only",side:"bottom"},{trigger:a(()=>[t(e($t),{size:"16",class:"mr-2"})]),_:1}),t(e(Ct),{id:"airplane-mode","onUpdate:checked":e(se)},null,8,["onUpdate:checked"])])])]),p("div",Ka,[e(P).length?(n(),_(H,{key:0,class:"px-2 py-1 bg-red-600 hover:bg-red-700 hover:animate-pulse",size:"md",onClick:d[4]||(d[4]=kt(s=>k.value=!0,["prevent"])),variant:"primary"},{default:a(()=>[q("Delete Selected "+B(e(P).length)+" Config(s) ",1)]),_:1})):E("",!0),t(ja,{srcName:"configs"}),t(U,{name:"refresh",class:"w-4 h-4 mx-4 text-muted-foreground cursor-pointer hover:text-rcgray-200",onClick:d[5]||(d[5]=s=>e(ie)())})])]),p("div",Ga,[t(e(Vt),null,{default:a(()=>[t(e(It),null,{default:a(()=>[t(e(Ie),null,{default:a(()=>[t(e(Z),{class:"w-[2%] rc-th-heading"},{default:a(()=>[t(ue,{id:"selectAll",modelValue:e(ae),"onUpdate:modelValue":d[6]||(d[6]=s=>ce(ae)?ae.value=s:null),checked:e(ae),onClick:d[7]||(d[7]=s=>e(ge)())},null,8,["modelValue","checked"])]),_:1}),t(e(Z),{class:"w-[2%] rc-th-heading"},{default:a(()=>[t(H,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[8]||(d[8]=s=>e(ne)("id"))},{default:a(()=>[t(U,{name:"sort",sortParam:e(K),field:"id"},null,8,["sortParam"]),d[16]||(d[16]=p("span",{class:"ml-2"},"ID",-1))]),_:1})]),_:1}),t(e(Z),{class:"w-[2%] rc-th-heading"},{default:a(()=>[t(H,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[9]||(d[9]=s=>e(ne)("download_status"))},{default:a(()=>[t(U,{name:"sort",sortParam:e(K),field:"download_status"},null,8,["sortParam"]),d[17]||(d[17]=p("span",{class:"ml-2"},null,-1))]),_:1})]),_:1}),t(e(Z),{class:"w-[10%] rc-th-heading"},{default:a(()=>[t(H,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[10]||(d[10]=s=>e(ne)("device_name"))},{default:a(()=>[t(U,{name:"sort",sortParam:e(K),field:"device_name"},null,8,["sortParam"]),d[18]||(d[18]=p("span",{class:"ml-2"},"Filename",-1))]),_:1})]),_:1}),t(e(Z),{class:"w-[15%] rc-th-heading"},{default:a(()=>[t(H,{class:"flex justify-start w-full p-0 hover:bg-rcgray-800",variant:"ghost",onClick:d[11]||(d[11]=s=>e(ne)("command"))},{default:a(()=>[t(U,{name:"sort",sortParam:e(K),field:"command"},null,8,["sortParam"]),d[19]||(d[19]=p("span",{class:"ml-2"},"Command",-1))]),_:1})]),_:1}),t(e(Z),{class:"w-[10%] rc-th-heading"},{default:a(()=>[...d[20]||(d[20]=[q("Device",-1)])]),_:1}),t(e(Z),{class:"w-[10%] rc-th-heading"},{default:a(()=>[...d[21]||(d[21]=[q("File Size",-1)])]),_:1}),t(e(Z),{class:"w-[10%] rc-th-heading"},{default:a(()=>[...d[22]||(d[22]=[q("Downloaded",-1)])]),_:1}),t(e(Z),{class:"w-[10%] rc-th-heading"})]),_:1})]),_:1}),t(e(Bt),null,{default:a(()=>[e(g)?(n(),_(Lt,{key:0})):e(g)?(n(),_(Mt,{key:2})):(n(!0),S(N,{key:1},ee(e(u),s=>(n(),_(e(Ie),{key:s.id,class:me([{"rc-text-sm-muted":s.config_downloaded===0},"table-row-fixed"])},{default:a(()=>[t(e(J),{class:"text-start table-cell-fixed"},{default:a(()=>[t(ue,{class:"cursor-pointer",id:"select-"+s.id,checked:!!e(P).includes(s.id),onClick:f=>e(ve)(s.id)},null,8,["id","checked","onClick"])]),_:2},1024),t(e(J),{class:"text-start table-cell-fixed"},{default:a(()=>[q(B(s.id),1)]),_:2},1024),t(e(J),{class:"text-start table-cell-fixed"},{default:a(()=>[s.download_status===0?(n(),_(U,{key:0,name:"status-red"})):E("",!0),s.download_status===1?(n(),_(U,{key:1,name:"status-green"})):E("",!0),s.download_status===2?(n(),_(U,{key:2,name:"status-yellow"})):E("",!0),s.download_status===100?(n(),_(U,{key:3,name:"status-gray"})):E("",!0)]),_:2},1024),t(e(J),{class:"text-start table-cell-fixed"},{default:a(()=>[s.config_filename?(n(),_(H,{key:0,class:"px-2 py-0 hover:bg-rcgray-800 rounded-xl button-cell-fixed",variant:"ghost",onClick:f=>e(oe)(s.id)},{default:a(()=>[p("span",{class:"border-b text-truncate",title:s.config_filename},B(s.config_filename),9,Ha)]),_:2},1032,["onClick"])):(n(),S("span",Qa,"Not Downloaded - unchanged"))]),_:2},1024),t(e(J),{class:"text-start table-cell-fixed"},{default:a(()=>[p("span",{class:"text-truncate",title:s.command},B(s.command),9,Wa)]),_:2},1024),t(e(J),{class:"text-start table-cell-fixed"},{default:a(()=>[p("span",{class:"text-truncate",title:s.device_name},[t(Ht,{items:[{id:s.device_id,device_name:s.device_name,view_url:"device/view/"+s.device_id}],displayField:"device_name",linkField:"view_url",maxVisible:2,hoverCardFields:["id","device_name"]},null,8,["items"])],8,Ya)]),_:2},1024),t(e(J),{class:"text-start table-cell-fixed"},{default:a(()=>[p("span",{class:"text-truncate",title:s.config_filesize?e(D).formatFileSize(s.config_filesize):""},B(s.config_filesize?e(D).formatFileSize(s.config_filesize):""),9,Za)]),_:2},1024),t(e(J),{class:"text-start table-cell-fixed"},{default:a(()=>[p("span",{class:"text-truncate",title:e(D).formatTime(s.created_at)},B(e(D).formatTime(s.created_at)),9,Ja)]),_:2},1024),t(e(J),{class:"text-start table-cell-fixed"},{default:a(()=>[p("div",Xa,[t(e(Se),null,{default:a(()=>[t(e(Pe),null,{default:a(()=>[t(e(qe),{"as-child":""},{default:a(()=>[t(H,{variant:"ghost",onClick:f=>e(F)("peek-config-dialog-"+s.id),disabled:s.config_downloaded==0},{default:a(()=>[t(U,{name:"peek-eye"})]),_:1},8,["onClick","disabled"])]),_:2},1024),t(e(De),{class:"text-white bg-rcgray-800"},{default:a(()=>[...d[23]||(d[23]=[p("p",null,"Peek Config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),t(e(Se),null,{default:a(()=>[t(e(Pe),null,{default:a(()=>[t(e(qe),{"as-child":""},{default:a(()=>[t(H,{variant:"ghost",onClick:f=>e(oe)(s.id),disabled:s.config_downloaded==0},{default:a(()=>[t(e(wt),{size:"16",class:"text-muted-foreground hover:text-blue-500"})]),_:1},8,["onClick","disabled"])]),_:2},1024),t(e(De),{class:"text-white bg-rcgray-800"},{default:a(()=>[...d[24]||(d[24]=[p("p",null,"Open Config",-1)])]),_:1})]),_:2},1024)]),_:2},1024),e(V)("peek-config-dialog-"+s.id)?(n(),_(aa,{key:0,editId:s.id},null,8,["editId"])):E("",!0),t(Tt,{rowData:s,showEditBtn:!1,showViewDetailsBtn:s.config_downloaded==1,onOnViewDetails:f=>e(oe)(s.id),onOnDelete:f=>e(G)(s.id)},null,8,["rowData","showViewDetailsBtn","onOnViewDetails","onOnDelete"])])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1}),e(x)&&e($)?(n(),_(H,{key:0,onClick:e(le),disabled:e(h),class:"load-more-btn my-4",variant:"outline"},{default:a(()=>[d[25]||(d[25]=p("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-4 h-4 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round","aria-hidden":"true"},[p("path",{d:"M12 8v8m0 0l4-4m-4 4l-4-4"}),p("path",{d:"M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0z"})],-1)),q(" "+B(e(h)?"Loading...":"Load More Results"),1)]),_:1},8,["onClick","disabled"])):E("",!0),t(Rt,{currentPage:e(r),lastPage:e(l),perPage:e(o),"onUpdate:currentPage":d[12]||(d[12]=s=>r.value=s),"onUpdate:perPage":d[13]||(d[13]=s=>o.value=s)},null,8,["currentPage","lastPage","perPage"]),t(Ft,{ids:e(P),showConfirmDelete:e(k),onClose:d[14]||(d[14]=s=>k.value=!1),onHandleDelete:d[15]||(d[15]=s=>e(R)(e(P)))},null,8,["ids","showConfirmDelete"]),t(ye)])])}}},dl=bt(el,[["__scopeId","data-v-00e1914f"]]),tl={class:"flex items-center"},ul={__name:"NavPills",props:{items:{type:Array,required:!0},modelValue:{type:String,default:null},persistKey:{type:String,default:null}},emits:["update:modelValue","select"],setup(c,{emit:i}){var h,$;const u=c,r=i,o=b(u.modelValue??(u.persistKey?localStorage.getItem(u.persistKey):null)??(($=(h=u.items)==null?void 0:h[0])==null?void 0:$.to)??null);X(()=>u.modelValue,x=>{x&&x!==o.value&&(o.value=x)});function l(x){o.value=x,u.persistKey&&localStorage.setItem(u.persistKey,x),r("update:modelValue",x),r("select",x)}function g(x){return o.value===x}return(x,k)=>{const m=z("RcIcon"),C=z("Button");return n(),S("div",tl,[(n(!0),S(N,null,ee(c.items,y=>(n(),_(C,{key:y.to,type:"button","data-nav":y.to,variant:"ghost",class:"relative ml-2 border",onClick:L=>l(y.to)},{default:a(()=>[y.icon?(n(),_(m,{key:0,name:y.icon,class:"mr-2"},null,8,["name"])):E("",!0),q(" "+B(y.label)+" ",1),p("span",{class:me(["pointer-events-none absolute left-0 right-0 -bottom-[6px] h-0.5 bg-blue-500 origin-center transition-transform duration-200",g(y.to)?"scale-x-100":"scale-x-0"])},null,2)]),_:2},1032,["data-nav","onClick"]))),128))])}}};export{dl as C,aa as _,va as a,ul as b,Ma as u};
